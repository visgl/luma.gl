(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var vs="#define GLSLIFY 1\n#define SHADER_NAME luma-default-vertex\n\n#define LIGHT_MAX 4\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec4 pickingColors;\nattribute vec2 texCoords;\n\n// camera and object matrices\nuniform mat4 viewMatrix;\nuniform mat4 viewInverseMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\n\n// objectMatrix * viewMatrix = worldMatrix\nuniform mat4 worldMatrix;\nuniform mat4 worldInverseMatrix;\nuniform mat4 worldInverseTransposeMatrix;\nuniform mat4 objectMatrix;\nuniform vec3 cameraPosition;\n\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n\n// varyings\nvarying vec3 vReflection;\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec4 vNormal;\nvarying vec3 lightWeighting;\n\nvoid main(void) {\n  vec4 mvPosition = worldMatrix * vec4(positions, 1.0);\n  vec4 transformedNormal = worldInverseTransposeMatrix * vec4(normals, 1.0);\n\n  // lighting code\n  if(!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 plightDirection;\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n    float directionalLightWeighting =\n      max(dot(transformedNormal.xyz, lightingDirection), 0.0);\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        plightDirection = normalize(\n          (viewMatrix * vec4(pointLocation[i], 1.0)).xyz - mvPosition.xyz);\n         pointWeight += max(\n          dot(transformedNormal.xyz, plightDirection), 0.0) * pointColor[i];\n       } else {\n         break;\n       }\n     }\n\n    lightWeighting = ambientColor +\n      (directionalColor * directionalLightWeighting) + pointWeight;\n  }\n\n  // refraction / reflection code\n  if (useReflection) {\n    vReflection =\n      (viewInverseMatrix[3] - (worldMatrix * vec4(positions, 1.0))).xyz;\n  } else {\n    vReflection = vec3(1.0, 1.0, 1.0);\n  }\n\n  // pass results to varyings\n  vColor = colors;\n  vPickingColor = pickingColors;\n  vTexCoord = texCoords;\n  vNormal = transformedNormal;\n  gl_Position = projectionMatrix * worldMatrix * vec4(positions, 1.0);\n}\n";var fs="#define SHADER_NAME luma-default-fragment\n\n#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\n// varyings\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec3 lightWeighting;\nvarying vec3 vReflection;\nvarying vec4 vNormal;\n\n// texture configs\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\nuniform bool hasTextureCube1;\nuniform samplerCube samplerCube1;\n\n// picking configs\nuniform bool enablePicking;\nuniform bool hasPickingColors;\nuniform vec3 pickColor;\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n// fog configuration\nuniform bool hasFog;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n\nvoid main(){\n  // set color from texture\n  if (!hasTexture1) {\n    gl_FragColor = vec4(vColor.rgb * lightWeighting, vColor.a);\n  } else {\n    gl_FragColor =\n      vec4(texture2D(sampler1, vec2(vTexCoord.s, vTexCoord.t)).rgb *\n      lightWeighting, 1.0);\n  }\n\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n\n  // set picking\n  if (enablePicking) {\n    if (hasPickingColors) {\n      gl_FragColor = vPickingColor;\n    } else {\n      gl_FragColor = vec4(pickColor, 1.0);\n    }\n  }\n\n  // handle fog\n  if (hasFog) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fogNear, fogFar, depth);\n    gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n  }\n}\n";var defaultUniforms=require("../../shaderlib/default-uniforms");module.exports={DEFAULT:{vs:vs,fs:fs,defaultUniforms:defaultUniforms}}},{"../../shaderlib/default-uniforms":349}],2:[function(require,module,exports){var padLeft=require("pad-left");module.exports=addLineNumbers;function addLineNumbers(string,start,delim){start=typeof start==="number"?start:1;delim=delim||": ";var lines=string.split(/\r?\n/);var totalDigits=String(lines.length+start-1).length;return lines.map(function(line,i){var c=i+start;var digits=String(c).length;var prefix=padLeft(c,totalDigits-digits);return prefix+delim+line}).join("\n")}},{"pad-left":325}],3:[function(require,module,exports){var util=require("util/");var pSlice=Array.prototype.slice;var hasOwn=Object.prototype.hasOwnProperty;var assert=module.exports=ok;assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=stackStartFunction.name;var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function replacer(key,value){if(util.isUndefined(value)){return""+value}if(util.isNumber(value)&&!isFinite(value)){return value.toString()}if(util.isFunction(value)||util.isRegExp(value)){return value.toString()}return value}function truncate(s,n){if(util.isString(s)){return s.length<n?s:s.slice(0,n)}else{return s}}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+" "+self.operator+" "+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};function _deepEqual(actual,expected){if(actual===expected){return true}else if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return false;for(var i=0;i<actual.length;i++){if(actual[i]!==expected[i])return false}return true}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if(!util.isObject(actual)&&!util.isObject(expected)){return actual==expected}else{return objEquiv(actual,expected)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return false;if(a.prototype!==b.prototype)return false;if(util.isPrimitive(a)||util.isPrimitive(b)){return a===b}var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b)}var ka=objectKeys(a),kb=objectKeys(b),key,i;if(ka.length!=kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key]))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}else if(actual instanceof expected){return true}else if(expected.call({},actual)===true){return true}return false}function _throws(shouldThrow,block,expected,message){var actual;if(util.isString(expected)){message=expected;expected=null}try{block()}catch(e){actual=e}message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}if(!shouldThrow&&expectedException(actual,expected)){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws.apply(this,[true].concat(pSlice.call(arguments)))};assert.doesNotThrow=function(block,message){_throws.apply(this,[false].concat(pSlice.call(arguments)))};assert.ifError=function(err){if(err){throw err}};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}},{"util/":347}],4:[function(require,module,exports){module.exports=function _atob(str){return atob(str)}},{}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=autobind;function autobind(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(args.length===1){return boundClass.apply(undefined,args)}else{return boundMethod.apply(undefined,args)}}function boundClass(target){var keys=undefined;if(typeof Reflect!=="undefined"&&typeof Reflect.ownKeys==="function"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols==="function"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key==="constructor"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value==="function"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!=="function"){throw new Error("@autobind decorator can only be applied to methods not: "+typeof fn)}return{configurable:true,get:function get(){if(this===target.prototype||this.hasOwnProperty(key)){return fn}var boundFn=fn.bind(this);Object.defineProperty(this,key,{value:boundFn,configurable:true,writable:true});return boundFn}}}module.exports=exports["default"]},{}],6:[function(require,module,exports){(function(global){"use strict";require("core-js/shim");require("regenerator-runtime/runtime");require("core-js/fn/regexp/escape");if(global._babelPolyfill){throw new Error("only one instance of babel-polyfill is allowed")}global._babelPolyfill=true;var DEFINE_PROPERTY="defineProperty";function define(O,key,value){O[key]||Object[DEFINE_PROPERTY](O,key,{writable:true,configurable:true,value:value})}define(String.prototype,"padLeft","".padStart);define(String.prototype,"padRight","".padEnd);"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(key){[][key]&&define(Array,key,Function.call.bind([][key]))})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"core-js/fn/regexp/escape":12,"core-js/shim":305,"regenerator-runtime/runtime":328}],7:[function(require,module,exports){"use strict";exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;function init(){var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63}init();function toByteArray(b64){var i,j,l,tmp,placeHolders,arr;var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}placeHolders=b64[len-2]==="="?2:b64[len-1]==="="?1:0;arr=new Arr(len*3/4-placeHolders);l=placeHolders>0?len-4:len;var L=0;for(i=0,j=0;i<l;i+=4,j+=3){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[L++]=tmp>>16&255;arr[L++]=tmp>>8&255;arr[L++]=tmp&255}if(placeHolders===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[L++]=tmp&255}else if(placeHolders===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[L++]=tmp>>8&255;arr[L++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var output="";var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];output+=lookup[tmp>>2];output+=lookup[tmp<<4&63];output+="=="}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];output+=lookup[tmp>>10];output+=lookup[tmp>>4&63];output+=lookup[tmp<<2&63];output+="="}parts.push(output);return parts.join("")}},{}],8:[function(require,module,exports){},{}],9:[function(require,module,exports){(function(global){"use strict";var buffer=require("buffer");var Buffer=buffer.Buffer;var SlowBuffer=buffer.SlowBuffer;var MAX_LEN=buffer.kMaxLength||2147483647;exports.alloc=function alloc(size,fill,encoding){if(typeof Buffer.alloc==="function"){return Buffer.alloc(size,fill,encoding)}if(typeof encoding==="number"){throw new TypeError("encoding must not be number")}if(typeof size!=="number"){throw new TypeError("size must be a number")}if(size>MAX_LEN){throw new RangeError("size is too large")}var enc=encoding;var _fill=fill;if(_fill===undefined){enc=undefined;_fill=0}var buf=new Buffer(size);if(typeof _fill==="string"){var fillBuf=new Buffer(_fill,enc);var flen=fillBuf.length;var i=-1;while(++i<size){buf[i]=fillBuf[i%flen]}}else{buf.fill(_fill)}return buf};exports.allocUnsafe=function allocUnsafe(size){if(typeof Buffer.allocUnsafe==="function"){return Buffer.allocUnsafe(size)}if(typeof size!=="number"){throw new TypeError("size must be a number")}if(size>MAX_LEN){throw new RangeError("size is too large")}return new Buffer(size)};exports.from=function from(value,encodingOrOffset,length){if(typeof Buffer.from==="function"&&(!global.Uint8Array||Uint8Array.from!==Buffer.from)){return Buffer.from(value,encodingOrOffset,length)}if(typeof value==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof value==="string"){return new Buffer(value,encodingOrOffset)}if(typeof ArrayBuffer!=="undefined"&&value instanceof ArrayBuffer){var offset=encodingOrOffset;if(arguments.length===1){return new Buffer(value)}if(typeof offset==="undefined"){offset=0}var len=length;if(typeof len==="undefined"){len=value.byteLength-offset}if(offset>=value.byteLength){throw new RangeError("'offset' is out of bounds")}if(len>value.byteLength-offset){throw new RangeError("'length' is out of bounds")}return new Buffer(value.slice(offset,offset+len))}if(Buffer.isBuffer(value)){var out=new Buffer(value.length);value.copy(out,0,0,value.length);return out}if(value){if(Array.isArray(value)||typeof ArrayBuffer!=="undefined"&&value.buffer instanceof ArrayBuffer||"length"in value){return new Buffer(value)}if(value.type==="Buffer"&&Array.isArray(value.data)){return new Buffer(value.data)}}throw new TypeError("First argument must be a string, Buffer, "+"ArrayBuffer, Array, or array-like object.")};exports.allocUnsafeSlow=function allocUnsafeSlow(size){if(typeof Buffer.allocUnsafeSlow==="function"){return Buffer.allocUnsafeSlow(size)}if(typeof size!=="number"){throw new TypeError("size must be a number")}if(size>=MAX_LEN){throw new RangeError("size is too large")}return new SlowBuffer(size)}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{buffer:10}],10:[function(require,module,exports){(function(global){"use strict";var base64=require("base64-js");var ieee754=require("ieee754");var isArray=require("isarray");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT!==undefined?global.TYPED_ARRAY_SUPPORT:typedArraySupport();exports.kMaxLength=kMaxLength();function typedArraySupport(){try{var arr=new Uint8Array(1);arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return arr.foo()===42&&typeof arr.subarray==="function"&&arr.subarray(1,1).byteLength===0}catch(e){return false}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length){throw new RangeError("Invalid typed array length")}if(Buffer.TYPED_ARRAY_SUPPORT){that=new Uint8Array(length);that.__proto__=Buffer.prototype}else{if(that===null){that=new Buffer(length)}that.length=length}return that}function Buffer(arg,encodingOrOffset,length){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer)){return new Buffer(arg,encodingOrOffset,length)}if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}Buffer.poolSize=8192;Buffer._augment=function(arr){arr.__proto__=Buffer.prototype;return arr};function from(that,value,encodingOrOffset,length){if(typeof value==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&value instanceof ArrayBuffer){return fromArrayBuffer(that,value,encodingOrOffset,length)}if(typeof value==="string"){return fromString(that,value,encodingOrOffset)}return fromObject(that,value)}Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)};if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true})}}function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be a number')}}function alloc(that,size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(that,size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill)}return createBuffer(that,size)}Buffer.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding)};function allocUnsafe(that,size){assertSize(size);that=createBuffer(that,size<0?0:checked(size)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<size;++i){that[i]=0}}return that}Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)};function fromString(that,string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError('"encoding" must be a valid string encoding')}var length=byteLength(string,encoding)|0;that=createBuffer(that,length);var actual=that.write(string,encoding);if(actual!==length){that=that.slice(0,actual)}return that}function fromArrayLike(that,array){var length=checked(array.length)|0;that=createBuffer(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromArrayBuffer(that,array,byteOffset,length){array.byteLength;if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError("'offset' is out of bounds")}if(array.byteLength<byteOffset+(length||0)){throw new RangeError("'length' is out of bounds")}if(byteOffset===undefined&&length===undefined){array=new Uint8Array(array)}else if(length===undefined){array=new Uint8Array(array,byteOffset)}else{array=new Uint8Array(array,byteOffset,length)}if(Buffer.TYPED_ARRAY_SUPPORT){that=array;that.__proto__=Buffer.prototype}else{that=fromArrayLike(that,array)}return that}function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;that=createBuffer(that,len);if(that.length===0){return that}obj.copy(that,0,0,len);return that}if(obj){if(typeof ArrayBuffer!=="undefined"&&obj.buffer instanceof ArrayBuffer||"length"in obj){if(typeof obj.length!=="number"||isnan(obj.length)){return createBuffer(that,0)}return fromArrayLike(that,obj)}if(obj.type==="Buffer"&&isArray(obj.data)){return fromArrayLike(that,obj.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(length){if(length>=kMaxLength()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength().toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError("Arguments must be Buffers")}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){string=""+string}var len=string.length;if(len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case undefined:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){var length=this.length|0;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target)){throw new TypeError("Argument must be a Buffer")}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(isNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new TypeError("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;++i){newBuf[i]=this[i+start]}}return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&255;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<len;++i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(val.length===1){var code=val.charCodeAt(0);if(code<256){val=code}}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString());var len=bytes.length;for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isnan(val){return val!==val}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"base64-js":7,ieee754:322,isarray:11}],11:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},{}],12:[function(require,module,exports){require("../../modules/core.regexp.escape");module.exports=require("../../modules/_core").RegExp.escape},{"../../modules/_core":33,"../../modules/core.regexp.escape":129}],13:[function(require,module,exports){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},{}],14:[function(require,module,exports){var cof=require("./_cof");module.exports=function(it,msg){if(typeof it!="number"&&cof(it)!="Number")throw TypeError(msg);return+it}},{"./_cof":28}],15:[function(require,module,exports){var UNSCOPABLES=require("./_wks")("unscopables"),ArrayProto=Array.prototype;if(ArrayProto[UNSCOPABLES]==undefined)require("./_hide")(ArrayProto,UNSCOPABLES,{});module.exports=function(key){ArrayProto[UNSCOPABLES][key]=true}},{"./_hide":50,"./_wks":127}],16:[function(require,module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it){throw TypeError(name+": incorrect invocation!")}return it}},{}],17:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./_is-object":59}],18:[function(require,module,exports){"use strict";var toObject=require("./_to-object"),toIndex=require("./_to-index"),toLength=require("./_to-length");module.exports=[].copyWithin||function copyWithin(target,start){var O=toObject(this),len=toLength(O.length),to=toIndex(target,len),from=toIndex(start,len),end=arguments.length>2?arguments[2]:undefined,count=Math.min((end===undefined?len:toIndex(end,len))-from,len-to),inc=1;if(from<to&&to<from+count){inc=-1;from+=count-1;to+=count-1}while(count-- >0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc}return O}},{"./_to-index":115,"./_to-length":118,"./_to-object":119}],19:[function(require,module,exports){"use strict";var toObject=require("./_to-object"),toIndex=require("./_to-index"),toLength=require("./_to-length");module.exports=function fill(value){var O=toObject(this),length=toLength(O.length),aLen=arguments.length,index=toIndex(aLen>1?arguments[1]:undefined,length),end=aLen>2?arguments[2]:undefined,endPos=end===undefined?length:toIndex(end,length);while(endPos>index)O[index++]=value;return O}},{"./_to-index":115,"./_to-length":118,"./_to-object":119}],20:[function(require,module,exports){var forOf=require("./_for-of");module.exports=function(iter,ITERATOR){var result=[];forOf(iter,false,result.push,result,ITERATOR);return result}},{"./_for-of":47}],21:[function(require,module,exports){var toIObject=require("./_to-iobject"),toLength=require("./_to-length"),toIndex=require("./_to-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this),length=toLength(O.length),index=toIndex(fromIndex,length),value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}}},{"./_to-index":115,"./_to-iobject":117,"./_to-length":118}],22:[function(require,module,exports){var ctx=require("./_ctx"),IObject=require("./_iobject"),toObject=require("./_to-object"),toLength=require("./_to-length"),asc=require("./_array-species-create");module.exports=function(TYPE,$create){var IS_MAP=TYPE==1,IS_FILTER=TYPE==2,IS_SOME=TYPE==3,IS_EVERY=TYPE==4,IS_FIND_INDEX=TYPE==6,NO_HOLES=TYPE==5||IS_FIND_INDEX,create=$create||asc;return function($this,callbackfn,that){var O=toObject($this),self=IObject(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined,val,res;for(;length>index;index++)if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return false}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},{"./_array-species-create":25,"./_ctx":35,"./_iobject":55,"./_to-length":118,"./_to-object":119}],23:[function(require,module,exports){var aFunction=require("./_a-function"),toObject=require("./_to-object"),IObject=require("./_iobject"),toLength=require("./_to-length");module.exports=function(that,callbackfn,aLen,memo,isRight){aFunction(callbackfn);var O=toObject(that),self=IObject(O),length=toLength(O.length),index=isRight?length-1:0,i=isRight?-1:1;if(aLen<2)for(;;){if(index in self){memo=self[index];index+=i;break}index+=i;if(isRight?index<0:length<=index){throw TypeError("Reduce of empty array with no initial value")}}for(;isRight?index>=0:length>index;index+=i)if(index in self){memo=callbackfn(memo,self[index],index,O)}return memo}},{"./_a-function":13,"./_iobject":55,"./_to-length":118,"./_to-object":119}],24:[function(require,module,exports){var isObject=require("./_is-object"),isArray=require("./_is-array"),SPECIES=require("./_wks")("species");module.exports=function(original){var C;if(isArray(original)){C=original.constructor;if(typeof C=="function"&&(C===Array||isArray(C.prototype)))C=undefined;if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined}}return C===undefined?Array:C}},{"./_is-array":57,"./_is-object":59,"./_wks":127}],25:[function(require,module,exports){var speciesConstructor=require("./_array-species-constructor");module.exports=function(original,length){return new(speciesConstructor(original))(length)}},{"./_array-species-constructor":24}],26:[function(require,module,exports){"use strict";var aFunction=require("./_a-function"),isObject=require("./_is-object"),invoke=require("./_invoke"),arraySlice=[].slice,factories={};var construct=function(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++)n[i]="a["+i+"]";factories[len]=Function("F,a","return new F("+n.join(",")+")")}return factories[len](F,args)};module.exports=Function.bind||function bind(that){var fn=aFunction(this),partArgs=arraySlice.call(arguments,1);var bound=function(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?construct(fn,args.length,args):invoke(fn,args,that)};if(isObject(fn.prototype))bound.prototype=fn.prototype;return bound}},{"./_a-function":13,"./_invoke":54,"./_is-object":59}],27:[function(require,module,exports){var cof=require("./_cof"),TAG=require("./_wks")("toStringTag"),ARG=cof(function(){return arguments}())=="Arguments";var tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=tryGet(O=Object(it),TAG))=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},{"./_cof":28,"./_wks":127}],28:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],29:[function(require,module,exports){"use strict";var dP=require("./_object-dp").f,create=require("./_object-create"),redefineAll=require("./_redefine-all"),ctx=require("./_ctx"),anInstance=require("./_an-instance"),defined=require("./_defined"),forOf=require("./_for-of"),$iterDefine=require("./_iter-define"),step=require("./_iter-step"),setSpecies=require("./_set-species"),DESCRIPTORS=require("./_descriptors"),fastKey=require("./_meta").fastKey,SIZE=DESCRIPTORS?"_s":"size";var getEntry=function(that,key){var index=fastKey(key),entry;if(index!=="F")return that._i[index];for(entry=that._f;entry;entry=entry.n){if(entry.k==key)return entry}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i");that._i=create(null);that._f=undefined;that._l=undefined;that[SIZE]=0;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)});redefineAll(C.prototype,{clear:function clear(){for(var that=this,data=that._i,entry=that._f;entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that._f=that._l=undefined;that[SIZE]=0},delete:function(key){var that=this,entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that._i[entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that._f==entry)that._f=next;if(that._l==entry)that._l=prev;that[SIZE]--}return!!entry},forEach:function forEach(callbackfn){anInstance(this,C,"forEach");var f=ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3),entry;while(entry=entry?entry.n:this._f){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function has(key){return!!getEntry(this,key)}});if(DESCRIPTORS)dP(C.prototype,"size",{get:function(){return defined(this[SIZE])}});return C},def:function(that,key,value){var entry=getEntry(that,key),prev,index;if(entry){entry.v=value}else{that._l=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that._l,n:undefined,r:false};if(!that._f)that._f=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!=="F")that._i[index]=entry}return that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=iterated;this._k=kind;this._l=undefined},function(){var that=this,kind=that._k,entry=that._l;while(entry&&entry.r)entry=entry.p;if(!that._t||!(that._l=entry=entry?entry.n:that._t._f)){that._t=undefined;return step(1)}if(kind=="keys")return step(0,entry.k);if(kind=="values")return step(0,entry.v);return step(0,[entry.k,entry.v])},IS_MAP?"entries":"values",!IS_MAP,true);setSpecies(NAME)}}},{"./_an-instance":16,"./_ctx":35,"./_defined":37,"./_descriptors":38,"./_for-of":47,"./_iter-define":63,"./_iter-step":65,"./_meta":72,"./_object-create":76,"./_object-dp":77,"./_redefine-all":96,"./_set-species":101}],30:[function(require,module,exports){var classof=require("./_classof"),from=require("./_array-from-iterable");module.exports=function(NAME){return function toJSON(){if(classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");return from(this)}}},{"./_array-from-iterable":20,"./_classof":27}],31:[function(require,module,exports){"use strict";var redefineAll=require("./_redefine-all"),getWeak=require("./_meta").getWeak,anObject=require("./_an-object"),isObject=require("./_is-object"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),createArrayMethod=require("./_array-methods"),$has=require("./_has"),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),id=0;var uncaughtFrozenStore=function(that){return that._l||(that._l=new UncaughtFrozenStore)};var UncaughtFrozenStore=function(){this.a=[]};var findUncaughtFrozen=function(store,key){return arrayFind(store.a,function(it){return it[0]===key})};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);if(entry)entry[1]=value;else this.a.push([key,value])},delete:function(key){var index=arrayFindIndex(this.a,function(it){return it[0]===key});if(~index)this.a.splice(index,1);return!!~index}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i");that._i=id++;that._l=undefined;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)});redefineAll(C.prototype,{delete:function(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(this)["delete"](key);return data&&$has(data,this._i)&&delete data[this._i]},has:function has(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(this).has(key);return data&&$has(data,this._i)}});return C},def:function(that,key,value){var data=getWeak(anObject(key),true);if(data===true)uncaughtFrozenStore(that).set(key,value);else data[that._i]=value;return that},ufstore:uncaughtFrozenStore}},{"./_an-instance":16,"./_an-object":17,"./_array-methods":22,"./_for-of":47,"./_has":49,"./_is-object":59,"./_meta":72,"./_redefine-all":96}],32:[function(require,module,exports){"use strict";var global=require("./_global"),$export=require("./_export"),redefine=require("./_redefine"),redefineAll=require("./_redefine-all"),meta=require("./_meta"),forOf=require("./_for-of"),anInstance=require("./_an-instance"),isObject=require("./_is-object"),fails=require("./_fails"),$iterDetect=require("./_iter-detect"),setToStringTag=require("./_set-to-string-tag"),inheritIfRequired=require("./_inherit-if-required");module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={};var fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,KEY=="delete"?function(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="has"?function has(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="get"?function get(a){return IS_WEAK&&!isObject(a)?undefined:fn.call(this,a===0?0:a)}:KEY=="add"?function add(a){fn.call(this,a===0?0:a);return this}:function set(a,b){fn.call(this,a===0?0:a,b);return this})};if(typeof C!="function"||!(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);redefineAll(C.prototype,methods);meta.NEED=true}else{
var instance=new C,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter)}),BUGGY_ZERO=!IS_WEAK&&fails(function(){var $instance=new C,index=5;while(index--)$instance[ADDER](index,index);return!$instance.has(-0)});if(!ACCEPT_ITERABLES){C=wrapper(function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base,target,C);if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);return that});C.prototype=proto;proto.constructor=C}if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod("delete");fixMethod("has");IS_MAP&&fixMethod("get")}if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&proto.clear)delete proto.clear}setToStringTag(C,NAME);O[NAME]=C;$export($export.G+$export.W+$export.F*(C!=Base),O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C}},{"./_an-instance":16,"./_export":42,"./_fails":44,"./_for-of":47,"./_global":48,"./_inherit-if-required":53,"./_is-object":59,"./_iter-detect":64,"./_meta":72,"./_redefine":97,"./_redefine-all":96,"./_set-to-string-tag":102}],33:[function(require,module,exports){var core=module.exports={version:"2.4.0"};if(typeof __e=="number")__e=core},{}],34:[function(require,module,exports){"use strict";var $defineProperty=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=function(object,index,value){if(index in object)$defineProperty.f(object,index,createDesc(0,value));else object[index]=value}},{"./_object-dp":77,"./_property-desc":95}],35:[function(require,module,exports){var aFunction=require("./_a-function");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./_a-function":13}],36:[function(require,module,exports){"use strict";var anObject=require("./_an-object"),toPrimitive=require("./_to-primitive"),NUMBER="number";module.exports=function(hint){if(hint!=="string"&&hint!==NUMBER&&hint!=="default")throw TypeError("Incorrect hint");return toPrimitive(anObject(this),hint!=NUMBER)}},{"./_an-object":17,"./_to-primitive":120}],37:[function(require,module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},{}],38:[function(require,module,exports){module.exports=!require("./_fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},{"./_fails":44}],39:[function(require,module,exports){var isObject=require("./_is-object"),document=require("./_global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./_global":48,"./_is-object":59}],40:[function(require,module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],41:[function(require,module,exports){var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie");module.exports=function(it){var result=getKeys(it),getSymbols=gOPS.f;if(getSymbols){var symbols=getSymbols(it),isEnum=pIE.f,i=0,key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))result.push(key)}return result}},{"./_object-gops":83,"./_object-keys":86,"./_object-pie":87}],42:[function(require,module,exports){var global=require("./_global"),core=require("./_core"),hide=require("./_hide"),redefine=require("./_redefine"),ctx=require("./_ctx"),PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{})[PROTOTYPE],exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={}),key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;out=(own?target:source)[key];exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(target)redefine(target,key,out,type&$export.U);if(exports[key]!=out)hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out}};global.core=core;$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;module.exports=$export},{"./_core":33,"./_ctx":35,"./_global":48,"./_hide":50,"./_redefine":97}],43:[function(require,module,exports){var MATCH=require("./_wks")("match");module.exports=function(KEY){var re=/./;try{"/./"[KEY](re)}catch(e){try{re[MATCH]=false;return!"/./"[KEY](re)}catch(f){}}return true}},{"./_wks":127}],44:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},{}],45:[function(require,module,exports){"use strict";var hide=require("./_hide"),redefine=require("./_redefine"),fails=require("./_fails"),defined=require("./_defined"),wks=require("./_wks");module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY),fns=exec(defined,SYMBOL,""[KEY]),strfn=fns[0],rxfn=fns[1];if(fails(function(){var O={};O[SYMBOL]=function(){return 7};return""[KEY](O)!=7})){redefine(String.prototype,KEY,strfn);hide(RegExp.prototype,SYMBOL,length==2?function(string,arg){return rxfn.call(string,this,arg)}:function(string){return rxfn.call(string,this)})}}},{"./_defined":37,"./_fails":44,"./_hide":50,"./_redefine":97,"./_wks":127}],46:[function(require,module,exports){"use strict";var anObject=require("./_an-object");module.exports=function(){var that=anObject(this),result="";if(that.global)result+="g";if(that.ignoreCase)result+="i";if(that.multiline)result+="m";if(that.unicode)result+="u";if(that.sticky)result+="y";return result}},{"./_an-object":17}],47:[function(require,module,exports){var ctx=require("./_ctx"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),anObject=require("./_an-object"),toLength=require("./_to-length"),getIterFn=require("./core.get-iterator-method"),BREAK={},RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0,length,step,iterator,result;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=call(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result}};exports.BREAK=BREAK;exports.RETURN=RETURN},{"./_an-object":17,"./_ctx":35,"./_is-array-iter":56,"./_iter-call":61,"./_to-length":118,"./core.get-iterator-method":128}],48:[function(require,module,exports){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},{}],49:[function(require,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],50:[function(require,module,exports){var dP=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},{"./_descriptors":38,"./_object-dp":77,"./_property-desc":95}],51:[function(require,module,exports){module.exports=require("./_global").document&&document.documentElement},{"./_global":48}],52:[function(require,module,exports){module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a!=7})},{"./_descriptors":38,"./_dom-create":39,"./_fails":44}],53:[function(require,module,exports){var isObject=require("./_is-object"),setPrototypeOf=require("./_set-proto").set;module.exports=function(that,target,C){var P,S=target.constructor;if(S!==C&&typeof S=="function"&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf){setPrototypeOf(that,P)}return that}},{"./_is-object":59,"./_set-proto":100}],54:[function(require,module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],55:[function(require,module,exports){var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},{"./_cof":28}],56:[function(require,module,exports){var Iterators=require("./_iterators"),ITERATOR=require("./_wks")("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{"./_iterators":66,"./_wks":127}],57:[function(require,module,exports){var cof=require("./_cof");module.exports=Array.isArray||function isArray(arg){return cof(arg)=="Array"}},{"./_cof":28}],58:[function(require,module,exports){var isObject=require("./_is-object"),floor=Math.floor;module.exports=function isInteger(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},{"./_is-object":59}],59:[function(require,module,exports){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},{}],60:[function(require,module,exports){var isObject=require("./_is-object"),cof=require("./_cof"),MATCH=require("./_wks")("match");module.exports=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:cof(it)=="RegExp")}},{"./_cof":28,"./_is-object":59,"./_wks":127}],61:[function(require,module,exports){var anObject=require("./_an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},{"./_an-object":17}],62:[function(require,module,exports){"use strict";var create=require("./_object-create"),descriptor=require("./_property-desc"),setToStringTag=require("./_set-to-string-tag"),IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},{"./_hide":50,"./_object-create":76,"./_property-desc":95,"./_set-to-string-tag":102,"./_wks":127}],63:[function(require,module,exports){"use strict";var LIBRARY=require("./_library"),$export=require("./_export"),redefine=require("./_redefine"),hide=require("./_hide"),has=require("./_has"),Iterators=require("./_iterators"),$iterCreate=require("./_iter-create"),setToStringTag=require("./_set-to-string-tag"),getPrototypeOf=require("./_object-gpo"),ITERATOR=require("./_wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=false,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?!DEF_VALUES?$default:getMethod("entries"):undefined,$anyNative=NAME=="Array"?proto.entries||$native:$native,methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=getPrototypeOf($anyNative.call(new Base));if(IteratorPrototype!==Object.prototype){setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&!has(IteratorPrototype,ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},{"./_export":42,"./_has":49,"./_hide":50,"./_iter-create":62,"./_iterators":66,"./_library":68,"./_object-gpo":84,"./_redefine":97,"./_set-to-string-tag":102,"./_wks":127}],64:[function(require,module,exports){var ITERATOR=require("./_wks")("iterator"),SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true}};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},{"./_wks":127}],65:[function(require,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],66:[function(require,module,exports){module.exports={}},{}],67:[function(require,module,exports){var getKeys=require("./_object-keys"),toIObject=require("./_to-iobject");module.exports=function(object,el){var O=toIObject(object),keys=getKeys(O),length=keys.length,index=0,key;while(length>index)if(O[key=keys[index++]]===el)return key}},{"./_object-keys":86,"./_to-iobject":117}],68:[function(require,module,exports){module.exports=false},{}],69:[function(require,module,exports){var $expm1=Math.expm1;module.exports=!$expm1||$expm1(10)>22025.465794806718||$expm1(10)<22025.465794806718||$expm1(-2e-17)!=-2e-17?function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:Math.exp(x)-1}:$expm1},{}],70:[function(require,module,exports){module.exports=Math.log1p||function log1p(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:Math.log(1+x)}},{}],71:[function(require,module,exports){module.exports=Math.sign||function sign(x){return(x=+x)==0||x!=x?x:x<0?-1:1}},{}],72:[function(require,module,exports){var META=require("./_uid")("meta"),isObject=require("./_is-object"),has=require("./_has"),setDesc=require("./_object-dp").f,id=0;var isExtensible=Object.isExtensible||function(){return true};var FREEZE=!require("./_fails")(function(){return isExtensible(Object.preventExtensions({}))});var setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})};var fastKey=function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i};var getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it)}return it[META].w};var onFreeze=function(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META))setMeta(it);return it};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},{"./_fails":44,"./_has":49,"./_is-object":59,"./_object-dp":77,"./_uid":124}],73:[function(require,module,exports){var Map=require("./es6.map"),$export=require("./_export"),shared=require("./_shared")("metadata"),store=shared.store||(shared.store=new(require("./es6.weak-map")));var getOrCreateMetadataMap=function(target,targetKey,create){var targetMetadata=store.get(target);if(!targetMetadata){if(!create)return undefined;store.set(target,targetMetadata=new Map)}var keyMetadata=targetMetadata.get(targetKey);if(!keyMetadata){if(!create)return undefined;targetMetadata.set(targetKey,keyMetadata=new Map)}return keyMetadata};var ordinaryHasOwnMetadata=function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,false);return metadataMap===undefined?false:metadataMap.has(MetadataKey)};var ordinaryGetOwnMetadata=function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,false);return metadataMap===undefined?undefined:metadataMap.get(MetadataKey)};var ordinaryDefineOwnMetadata=function(MetadataKey,MetadataValue,O,P){getOrCreateMetadataMap(O,P,true).set(MetadataKey,MetadataValue)};var ordinaryOwnMetadataKeys=function(target,targetKey){var metadataMap=getOrCreateMetadataMap(target,targetKey,false),keys=[];if(metadataMap)metadataMap.forEach(function(_,key){keys.push(key)});return keys};var toMetaKey=function(it){return it===undefined||typeof it=="symbol"?it:String(it)};var exp=function(O){$export($export.S,"Reflect",O)};module.exports={store:store,map:getOrCreateMetadataMap,has:ordinaryHasOwnMetadata,get:ordinaryGetOwnMetadata,set:ordinaryDefineOwnMetadata,keys:ordinaryOwnMetadataKeys,key:toMetaKey,exp:exp}},{"./_export":42,"./_shared":104,"./es6.map":159,"./es6.weak-map":265}],74:[function(require,module,exports){var global=require("./_global"),macrotask=require("./_task").set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode=require("./_cof")(process)=="process";module.exports=function(){var head,last,notify;var flush=function(){var parent,fn;if(isNode&&(parent=process.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn()}catch(e){if(head)notify();else last=undefined;throw e}}last=undefined;if(parent)parent.enter()};if(isNode){notify=function(){process.nextTick(flush)}}else if(Observer){var toggle=true,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function(){promise.then(flush)}}else{notify=function(){macrotask.call(global,flush)}}return function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify()}last=task}}},{"./_cof":28,"./_global":48,"./_task":114}],75:[function(require,module,exports){"use strict";var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie"),toObject=require("./_to-object"),IObject=require("./_iobject"),$assign=Object.assign;module.exports=!$assign||require("./_fails")(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";A[S]=7;K.split("").forEach(function(k){B[k]=k});return $assign({},A)[S]!=7||Object.keys($assign({},B)).join("")!=K})?function assign(target,source){var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;while(aLen>index){var S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0,key;while(length>j)if(isEnum.call(S,key=keys[j++]))T[key]=S[key]}return T}:$assign},{"./_fails":44,"./_iobject":55,"./_object-gops":83,"./_object-keys":86,"./_object-pie":87,"./_to-object":119}],76:[function(require,module,exports){var anObject=require("./_an-object"),dPs=require("./_object-dps"),enumBugKeys=require("./_enum-bug-keys"),IE_PROTO=require("./_shared-key")("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype";var createDict=function(){var iframe=require("./_dom-create")("iframe"),i=enumBugKeys.length,lt="<",gt=">",iframeDocument;iframe.style.display="none";require("./_html").appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty;Empty[PROTOTYPE]=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:dPs(result,Properties)}},{"./_an-object":17,"./_dom-create":39,"./_enum-bug-keys":40,"./_html":51,"./_object-dps":78,"./_shared-key":103}],77:[function(require,module,exports){var anObject=require("./_an-object"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),toPrimitive=require("./_to-primitive"),dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)O[P]=Attributes.value;return O}},{"./_an-object":17,"./_descriptors":38,"./_ie8-dom-define":52,"./_to-primitive":120}],78:[function(require,module,exports){var dP=require("./_object-dp"),anObject=require("./_an-object"),getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=getKeys(Properties),length=keys.length,i=0,P;while(length>i)dP.f(O,P=keys[i++],Properties[P]);return O}},{"./_an-object":17,"./_descriptors":38,"./_object-dp":77,"./_object-keys":86}],79:[function(require,module,exports){module.exports=require("./_library")||!require("./_fails")(function(){var K=Math.random();__defineSetter__.call(null,K,function(){});delete require("./_global")[K]})},{"./_fails":44,"./_global":48,"./_library":68}],80:[function(require,module,exports){var pIE=require("./_object-pie"),createDesc=require("./_property-desc"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),has=require("./_has"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function getOwnPropertyDescriptor(O,P){O=toIObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},{"./_descriptors":38,"./_has":49,"./_ie8-dom-define":52,"./_object-pie":87,"./_property-desc":95,"./_to-iobject":117,"./_to-primitive":120}],81:[function(require,module,exports){var toIObject=require("./_to-iobject"),gOPN=require("./_object-gopn").f,toString={}.toString;var windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)=="[object Window]"?getWindowNames(it):gOPN(toIObject(it))}},{"./_object-gopn":82,"./_to-iobject":117}],82:[function(require,module,exports){var $keys=require("./_object-keys-internal"),hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys)}},{"./_enum-bug-keys":40,"./_object-keys-internal":85}],83:[function(require,module,exports){exports.f=Object.getOwnPropertySymbols},{}],84:[function(require,module,exports){var has=require("./_has"),toObject=require("./_to-object"),IE_PROTO=require("./_shared-key")("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor=="function"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null}},{"./_has":49,"./_shared-key":103,"./_to-object":119}],85:[function(require,module,exports){var has=require("./_has"),toIObject=require("./_to-iobject"),arrayIndexOf=require("./_array-includes")(false),IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(object,names){var O=toIObject(object),i=0,result=[],key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result}},{"./_array-includes":21,"./_has":49,"./_shared-key":103,"./_to-iobject":117}],86:[function(require,module,exports){var $keys=require("./_object-keys-internal"),enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys)}},{"./_enum-bug-keys":40,"./_object-keys-internal":85}],87:[function(require,module,exports){exports.f={}.propertyIsEnumerable},{}],88:[function(require,module,exports){var $export=require("./_export"),core=require("./_core"),fails=require("./_fails");module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},{"./_core":33,"./_export":42,"./_fails":44}],89:[function(require,module,exports){var getKeys=require("./_object-keys"),toIObject=require("./_to-iobject"),isEnum=require("./_object-pie").f;module.exports=function(isEntries){return function(it){var O=toIObject(it),keys=getKeys(O),length=keys.length,i=0,result=[],key;while(length>i)if(isEnum.call(O,key=keys[i++])){result.push(isEntries?[key,O[key]]:O[key])}return result}}},{"./_object-keys":86,"./_object-pie":87,"./_to-iobject":117}],90:[function(require,module,exports){var gOPN=require("./_object-gopn"),gOPS=require("./_object-gops"),anObject=require("./_an-object"),Reflect=require("./_global").Reflect;module.exports=Reflect&&Reflect.ownKeys||function ownKeys(it){var keys=gOPN.f(anObject(it)),getSymbols=gOPS.f;return getSymbols?keys.concat(getSymbols(it)):keys}},{"./_an-object":17,"./_global":48,"./_object-gopn":82,"./_object-gops":83}],91:[function(require,module,exports){var $parseFloat=require("./_global").parseFloat,$trim=require("./_string-trim").trim;module.exports=1/$parseFloat(require("./_string-ws")+"-0")!==-Infinity?function parseFloat(str){var string=$trim(String(str),3),result=$parseFloat(string);return result===0&&string.charAt(0)=="-"?-0:result}:$parseFloat},{"./_global":48,"./_string-trim":112,"./_string-ws":113}],92:[function(require,module,exports){var $parseInt=require("./_global").parseInt,$trim=require("./_string-trim").trim,ws=require("./_string-ws"),hex=/^[\-+]?0[xX]/;module.exports=$parseInt(ws+"08")!==8||$parseInt(ws+"0x16")!==22?function parseInt(str,radix){var string=$trim(String(str),3);return $parseInt(string,radix>>>0||(hex.test(string)?16:10))}:$parseInt},{"./_global":48,"./_string-trim":112,"./_string-ws":113}],93:[function(require,module,exports){"use strict";var path=require("./_path"),invoke=require("./_invoke"),aFunction=require("./_a-function");module.exports=function(){var fn=aFunction(this),length=arguments.length,pargs=Array(length),i=0,_=path._,holder=false;while(length>i)if((pargs[i]=arguments[i++])===_)holder=true;return function(){var that=this,aLen=arguments.length,j=0,k=0,args;if(!holder&&!aLen)return invoke(fn,pargs,that);args=pargs.slice();if(holder)for(;length>j;j++)if(args[j]===_)args[j]=arguments[k++];while(aLen>k)args.push(arguments[k++]);return invoke(fn,args,that)}}},{"./_a-function":13,"./_invoke":54,"./_path":94}],94:[function(require,module,exports){module.exports=require("./_global")},{"./_global":48}],95:[function(require,module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},{}],96:[function(require,module,exports){var redefine=require("./_redefine");module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target}},{"./_redefine":97}],97:[function(require,module,exports){var global=require("./_global"),hide=require("./_hide"),has=require("./_has"),SRC=require("./_uid")("src"),TO_STRING="toString",$toString=Function[TO_STRING],TPL=(""+$toString).split(TO_STRING);require("./_core").inspectSource=function(it){return $toString.call(it)};(module.exports=function(O,key,val,safe){var isFunction=typeof val=="function";if(isFunction)has(val,"name")||hide(val,"name",key);if(O[key]===val)return;if(isFunction)has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)));if(O===global){O[key]=val}else{if(!safe){delete O[key];hide(O,key,val)}else{if(O[key])O[key]=val;else hide(O,key,val)}}})(Function.prototype,TO_STRING,function toString(){return typeof this=="function"&&this[SRC]||$toString.call(this)})},{"./_core":33,"./_global":48,"./_has":49,"./_hide":50,"./_uid":124}],98:[function(require,module,exports){module.exports=function(regExp,replace){var replacer=replace===Object(replace)?function(part){return replace[part]}:replace;return function(it){return String(it).replace(regExp,replacer)}}},{}],99:[function(require,module,exports){module.exports=Object.is||function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}},{}],100:[function(require,module,exports){var isObject=require("./_is-object"),anObject=require("./_an-object");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},{"./_an-object":17,"./_ctx":35,"./_is-object":59,"./_object-gopd":80}],101:[function(require,module,exports){"use strict";var global=require("./_global"),dP=require("./_object-dp"),DESCRIPTORS=require("./_descriptors"),SPECIES=require("./_wks")("species");module.exports=function(KEY){var C=global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])dP.f(C,SPECIES,{configurable:true,get:function(){return this}})}},{"./_descriptors":38,"./_global":48,"./_object-dp":77,"./_wks":127}],102:[function(require,module,exports){var def=require("./_object-dp").f,has=require("./_has"),TAG=require("./_wks")("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},{"./_has":49,"./_object-dp":77,"./_wks":127}],103:[function(require,module,exports){var shared=require("./_shared")("keys"),uid=require("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},{"./_shared":104,"./_uid":124}],104:[function(require,module,exports){var global=require("./_global"),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},{"./_global":48}],105:[function(require,module,exports){var anObject=require("./_an-object"),aFunction=require("./_a-function"),SPECIES=require("./_wks")("species");module.exports=function(O,D){var C=anObject(O).constructor,S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S)}},{"./_a-function":13,"./_an-object":17,"./_wks":127}],106:[function(require,module,exports){var fails=require("./_fails");module.exports=function(method,arg){return!!method&&fails(function(){arg?method.call(null,function(){},1):method.call(null)})}},{"./_fails":44}],107:[function(require,module,exports){var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that)),i=toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},{"./_defined":37,"./_to-integer":116
}],108:[function(require,module,exports){var isRegExp=require("./_is-regexp"),defined=require("./_defined");module.exports=function(that,searchString,NAME){if(isRegExp(searchString))throw TypeError("String#"+NAME+" doesn't accept regex!");return String(defined(that))}},{"./_defined":37,"./_is-regexp":60}],109:[function(require,module,exports){var $export=require("./_export"),fails=require("./_fails"),defined=require("./_defined"),quot=/"/g;var createHTML=function(string,tag,attribute,value){var S=String(defined(string)),p1="<"+tag;if(attribute!=="")p1+=" "+attribute+'="'+String(value).replace(quot,"&quot;")+'"';return p1+">"+S+"</"+tag+">"};module.exports=function(NAME,exec){var O={};O[NAME]=exec(createHTML);$export($export.P+$export.F*fails(function(){var test=""[NAME]('"');return test!==test.toLowerCase()||test.split('"').length>3}),"String",O)}},{"./_defined":37,"./_export":42,"./_fails":44}],110:[function(require,module,exports){var toLength=require("./_to-length"),repeat=require("./_string-repeat"),defined=require("./_defined");module.exports=function(that,maxLength,fillString,left){var S=String(defined(that)),stringLength=S.length,fillStr=fillString===undefined?" ":String(fillString),intMaxLength=toLength(maxLength);if(intMaxLength<=stringLength||fillStr=="")return S;var fillLen=intMaxLength-stringLength,stringFiller=repeat.call(fillStr,Math.ceil(fillLen/fillStr.length));if(stringFiller.length>fillLen)stringFiller=stringFiller.slice(0,fillLen);return left?stringFiller+S:S+stringFiller}},{"./_defined":37,"./_string-repeat":111,"./_to-length":118}],111:[function(require,module,exports){"use strict";var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function repeat(count){var str=String(defined(this)),res="",n=toInteger(count);if(n<0||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))if(n&1)res+=str;return res}},{"./_defined":37,"./_to-integer":116}],112:[function(require,module,exports){var $export=require("./_export"),defined=require("./_defined"),fails=require("./_fails"),spaces=require("./_string-ws"),space="["+spaces+"]",non="",ltrim=RegExp("^"+space+space+"*"),rtrim=RegExp(space+space+"*$");var exporter=function(KEY,exec,ALIAS){var exp={};var FORCE=fails(function(){return!!spaces[KEY]()||non[KEY]()!=non});var fn=exp[KEY]=FORCE?exec(trim):spaces[KEY];if(ALIAS)exp[ALIAS]=fn;$export($export.P+$export.F*FORCE,"String",exp)};var trim=exporter.trim=function(string,TYPE){string=String(defined(string));if(TYPE&1)string=string.replace(ltrim,"");if(TYPE&2)string=string.replace(rtrim,"");return string};module.exports=exporter},{"./_defined":37,"./_export":42,"./_fails":44,"./_string-ws":113}],113:[function(require,module,exports){module.exports="\t\n\v\f\r "+"\u2028\u2029\ufeff"},{}],114:[function(require,module,exports){var ctx=require("./_ctx"),invoke=require("./_invoke"),html=require("./_html"),cel=require("./_dom-create"),global=require("./_global"),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port;var run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var listener=function(event){run.call(event.data)};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[],i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(typeof fn=="function"?fn:Function(fn),args)};defer(counter);return counter};clearTask=function clearImmediate(id){delete queue[id]};if(require("./_cof")(process)=="process"){defer=function(id){process.nextTick(ctx(run,id,1))}}else if(MessageChannel){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listener;defer=ctx(port.postMessage,port,1)}else if(global.addEventListener&&typeof postMessage=="function"&&!global.importScripts){defer=function(id){global.postMessage(id+"","*")};global.addEventListener("message",listener,false)}else if(ONREADYSTATECHANGE in cel("script")){defer=function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id)}}}else{defer=function(id){setTimeout(ctx(run,id,1),0)}}}module.exports={set:setTask,clear:clearTask}},{"./_cof":28,"./_ctx":35,"./_dom-create":39,"./_global":48,"./_html":51,"./_invoke":54}],115:[function(require,module,exports){var toInteger=require("./_to-integer"),max=Math.max,min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length)}},{"./_to-integer":116}],116:[function(require,module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],117:[function(require,module,exports){var IObject=require("./_iobject"),defined=require("./_defined");module.exports=function(it){return IObject(defined(it))}},{"./_defined":37,"./_iobject":55}],118:[function(require,module,exports){var toInteger=require("./_to-integer"),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./_to-integer":116}],119:[function(require,module,exports){var defined=require("./_defined");module.exports=function(it){return Object(defined(it))}},{"./_defined":37}],120:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":59}],121:[function(require,module,exports){"use strict";if(require("./_descriptors")){var LIBRARY=require("./_library"),global=require("./_global"),fails=require("./_fails"),$export=require("./_export"),$typed=require("./_typed"),$buffer=require("./_typed-buffer"),ctx=require("./_ctx"),anInstance=require("./_an-instance"),propertyDesc=require("./_property-desc"),hide=require("./_hide"),redefineAll=require("./_redefine-all"),toInteger=require("./_to-integer"),toLength=require("./_to-length"),toIndex=require("./_to-index"),toPrimitive=require("./_to-primitive"),has=require("./_has"),same=require("./_same-value"),classof=require("./_classof"),isObject=require("./_is-object"),toObject=require("./_to-object"),isArrayIter=require("./_is-array-iter"),create=require("./_object-create"),getPrototypeOf=require("./_object-gpo"),gOPN=require("./_object-gopn").f,getIterFn=require("./core.get-iterator-method"),uid=require("./_uid"),wks=require("./_wks"),createArrayMethod=require("./_array-methods"),createArrayIncludes=require("./_array-includes"),speciesConstructor=require("./_species-constructor"),ArrayIterators=require("./es6.array.iterator"),Iterators=require("./_iterators"),$iterDetect=require("./_iter-detect"),setSpecies=require("./_set-species"),arrayFill=require("./_array-fill"),arrayCopyWithin=require("./_array-copy-within"),$DP=require("./_object-dp"),$GOPD=require("./_object-gopd"),dP=$DP.f,gOPD=$GOPD.f,RangeError=global.RangeError,TypeError=global.TypeError,Uint8Array=global.Uint8Array,ARRAY_BUFFER="ArrayBuffer",SHARED_BUFFER="Shared"+ARRAY_BUFFER,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",PROTOTYPE="prototype",ArrayProto=Array[PROTOTYPE],$ArrayBuffer=$buffer.ArrayBuffer,$DataView=$buffer.DataView,arrayForEach=createArrayMethod(0),arrayFilter=createArrayMethod(2),arraySome=createArrayMethod(3),arrayEvery=createArrayMethod(4),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),arrayIncludes=createArrayIncludes(true),arrayIndexOf=createArrayIncludes(false),arrayValues=ArrayIterators.values,arrayKeys=ArrayIterators.keys,arrayEntries=ArrayIterators.entries,arrayLastIndexOf=ArrayProto.lastIndexOf,arrayReduce=ArrayProto.reduce,arrayReduceRight=ArrayProto.reduceRight,arrayJoin=ArrayProto.join,arraySort=ArrayProto.sort,arraySlice=ArrayProto.slice,arrayToString=ArrayProto.toString,arrayToLocaleString=ArrayProto.toLocaleString,ITERATOR=wks("iterator"),TAG=wks("toStringTag"),TYPED_CONSTRUCTOR=uid("typed_constructor"),DEF_CONSTRUCTOR=uid("def_constructor"),ALL_CONSTRUCTORS=$typed.CONSTR,TYPED_ARRAY=$typed.TYPED,VIEW=$typed.VIEW,WRONG_LENGTH="Wrong length!";var $map=createArrayMethod(1,function(O,length){return allocate(speciesConstructor(O,O[DEF_CONSTRUCTOR]),length)});var LITTLE_ENDIAN=fails(function(){return new Uint8Array(new Uint16Array([1]).buffer)[0]===1});var FORCED_SET=!!Uint8Array&&!!Uint8Array[PROTOTYPE].set&&fails(function(){new Uint8Array(1).set({})});var strictToLength=function(it,SAME){if(it===undefined)throw TypeError(WRONG_LENGTH);var number=+it,length=toLength(it);if(SAME&&!same(number,length))throw RangeError(WRONG_LENGTH);return length};var toOffset=function(it,BYTES){var offset=toInteger(it);if(offset<0||offset%BYTES)throw RangeError("Wrong offset!");return offset};var validate=function(it){if(isObject(it)&&TYPED_ARRAY in it)return it;throw TypeError(it+" is not a typed array!")};var allocate=function(C,length){if(!(isObject(C)&&TYPED_CONSTRUCTOR in C)){throw TypeError("It is not a typed array constructor!")}return new C(length)};var speciesFromList=function(O,list){return fromList(speciesConstructor(O,O[DEF_CONSTRUCTOR]),list)};var fromList=function(C,list){var index=0,length=list.length,result=allocate(C,length);while(length>index)result[index]=list[index++];return result};var addGetter=function(it,key,internal){dP(it,key,{get:function(){return this._d[internal]}})};var $from=function from(source){var O=toObject(source),aLen=arguments.length,mapfn=aLen>1?arguments[1]:undefined,mapping=mapfn!==undefined,iterFn=getIterFn(O),i,length,values,result,step,iterator;if(iterFn!=undefined&&!isArrayIter(iterFn)){for(iterator=iterFn.call(O),values=[],i=0;!(step=iterator.next()).done;i++){values.push(step.value)}O=values}if(mapping&&aLen>2)mapfn=ctx(mapfn,arguments[2],2);for(i=0,length=toLength(O.length),result=allocate(this,length);length>i;i++){result[i]=mapping?mapfn(O[i],i):O[i]}return result};var $of=function of(){var index=0,length=arguments.length,result=allocate(this,length);while(length>index)result[index]=arguments[index++];return result};var TO_LOCALE_BUG=!!Uint8Array&&fails(function(){arrayToLocaleString.call(new Uint8Array(1))});var $toLocaleString=function toLocaleString(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice.call(validate(this)):validate(this),arguments)};var proto={copyWithin:function copyWithin(target,start){return arrayCopyWithin.call(validate(this),target,start,arguments.length>2?arguments[2]:undefined)},every:function every(callbackfn){return arrayEvery(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},fill:function fill(value){return arrayFill.apply(validate(this),arguments)},filter:function filter(callbackfn){return speciesFromList(this,arrayFilter(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined))},find:function find(predicate){return arrayFind(validate(this),predicate,arguments.length>1?arguments[1]:undefined)},findIndex:function findIndex(predicate){return arrayFindIndex(validate(this),predicate,arguments.length>1?arguments[1]:undefined)},forEach:function forEach(callbackfn){arrayForEach(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},indexOf:function indexOf(searchElement){return arrayIndexOf(validate(this),searchElement,arguments.length>1?arguments[1]:undefined)},includes:function includes(searchElement){return arrayIncludes(validate(this),searchElement,arguments.length>1?arguments[1]:undefined)},join:function join(separator){return arrayJoin.apply(validate(this),arguments)},lastIndexOf:function lastIndexOf(searchElement){return arrayLastIndexOf.apply(validate(this),arguments)},map:function map(mapfn){return $map(validate(this),mapfn,arguments.length>1?arguments[1]:undefined)},reduce:function reduce(callbackfn){return arrayReduce.apply(validate(this),arguments)},reduceRight:function reduceRight(callbackfn){return arrayReduceRight.apply(validate(this),arguments)},reverse:function reverse(){var that=this,length=validate(that).length,middle=Math.floor(length/2),index=0,value;while(index<middle){value=that[index];that[index++]=that[--length];that[length]=value}return that},some:function some(callbackfn){return arraySome(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},sort:function sort(comparefn){return arraySort.call(validate(this),comparefn)},subarray:function subarray(begin,end){var O=validate(this),length=O.length,$begin=toIndex(begin,length);return new(speciesConstructor(O,O[DEF_CONSTRUCTOR]))(O.buffer,O.byteOffset+$begin*O.BYTES_PER_ELEMENT,toLength((end===undefined?length:toIndex(end,length))-$begin))}};var $slice=function slice(start,end){return speciesFromList(this,arraySlice.call(validate(this),start,end))};var $set=function set(arrayLike){validate(this);var offset=toOffset(arguments[1],1),length=this.length,src=toObject(arrayLike),len=toLength(src.length),index=0;if(len+offset>length)throw RangeError(WRONG_LENGTH);while(index<len)this[offset+index]=src[index++]};var $iterators={entries:function entries(){return arrayEntries.call(validate(this))},keys:function keys(){return arrayKeys.call(validate(this))},values:function values(){return arrayValues.call(validate(this))}};var isTAIndex=function(target,key){return isObject(target)&&target[TYPED_ARRAY]&&typeof key!="symbol"&&key in target&&String(+key)==String(key)};var $getDesc=function getOwnPropertyDescriptor(target,key){return isTAIndex(target,key=toPrimitive(key,true))?propertyDesc(2,target[key]):gOPD(target,key)};var $setDesc=function defineProperty(target,key,desc){if(isTAIndex(target,key=toPrimitive(key,true))&&isObject(desc)&&has(desc,"value")&&!has(desc,"get")&&!has(desc,"set")&&!desc.configurable&&(!has(desc,"writable")||desc.writable)&&(!has(desc,"enumerable")||desc.enumerable)){target[key]=desc.value;return target}else return dP(target,key,desc)};if(!ALL_CONSTRUCTORS){$GOPD.f=$getDesc;$DP.f=$setDesc}$export($export.S+$export.F*!ALL_CONSTRUCTORS,"Object",{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc});if(fails(function(){arrayToString.call({})})){arrayToString=arrayToLocaleString=function toString(){return arrayJoin.call(this)}}var $TypedArrayPrototype$=redefineAll({},proto);redefineAll($TypedArrayPrototype$,$iterators);hide($TypedArrayPrototype$,ITERATOR,$iterators.values);redefineAll($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function(){},toString:arrayToString,toLocaleString:$toLocaleString});addGetter($TypedArrayPrototype$,"buffer","b");addGetter($TypedArrayPrototype$,"byteOffset","o");addGetter($TypedArrayPrototype$,"byteLength","l");addGetter($TypedArrayPrototype$,"length","e");dP($TypedArrayPrototype$,TAG,{get:function(){return this[TYPED_ARRAY]}});module.exports=function(KEY,BYTES,wrapper,CLAMPED){CLAMPED=!!CLAMPED;var NAME=KEY+(CLAMPED?"Clamped":"")+"Array",ISNT_UINT8=NAME!="Uint8Array",GETTER="get"+KEY,SETTER="set"+KEY,TypedArray=global[NAME],Base=TypedArray||{},TAC=TypedArray&&getPrototypeOf(TypedArray),FORCED=!TypedArray||!$typed.ABV,O={},TypedArrayPrototype=TypedArray&&TypedArray[PROTOTYPE];var getter=function(that,index){var data=that._d;return data.v[GETTER](index*BYTES+data.o,LITTLE_ENDIAN)};var setter=function(that,index,value){var data=that._d;if(CLAMPED)value=(value=Math.round(value))<0?0:value>255?255:value&255;data.v[SETTER](index*BYTES+data.o,value,LITTLE_ENDIAN)};var addElement=function(that,index){dP(that,index,{get:function(){return getter(this,index)},set:function(value){return setter(this,index,value)},enumerable:true})};if(FORCED){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME,"_d");var index=0,offset=0,buffer,byteLength,length,klass;if(!isObject(data)){length=strictToLength(data,true);byteLength=length*BYTES;buffer=new $ArrayBuffer(byteLength)}else if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){buffer=data;offset=toOffset($offset,BYTES);var $len=data.byteLength;if($length===undefined){if($len%BYTES)throw RangeError(WRONG_LENGTH);byteLength=$len-offset;if(byteLength<0)throw RangeError(WRONG_LENGTH)}else{byteLength=toLength($length)*BYTES;if(byteLength+offset>$len)throw RangeError(WRONG_LENGTH)}length=byteLength/BYTES}else if(TYPED_ARRAY in data){return fromList(TypedArray,data)}else{return $from.call(TypedArray,data)}hide(that,"_d",{b:buffer,o:offset,l:byteLength,e:length,v:new $DataView(buffer)});while(index<length)addElement(that,index++)});TypedArrayPrototype=TypedArray[PROTOTYPE]=create($TypedArrayPrototype$);hide(TypedArrayPrototype,"constructor",TypedArray)}else if(!$iterDetect(function(iter){new TypedArray(null);new TypedArray(iter)},true)){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME);var klass;if(!isObject(data))return new Base(strictToLength(data,ISNT_UINT8));if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){return $length!==undefined?new Base(data,toOffset($offset,BYTES),$length):$offset!==undefined?new Base(data,toOffset($offset,BYTES)):new Base(data)}if(TYPED_ARRAY in data)return fromList(TypedArray,data);return $from.call(TypedArray,data)});arrayForEach(TAC!==Function.prototype?gOPN(Base).concat(gOPN(TAC)):gOPN(Base),function(key){if(!(key in TypedArray))hide(TypedArray,key,Base[key])});TypedArray[PROTOTYPE]=TypedArrayPrototype;if(!LIBRARY)TypedArrayPrototype.constructor=TypedArray}var $nativeIterator=TypedArrayPrototype[ITERATOR],CORRECT_ITER_NAME=!!$nativeIterator&&($nativeIterator.name=="values"||$nativeIterator.name==undefined),$iterator=$iterators.values;hide(TypedArray,TYPED_CONSTRUCTOR,true);hide(TypedArrayPrototype,TYPED_ARRAY,NAME);hide(TypedArrayPrototype,VIEW,true);hide(TypedArrayPrototype,DEF_CONSTRUCTOR,TypedArray);if(CLAMPED?new TypedArray(1)[TAG]!=NAME:!(TAG in TypedArrayPrototype)){dP(TypedArrayPrototype,TAG,{get:function(){return NAME}})}O[NAME]=TypedArray;$export($export.G+$export.W+$export.F*(TypedArray!=Base),O);$export($export.S,NAME,{BYTES_PER_ELEMENT:BYTES,from:$from,of:$of});if(!(BYTES_PER_ELEMENT in TypedArrayPrototype))hide(TypedArrayPrototype,BYTES_PER_ELEMENT,BYTES);$export($export.P,NAME,proto);setSpecies(NAME);$export($export.P+$export.F*FORCED_SET,NAME,{set:$set});$export($export.P+$export.F*!CORRECT_ITER_NAME,NAME,$iterators);$export($export.P+$export.F*(TypedArrayPrototype.toString!=arrayToString),NAME,{toString:arrayToString});$export($export.P+$export.F*fails(function(){new TypedArray(1).slice()}),NAME,{slice:$slice});$export($export.P+$export.F*(fails(function(){return[1,2].toLocaleString()!=new TypedArray([1,2]).toLocaleString()})||!fails(function(){TypedArrayPrototype.toLocaleString.call([1,2])})),NAME,{toLocaleString:$toLocaleString});Iterators[NAME]=CORRECT_ITER_NAME?$nativeIterator:$iterator;if(!LIBRARY&&!CORRECT_ITER_NAME)hide(TypedArrayPrototype,ITERATOR,$iterator)}}else module.exports=function(){}},{"./_an-instance":16,"./_array-copy-within":18,"./_array-fill":19,"./_array-includes":21,"./_array-methods":22,"./_classof":27,"./_ctx":35,"./_descriptors":38,"./_export":42,"./_fails":44,"./_global":48,"./_has":49,"./_hide":50,"./_is-array-iter":56,"./_is-object":59,"./_iter-detect":64,"./_iterators":66,"./_library":68,"./_object-create":76,"./_object-dp":77,"./_object-gopd":80,"./_object-gopn":82,"./_object-gpo":84,"./_property-desc":95,"./_redefine-all":96,"./_same-value":99,"./_set-species":101,"./_species-constructor":105,"./_to-index":115,"./_to-integer":116,"./_to-length":118,"./_to-object":119,"./_to-primitive":120,"./_typed":123,"./_typed-buffer":122,"./_uid":124,"./_wks":127,"./core.get-iterator-method":128,"./es6.array.iterator":140}],122:[function(require,module,exports){"use strict";var global=require("./_global"),DESCRIPTORS=require("./_descriptors"),LIBRARY=require("./_library"),$typed=require("./_typed"),hide=require("./_hide"),redefineAll=require("./_redefine-all"),fails=require("./_fails"),anInstance=require("./_an-instance"),toInteger=require("./_to-integer"),toLength=require("./_to-length"),gOPN=require("./_object-gopn").f,dP=require("./_object-dp").f,arrayFill=require("./_array-fill"),setToStringTag=require("./_set-to-string-tag"),ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH="Wrong length!",WRONG_INDEX="Wrong index!",$ArrayBuffer=global[ARRAY_BUFFER],$DataView=global[DATA_VIEW],Math=global.Math,RangeError=global.RangeError,Infinity=global.Infinity,BaseBuffer=$ArrayBuffer,abs=Math.abs,pow=Math.pow,floor=Math.floor,log=Math.log,LN2=Math.LN2,BUFFER="buffer",BYTE_LENGTH="byteLength",BYTE_OFFSET="byteOffset",$BUFFER=DESCRIPTORS?"_b":BUFFER,$LENGTH=DESCRIPTORS?"_l":BYTE_LENGTH,$OFFSET=DESCRIPTORS?"_o":BYTE_OFFSET;var packIEEE754=function(value,mLen,nBytes){var buffer=Array(nBytes),eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?pow(2,-24)-pow(2,-77):0,i=0,s=value<0||value===0&&1/value<0?1:0,e,m,c;value=abs(value);if(value!=value||value===Infinity){m=value!=value?1:0;e=eMax}else{e=floor(log(value)/LN2);if(value*(c=pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*pow(2,mLen);e=e+eBias}else{m=value*pow(2,eBias-1)*pow(2,mLen);e=0}}for(;mLen>=8;buffer[i++]=m&255,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[i++]=e&255,e/=256,eLen-=8);buffer[--i]|=s*128;return buffer};var unpackIEEE754=function(buffer,mLen,nBytes){var eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=eLen-7,i=nBytes-1,s=buffer[i--],e=s&127,m;s>>=7;for(;nBits>0;e=e*256+buffer[i],i--,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[i],i--,nBits-=8);if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:s?-Infinity:Infinity}else{m=m+pow(2,mLen);e=e-eBias}return(s?-1:1)*m*pow(2,e-mLen)};var unpackI32=function(bytes){return bytes[3]<<24|bytes[2]<<16|bytes[1]<<8|bytes[0]};var packI8=function(it){return[it&255]};var packI16=function(it){return[it&255,it>>8&255]};var packI32=function(it){return[it&255,it>>8&255,it>>16&255,it>>24&255]};var packF64=function(it){return packIEEE754(it,52,8)};var packF32=function(it){return packIEEE754(it,23,4)};var addGetter=function(C,key,internal){dP(C[PROTOTYPE],key,{get:function(){return this[internal]}})};var get=function(view,bytes,index,isLittleEndian){var numIndex=+index,intIndex=toInteger(numIndex);if(numIndex!=intIndex||intIndex<0||intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=store.slice(start,start+bytes);return isLittleEndian?pack:pack.reverse()};var set=function(view,bytes,index,conversion,value,isLittleEndian){var numIndex=+index,intIndex=toInteger(numIndex);if(numIndex!=intIndex||intIndex<0||intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=conversion(+value);for(var i=0;i<bytes;i++)store[start+i]=pack[isLittleEndian?i:bytes-i-1]};var validateArrayBufferArguments=function(that,length){anInstance(that,$ArrayBuffer,ARRAY_BUFFER);var numberLength=+length,byteLength=toLength(numberLength);if(numberLength!=byteLength)throw RangeError(WRONG_LENGTH);return byteLength};if(!$typed.ABV){$ArrayBuffer=function ArrayBuffer(length){var byteLength=validateArrayBufferArguments(this,length);this._b=arrayFill.call(Array(byteLength),0);this[$LENGTH]=byteLength};$DataView=function DataView(buffer,byteOffset,byteLength){anInstance(this,$DataView,DATA_VIEW);anInstance(buffer,$ArrayBuffer,DATA_VIEW);var bufferLength=buffer[$LENGTH],offset=toInteger(byteOffset);if(offset<0||offset>bufferLength)throw RangeError("Wrong offset!");byteLength=byteLength===undefined?bufferLength-offset:toLength(byteLength);if(offset+byteLength>bufferLength)throw RangeError(WRONG_LENGTH);this[$BUFFER]=buffer;this[$OFFSET]=offset;this[$LENGTH]=byteLength};if(DESCRIPTORS){addGetter($ArrayBuffer,BYTE_LENGTH,"_l");addGetter($DataView,BUFFER,"_b");addGetter($DataView,BYTE_LENGTH,"_l");addGetter($DataView,BYTE_OFFSET,"_o")}redefineAll($DataView[PROTOTYPE],{getInt8:function getInt8(byteOffset){return get(this,1,byteOffset)[0]<<24>>24},getUint8:function getUint8(byteOffset){return get(this,1,byteOffset)[0]},getInt16:function getInt16(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return(bytes[1]<<8|bytes[0])<<16>>16},getUint16:function getUint16(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return bytes[1]<<8|bytes[0]},getInt32:function getInt32(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))},getUint32:function getUint32(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))>>>0},getFloat32:function getFloat32(byteOffset){return unpackIEEE754(get(this,4,byteOffset,arguments[1]),23,4)},getFloat64:function getFloat64(byteOffset){return unpackIEEE754(get(this,8,byteOffset,arguments[1]),52,8)},setInt8:function setInt8(byteOffset,value){set(this,1,byteOffset,packI8,value)},setUint8:function setUint8(byteOffset,value){set(this,1,byteOffset,packI8,value)},setInt16:function setInt16(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setUint16:function setUint16(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setInt32:function setInt32(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setUint32:function setUint32(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setFloat32:function setFloat32(byteOffset,value){set(this,4,byteOffset,packF32,value,arguments[2])},setFloat64:function setFloat64(byteOffset,value){set(this,8,byteOffset,packF64,value,arguments[2])}})}else{if(!fails(function(){new $ArrayBuffer})||!fails(function(){new $ArrayBuffer(.5)})){$ArrayBuffer=function ArrayBuffer(length){return new BaseBuffer(validateArrayBufferArguments(this,length))};var ArrayBufferProto=$ArrayBuffer[PROTOTYPE]=BaseBuffer[PROTOTYPE];for(var keys=gOPN(BaseBuffer),j=0,key;keys.length>j;){if(!((key=keys[j++])in $ArrayBuffer))hide($ArrayBuffer,key,BaseBuffer[key])}if(!LIBRARY)ArrayBufferProto.constructor=$ArrayBuffer}var view=new $DataView(new $ArrayBuffer(2)),$setInt8=$DataView[PROTOTYPE].setInt8;view.setInt8(0,2147483648);view.setInt8(1,2147483649);if(view.getInt8(0)||!view.getInt8(1))redefineAll($DataView[PROTOTYPE],{setInt8:function setInt8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)},setUint8:function setUint8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)}},true)}setToStringTag($ArrayBuffer,ARRAY_BUFFER);setToStringTag($DataView,DATA_VIEW);hide($DataView[PROTOTYPE],$typed.VIEW,true);exports[ARRAY_BUFFER]=$ArrayBuffer;exports[DATA_VIEW]=$DataView},{"./_an-instance":16,"./_array-fill":19,"./_descriptors":38,"./_fails":44,"./_global":48,"./_hide":50,"./_library":68,"./_object-dp":77,"./_object-gopn":82,"./_redefine-all":96,"./_set-to-string-tag":102,"./_to-integer":116,"./_to-length":118,"./_typed":123}],123:[function(require,module,exports){var global=require("./_global"),hide=require("./_hide"),uid=require("./_uid"),TYPED=uid("typed_array"),VIEW=uid("view"),ABV=!!(global.ArrayBuffer&&global.DataView),CONSTR=ABV,i=0,l=9,Typed;var TypedArrayConstructors="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(i<l){if(Typed=global[TypedArrayConstructors[i++]]){hide(Typed.prototype,TYPED,true);hide(Typed.prototype,VIEW,true)}else CONSTR=false}module.exports={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW}},{"./_global":48,"./_hide":50,"./_uid":124}],124:[function(require,module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},{}],125:[function(require,module,exports){var global=require("./_global"),core=require("./_core"),LIBRARY=require("./_library"),wksExt=require("./_wks-ext"),defineProperty=require("./_object-dp").f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});if(name.charAt(0)!="_"&&!(name in $Symbol))defineProperty($Symbol,name,{value:wksExt.f(name)})}},{"./_core":33,"./_global":48,"./_library":68,"./_object-dp":77,"./_wks-ext":126}],126:[function(require,module,exports){exports.f=require("./_wks")},{"./_wks":127}],127:[function(require,module,exports){var store=require("./_shared")("wks"),uid=require("./_uid"),Symbol=require("./_global").Symbol,USE_SYMBOL=typeof Symbol=="function";var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},{"./_global":48,"./_shared":104,"./_uid":124}],128:[function(require,module,exports){var classof=require("./_classof"),ITERATOR=require("./_wks")("iterator"),Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},{"./_classof":27,"./_core":33,"./_iterators":66,"./_wks":127}],129:[function(require,module,exports){var $export=require("./_export"),$re=require("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");$export($export.S,"RegExp",{escape:function escape(it){return $re(it)}})},{"./_export":42,"./_replacer":98}],130:[function(require,module,exports){var $export=require("./_export");$export($export.P,"Array",{copyWithin:require("./_array-copy-within")});require("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":15,"./_array-copy-within":18,"./_export":42}],131:[function(require,module,exports){"use strict";var $export=require("./_export"),$every=require("./_array-methods")(4);$export($export.P+$export.F*!require("./_strict-method")([].every,true),"Array",{every:function every(callbackfn){return $every(this,callbackfn,arguments[1])}})},{"./_array-methods":22,"./_export":42,"./_strict-method":106}],132:[function(require,module,exports){var $export=require("./_export");$export($export.P,"Array",{fill:require("./_array-fill")});require("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":15,"./_array-fill":19,"./_export":42}],133:[function(require,module,exports){"use strict";var $export=require("./_export"),$filter=require("./_array-methods")(2);$export($export.P+$export.F*!require("./_strict-method")([].filter,true),"Array",{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments[1])}})},{"./_array-methods":22,"./_export":42,"./_strict-method":106}],134:[function(require,module,exports){"use strict";var $export=require("./_export"),$find=require("./_array-methods")(6),KEY="findIndex",forced=true;if(KEY in[])Array(1)[KEY](function(){forced=false});$export($export.P+$export.F*forced,"Array",{findIndex:function findIndex(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});require("./_add-to-unscopables")(KEY)},{"./_add-to-unscopables":15,"./_array-methods":22,"./_export":42}],135:[function(require,module,exports){"use strict";var $export=require("./_export"),$find=require("./_array-methods")(5),KEY="find",forced=true;if(KEY in[])Array(1)[KEY](function(){forced=false});$export($export.P+$export.F*forced,"Array",{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});require("./_add-to-unscopables")(KEY)},{"./_add-to-unscopables":15,"./_array-methods":22,"./_export":42}],136:[function(require,module,exports){"use strict";var $export=require("./_export"),$forEach=require("./_array-methods")(0),STRICT=require("./_strict-method")([].forEach,true);$export($export.P+$export.F*!STRICT,"Array",{forEach:function forEach(callbackfn){return $forEach(this,callbackfn,arguments[1])}})},{"./_array-methods":22,"./_export":42,"./_strict-method":106}],137:[function(require,module,exports){"use strict";var ctx=require("./_ctx"),$export=require("./_export"),toObject=require("./_to-object"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),toLength=require("./_to-length"),createProperty=require("./_create-property"),getIterFn=require("./core.get-iterator-method");
$export($export.S+$export.F*!require("./_iter-detect")(function(iter){Array.from(iter)}),"Array",{from:function from(arrayLike){var O=toObject(arrayLike),C=typeof this=="function"?this:Array,aLen=arguments.length,mapfn=aLen>1?arguments[1]:undefined,mapping=mapfn!==undefined,index=0,iterFn=getIterFn(O),length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,aLen>2?arguments[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],true):step.value)}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){createProperty(result,index,mapping?mapfn(O[index],index):O[index])}}result.length=index;return result}})},{"./_create-property":34,"./_ctx":35,"./_export":42,"./_is-array-iter":56,"./_iter-call":61,"./_iter-detect":64,"./_to-length":118,"./_to-object":119,"./core.get-iterator-method":128}],138:[function(require,module,exports){"use strict";var $export=require("./_export"),$indexOf=require("./_array-includes")(false),$native=[].indexOf,NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!require("./_strict-method")($native)),"Array",{indexOf:function indexOf(searchElement){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,searchElement,arguments[1])}})},{"./_array-includes":21,"./_export":42,"./_strict-method":106}],139:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Array",{isArray:require("./_is-array")})},{"./_export":42,"./_is-array":57}],140:[function(require,module,exports){"use strict";var addToUnscopables=require("./_add-to-unscopables"),step=require("./_iter-step"),Iterators=require("./_iterators"),toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},{"./_add-to-unscopables":15,"./_iter-define":63,"./_iter-step":65,"./_iterators":66,"./_to-iobject":117}],141:[function(require,module,exports){"use strict";var $export=require("./_export"),toIObject=require("./_to-iobject"),arrayJoin=[].join;$export($export.P+$export.F*(require("./_iobject")!=Object||!require("./_strict-method")(arrayJoin)),"Array",{join:function join(separator){return arrayJoin.call(toIObject(this),separator===undefined?",":separator)}})},{"./_export":42,"./_iobject":55,"./_strict-method":106,"./_to-iobject":117}],142:[function(require,module,exports){"use strict";var $export=require("./_export"),toIObject=require("./_to-iobject"),toInteger=require("./_to-integer"),toLength=require("./_to-length"),$native=[].lastIndexOf,NEGATIVE_ZERO=!!$native&&1/[1].lastIndexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!require("./_strict-method")($native)),"Array",{lastIndexOf:function lastIndexOf(searchElement){if(NEGATIVE_ZERO)return $native.apply(this,arguments)||0;var O=toIObject(this),length=toLength(O.length),index=length-1;if(arguments.length>1)index=Math.min(index,toInteger(arguments[1]));if(index<0)index=length+index;for(;index>=0;index--)if(index in O)if(O[index]===searchElement)return index||0;return-1}})},{"./_export":42,"./_strict-method":106,"./_to-integer":116,"./_to-iobject":117,"./_to-length":118}],143:[function(require,module,exports){"use strict";var $export=require("./_export"),$map=require("./_array-methods")(1);$export($export.P+$export.F*!require("./_strict-method")([].map,true),"Array",{map:function map(callbackfn){return $map(this,callbackfn,arguments[1])}})},{"./_array-methods":22,"./_export":42,"./_strict-method":106}],144:[function(require,module,exports){"use strict";var $export=require("./_export"),createProperty=require("./_create-property");$export($export.S+$export.F*require("./_fails")(function(){function F(){}return!(Array.of.call(F)instanceof F)}),"Array",{of:function of(){var index=0,aLen=arguments.length,result=new(typeof this=="function"?this:Array)(aLen);while(aLen>index)createProperty(result,index,arguments[index++]);result.length=aLen;return result}})},{"./_create-property":34,"./_export":42,"./_fails":44}],145:[function(require,module,exports){"use strict";var $export=require("./_export"),$reduce=require("./_array-reduce");$export($export.P+$export.F*!require("./_strict-method")([].reduceRight,true),"Array",{reduceRight:function reduceRight(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],true)}})},{"./_array-reduce":23,"./_export":42,"./_strict-method":106}],146:[function(require,module,exports){"use strict";var $export=require("./_export"),$reduce=require("./_array-reduce");$export($export.P+$export.F*!require("./_strict-method")([].reduce,true),"Array",{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],false)}})},{"./_array-reduce":23,"./_export":42,"./_strict-method":106}],147:[function(require,module,exports){"use strict";var $export=require("./_export"),html=require("./_html"),cof=require("./_cof"),toIndex=require("./_to-index"),toLength=require("./_to-length"),arraySlice=[].slice;$export($export.P+$export.F*require("./_fails")(function(){if(html)arraySlice.call(html)}),"Array",{slice:function slice(begin,end){var len=toLength(this.length),klass=cof(this);end=end===undefined?len:end;if(klass=="Array")return arraySlice.call(this,begin,end);var start=toIndex(begin,len),upTo=toIndex(end,len),size=toLength(upTo-start),cloned=Array(size),i=0;for(;i<size;i++)cloned[i]=klass=="String"?this.charAt(start+i):this[start+i];return cloned}})},{"./_cof":28,"./_export":42,"./_fails":44,"./_html":51,"./_to-index":115,"./_to-length":118}],148:[function(require,module,exports){"use strict";var $export=require("./_export"),$some=require("./_array-methods")(3);$export($export.P+$export.F*!require("./_strict-method")([].some,true),"Array",{some:function some(callbackfn){return $some(this,callbackfn,arguments[1])}})},{"./_array-methods":22,"./_export":42,"./_strict-method":106}],149:[function(require,module,exports){"use strict";var $export=require("./_export"),aFunction=require("./_a-function"),toObject=require("./_to-object"),fails=require("./_fails"),$sort=[].sort,test=[1,2,3];$export($export.P+$export.F*(fails(function(){test.sort(undefined)})||!fails(function(){test.sort(null)})||!require("./_strict-method")($sort)),"Array",{sort:function sort(comparefn){return comparefn===undefined?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn))}})},{"./_a-function":13,"./_export":42,"./_fails":44,"./_strict-method":106,"./_to-object":119}],150:[function(require,module,exports){require("./_set-species")("Array")},{"./_set-species":101}],151:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":42}],152:[function(require,module,exports){"use strict";var $export=require("./_export"),fails=require("./_fails"),getTime=Date.prototype.getTime;var lz=function(num){return num>9?num:"0"+num};$export($export.P+$export.F*(fails(function(){return new Date(-5e13-1).toISOString()!="0385-07-25T07:06:39.999Z"})||!fails(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function toISOString(){if(!isFinite(getTime.call(this)))throw RangeError("Invalid time value");var d=this,y=d.getUTCFullYear(),m=d.getUTCMilliseconds(),s=y<0?"-":y>9999?"+":"";return s+("00000"+Math.abs(y)).slice(s?-6:-4)+"-"+lz(d.getUTCMonth()+1)+"-"+lz(d.getUTCDate())+"T"+lz(d.getUTCHours())+":"+lz(d.getUTCMinutes())+":"+lz(d.getUTCSeconds())+"."+(m>99?m:"0"+lz(m))+"Z"}})},{"./_export":42,"./_fails":44}],153:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),toPrimitive=require("./_to-primitive");$export($export.P+$export.F*require("./_fails")(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function toJSON(key){var O=toObject(this),pv=toPrimitive(O);return typeof pv=="number"&&!isFinite(pv)?null:O.toISOString()}})},{"./_export":42,"./_fails":44,"./_to-object":119,"./_to-primitive":120}],154:[function(require,module,exports){var TO_PRIMITIVE=require("./_wks")("toPrimitive"),proto=Date.prototype;if(!(TO_PRIMITIVE in proto))require("./_hide")(proto,TO_PRIMITIVE,require("./_date-to-primitive"))},{"./_date-to-primitive":36,"./_hide":50,"./_wks":127}],155:[function(require,module,exports){var DateProto=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING="toString",$toString=DateProto[TO_STRING],getTime=DateProto.getTime;if(new Date(NaN)+""!=INVALID_DATE){require("./_redefine")(DateProto,TO_STRING,function toString(){var value=getTime.call(this);return value===value?$toString.call(this):INVALID_DATE})}},{"./_redefine":97}],156:[function(require,module,exports){var $export=require("./_export");$export($export.P,"Function",{bind:require("./_bind")})},{"./_bind":26,"./_export":42}],157:[function(require,module,exports){"use strict";var isObject=require("./_is-object"),getPrototypeOf=require("./_object-gpo"),HAS_INSTANCE=require("./_wks")("hasInstance"),FunctionProto=Function.prototype;if(!(HAS_INSTANCE in FunctionProto))require("./_object-dp").f(FunctionProto,HAS_INSTANCE,{value:function(O){if(typeof this!="function"||!isObject(O))return false;if(!isObject(this.prototype))return O instanceof this;while(O=getPrototypeOf(O))if(this.prototype===O)return true;return false}})},{"./_is-object":59,"./_object-dp":77,"./_object-gpo":84,"./_wks":127}],158:[function(require,module,exports){var dP=require("./_object-dp").f,createDesc=require("./_property-desc"),has=require("./_has"),FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/,NAME="name";var isExtensible=Object.isExtensible||function(){return true};NAME in FProto||require("./_descriptors")&&dP(FProto,NAME,{configurable:true,get:function(){try{var that=this,name=(""+that).match(nameRE)[1];has(that,NAME)||!isExtensible(that)||dP(that,NAME,createDesc(5,name));return name}catch(e){return""}}})},{"./_descriptors":38,"./_has":49,"./_object-dp":77,"./_property-desc":95}],159:[function(require,module,exports){"use strict";var strong=require("./_collection-strong");module.exports=require("./_collection")("Map",function(get){return function Map(){return get(this,arguments.length>0?arguments[0]:undefined)}},{get:function get(key){var entry=strong.getEntry(this,key);return entry&&entry.v},set:function set(key,value){return strong.def(this,key===0?0:key,value)}},strong,true)},{"./_collection":32,"./_collection-strong":29}],160:[function(require,module,exports){var $export=require("./_export"),log1p=require("./_math-log1p"),sqrt=Math.sqrt,$acosh=Math.acosh;$export($export.S+$export.F*!($acosh&&Math.floor($acosh(Number.MAX_VALUE))==710&&$acosh(Infinity)==Infinity),"Math",{acosh:function acosh(x){return(x=+x)<1?NaN:x>94906265.62425156?Math.log(x)+Math.LN2:log1p(x-1+sqrt(x-1)*sqrt(x+1))}})},{"./_export":42,"./_math-log1p":70}],161:[function(require,module,exports){var $export=require("./_export"),$asinh=Math.asinh;function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):Math.log(x+Math.sqrt(x*x+1))}$export($export.S+$export.F*!($asinh&&1/$asinh(0)>0),"Math",{asinh:asinh})},{"./_export":42}],162:[function(require,module,exports){var $export=require("./_export"),$atanh=Math.atanh;$export($export.S+$export.F*!($atanh&&1/$atanh(-0)<0),"Math",{atanh:function atanh(x){return(x=+x)==0?x:Math.log((1+x)/(1-x))/2}})},{"./_export":42}],163:[function(require,module,exports){var $export=require("./_export"),sign=require("./_math-sign");$export($export.S,"Math",{cbrt:function cbrt(x){return sign(x=+x)*Math.pow(Math.abs(x),1/3)}})},{"./_export":42,"./_math-sign":71}],164:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{clz32:function clz32(x){return(x>>>=0)?31-Math.floor(Math.log(x+.5)*Math.LOG2E):32}})},{"./_export":42}],165:[function(require,module,exports){var $export=require("./_export"),exp=Math.exp;$export($export.S,"Math",{cosh:function cosh(x){return(exp(x=+x)+exp(-x))/2}})},{"./_export":42}],166:[function(require,module,exports){var $export=require("./_export"),$expm1=require("./_math-expm1");$export($export.S+$export.F*($expm1!=Math.expm1),"Math",{expm1:$expm1})},{"./_export":42,"./_math-expm1":69}],167:[function(require,module,exports){var $export=require("./_export"),sign=require("./_math-sign"),pow=Math.pow,EPSILON=pow(2,-52),EPSILON32=pow(2,-23),MAX32=pow(2,127)*(2-EPSILON32),MIN32=pow(2,-126);var roundTiesToEven=function(n){return n+1/EPSILON-1/EPSILON};$export($export.S,"Math",{fround:function fround(x){var $abs=Math.abs(x),$sign=sign(x),a,result;if($abs<MIN32)return $sign*roundTiesToEven($abs/MIN32/EPSILON32)*MIN32*EPSILON32;a=(1+EPSILON32/EPSILON)*$abs;result=a-(a-$abs);if(result>MAX32||result!=result)return $sign*Infinity;return $sign*result}})},{"./_export":42,"./_math-sign":71}],168:[function(require,module,exports){var $export=require("./_export"),abs=Math.abs;$export($export.S,"Math",{hypot:function hypot(value1,value2){var sum=0,i=0,aLen=arguments.length,larg=0,arg,div;while(i<aLen){arg=abs(arguments[i++]);if(larg<arg){div=larg/arg;sum=sum*div*div+1;larg=arg}else if(arg>0){div=arg/larg;sum+=div*div}else sum+=arg}return larg===Infinity?Infinity:larg*Math.sqrt(sum)}})},{"./_export":42}],169:[function(require,module,exports){var $export=require("./_export"),$imul=Math.imul;$export($export.S+$export.F*require("./_fails")(function(){return $imul(4294967295,5)!=-5||$imul.length!=2}),"Math",{imul:function imul(x,y){var UINT16=65535,xn=+x,yn=+y,xl=UINT16&xn,yl=UINT16&yn;return 0|xl*yl+((UINT16&xn>>>16)*yl+xl*(UINT16&yn>>>16)<<16>>>0)}})},{"./_export":42,"./_fails":44}],170:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{log10:function log10(x){return Math.log(x)/Math.LN10}})},{"./_export":42}],171:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{log1p:require("./_math-log1p")})},{"./_export":42,"./_math-log1p":70}],172:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{log2:function log2(x){return Math.log(x)/Math.LN2}})},{"./_export":42}],173:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{sign:require("./_math-sign")})},{"./_export":42,"./_math-sign":71}],174:[function(require,module,exports){var $export=require("./_export"),expm1=require("./_math-expm1"),exp=Math.exp;$export($export.S+$export.F*require("./_fails")(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function sinh(x){return Math.abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(Math.E/2)}})},{"./_export":42,"./_fails":44,"./_math-expm1":69}],175:[function(require,module,exports){var $export=require("./_export"),expm1=require("./_math-expm1"),exp=Math.exp;$export($export.S,"Math",{tanh:function tanh(x){var a=expm1(x=+x),b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x))}})},{"./_export":42,"./_math-expm1":69}],176:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{trunc:function trunc(it){return(it>0?Math.floor:Math.ceil)(it)}})},{"./_export":42}],177:[function(require,module,exports){"use strict";var global=require("./_global"),has=require("./_has"),cof=require("./_cof"),inheritIfRequired=require("./_inherit-if-required"),toPrimitive=require("./_to-primitive"),fails=require("./_fails"),gOPN=require("./_object-gopn").f,gOPD=require("./_object-gopd").f,dP=require("./_object-dp").f,$trim=require("./_string-trim").trim,NUMBER="Number",$Number=global[NUMBER],Base=$Number,proto=$Number.prototype,BROKEN_COF=cof(require("./_object-create")(proto))==NUMBER,TRIM="trim"in String.prototype;var toNumber=function(argument){var it=toPrimitive(argument,false);if(typeof it=="string"&&it.length>2){it=TRIM?it.trim():$trim(it,3);var first=it.charCodeAt(0),third,radix,maxCode;if(first===43||first===45){third=it.charCodeAt(2);if(third===88||third===120)return NaN}else if(first===48){switch(it.charCodeAt(1)){case 66:case 98:radix=2;maxCode=49;break;case 79:case 111:radix=8;maxCode=55;break;default:return+it}for(var digits=it.slice(2),i=0,l=digits.length,code;i<l;i++){code=digits.charCodeAt(i);if(code<48||code>maxCode)return NaN}return parseInt(digits,radix)}}return+it};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function Number(value){var it=arguments.length<1?0:value,that=this;return that instanceof $Number&&(BROKEN_COF?fails(function(){proto.valueOf.call(that)}):cof(that)!=NUMBER)?inheritIfRequired(new Base(toNumber(it)),that,$Number):toNumber(it)};for(var keys=require("./_descriptors")?gOPN(Base):("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,"+"EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,"+"MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger").split(","),j=0,key;keys.length>j;j++){if(has(Base,key=keys[j])&&!has($Number,key)){dP($Number,key,gOPD(Base,key))}}$Number.prototype=proto;proto.constructor=$Number;require("./_redefine")(global,NUMBER,$Number)}},{"./_cof":28,"./_descriptors":38,"./_fails":44,"./_global":48,"./_has":49,"./_inherit-if-required":53,"./_object-create":76,"./_object-dp":77,"./_object-gopd":80,"./_object-gopn":82,"./_redefine":97,"./_string-trim":112,"./_to-primitive":120}],178:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":42}],179:[function(require,module,exports){var $export=require("./_export"),_isFinite=require("./_global").isFinite;$export($export.S,"Number",{isFinite:function isFinite(it){return typeof it=="number"&&_isFinite(it)}})},{"./_export":42,"./_global":48}],180:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{isInteger:require("./_is-integer")})},{"./_export":42,"./_is-integer":58}],181:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{isNaN:function isNaN(number){return number!=number}})},{"./_export":42}],182:[function(require,module,exports){var $export=require("./_export"),isInteger=require("./_is-integer"),abs=Math.abs;$export($export.S,"Number",{isSafeInteger:function isSafeInteger(number){return isInteger(number)&&abs(number)<=9007199254740991}})},{"./_export":42,"./_is-integer":58}],183:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":42}],184:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":42}],185:[function(require,module,exports){var $export=require("./_export"),$parseFloat=require("./_parse-float");$export($export.S+$export.F*(Number.parseFloat!=$parseFloat),"Number",{parseFloat:$parseFloat})},{"./_export":42,"./_parse-float":91}],186:[function(require,module,exports){var $export=require("./_export"),$parseInt=require("./_parse-int");$export($export.S+$export.F*(Number.parseInt!=$parseInt),"Number",{parseInt:$parseInt})},{"./_export":42,"./_parse-int":92}],187:[function(require,module,exports){"use strict";var $export=require("./_export"),toInteger=require("./_to-integer"),aNumberValue=require("./_a-number-value"),repeat=require("./_string-repeat"),$toFixed=1..toFixed,floor=Math.floor,data=[0,0,0,0,0,0],ERROR="Number.toFixed: incorrect invocation!",ZERO="0";var multiply=function(n,c){var i=-1,c2=c;while(++i<6){c2+=n*data[i];data[i]=c2%1e7;c2=floor(c2/1e7)}};var divide=function(n){var i=6,c=0;while(--i>=0){c+=data[i];data[i]=floor(c/n);c=c%n*1e7}};var numToString=function(){var i=6,s="";while(--i>=0){if(s!==""||i===0||data[i]!==0){var t=String(data[i]);s=s===""?t:s+repeat.call(ZERO,7-t.length)+t}}return s};var pow=function(x,n,acc){return n===0?acc:n%2===1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)};var log=function(x){var n=0,x2=x;while(x2>=4096){n+=12;x2/=4096}while(x2>=2){n+=1;x2/=2}return n};$export($export.P+$export.F*(!!$toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(0xde0b6b3a7640080).toFixed(0)!=="1000000000000000128")||!require("./_fails")(function(){$toFixed.call({})})),"Number",{toFixed:function toFixed(fractionDigits){var x=aNumberValue(this,ERROR),f=toInteger(fractionDigits),s="",m=ZERO,e,z,j,k;if(f<0||f>20)throw RangeError(ERROR);if(x!=x)return"NaN";if(x<=-1e21||x>=1e21)return String(x);if(x<0){s="-";x=-x}if(x>1e-21){e=log(x*pow(2,69,1))-69;z=e<0?x*pow(2,-e,1):x/pow(2,e,1);z*=4503599627370496;e=52-e;if(e>0){multiply(0,z);j=f;while(j>=7){multiply(1e7,0);j-=7}multiply(pow(10,j,1),0);j=e-1;while(j>=23){divide(1<<23);j-=23}divide(1<<j);multiply(1,1);divide(2);m=numToString()}else{multiply(0,z);multiply(1<<-e,0);m=numToString()+repeat.call(ZERO,f)}}if(f>0){k=m.length;m=s+(k<=f?"0."+repeat.call(ZERO,f-k)+m:m.slice(0,k-f)+"."+m.slice(k-f))}else{m=s+m}return m}})},{"./_a-number-value":14,"./_export":42,"./_fails":44,"./_string-repeat":111,"./_to-integer":116}],188:[function(require,module,exports){"use strict";var $export=require("./_export"),$fails=require("./_fails"),aNumberValue=require("./_a-number-value"),$toPrecision=1..toPrecision;$export($export.P+$export.F*($fails(function(){return $toPrecision.call(1,undefined)!=="1"})||!$fails(function(){$toPrecision.call({})})),"Number",{toPrecision:function toPrecision(precision){var that=aNumberValue(this,"Number#toPrecision: incorrect invocation!");return precision===undefined?$toPrecision.call(that):$toPrecision.call(that,precision)}})},{"./_a-number-value":14,"./_export":42,"./_fails":44}],189:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F,"Object",{assign:require("./_object-assign")})},{"./_export":42,"./_object-assign":75}],190:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{create:require("./_object-create")})},{"./_export":42,"./_object-create":76}],191:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperties:require("./_object-dps")})},{"./_descriptors":38,"./_export":42,"./_object-dps":78}],192:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f})},{"./_descriptors":38,"./_export":42,"./_object-dp":77}],193:[function(require,module,exports){var isObject=require("./_is-object"),meta=require("./_meta").onFreeze;require("./_object-sap")("freeze",function($freeze){return function freeze(it){return $freeze&&isObject(it)?$freeze(meta(it)):it}})},{"./_is-object":59,"./_meta":72,"./_object-sap":88}],194:[function(require,module,exports){var toIObject=require("./_to-iobject"),$getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_object-sap")("getOwnPropertyDescriptor",function(){return function getOwnPropertyDescriptor(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},{"./_object-gopd":80,"./_object-sap":88,"./_to-iobject":117}],195:[function(require,module,exports){require("./_object-sap")("getOwnPropertyNames",function(){return require("./_object-gopn-ext").f})},{"./_object-gopn-ext":81,"./_object-sap":88}],196:[function(require,module,exports){var toObject=require("./_to-object"),$getPrototypeOf=require("./_object-gpo");require("./_object-sap")("getPrototypeOf",function(){return function getPrototypeOf(it){return $getPrototypeOf(toObject(it))}})},{"./_object-gpo":84,"./_object-sap":88,"./_to-object":119}],197:[function(require,module,exports){var isObject=require("./_is-object");require("./_object-sap")("isExtensible",function($isExtensible){return function isExtensible(it){return isObject(it)?$isExtensible?$isExtensible(it):true:false}})},{"./_is-object":59,"./_object-sap":88}],198:[function(require,module,exports){var isObject=require("./_is-object");require("./_object-sap")("isFrozen",function($isFrozen){return function isFrozen(it){return isObject(it)?$isFrozen?$isFrozen(it):false:true}})},{"./_is-object":59,"./_object-sap":88}],199:[function(require,module,exports){var isObject=require("./_is-object");require("./_object-sap")("isSealed",function($isSealed){return function isSealed(it){return isObject(it)?$isSealed?$isSealed(it):false:true}})},{"./_is-object":59,"./_object-sap":88}],200:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{is:require("./_same-value")})},{"./_export":42,"./_same-value":99}],201:[function(require,module,exports){var toObject=require("./_to-object"),$keys=require("./_object-keys");require("./_object-sap")("keys",function(){return function keys(it){return $keys(toObject(it))}})},{"./_object-keys":86,"./_object-sap":88,"./_to-object":119}],202:[function(require,module,exports){var isObject=require("./_is-object"),meta=require("./_meta").onFreeze;require("./_object-sap")("preventExtensions",function($preventExtensions){return function preventExtensions(it){return $preventExtensions&&isObject(it)?$preventExtensions(meta(it)):it}})},{"./_is-object":59,"./_meta":72,"./_object-sap":88}],203:[function(require,module,exports){var isObject=require("./_is-object"),meta=require("./_meta").onFreeze;require("./_object-sap")("seal",function($seal){return function seal(it){return $seal&&isObject(it)?$seal(meta(it)):it}})},{"./_is-object":59,"./_meta":72,"./_object-sap":88}],204:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{setPrototypeOf:require("./_set-proto").set})},{"./_export":42,"./_set-proto":100}],205:[function(require,module,exports){"use strict";var classof=require("./_classof"),test={};test[require("./_wks")("toStringTag")]="z";if(test+""!="[object z]"){require("./_redefine")(Object.prototype,"toString",function toString(){return"[object "+classof(this)+"]"},true)}},{"./_classof":27,"./_redefine":97,"./_wks":127}],206:[function(require,module,exports){var $export=require("./_export"),$parseFloat=require("./_parse-float");$export($export.G+$export.F*(parseFloat!=$parseFloat),{parseFloat:$parseFloat})},{"./_export":42,"./_parse-float":91}],207:[function(require,module,exports){var $export=require("./_export"),$parseInt=require("./_parse-int");$export($export.G+$export.F*(parseInt!=$parseInt),{parseInt:$parseInt})},{"./_export":42,"./_parse-int":92}],208:[function(require,module,exports){"use strict";var LIBRARY=require("./_library"),global=require("./_global"),ctx=require("./_ctx"),classof=require("./_classof"),$export=require("./_export"),isObject=require("./_is-object"),aFunction=require("./_a-function"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),speciesConstructor=require("./_species-constructor"),task=require("./_task").set,microtask=require("./_microtask")(),PROMISE="Promise",TypeError=global.TypeError,process=global.process,$Promise=global[PROMISE],process=global.process,isNode=classof(process)=="process",empty=function(){},Internal,GenericPromiseCapability,Wrapper;var USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[require("./_wks")("species")]=function(exec){exec(empty,empty)};return(isNode||typeof PromiseRejectionEvent=="function")&&promise.then(empty)instanceof FakePromise}catch(e){}}();var sameConstructor=function(a,b){return a===b||a===$Promise&&b===Wrapper};var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)=="function"?then:false};var newPromiseCapability=function(C){return sameConstructor($Promise,C)?new PromiseCapability(C):new GenericPromiseCapability(C)};var PromiseCapability=GenericPromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError("Bad Promise constructor");resolve=$$resolve;reject=$$reject});this.resolve=aFunction(resolve);this.reject=aFunction(reject)};var perform=function(exec){try{exec()}catch(e){return{error:e}}};var notify=function(promise,isReject){if(promise._n)return;promise._n=true;var chain=promise._c;microtask(function(){var value=promise._v,ok=promise._s==1,i=0;var run=function(reaction){var handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain,result,then;try{if(handler){if(!ok){if(promise._h==2)onHandleUnhandled(promise);promise._h=1}if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain)domain.exit()}if(result===reaction.promise){reject(TypeError("Promise-chain cycle"))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else resolve(result)}else reject(value)}catch(e){reject(e)}};while(chain.length>i)run(chain[i++]);promise._c=[];promise._n=false;if(isReject&&!promise._h)onUnhandled(promise)})};var onUnhandled=function(promise){task.call(global,function(){var value=promise._v,abrupt,handler,console;if(isUnhandled(promise)){abrupt=perform(function(){if(isNode){process.emit("unhandledRejection",value,promise)}else if(handler=global.onunhandledrejection){handler({promise:promise,reason:value})}else if((console=global.console)&&console.error){console.error("Unhandled promise rejection",value)}});promise._h=isNode||isUnhandled(promise)?2:1}promise._a=undefined;if(abrupt)throw abrupt.error})};var isUnhandled=function(promise){if(promise._h==1)return false;var chain=promise._a||promise._c,i=0,reaction;while(chain.length>i){reaction=chain[i++];if(reaction.fail||!isUnhandled(reaction.promise))return false}return true};var onHandleUnhandled=function(promise){task.call(global,function(){var handler;if(isNode){process.emit("rejectionHandled",promise)}else if(handler=global.onrejectionhandled){handler({promise:promise,reason:promise._v})}})};var $reject=function(value){var promise=this;if(promise._d)return;promise._d=true;promise=promise._w||promise;promise._v=value;promise._s=2;if(!promise._a)promise._a=promise._c.slice();notify(promise,true)};var $resolve=function(value){var promise=this,then;if(promise._d)return;promise._d=true;promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");if(then=isThenable(value)){microtask(function(){var wrapper={_w:promise,_d:false};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}})}else{promise._v=value;promise._s=1;notify(promise,false)}}catch(e){$reject.call({_w:promise,_d:false},e)}};if(!USE_NATIVE){$Promise=function Promise(executor){anInstance(this,$Promise,PROMISE,"_h");aFunction(executor);Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}};Internal=function Promise(executor){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};Internal.prototype=require("./_redefine-all")($Promise.prototype,{then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));reaction.ok=typeof onFulfilled=="function"?onFulfilled:true;reaction.fail=typeof onRejected=="function"&&onRejected;reaction.domain=isNode?process.domain:undefined;this._c.push(reaction);if(this._a)this._a.push(reaction);if(this._s)notify(this,false);return reaction.promise},catch:function(onRejected){return this.then(undefined,onRejected)}});PromiseCapability=function(){var promise=new Internal;this.promise=promise;this.resolve=ctx($resolve,promise,1);this.reject=ctx($reject,promise,1)}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise
});require("./_set-to-string-tag")($Promise,PROMISE);require("./_set-species")(PROMISE);Wrapper=require("./_core")[PROMISE];$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=newPromiseCapability(this),$$reject=capability.reject;$$reject(r);return capability.promise}});$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function resolve(x){if(x instanceof $Promise&&sameConstructor(x.constructor,this))return x;var capability=newPromiseCapability(this),$$resolve=capability.resolve;$$resolve(x);return capability.promise}});$export($export.S+$export.F*!(USE_NATIVE&&require("./_iter-detect")(function(iter){$Promise.all(iter)["catch"](empty)})),PROMISE,{all:function all(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject;var abrupt=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,false,function(promise){var $index=index++,alreadyCalled=false;values.push(undefined);remaining++;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[$index]=value;--remaining||resolve(values)},reject)});--remaining||resolve(values)});if(abrupt)reject(abrupt.error);return capability.promise},race:function race(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject;var abrupt=perform(function(){forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject)})});if(abrupt)reject(abrupt.error);return capability.promise}})},{"./_a-function":13,"./_an-instance":16,"./_classof":27,"./_core":33,"./_ctx":35,"./_export":42,"./_for-of":47,"./_global":48,"./_is-object":59,"./_iter-detect":64,"./_library":68,"./_microtask":74,"./_redefine-all":96,"./_set-species":101,"./_set-to-string-tag":102,"./_species-constructor":105,"./_task":114,"./_wks":127}],209:[function(require,module,exports){var $export=require("./_export"),aFunction=require("./_a-function"),anObject=require("./_an-object"),rApply=(require("./_global").Reflect||{}).apply,fApply=Function.apply;$export($export.S+$export.F*!require("./_fails")(function(){rApply(function(){})}),"Reflect",{apply:function apply(target,thisArgument,argumentsList){var T=aFunction(target),L=anObject(argumentsList);return rApply?rApply(T,thisArgument,L):fApply.call(T,thisArgument,L)}})},{"./_a-function":13,"./_an-object":17,"./_export":42,"./_fails":44,"./_global":48}],210:[function(require,module,exports){var $export=require("./_export"),create=require("./_object-create"),aFunction=require("./_a-function"),anObject=require("./_an-object"),isObject=require("./_is-object"),fails=require("./_fails"),bind=require("./_bind"),rConstruct=(require("./_global").Reflect||{}).construct;var NEW_TARGET_BUG=fails(function(){function F(){}return!(rConstruct(function(){},[],F)instanceof F)});var ARGS_BUG=!fails(function(){rConstruct(function(){})});$export($export.S+$export.F*(NEW_TARGET_BUG||ARGS_BUG),"Reflect",{construct:function construct(Target,args){aFunction(Target);anObject(args);var newTarget=arguments.length<3?Target:aFunction(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return rConstruct(Target,args,newTarget);if(Target==newTarget){switch(args.length){case 0:return new Target;case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];$args.push.apply($args,args);return new(bind.apply(Target,$args))}var proto=newTarget.prototype,instance=create(isObject(proto)?proto:Object.prototype),result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance}})},{"./_a-function":13,"./_an-object":17,"./_bind":26,"./_export":42,"./_fails":44,"./_global":48,"./_is-object":59,"./_object-create":76}],211:[function(require,module,exports){var dP=require("./_object-dp"),$export=require("./_export"),anObject=require("./_an-object"),toPrimitive=require("./_to-primitive");$export($export.S+$export.F*require("./_fails")(function(){Reflect.defineProperty(dP.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function defineProperty(target,propertyKey,attributes){anObject(target);propertyKey=toPrimitive(propertyKey,true);anObject(attributes);try{dP.f(target,propertyKey,attributes);return true}catch(e){return false}}})},{"./_an-object":17,"./_export":42,"./_fails":44,"./_object-dp":77,"./_to-primitive":120}],212:[function(require,module,exports){var $export=require("./_export"),gOPD=require("./_object-gopd").f,anObject=require("./_an-object");$export($export.S,"Reflect",{deleteProperty:function deleteProperty(target,propertyKey){var desc=gOPD(anObject(target),propertyKey);return desc&&!desc.configurable?false:delete target[propertyKey]}})},{"./_an-object":17,"./_export":42,"./_object-gopd":80}],213:[function(require,module,exports){"use strict";var $export=require("./_export"),anObject=require("./_an-object");var Enumerate=function(iterated){this._t=anObject(iterated);this._i=0;var keys=this._k=[],key;for(key in iterated)keys.push(key)};require("./_iter-create")(Enumerate,"Object",function(){var that=this,keys=that._k,key;do{if(that._i>=keys.length)return{value:undefined,done:true}}while(!((key=keys[that._i++])in that._t));return{value:key,done:false}});$export($export.S,"Reflect",{enumerate:function enumerate(target){return new Enumerate(target)}})},{"./_an-object":17,"./_export":42,"./_iter-create":62}],214:[function(require,module,exports){var gOPD=require("./_object-gopd"),$export=require("./_export"),anObject=require("./_an-object");$export($export.S,"Reflect",{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return gOPD.f(anObject(target),propertyKey)}})},{"./_an-object":17,"./_export":42,"./_object-gopd":80}],215:[function(require,module,exports){var $export=require("./_export"),getProto=require("./_object-gpo"),anObject=require("./_an-object");$export($export.S,"Reflect",{getPrototypeOf:function getPrototypeOf(target){return getProto(anObject(target))}})},{"./_an-object":17,"./_export":42,"./_object-gpo":84}],216:[function(require,module,exports){var gOPD=require("./_object-gopd"),getPrototypeOf=require("./_object-gpo"),has=require("./_has"),$export=require("./_export"),isObject=require("./_is-object"),anObject=require("./_an-object");function get(target,propertyKey){var receiver=arguments.length<3?target:arguments[2],desc,proto;if(anObject(target)===receiver)return target[propertyKey];if(desc=gOPD.f(target,propertyKey))return has(desc,"value")?desc.value:desc.get!==undefined?desc.get.call(receiver):undefined;if(isObject(proto=getPrototypeOf(target)))return get(proto,propertyKey,receiver)}$export($export.S,"Reflect",{get:get})},{"./_an-object":17,"./_export":42,"./_has":49,"./_is-object":59,"./_object-gopd":80,"./_object-gpo":84}],217:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Reflect",{has:function has(target,propertyKey){return propertyKey in target}})},{"./_export":42}],218:[function(require,module,exports){var $export=require("./_export"),anObject=require("./_an-object"),$isExtensible=Object.isExtensible;$export($export.S,"Reflect",{isExtensible:function isExtensible(target){anObject(target);return $isExtensible?$isExtensible(target):true}})},{"./_an-object":17,"./_export":42}],219:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Reflect",{ownKeys:require("./_own-keys")})},{"./_export":42,"./_own-keys":90}],220:[function(require,module,exports){var $export=require("./_export"),anObject=require("./_an-object"),$preventExtensions=Object.preventExtensions;$export($export.S,"Reflect",{preventExtensions:function preventExtensions(target){anObject(target);try{if($preventExtensions)$preventExtensions(target);return true}catch(e){return false}}})},{"./_an-object":17,"./_export":42}],221:[function(require,module,exports){var $export=require("./_export"),setProto=require("./_set-proto");if(setProto)$export($export.S,"Reflect",{setPrototypeOf:function setPrototypeOf(target,proto){setProto.check(target,proto);try{setProto.set(target,proto);return true}catch(e){return false}}})},{"./_export":42,"./_set-proto":100}],222:[function(require,module,exports){var dP=require("./_object-dp"),gOPD=require("./_object-gopd"),getPrototypeOf=require("./_object-gpo"),has=require("./_has"),$export=require("./_export"),createDesc=require("./_property-desc"),anObject=require("./_an-object"),isObject=require("./_is-object");function set(target,propertyKey,V){var receiver=arguments.length<4?target:arguments[3],ownDesc=gOPD.f(anObject(target),propertyKey),existingDescriptor,proto;if(!ownDesc){if(isObject(proto=getPrototypeOf(target))){return set(proto,propertyKey,V,receiver)}ownDesc=createDesc(0)}if(has(ownDesc,"value")){if(ownDesc.writable===false||!isObject(receiver))return false;existingDescriptor=gOPD.f(receiver,propertyKey)||createDesc(0);existingDescriptor.value=V;dP.f(receiver,propertyKey,existingDescriptor);return true}return ownDesc.set===undefined?false:(ownDesc.set.call(receiver,V),true)}$export($export.S,"Reflect",{set:set})},{"./_an-object":17,"./_export":42,"./_has":49,"./_is-object":59,"./_object-dp":77,"./_object-gopd":80,"./_object-gpo":84,"./_property-desc":95}],223:[function(require,module,exports){var global=require("./_global"),inheritIfRequired=require("./_inherit-if-required"),dP=require("./_object-dp").f,gOPN=require("./_object-gopn").f,isRegExp=require("./_is-regexp"),$flags=require("./_flags"),$RegExp=global.RegExp,Base=$RegExp,proto=$RegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new $RegExp(re1)!==re1;if(require("./_descriptors")&&(!CORRECT_NEW||require("./_fails")(function(){re2[require("./_wks")("match")]=false;return $RegExp(re1)!=re1||$RegExp(re2)==re2||$RegExp(re1,"i")!="/a/i"}))){$RegExp=function RegExp(p,f){var tiRE=this instanceof $RegExp,piRE=isRegExp(p),fiU=f===undefined;return!tiRE&&piRE&&p.constructor===$RegExp&&fiU?p:inheritIfRequired(CORRECT_NEW?new Base(piRE&&!fiU?p.source:p,f):Base((piRE=p instanceof $RegExp)?p.source:p,piRE&&fiU?$flags.call(p):f),tiRE?this:proto,$RegExp)};var proxy=function(key){key in $RegExp||dP($RegExp,key,{configurable:true,get:function(){return Base[key]},set:function(it){Base[key]=it}})};for(var keys=gOPN(Base),i=0;keys.length>i;)proxy(keys[i++]);proto.constructor=$RegExp;$RegExp.prototype=proto;require("./_redefine")(global,"RegExp",$RegExp)}require("./_set-species")("RegExp")},{"./_descriptors":38,"./_fails":44,"./_flags":46,"./_global":48,"./_inherit-if-required":53,"./_is-regexp":60,"./_object-dp":77,"./_object-gopn":82,"./_redefine":97,"./_set-species":101,"./_wks":127}],224:[function(require,module,exports){if(require("./_descriptors")&&/./g.flags!="g")require("./_object-dp").f(RegExp.prototype,"flags",{configurable:true,get:require("./_flags")})},{"./_descriptors":38,"./_flags":46,"./_object-dp":77}],225:[function(require,module,exports){require("./_fix-re-wks")("match",1,function(defined,MATCH,$match){return[function match(regexp){"use strict";var O=defined(this),fn=regexp==undefined?undefined:regexp[MATCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},$match]})},{"./_fix-re-wks":45}],226:[function(require,module,exports){require("./_fix-re-wks")("replace",2,function(defined,REPLACE,$replace){return[function replace(searchValue,replaceValue){"use strict";var O=defined(this),fn=searchValue==undefined?undefined:searchValue[REPLACE];return fn!==undefined?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue)},$replace]})},{"./_fix-re-wks":45}],227:[function(require,module,exports){require("./_fix-re-wks")("search",1,function(defined,SEARCH,$search){return[function search(regexp){"use strict";var O=defined(this),fn=regexp==undefined?undefined:regexp[SEARCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},$search]})},{"./_fix-re-wks":45}],228:[function(require,module,exports){require("./_fix-re-wks")("split",2,function(defined,SPLIT,$split){"use strict";var isRegExp=require("./_is-regexp"),_split=$split,$push=[].push,$SPLIT="split",LENGTH="length",LAST_INDEX="lastIndex";if("abbc"[$SPLIT](/(b)*/)[1]=="c"||"test"[$SPLIT](/(?:)/,-1)[LENGTH]!=4||"ab"[$SPLIT](/(?:ab)*/)[LENGTH]!=2||"."[$SPLIT](/(.?)(.?)/)[LENGTH]!=4||"."[$SPLIT](/()()/)[LENGTH]>1||""[$SPLIT](/.?/)[LENGTH]){var NPCG=/()??/.exec("")[1]===undefined;$split=function(separator,limit){var string=String(this);if(separator===undefined&&limit===0)return[];if(!isRegExp(separator))return _split.call(string,separator,limit);var output=[];var flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":"");var lastLastIndex=0;var splitLimit=limit===undefined?4294967295:limit>>>0;var separatorCopy=new RegExp(separator.source,flags+"g");var separator2,match,lastIndex,lastLength,i;if(!NPCG)separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags);while(match=separatorCopy.exec(string)){lastIndex=match.index+match[0][LENGTH];if(lastIndex>lastLastIndex){output.push(string.slice(lastLastIndex,match.index));if(!NPCG&&match[LENGTH]>1)match[0].replace(separator2,function(){for(i=1;i<arguments[LENGTH]-2;i++)if(arguments[i]===undefined)match[i]=undefined});if(match[LENGTH]>1&&match.index<string[LENGTH])$push.apply(output,match.slice(1));lastLength=match[0][LENGTH];lastLastIndex=lastIndex;if(output[LENGTH]>=splitLimit)break}if(separatorCopy[LAST_INDEX]===match.index)separatorCopy[LAST_INDEX]++}if(lastLastIndex===string[LENGTH]){if(lastLength||!separatorCopy.test(""))output.push("")}else output.push(string.slice(lastLastIndex));return output[LENGTH]>splitLimit?output.slice(0,splitLimit):output}}else if("0"[$SPLIT](undefined,0)[LENGTH]){$split=function(separator,limit){return separator===undefined&&limit===0?[]:_split.call(this,separator,limit)}}return[function split(separator,limit){var O=defined(this),fn=separator==undefined?undefined:separator[SPLIT];return fn!==undefined?fn.call(separator,O,limit):$split.call(String(O),separator,limit)},$split]})},{"./_fix-re-wks":45,"./_is-regexp":60}],229:[function(require,module,exports){"use strict";require("./es6.regexp.flags");var anObject=require("./_an-object"),$flags=require("./_flags"),DESCRIPTORS=require("./_descriptors"),TO_STRING="toString",$toString=/./[TO_STRING];var define=function(fn){require("./_redefine")(RegExp.prototype,TO_STRING,fn,true)};if(require("./_fails")(function(){return $toString.call({source:"a",flags:"b"})!="/a/b"})){define(function toString(){var R=anObject(this);return"/".concat(R.source,"/","flags"in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):undefined)})}else if($toString.name!=TO_STRING){define(function toString(){return $toString.call(this)})}},{"./_an-object":17,"./_descriptors":38,"./_fails":44,"./_flags":46,"./_redefine":97,"./es6.regexp.flags":224}],230:[function(require,module,exports){"use strict";var strong=require("./_collection-strong");module.exports=require("./_collection")("Set",function(get){return function Set(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return strong.def(this,value=value===0?0:value,value)}},strong)},{"./_collection":32,"./_collection-strong":29}],231:[function(require,module,exports){"use strict";require("./_string-html")("anchor",function(createHTML){return function anchor(name){return createHTML(this,"a","name",name)}})},{"./_string-html":109}],232:[function(require,module,exports){"use strict";require("./_string-html")("big",function(createHTML){return function big(){return createHTML(this,"big","","")}})},{"./_string-html":109}],233:[function(require,module,exports){"use strict";require("./_string-html")("blink",function(createHTML){return function blink(){return createHTML(this,"blink","","")}})},{"./_string-html":109}],234:[function(require,module,exports){"use strict";require("./_string-html")("bold",function(createHTML){return function bold(){return createHTML(this,"b","","")}})},{"./_string-html":109}],235:[function(require,module,exports){"use strict";var $export=require("./_export"),$at=require("./_string-at")(false);$export($export.P,"String",{codePointAt:function codePointAt(pos){return $at(this,pos)}})},{"./_export":42,"./_string-at":107}],236:[function(require,module,exports){"use strict";var $export=require("./_export"),toLength=require("./_to-length"),context=require("./_string-context"),ENDS_WITH="endsWith",$endsWith=""[ENDS_WITH];$export($export.P+$export.F*require("./_fails-is-regexp")(ENDS_WITH),"String",{endsWith:function endsWith(searchString){var that=context(this,searchString,ENDS_WITH),endPosition=arguments.length>1?arguments[1]:undefined,len=toLength(that.length),end=endPosition===undefined?len:Math.min(toLength(endPosition),len),search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search}})},{"./_export":42,"./_fails-is-regexp":43,"./_string-context":108,"./_to-length":118}],237:[function(require,module,exports){"use strict";require("./_string-html")("fixed",function(createHTML){return function fixed(){return createHTML(this,"tt","","")}})},{"./_string-html":109}],238:[function(require,module,exports){"use strict";require("./_string-html")("fontcolor",function(createHTML){return function fontcolor(color){return createHTML(this,"font","color",color)}})},{"./_string-html":109}],239:[function(require,module,exports){"use strict";require("./_string-html")("fontsize",function(createHTML){return function fontsize(size){return createHTML(this,"font","size",size)}})},{"./_string-html":109}],240:[function(require,module,exports){var $export=require("./_export"),toIndex=require("./_to-index"),fromCharCode=String.fromCharCode,$fromCodePoint=String.fromCodePoint;$export($export.S+$export.F*(!!$fromCodePoint&&$fromCodePoint.length!=1),"String",{fromCodePoint:function fromCodePoint(x){var res=[],aLen=arguments.length,i=0,code;while(aLen>i){code=+arguments[i++];if(toIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(((code-=65536)>>10)+55296,code%1024+56320))}return res.join("")}})},{"./_export":42,"./_to-index":115}],241:[function(require,module,exports){"use strict";var $export=require("./_export"),context=require("./_string-context"),INCLUDES="includes";$export($export.P+$export.F*require("./_fails-is-regexp")(INCLUDES),"String",{includes:function includes(searchString){return!!~context(this,searchString,INCLUDES).indexOf(searchString,arguments.length>1?arguments[1]:undefined)}})},{"./_export":42,"./_fails-is-regexp":43,"./_string-context":108}],242:[function(require,module,exports){"use strict";require("./_string-html")("italics",function(createHTML){return function italics(){return createHTML(this,"i","","")}})},{"./_string-html":109}],243:[function(require,module,exports){"use strict";var $at=require("./_string-at")(true);require("./_iter-define")(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t,index=this._i,point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},{"./_iter-define":63,"./_string-at":107}],244:[function(require,module,exports){"use strict";require("./_string-html")("link",function(createHTML){return function link(url){return createHTML(this,"a","href",url)}})},{"./_string-html":109}],245:[function(require,module,exports){var $export=require("./_export"),toIObject=require("./_to-iobject"),toLength=require("./_to-length");$export($export.S,"String",{raw:function raw(callSite){var tpl=toIObject(callSite.raw),len=toLength(tpl.length),aLen=arguments.length,res=[],i=0;while(len>i){res.push(String(tpl[i++]));if(i<aLen)res.push(String(arguments[i]))}return res.join("")}})},{"./_export":42,"./_to-iobject":117,"./_to-length":118}],246:[function(require,module,exports){var $export=require("./_export");$export($export.P,"String",{repeat:require("./_string-repeat")})},{"./_export":42,"./_string-repeat":111}],247:[function(require,module,exports){"use strict";require("./_string-html")("small",function(createHTML){return function small(){return createHTML(this,"small","","")}})},{"./_string-html":109}],248:[function(require,module,exports){"use strict";var $export=require("./_export"),toLength=require("./_to-length"),context=require("./_string-context"),STARTS_WITH="startsWith",$startsWith=""[STARTS_WITH];$export($export.P+$export.F*require("./_fails-is-regexp")(STARTS_WITH),"String",{startsWith:function startsWith(searchString){var that=context(this,searchString,STARTS_WITH),index=toLength(Math.min(arguments.length>1?arguments[1]:undefined,that.length)),search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},{"./_export":42,"./_fails-is-regexp":43,"./_string-context":108,"./_to-length":118}],249:[function(require,module,exports){"use strict";require("./_string-html")("strike",function(createHTML){return function strike(){return createHTML(this,"strike","","")}})},{"./_string-html":109}],250:[function(require,module,exports){"use strict";require("./_string-html")("sub",function(createHTML){return function sub(){return createHTML(this,"sub","","")}})},{"./_string-html":109}],251:[function(require,module,exports){"use strict";require("./_string-html")("sup",function(createHTML){return function sup(){return createHTML(this,"sup","","")}})},{"./_string-html":109}],252:[function(require,module,exports){"use strict";require("./_string-trim")("trim",function($trim){return function trim(){return $trim(this,3)}})},{"./_string-trim":112}],253:[function(require,module,exports){"use strict";var global=require("./_global"),has=require("./_has"),DESCRIPTORS=require("./_descriptors"),$export=require("./_export"),redefine=require("./_redefine"),META=require("./_meta").KEY,$fails=require("./_fails"),shared=require("./_shared"),setToStringTag=require("./_set-to-string-tag"),uid=require("./_uid"),wks=require("./_wks"),wksExt=require("./_wks-ext"),wksDefine=require("./_wks-define"),keyOf=require("./_keyof"),enumKeys=require("./_enum-keys"),isArray=require("./_is-array"),anObject=require("./_an-object"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),createDesc=require("./_property-desc"),_create=require("./_object-create"),gOPNExt=require("./_object-gopn-ext"),$GOPD=require("./_object-gopd"),$DP=require("./_object-dp"),$keys=require("./_object-keys"),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE=typeof $Symbol=="function",QObject=global.QObject;var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc)}:dP;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);sym._k=tag;return sym};var isSymbol=USE_NATIVE&&typeof $Symbol.iterator=="symbol"?function(it){return typeof it=="symbol"}:function(it){return it instanceof $Symbol};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))dP(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return dP(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P)),i=0,l=keys.length,key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,true));if(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIObject(it);key=toPrimitive(key,true);if(it===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(toIObject(it)),result=[],i=0,key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key)}return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto,names=gOPN(IS_OP?OPSymbols:toIObject(it)),result=[],i=0,key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectProto,key):true))result.push(AllSymbols[key])}return result};if(!USE_NATIVE){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:undefined);var $set=function(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))};if(DESCRIPTORS&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag)};redefine($Symbol[PROTOTYPE],"toString",function toString(){return this._k});$GOPD.f=$getOwnPropertyDescriptor;$DP.f=$defineProperty;require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames;require("./_object-pie").f=$propertyIsEnumerable;require("./_object-gops").f=$getOwnPropertySymbols;if(DESCRIPTORS&&!require("./_library")){redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}wksExt.f=function(name){return wrap(wks(name))}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),i=0;symbols.length>i;)wks(symbols[i++]);for(var symbols=$keys(wks.store),i=0;symbols.length>i;)wksDefine(symbols[i++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(key){if(isSymbol(key))return keyOf(SymbolRegistry,key);throw TypeError(key+" is not a symbol!")},useSetter:function(){setter=true},useSimple:function(){setter=false}});$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"})),"JSON",{stringify:function stringify(it){if(it===undefined||isSymbol(it))return;var args=[it],i=1,replacer,$replacer;while(arguments.length>i)args.push(arguments[i++]);replacer=args[1];if(typeof replacer=="function")$replacer=replacer;if($replacer||!isArray(replacer))replacer=function(key,value){if($replacer)value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||require("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",true);setToStringTag(global.JSON,"JSON",true)},{"./_an-object":17,"./_descriptors":38,"./_enum-keys":41,"./_export":42,"./_fails":44,"./_global":48,"./_has":49,"./_hide":50,"./_is-array":57,"./_keyof":67,"./_library":68,"./_meta":72,"./_object-create":76,"./_object-dp":77,"./_object-gopd":80,"./_object-gopn":82,"./_object-gopn-ext":81,"./_object-gops":83,"./_object-keys":86,"./_object-pie":87,"./_property-desc":95,"./_redefine":97,"./_set-to-string-tag":102,"./_shared":104,"./_to-iobject":117,"./_to-primitive":120,"./_uid":124,"./_wks":127,"./_wks-define":125,"./_wks-ext":126}],254:[function(require,module,exports){"use strict";var $export=require("./_export"),$typed=require("./_typed"),buffer=require("./_typed-buffer"),anObject=require("./_an-object"),toIndex=require("./_to-index"),toLength=require("./_to-length"),isObject=require("./_is-object"),ArrayBuffer=require("./_global").ArrayBuffer,speciesConstructor=require("./_species-constructor"),$ArrayBuffer=buffer.ArrayBuffer,$DataView=buffer.DataView,$isView=$typed.ABV&&ArrayBuffer.isView,$slice=$ArrayBuffer.prototype.slice,VIEW=$typed.VIEW,ARRAY_BUFFER="ArrayBuffer";$export($export.G+$export.W+$export.F*(ArrayBuffer!==$ArrayBuffer),{ArrayBuffer:$ArrayBuffer});$export($export.S+$export.F*!$typed.CONSTR,ARRAY_BUFFER,{isView:function isView(it){return $isView&&$isView(it)||isObject(it)&&VIEW in it}});$export($export.P+$export.U+$export.F*require("./_fails")(function(){return!new $ArrayBuffer(2).slice(1,undefined).byteLength}),ARRAY_BUFFER,{slice:function slice(start,end){if($slice!==undefined&&end===undefined)return $slice.call(anObject(this),start);var len=anObject(this).byteLength,first=toIndex(start,len),final=toIndex(end===undefined?len:end,len),result=new(speciesConstructor(this,$ArrayBuffer))(toLength(final-first)),viewS=new $DataView(this),viewT=new $DataView(result),index=0;while(first<final){viewT.setUint8(index++,viewS.getUint8(first++))}return result}});require("./_set-species")(ARRAY_BUFFER)},{"./_an-object":17,"./_export":42,"./_fails":44,"./_global":48,"./_is-object":59,"./_set-species":101,"./_species-constructor":105,"./_to-index":115,"./_to-length":118,"./_typed":123,"./_typed-buffer":122}],255:[function(require,module,exports){var $export=require("./_export");$export($export.G+$export.W+$export.F*!require("./_typed").ABV,{DataView:require("./_typed-buffer").DataView})},{"./_export":42,"./_typed":123,"./_typed-buffer":122}],256:[function(require,module,exports){require("./_typed-array")("Float32",4,function(init){return function Float32Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":121}],257:[function(require,module,exports){require("./_typed-array")("Float64",8,function(init){return function Float64Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":121}],258:[function(require,module,exports){require("./_typed-array")("Int16",2,function(init){return function Int16Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":121}],259:[function(require,module,exports){require("./_typed-array")("Int32",4,function(init){return function Int32Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":121}],260:[function(require,module,exports){require("./_typed-array")("Int8",1,function(init){return function Int8Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":121}],261:[function(require,module,exports){require("./_typed-array")("Uint16",2,function(init){return function Uint16Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":121}],262:[function(require,module,exports){require("./_typed-array")("Uint32",4,function(init){return function Uint32Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":121}],263:[function(require,module,exports){
require("./_typed-array")("Uint8",1,function(init){return function Uint8Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":121}],264:[function(require,module,exports){require("./_typed-array")("Uint8",1,function(init){return function Uint8ClampedArray(data,byteOffset,length){return init(this,data,byteOffset,length)}},true)},{"./_typed-array":121}],265:[function(require,module,exports){"use strict";var each=require("./_array-methods")(0),redefine=require("./_redefine"),meta=require("./_meta"),assign=require("./_object-assign"),weak=require("./_collection-weak"),isObject=require("./_is-object"),getWeak=meta.getWeak,isExtensible=Object.isExtensible,uncaughtFrozenStore=weak.ufstore,tmp={},InternalMap;var wrapper=function(get){return function WeakMap(){return get(this,arguments.length>0?arguments[0]:undefined)}};var methods={get:function get(key){if(isObject(key)){var data=getWeak(key);if(data===true)return uncaughtFrozenStore(this).get(key);return data?data[this._i]:undefined}},set:function set(key,value){return weak.def(this,key,value)}};var $WeakMap=module.exports=require("./_collection")("WeakMap",wrapper,methods,weak,true,true);if((new $WeakMap).set((Object.freeze||Object)(tmp),7).get(tmp)!=7){InternalMap=weak.getConstructor(wrapper);assign(InternalMap.prototype,methods);meta.NEED=true;each(["delete","has","get","set"],function(key){var proto=$WeakMap.prototype,method=proto[key];redefine(proto,key,function(a,b){if(isObject(a)&&!isExtensible(a)){if(!this._f)this._f=new InternalMap;var result=this._f[key](a,b);return key=="set"?this:result}return method.call(this,a,b)})})}},{"./_array-methods":22,"./_collection":32,"./_collection-weak":31,"./_is-object":59,"./_meta":72,"./_object-assign":75,"./_redefine":97}],266:[function(require,module,exports){"use strict";var weak=require("./_collection-weak");require("./_collection")("WeakSet",function(get){return function WeakSet(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return weak.def(this,value,true)}},weak,false,true)},{"./_collection":32,"./_collection-weak":31}],267:[function(require,module,exports){"use strict";var $export=require("./_export"),$includes=require("./_array-includes")(true);$export($export.P,"Array",{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:undefined)}});require("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":15,"./_array-includes":21,"./_export":42}],268:[function(require,module,exports){var $export=require("./_export"),microtask=require("./_microtask")(),process=require("./_global").process,isNode=require("./_cof")(process)=="process";$export($export.G,{asap:function asap(fn){var domain=isNode&&process.domain;microtask(domain?domain.bind(fn):fn)}})},{"./_cof":28,"./_export":42,"./_global":48,"./_microtask":74}],269:[function(require,module,exports){var $export=require("./_export"),cof=require("./_cof");$export($export.S,"Error",{isError:function isError(it){return cof(it)==="Error"}})},{"./_cof":28,"./_export":42}],270:[function(require,module,exports){var $export=require("./_export");$export($export.P+$export.R,"Map",{toJSON:require("./_collection-to-json")("Map")})},{"./_collection-to-json":30,"./_export":42}],271:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{iaddh:function iaddh(x0,x1,y0,y1){var $x0=x0>>>0,$x1=x1>>>0,$y0=y0>>>0;return $x1+(y1>>>0)+(($x0&$y0|($x0|$y0)&~($x0+$y0>>>0))>>>31)|0}})},{"./_export":42}],272:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{imulh:function imulh(u,v){var UINT16=65535,$u=+u,$v=+v,u0=$u&UINT16,v0=$v&UINT16,u1=$u>>16,v1=$v>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>16)+((u0*v1>>>0)+(t&UINT16)>>16)}})},{"./_export":42}],273:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{isubh:function isubh(x0,x1,y0,y1){var $x0=x0>>>0,$x1=x1>>>0,$y0=y0>>>0;return $x1-(y1>>>0)-((~$x0&$y0|~($x0^$y0)&$x0-$y0>>>0)>>>31)|0}})},{"./_export":42}],274:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{umulh:function umulh(u,v){var UINT16=65535,$u=+u,$v=+v,u0=$u&UINT16,v0=$v&UINT16,u1=$u>>>16,v1=$v>>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>>16)+((u0*v1>>>0)+(t&UINT16)>>>16)}})},{"./_export":42}],275:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),aFunction=require("./_a-function"),$defineProperty=require("./_object-dp");require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__defineGetter__:function __defineGetter__(P,getter){$defineProperty.f(toObject(this),P,{get:aFunction(getter),enumerable:true,configurable:true})}})},{"./_a-function":13,"./_descriptors":38,"./_export":42,"./_object-dp":77,"./_object-forced-pam":79,"./_to-object":119}],276:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),aFunction=require("./_a-function"),$defineProperty=require("./_object-dp");require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__defineSetter__:function __defineSetter__(P,setter){$defineProperty.f(toObject(this),P,{set:aFunction(setter),enumerable:true,configurable:true})}})},{"./_a-function":13,"./_descriptors":38,"./_export":42,"./_object-dp":77,"./_object-forced-pam":79,"./_to-object":119}],277:[function(require,module,exports){var $export=require("./_export"),$entries=require("./_object-to-array")(true);$export($export.S,"Object",{entries:function entries(it){return $entries(it)}})},{"./_export":42,"./_object-to-array":89}],278:[function(require,module,exports){var $export=require("./_export"),ownKeys=require("./_own-keys"),toIObject=require("./_to-iobject"),gOPD=require("./_object-gopd"),createProperty=require("./_create-property");$export($export.S,"Object",{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(object){var O=toIObject(object),getDesc=gOPD.f,keys=ownKeys(O),result={},i=0,key;while(keys.length>i)createProperty(result,key=keys[i++],getDesc(O,key));return result}})},{"./_create-property":34,"./_export":42,"./_object-gopd":80,"./_own-keys":90,"./_to-iobject":117}],279:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),toPrimitive=require("./_to-primitive"),getPrototypeOf=require("./_object-gpo"),getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__lookupGetter__:function __lookupGetter__(P){var O=toObject(this),K=toPrimitive(P,true),D;do{if(D=getOwnPropertyDescriptor(O,K))return D.get}while(O=getPrototypeOf(O))}})},{"./_descriptors":38,"./_export":42,"./_object-forced-pam":79,"./_object-gopd":80,"./_object-gpo":84,"./_to-object":119,"./_to-primitive":120}],280:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),toPrimitive=require("./_to-primitive"),getPrototypeOf=require("./_object-gpo"),getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__lookupSetter__:function __lookupSetter__(P){var O=toObject(this),K=toPrimitive(P,true),D;do{if(D=getOwnPropertyDescriptor(O,K))return D.set}while(O=getPrototypeOf(O))}})},{"./_descriptors":38,"./_export":42,"./_object-forced-pam":79,"./_object-gopd":80,"./_object-gpo":84,"./_to-object":119,"./_to-primitive":120}],281:[function(require,module,exports){var $export=require("./_export"),$values=require("./_object-to-array")(false);$export($export.S,"Object",{values:function values(it){return $values(it)}})},{"./_export":42,"./_object-to-array":89}],282:[function(require,module,exports){"use strict";var $export=require("./_export"),global=require("./_global"),core=require("./_core"),microtask=require("./_microtask")(),OBSERVABLE=require("./_wks")("observable"),aFunction=require("./_a-function"),anObject=require("./_an-object"),anInstance=require("./_an-instance"),redefineAll=require("./_redefine-all"),hide=require("./_hide"),forOf=require("./_for-of"),RETURN=forOf.RETURN;var getMethod=function(fn){return fn==null?undefined:aFunction(fn)};var cleanupSubscription=function(subscription){var cleanup=subscription._c;if(cleanup){subscription._c=undefined;cleanup()}};var subscriptionClosed=function(subscription){return subscription._o===undefined};var closeSubscription=function(subscription){if(!subscriptionClosed(subscription)){subscription._o=undefined;cleanupSubscription(subscription)}};var Subscription=function(observer,subscriber){anObject(observer);this._c=undefined;this._o=observer;observer=new SubscriptionObserver(this);try{var cleanup=subscriber(observer),subscription=cleanup;if(cleanup!=null){if(typeof cleanup.unsubscribe==="function")cleanup=function(){subscription.unsubscribe()};else aFunction(cleanup);this._c=cleanup}}catch(e){observer.error(e);return}if(subscriptionClosed(this))cleanupSubscription(this)};Subscription.prototype=redefineAll({},{unsubscribe:function unsubscribe(){closeSubscription(this)}});var SubscriptionObserver=function(subscription){this._s=subscription};SubscriptionObserver.prototype=redefineAll({},{next:function next(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;try{var m=getMethod(observer.next);if(m)return m.call(observer,value)}catch(e){try{closeSubscription(subscription)}finally{throw e}}}},error:function error(value){var subscription=this._s;if(subscriptionClosed(subscription))throw value;var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.error);if(!m)throw value;value=m.call(observer,value)}catch(e){try{cleanupSubscription(subscription)}finally{throw e}}cleanupSubscription(subscription);return value},complete:function complete(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.complete);value=m?m.call(observer,value):undefined}catch(e){try{cleanupSubscription(subscription)}finally{throw e}}cleanupSubscription(subscription);return value}}});var $Observable=function Observable(subscriber){anInstance(this,$Observable,"Observable","_f")._f=aFunction(subscriber)};redefineAll($Observable.prototype,{subscribe:function subscribe(observer){return new Subscription(observer,this._f)},forEach:function forEach(fn){var that=this;return new(core.Promise||global.Promise)(function(resolve,reject){aFunction(fn);var subscription=that.subscribe({next:function(value){try{return fn(value)}catch(e){reject(e);subscription.unsubscribe()}},error:reject,complete:resolve})})}});redefineAll($Observable,{from:function from(x){var C=typeof this==="function"?this:$Observable;var method=getMethod(anObject(x)[OBSERVABLE]);if(method){var observable=anObject(method.call(x));return observable.constructor===C?observable:new C(function(observer){return observable.subscribe(observer)})}return new C(function(observer){var done=false;microtask(function(){if(!done){try{if(forOf(x,false,function(it){observer.next(it);if(done)return RETURN})===RETURN)return}catch(e){if(done)throw e;observer.error(e);return}observer.complete()}});return function(){done=true}})},of:function of(){for(var i=0,l=arguments.length,items=Array(l);i<l;)items[i]=arguments[i++];return new(typeof this==="function"?this:$Observable)(function(observer){var done=false;microtask(function(){if(!done){for(var i=0;i<items.length;++i){observer.next(items[i]);if(done)return}observer.complete()}});return function(){done=true}})}});hide($Observable.prototype,OBSERVABLE,function(){return this});$export($export.G,{Observable:$Observable});require("./_set-species")("Observable")},{"./_a-function":13,"./_an-instance":16,"./_an-object":17,"./_core":33,"./_export":42,"./_for-of":47,"./_global":48,"./_hide":50,"./_microtask":74,"./_redefine-all":96,"./_set-species":101,"./_wks":127}],283:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),toMetaKey=metadata.key,ordinaryDefineOwnMetadata=metadata.set;metadata.exp({defineMetadata:function defineMetadata(metadataKey,metadataValue,target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,anObject(target),toMetaKey(targetKey))}})},{"./_an-object":17,"./_metadata":73}],284:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),toMetaKey=metadata.key,getOrCreateMetadataMap=metadata.map,store=metadata.store;metadata.exp({deleteMetadata:function deleteMetadata(metadataKey,target){var targetKey=arguments.length<3?undefined:toMetaKey(arguments[2]),metadataMap=getOrCreateMetadataMap(anObject(target),targetKey,false);if(metadataMap===undefined||!metadataMap["delete"](metadataKey))return false;if(metadataMap.size)return true;var targetMetadata=store.get(target);targetMetadata["delete"](targetKey);return!!targetMetadata.size||store["delete"](target)}})},{"./_an-object":17,"./_metadata":73}],285:[function(require,module,exports){var Set=require("./es6.set"),from=require("./_array-from-iterable"),metadata=require("./_metadata"),anObject=require("./_an-object"),getPrototypeOf=require("./_object-gpo"),ordinaryOwnMetadataKeys=metadata.keys,toMetaKey=metadata.key;var ordinaryMetadataKeys=function(O,P){var oKeys=ordinaryOwnMetadataKeys(O,P),parent=getPrototypeOf(O);if(parent===null)return oKeys;var pKeys=ordinaryMetadataKeys(parent,P);return pKeys.length?oKeys.length?from(new Set(oKeys.concat(pKeys))):pKeys:oKeys};metadata.exp({getMetadataKeys:function getMetadataKeys(target){return ordinaryMetadataKeys(anObject(target),arguments.length<2?undefined:toMetaKey(arguments[1]))}})},{"./_an-object":17,"./_array-from-iterable":20,"./_metadata":73,"./_object-gpo":84,"./es6.set":230}],286:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),getPrototypeOf=require("./_object-gpo"),ordinaryHasOwnMetadata=metadata.has,ordinaryGetOwnMetadata=metadata.get,toMetaKey=metadata.key;var ordinaryGetMetadata=function(MetadataKey,O,P){var hasOwn=ordinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return ordinaryGetOwnMetadata(MetadataKey,O,P);var parent=getPrototypeOf(O);return parent!==null?ordinaryGetMetadata(MetadataKey,parent,P):undefined};metadata.exp({getMetadata:function getMetadata(metadataKey,target){return ordinaryGetMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]))}})},{"./_an-object":17,"./_metadata":73,"./_object-gpo":84}],287:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),ordinaryOwnMetadataKeys=metadata.keys,toMetaKey=metadata.key;metadata.exp({getOwnMetadataKeys:function getOwnMetadataKeys(target){return ordinaryOwnMetadataKeys(anObject(target),arguments.length<2?undefined:toMetaKey(arguments[1]))}})},{"./_an-object":17,"./_metadata":73}],288:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),ordinaryGetOwnMetadata=metadata.get,toMetaKey=metadata.key;metadata.exp({getOwnMetadata:function getOwnMetadata(metadataKey,target){return ordinaryGetOwnMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]))}})},{"./_an-object":17,"./_metadata":73}],289:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),getPrototypeOf=require("./_object-gpo"),ordinaryHasOwnMetadata=metadata.has,toMetaKey=metadata.key;var ordinaryHasMetadata=function(MetadataKey,O,P){var hasOwn=ordinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return true;var parent=getPrototypeOf(O);return parent!==null?ordinaryHasMetadata(MetadataKey,parent,P):false};metadata.exp({hasMetadata:function hasMetadata(metadataKey,target){return ordinaryHasMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]))}})},{"./_an-object":17,"./_metadata":73,"./_object-gpo":84}],290:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),ordinaryHasOwnMetadata=metadata.has,toMetaKey=metadata.key;metadata.exp({hasOwnMetadata:function hasOwnMetadata(metadataKey,target){return ordinaryHasOwnMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]))}})},{"./_an-object":17,"./_metadata":73}],291:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),aFunction=require("./_a-function"),toMetaKey=metadata.key,ordinaryDefineOwnMetadata=metadata.set;metadata.exp({metadata:function metadata(metadataKey,metadataValue){return function decorator(target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,(targetKey!==undefined?anObject:aFunction)(target),toMetaKey(targetKey))}}})},{"./_a-function":13,"./_an-object":17,"./_metadata":73}],292:[function(require,module,exports){var $export=require("./_export");$export($export.P+$export.R,"Set",{toJSON:require("./_collection-to-json")("Set")})},{"./_collection-to-json":30,"./_export":42}],293:[function(require,module,exports){"use strict";var $export=require("./_export"),$at=require("./_string-at")(true);$export($export.P,"String",{at:function at(pos){return $at(this,pos)}})},{"./_export":42,"./_string-at":107}],294:[function(require,module,exports){"use strict";var $export=require("./_export"),defined=require("./_defined"),toLength=require("./_to-length"),isRegExp=require("./_is-regexp"),getFlags=require("./_flags"),RegExpProto=RegExp.prototype;var $RegExpStringIterator=function(regexp,string){this._r=regexp;this._s=string};require("./_iter-create")($RegExpStringIterator,"RegExp String",function next(){var match=this._r.exec(this._s);return{value:match,done:match===null}});$export($export.P,"String",{matchAll:function matchAll(regexp){defined(this);if(!isRegExp(regexp))throw TypeError(regexp+" is not a regexp!");var S=String(this),flags="flags"in RegExpProto?String(regexp.flags):getFlags.call(regexp),rx=new RegExp(regexp.source,~flags.indexOf("g")?flags:"g"+flags);rx.lastIndex=toLength(regexp.lastIndex);return new $RegExpStringIterator(rx,S)}})},{"./_defined":37,"./_export":42,"./_flags":46,"./_is-regexp":60,"./_iter-create":62,"./_to-length":118}],295:[function(require,module,exports){"use strict";var $export=require("./_export"),$pad=require("./_string-pad");$export($export.P,"String",{padEnd:function padEnd(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,false)}})},{"./_export":42,"./_string-pad":110}],296:[function(require,module,exports){"use strict";var $export=require("./_export"),$pad=require("./_string-pad");$export($export.P,"String",{padStart:function padStart(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,true)}})},{"./_export":42,"./_string-pad":110}],297:[function(require,module,exports){"use strict";require("./_string-trim")("trimLeft",function($trim){return function trimLeft(){return $trim(this,1)}},"trimStart")},{"./_string-trim":112}],298:[function(require,module,exports){"use strict";require("./_string-trim")("trimRight",function($trim){return function trimRight(){return $trim(this,2)}},"trimEnd")},{"./_string-trim":112}],299:[function(require,module,exports){require("./_wks-define")("asyncIterator")},{"./_wks-define":125}],300:[function(require,module,exports){require("./_wks-define")("observable")},{"./_wks-define":125}],301:[function(require,module,exports){var $export=require("./_export");$export($export.S,"System",{global:require("./_global")})},{"./_export":42,"./_global":48}],302:[function(require,module,exports){var $iterators=require("./es6.array.iterator"),redefine=require("./_redefine"),global=require("./_global"),hide=require("./_hide"),Iterators=require("./_iterators"),wks=require("./_wks"),ITERATOR=wks("iterator"),TO_STRING_TAG=wks("toStringTag"),ArrayValues=Iterators.Array;for(var collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i=0;i<5;i++){var NAME=collections[i],Collection=global[NAME],proto=Collection&&Collection.prototype,key;if(proto){if(!proto[ITERATOR])hide(proto,ITERATOR,ArrayValues);if(!proto[TO_STRING_TAG])hide(proto,TO_STRING_TAG,NAME);Iterators[NAME]=ArrayValues;for(key in $iterators)if(!proto[key])redefine(proto,key,$iterators[key],true)}}},{"./_global":48,"./_hide":50,"./_iterators":66,"./_redefine":97,"./_wks":127,"./es6.array.iterator":140}],303:[function(require,module,exports){var $export=require("./_export"),$task=require("./_task");$export($export.G+$export.B,{setImmediate:$task.set,clearImmediate:$task.clear})},{"./_export":42,"./_task":114}],304:[function(require,module,exports){var global=require("./_global"),$export=require("./_export"),invoke=require("./_invoke"),partial=require("./_partial"),navigator=global.navigator,MSIE=!!navigator&&/MSIE .\./.test(navigator.userAgent);var wrap=function(set){return MSIE?function(fn,time){return set(invoke(partial,[].slice.call(arguments,2),typeof fn=="function"?fn:Function(fn)),time)}:set};$export($export.G+$export.B+$export.F*MSIE,{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)})},{"./_export":42,"./_global":48,"./_invoke":54,"./_partial":93}],305:[function(require,module,exports){require("./modules/es6.symbol");require("./modules/es6.object.create");require("./modules/es6.object.define-property");require("./modules/es6.object.define-properties");require("./modules/es6.object.get-own-property-descriptor");require("./modules/es6.object.get-prototype-of");require("./modules/es6.object.keys");require("./modules/es6.object.get-own-property-names");require("./modules/es6.object.freeze");require("./modules/es6.object.seal");require("./modules/es6.object.prevent-extensions");require("./modules/es6.object.is-frozen");require("./modules/es6.object.is-sealed");require("./modules/es6.object.is-extensible");require("./modules/es6.object.assign");require("./modules/es6.object.is");require("./modules/es6.object.set-prototype-of");require("./modules/es6.object.to-string");require("./modules/es6.function.bind");require("./modules/es6.function.name");require("./modules/es6.function.has-instance");require("./modules/es6.parse-int");require("./modules/es6.parse-float");require("./modules/es6.number.constructor");require("./modules/es6.number.to-fixed");require("./modules/es6.number.to-precision");require("./modules/es6.number.epsilon");require("./modules/es6.number.is-finite");require("./modules/es6.number.is-integer");require("./modules/es6.number.is-nan");require("./modules/es6.number.is-safe-integer");require("./modules/es6.number.max-safe-integer");require("./modules/es6.number.min-safe-integer");require("./modules/es6.number.parse-float");require("./modules/es6.number.parse-int");require("./modules/es6.math.acosh");require("./modules/es6.math.asinh");require("./modules/es6.math.atanh");require("./modules/es6.math.cbrt");require("./modules/es6.math.clz32");require("./modules/es6.math.cosh");require("./modules/es6.math.expm1");require("./modules/es6.math.fround");require("./modules/es6.math.hypot");require("./modules/es6.math.imul");require("./modules/es6.math.log10");require("./modules/es6.math.log1p");require("./modules/es6.math.log2");require("./modules/es6.math.sign");require("./modules/es6.math.sinh");require("./modules/es6.math.tanh");require("./modules/es6.math.trunc");require("./modules/es6.string.from-code-point");require("./modules/es6.string.raw");require("./modules/es6.string.trim");require("./modules/es6.string.iterator");require("./modules/es6.string.code-point-at");require("./modules/es6.string.ends-with");require("./modules/es6.string.includes");require("./modules/es6.string.repeat");require("./modules/es6.string.starts-with");require("./modules/es6.string.anchor");require("./modules/es6.string.big");require("./modules/es6.string.blink");require("./modules/es6.string.bold");require("./modules/es6.string.fixed");require("./modules/es6.string.fontcolor");require("./modules/es6.string.fontsize");require("./modules/es6.string.italics");require("./modules/es6.string.link");require("./modules/es6.string.small");require("./modules/es6.string.strike");require("./modules/es6.string.sub");require("./modules/es6.string.sup");require("./modules/es6.date.now");require("./modules/es6.date.to-json");require("./modules/es6.date.to-iso-string");require("./modules/es6.date.to-string");require("./modules/es6.date.to-primitive");require("./modules/es6.array.is-array");require("./modules/es6.array.from");require("./modules/es6.array.of");require("./modules/es6.array.join");require("./modules/es6.array.slice");require("./modules/es6.array.sort");require("./modules/es6.array.for-each");require("./modules/es6.array.map");require("./modules/es6.array.filter");require("./modules/es6.array.some");require("./modules/es6.array.every");require("./modules/es6.array.reduce");require("./modules/es6.array.reduce-right");require("./modules/es6.array.index-of");require("./modules/es6.array.last-index-of");require("./modules/es6.array.copy-within");require("./modules/es6.array.fill");require("./modules/es6.array.find");require("./modules/es6.array.find-index");require("./modules/es6.array.species");require("./modules/es6.array.iterator");require("./modules/es6.regexp.constructor");require("./modules/es6.regexp.to-string");require("./modules/es6.regexp.flags");require("./modules/es6.regexp.match");require("./modules/es6.regexp.replace");require("./modules/es6.regexp.search");require("./modules/es6.regexp.split");require("./modules/es6.promise");require("./modules/es6.map");require("./modules/es6.set");require("./modules/es6.weak-map");require("./modules/es6.weak-set");require("./modules/es6.typed.array-buffer");require("./modules/es6.typed.data-view");require("./modules/es6.typed.int8-array");require("./modules/es6.typed.uint8-array");require("./modules/es6.typed.uint8-clamped-array");require("./modules/es6.typed.int16-array");require("./modules/es6.typed.uint16-array");require("./modules/es6.typed.int32-array");require("./modules/es6.typed.uint32-array");require("./modules/es6.typed.float32-array");require("./modules/es6.typed.float64-array");require("./modules/es6.reflect.apply");require("./modules/es6.reflect.construct");require("./modules/es6.reflect.define-property");require("./modules/es6.reflect.delete-property");require("./modules/es6.reflect.enumerate");require("./modules/es6.reflect.get");require("./modules/es6.reflect.get-own-property-descriptor");require("./modules/es6.reflect.get-prototype-of");require("./modules/es6.reflect.has");require("./modules/es6.reflect.is-extensible");require("./modules/es6.reflect.own-keys");require("./modules/es6.reflect.prevent-extensions");require("./modules/es6.reflect.set");require("./modules/es6.reflect.set-prototype-of");require("./modules/es7.array.includes");require("./modules/es7.string.at");require("./modules/es7.string.pad-start");require("./modules/es7.string.pad-end");require("./modules/es7.string.trim-left");require("./modules/es7.string.trim-right");require("./modules/es7.string.match-all");require("./modules/es7.symbol.async-iterator");require("./modules/es7.symbol.observable");require("./modules/es7.object.get-own-property-descriptors");require("./modules/es7.object.values");require("./modules/es7.object.entries");require("./modules/es7.object.define-getter");require("./modules/es7.object.define-setter");require("./modules/es7.object.lookup-getter");require("./modules/es7.object.lookup-setter");require("./modules/es7.map.to-json");require("./modules/es7.set.to-json");require("./modules/es7.system.global");require("./modules/es7.error.is-error");require("./modules/es7.math.iaddh");require("./modules/es7.math.isubh");require("./modules/es7.math.imulh");require("./modules/es7.math.umulh");require("./modules/es7.reflect.define-metadata");require("./modules/es7.reflect.delete-metadata");require("./modules/es7.reflect.get-metadata");require("./modules/es7.reflect.get-metadata-keys");require("./modules/es7.reflect.get-own-metadata");require("./modules/es7.reflect.get-own-metadata-keys");require("./modules/es7.reflect.has-metadata");require("./modules/es7.reflect.has-own-metadata");require("./modules/es7.reflect.metadata");require("./modules/es7.asap");require("./modules/es7.observable");require("./modules/web.timers");require("./modules/web.immediate");require("./modules/web.dom.iterable");module.exports=require("./modules/_core")},{"./modules/_core":33,"./modules/es6.array.copy-within":130,"./modules/es6.array.every":131,"./modules/es6.array.fill":132,"./modules/es6.array.filter":133,"./modules/es6.array.find":135,"./modules/es6.array.find-index":134,"./modules/es6.array.for-each":136,"./modules/es6.array.from":137,"./modules/es6.array.index-of":138,"./modules/es6.array.is-array":139,"./modules/es6.array.iterator":140,"./modules/es6.array.join":141,"./modules/es6.array.last-index-of":142,"./modules/es6.array.map":143,"./modules/es6.array.of":144,"./modules/es6.array.reduce":146,"./modules/es6.array.reduce-right":145,"./modules/es6.array.slice":147,"./modules/es6.array.some":148,"./modules/es6.array.sort":149,"./modules/es6.array.species":150,"./modules/es6.date.now":151,"./modules/es6.date.to-iso-string":152,"./modules/es6.date.to-json":153,"./modules/es6.date.to-primitive":154,"./modules/es6.date.to-string":155,"./modules/es6.function.bind":156,"./modules/es6.function.has-instance":157,"./modules/es6.function.name":158,"./modules/es6.map":159,"./modules/es6.math.acosh":160,"./modules/es6.math.asinh":161,"./modules/es6.math.atanh":162,"./modules/es6.math.cbrt":163,"./modules/es6.math.clz32":164,"./modules/es6.math.cosh":165,"./modules/es6.math.expm1":166,"./modules/es6.math.fround":167,"./modules/es6.math.hypot":168,"./modules/es6.math.imul":169,"./modules/es6.math.log10":170,"./modules/es6.math.log1p":171,"./modules/es6.math.log2":172,"./modules/es6.math.sign":173,"./modules/es6.math.sinh":174,"./modules/es6.math.tanh":175,"./modules/es6.math.trunc":176,"./modules/es6.number.constructor":177,"./modules/es6.number.epsilon":178,"./modules/es6.number.is-finite":179,"./modules/es6.number.is-integer":180,"./modules/es6.number.is-nan":181,"./modules/es6.number.is-safe-integer":182,"./modules/es6.number.max-safe-integer":183,"./modules/es6.number.min-safe-integer":184,"./modules/es6.number.parse-float":185,"./modules/es6.number.parse-int":186,"./modules/es6.number.to-fixed":187,"./modules/es6.number.to-precision":188,"./modules/es6.object.assign":189,"./modules/es6.object.create":190,"./modules/es6.object.define-properties":191,"./modules/es6.object.define-property":192,"./modules/es6.object.freeze":193,"./modules/es6.object.get-own-property-descriptor":194,"./modules/es6.object.get-own-property-names":195,"./modules/es6.object.get-prototype-of":196,"./modules/es6.object.is":200,"./modules/es6.object.is-extensible":197,"./modules/es6.object.is-frozen":198,"./modules/es6.object.is-sealed":199,"./modules/es6.object.keys":201,"./modules/es6.object.prevent-extensions":202,"./modules/es6.object.seal":203,"./modules/es6.object.set-prototype-of":204,"./modules/es6.object.to-string":205,"./modules/es6.parse-float":206,"./modules/es6.parse-int":207,"./modules/es6.promise":208,"./modules/es6.reflect.apply":209,"./modules/es6.reflect.construct":210,"./modules/es6.reflect.define-property":211,"./modules/es6.reflect.delete-property":212,"./modules/es6.reflect.enumerate":213,"./modules/es6.reflect.get":216,"./modules/es6.reflect.get-own-property-descriptor":214,"./modules/es6.reflect.get-prototype-of":215,"./modules/es6.reflect.has":217,"./modules/es6.reflect.is-extensible":218,"./modules/es6.reflect.own-keys":219,"./modules/es6.reflect.prevent-extensions":220,"./modules/es6.reflect.set":222,"./modules/es6.reflect.set-prototype-of":221,"./modules/es6.regexp.constructor":223,
"./modules/es6.regexp.flags":224,"./modules/es6.regexp.match":225,"./modules/es6.regexp.replace":226,"./modules/es6.regexp.search":227,"./modules/es6.regexp.split":228,"./modules/es6.regexp.to-string":229,"./modules/es6.set":230,"./modules/es6.string.anchor":231,"./modules/es6.string.big":232,"./modules/es6.string.blink":233,"./modules/es6.string.bold":234,"./modules/es6.string.code-point-at":235,"./modules/es6.string.ends-with":236,"./modules/es6.string.fixed":237,"./modules/es6.string.fontcolor":238,"./modules/es6.string.fontsize":239,"./modules/es6.string.from-code-point":240,"./modules/es6.string.includes":241,"./modules/es6.string.italics":242,"./modules/es6.string.iterator":243,"./modules/es6.string.link":244,"./modules/es6.string.raw":245,"./modules/es6.string.repeat":246,"./modules/es6.string.small":247,"./modules/es6.string.starts-with":248,"./modules/es6.string.strike":249,"./modules/es6.string.sub":250,"./modules/es6.string.sup":251,"./modules/es6.string.trim":252,"./modules/es6.symbol":253,"./modules/es6.typed.array-buffer":254,"./modules/es6.typed.data-view":255,"./modules/es6.typed.float32-array":256,"./modules/es6.typed.float64-array":257,"./modules/es6.typed.int16-array":258,"./modules/es6.typed.int32-array":259,"./modules/es6.typed.int8-array":260,"./modules/es6.typed.uint16-array":261,"./modules/es6.typed.uint32-array":262,"./modules/es6.typed.uint8-array":263,"./modules/es6.typed.uint8-clamped-array":264,"./modules/es6.weak-map":265,"./modules/es6.weak-set":266,"./modules/es7.array.includes":267,"./modules/es7.asap":268,"./modules/es7.error.is-error":269,"./modules/es7.map.to-json":270,"./modules/es7.math.iaddh":271,"./modules/es7.math.imulh":272,"./modules/es7.math.isubh":273,"./modules/es7.math.umulh":274,"./modules/es7.object.define-getter":275,"./modules/es7.object.define-setter":276,"./modules/es7.object.entries":277,"./modules/es7.object.get-own-property-descriptors":278,"./modules/es7.object.lookup-getter":279,"./modules/es7.object.lookup-setter":280,"./modules/es7.object.values":281,"./modules/es7.observable":282,"./modules/es7.reflect.define-metadata":283,"./modules/es7.reflect.delete-metadata":284,"./modules/es7.reflect.get-metadata":286,"./modules/es7.reflect.get-metadata-keys":285,"./modules/es7.reflect.get-own-metadata":288,"./modules/es7.reflect.get-own-metadata-keys":287,"./modules/es7.reflect.has-metadata":289,"./modules/es7.reflect.has-own-metadata":290,"./modules/es7.reflect.metadata":291,"./modules/es7.set.to-json":292,"./modules/es7.string.at":293,"./modules/es7.string.match-all":294,"./modules/es7.string.pad-end":295,"./modules/es7.string.pad-start":296,"./modules/es7.string.trim-left":297,"./modules/es7.string.trim-right":298,"./modules/es7.symbol.async-iterator":299,"./modules/es7.symbol.observable":300,"./modules/es7.system.global":301,"./modules/web.dom.iterable":302,"./modules/web.immediate":303,"./modules/web.timers":304}],306:[function(require,module,exports){(function(Buffer){function isArray(arg){if(Array.isArray){return Array.isArray(arg)}return objectToString(arg)==="[object Array]"}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return objectToString(e)==="[object Error]"||e instanceof Error}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=Buffer.isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}}).call(this,{isBuffer:require("../../is-buffer/index.js")})},{"../../is-buffer/index.js":324}],307:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+")");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],308:[function(require,module,exports){var saveAs=saveAs||function(view){"use strict";if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},webkit_req_fs=view.webkitRequestFileSystem,req_fs=view.requestFileSystem||webkit_req_fs||view.mozRequestFileSystem,throw_outside=function(ex){(view.setImmediate||view.setTimeout)(function(){throw ex},0)},force_saveable_type="application/octet-stream",fs_min_size=0,arbitrary_revoke_timeout=500,revoke=function(file){var revoker=function(){if(typeof file==="string"){get_URL().revokeObjectURL(file)}else{file.remove()}};if(view.chrome){revoker()}else{setTimeout(revoker,arbitrary_revoke_timeout)}},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);var i=event_types.length;while(i--){var listener=filesaver["on"+event_types[i]];if(typeof listener==="function"){try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}}},auto_bom=function(blob){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)){return new Blob(["\ufeff",blob],{type:blob.type})}return blob},FileSaver=function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}var filesaver=this,type=blob.type,blob_changed=false,object_url,target_view,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if(blob_changed||!object_url){object_url=get_URL().createObjectURL(blob)}if(target_view){target_view.location.href=object_url}else{var new_tab=view.open(object_url,"_blank");if(new_tab==undefined&&typeof safari!=="undefined"){view.location.href=object_url}}filesaver.readyState=filesaver.DONE;dispatch_all();revoke(object_url)},abortable=function(func){return function(){if(filesaver.readyState!==filesaver.DONE){return func.apply(this,arguments)}}},create_if_not_found={create:true,exclusive:false},slice;filesaver.readyState=filesaver.INIT;if(!name){name="download"}if(can_use_save_link){object_url=get_URL().createObjectURL(blob);save_link.href=object_url;save_link.download=name;setTimeout(function(){click(save_link);dispatch_all();revoke(object_url);filesaver.readyState=filesaver.DONE});return}if(view.chrome&&type&&type!==force_saveable_type){slice=blob.slice||blob.webkitSlice;blob=slice.call(blob,0,blob.size,force_saveable_type);blob_changed=true}if(webkit_req_fs&&name!=="download"){name+=".download"}if(type===force_saveable_type||webkit_req_fs){target_view=view}if(!req_fs){fs_error();return}fs_min_size+=blob.size;req_fs(view.TEMPORARY,fs_min_size,abortable(function(fs){fs.root.getDirectory("saved",create_if_not_found,abortable(function(dir){var save=function(){dir.getFile(name,create_if_not_found,abortable(function(file){file.createWriter(abortable(function(writer){writer.onwriteend=function(event){target_view.location.href=file.toURL();filesaver.readyState=filesaver.DONE;dispatch(filesaver,"writeend",event);revoke(file)};writer.onerror=function(){var error=writer.error;if(error.code!==error.ABORT_ERR){fs_error()}};"writestart progress write abort".split(" ").forEach(function(event){writer["on"+event]=filesaver["on"+event]});writer.write(blob);filesaver.abort=function(){writer.abort();filesaver.readyState=filesaver.DONE};filesaver.readyState=filesaver.WRITING}),fs_error)}),fs_error)};dir.getFile(name,{create:false},abortable(function(file){file.remove();save()}),abortable(function(ex){if(ex.code===ex.NOT_FOUND_ERR){save()}else{fs_error()}}))}),fs_error)}),fs_error)},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name,no_auto_bom)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}return navigator.msSaveOrOpenBlob(blob,name||"download")}}FS_proto.abort=function(){var filesaver=this;filesaver.readyState=filesaver.DONE;dispatch(filesaver,"abort")};FS_proto.readyState=FS_proto.INIT=0;FS_proto.WRITING=1;FS_proto.DONE=2;FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null;return saveAs}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!=null){define([],function(){return saveAs})}},{}],309:[function(require,module,exports){module.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},{}],310:[function(require,module,exports){module.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],311:[function(require,module,exports){var gl10=require("./1.0/numbers");module.exports=function lookupConstant(number){return gl10[number]}},{"./1.0/numbers":310}],312:[function(require,module,exports){var sprintf=require("sprintf-js").sprintf;var glConstants=require("gl-constants/lookup");var shaderName=require("glsl-shader-name");var addLineNumbers=require("add-line-numbers");module.exports=formatCompilerError;function formatCompilerError(errLog,src,type){"use strict";var name=shaderName(src)||"of unknown name (see npm glsl-shader-name)";var typeName="unknown type";if(type!==undefined){typeName=type===glConstants.FRAGMENT_SHADER?"fragment":"vertex"}var longForm=sprintf("Error compiling %s shader %s:\n",typeName,name);var shortForm=sprintf("%s%s",longForm,errLog);var errorStrings=errLog.split("\n");var errors={};for(var i=0;i<errorStrings.length;i++){var errorString=errorStrings[i];if(errorString==="")continue;var lineNo=parseInt(errorString.split(":")[2]);if(isNaN(lineNo)){throw new Error(sprintf("Could not parse error: %s",errorString))}errors[lineNo]=errorString}var lines=addLineNumbers(src).split("\n");for(var i=0;i<lines.length;i++){if(!errors[i+3]&&!errors[i+2]&&!errors[i+1])continue;var line=lines[i];longForm+=line+"\n";if(errors[i+1]){var e=errors[i+1];e=e.substr(e.split(":",3).join(":").length+1).trim();longForm+=sprintf("^^^ %s\n\n",e)}}return{long:longForm.trim(),short:shortForm.trim()}}},{"add-line-numbers":2,"gl-constants/lookup":311,"glsl-shader-name":314,"sprintf-js":330}],313:[function(require,module,exports){(function(global){if(typeof window!=="undefined"){module.exports=window}else if(typeof global!=="undefined"){module.exports=global}else if(typeof self!=="undefined"){module.exports=self}else{module.exports={}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],314:[function(require,module,exports){var tokenize=require("glsl-tokenizer");var atob=require("atob-lite");module.exports=getName;function getName(src){var tokens=Array.isArray(src)?src:tokenize(src);for(var i=0;i<tokens.length;i++){var token=tokens[i];if(token.type!=="preprocessor")continue;var match=token.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!match)continue;if(!match[2])continue;var b64=match[1];var name=match[2];return(b64?atob(name):name).trim()}}},{"atob-lite":4,"glsl-tokenizer":321}],315:[function(require,module,exports){module.exports=tokenize;var literals100=require("./lib/literals"),operators=require("./lib/operators"),builtins100=require("./lib/builtins"),literals300es=require("./lib/literals-300es"),builtins300es=require("./lib/builtins-300es");var NORMAL=999,TOKEN=9999,BLOCK_COMMENT=0,LINE_COMMENT=1,PREPROCESSOR=2,OPERATOR=3,INTEGER=4,FLOAT=5,IDENT=6,BUILTIN=7,KEYWORD=8,WHITESPACE=9,EOF=10,HEX=11;var map=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function tokenize(opt){var i=0,total=0,mode=NORMAL,c,last,content=[],tokens=[],token_idx=0,token_offs=0,line=1,col=0,start=0,isnum=false,isoperator=false,input="",len;opt=opt||{};var allBuiltins=builtins100;var allLiterals=literals100;if(opt.version==="300 es"){allBuiltins=builtins300es;allLiterals=literals300es}return function(data){tokens=[];if(data!==null)return write(data.replace?data.replace(/\r\n/g,"\n"):data);return end()};function token(data){if(data.length){tokens.push({type:map[mode],data:data,position:start,line:line,column:col})}}function write(chunk){i=0;input+=chunk;len=input.length;var last;while(c=input[i],i<len){last=i;switch(mode){case BLOCK_COMMENT:i=block_comment();break;case LINE_COMMENT:i=line_comment();break;case PREPROCESSOR:i=preprocessor();break;case OPERATOR:i=operator();break;case INTEGER:i=integer();break;case HEX:i=hex();break;case FLOAT:i=decimal();break;case TOKEN:i=readtoken();break;case WHITESPACE:i=whitespace();break;case NORMAL:i=normal();break}if(last!==i){switch(input[last]){case"\n":col=0;++line;break;default:++col;break}}}total+=i;input=input.slice(i);return tokens}function end(chunk){if(content.length){token(content.join(""))}mode=EOF;token("(eof)");return tokens}function normal(){content=content.length?[]:content;if(last==="/"&&c==="*"){start=total+i-1;mode=BLOCK_COMMENT;last=c;return i+1}if(last==="/"&&c==="/"){start=total+i-1;mode=LINE_COMMENT;last=c;return i+1}if(c==="#"){mode=PREPROCESSOR;start=total+i;return i}if(/\s/.test(c)){mode=WHITESPACE;start=total+i;return i}isnum=/\d/.test(c);isoperator=/[^\w_]/.test(c);start=total+i;mode=isnum?INTEGER:isoperator?OPERATOR:TOKEN;return i}function whitespace(){
if(/[^\s]/g.test(c)){token(content.join(""));mode=NORMAL;return i}content.push(c);last=c;return i+1}function preprocessor(){if((c==="\r"||c==="\n")&&last!=="\\"){token(content.join(""));mode=NORMAL;return i}content.push(c);last=c;return i+1}function line_comment(){return preprocessor()}function block_comment(){if(c==="/"&&last==="*"){content.push(c);token(content.join(""));mode=NORMAL;return i+1}content.push(c);last=c;return i+1}function operator(){if(last==="."&&/\d/.test(c)){mode=FLOAT;return i}if(last==="/"&&c==="*"){mode=BLOCK_COMMENT;return i}if(last==="/"&&c==="/"){mode=LINE_COMMENT;return i}if(c==="."&&content.length){while(determine_operator(content));mode=FLOAT;return i}if(c===";"||c===")"||c==="("){if(content.length)while(determine_operator(content));token(c);mode=NORMAL;return i+1}var is_composite_operator=content.length===2&&c!=="=";if(/[\w_\d\s]/.test(c)||is_composite_operator){while(determine_operator(content));mode=NORMAL;return i}content.push(c);last=c;return i+1}function determine_operator(buf){var j=0,idx,res;do{idx=operators.indexOf(buf.slice(0,buf.length+j).join(""));res=operators[idx];if(idx===-1){if(j--+buf.length>0)continue;res=buf.slice(0,1).join("")}token(res);start+=res.length;content=content.slice(res.length);return content.length}while(1)}function hex(){if(/[^a-fA-F0-9]/.test(c)){token(content.join(""));mode=NORMAL;return i}content.push(c);last=c;return i+1}function integer(){if(c==="."){content.push(c);mode=FLOAT;last=c;return i+1}if(/[eE]/.test(c)){content.push(c);mode=FLOAT;last=c;return i+1}if(c==="x"&&content.length===1&&content[0]==="0"){mode=HEX;content.push(c);last=c;return i+1}if(/[^\d]/.test(c)){token(content.join(""));mode=NORMAL;return i}content.push(c);last=c;return i+1}function decimal(){if(c==="f"){content.push(c);last=c;i+=1}if(/[eE]/.test(c)){content.push(c);last=c;return i+1}if(c==="-"&&/[eE]/.test(last)){content.push(c);last=c;return i+1}if(/[^\d]/.test(c)){token(content.join(""));mode=NORMAL;return i}content.push(c);last=c;return i+1}function readtoken(){if(/[^\d\w_]/.test(c)){var contentstr=content.join("");if(allLiterals.indexOf(contentstr)>-1){mode=KEYWORD}else if(allBuiltins.indexOf(contentstr)>-1){mode=BUILTIN}else{mode=IDENT}token(content.join(""));mode=NORMAL;return i}content.push(c);last=c;return i+1}}},{"./lib/builtins":317,"./lib/builtins-300es":316,"./lib/literals":319,"./lib/literals-300es":318,"./lib/operators":320}],316:[function(require,module,exports){var v100=require("./builtins");v100=v100.slice().filter(function(b){return!/^(gl\_|texture)/.test(b)});module.exports=v100.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":317}],317:[function(require,module,exports){module.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],318:[function(require,module,exports){var v100=require("./literals");module.exports=v100.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":319}],319:[function(require,module,exports){module.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],320:[function(require,module,exports){module.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],321:[function(require,module,exports){var tokenize=require("./index");module.exports=tokenizeString;function tokenizeString(str,opt){var generator=tokenize(opt);var tokens=[];tokens=tokens.concat(generator(str));tokens=tokens.concat(generator(null));return tokens}},{"./index":315}],322:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],323:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],324:[function(require,module,exports){module.exports=function(obj){return obj!=null&&(isBuffer(obj)||isSlowBuffer(obj)||!!obj._isBuffer)};function isBuffer(obj){return!!obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)}function isSlowBuffer(obj){return typeof obj.readFloatLE==="function"&&typeof obj.slice==="function"&&isBuffer(obj.slice(0,0))}},{}],325:[function(require,module,exports){"use strict";var repeat=require("repeat-string");module.exports=function padLeft(str,num,ch){ch=typeof ch!=="undefined"?ch+"":" ";return repeat(ch,num)+str}},{"repeat-string":329}],326:[function(require,module,exports){(function(process){"use strict";if(!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0){module.exports=nextTick}else{module.exports=process.nextTick}function nextTick(fn,arg1,arg2,arg3){if(typeof fn!=="function"){throw new TypeError('"callback" argument must be a function')}var len=arguments.length;var args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function afterTickOne(){fn.call(null,arg1)});case 3:return process.nextTick(function afterTickTwo(){fn.call(null,arg1,arg2)});case 4:return process.nextTick(function afterTickThree(){fn.call(null,arg1,arg2,arg3)});default:args=new Array(len-1);i=0;while(i<args.length){args[i++]=arguments[i]}return process.nextTick(function afterTick(){fn.apply(null,args)})}}}).call(this,require("_process"))},{_process:327}],327:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;(function(){try{cachedSetTimeout=setTimeout}catch(e){cachedSetTimeout=function(){throw new Error("setTimeout is not defined")}}try{cachedClearTimeout=clearTimeout}catch(e){cachedClearTimeout=function(){throw new Error("clearTimeout is not defined")}}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],328:[function(require,module,exports){(function(process,global){!function(global){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var undefined;var $Symbol=typeof Symbol==="function"?Symbol:{};var iteratorSymbol=$Symbol.iterator||"@@iterator";var toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";var inModule=typeof module==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime}return}runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){var generator=Object.create((outerFn||Generator).prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator}runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype;GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction";function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false};runtime.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype)}else{genFun.__proto__=GeneratorFunctionPrototype;if(!(toStringTagSymbol in genFun)){genFun[toStringTagSymbol]="GeneratorFunction"}}genFun.prototype=Object.create(Gp);return genFun};runtime.awrap=function(arg){return new AwaitArgument(arg)};function AwaitArgument(arg){this.arg=arg}function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type==="throw"){reject(record.arg)}else{var result=record.arg;var value=result.value;if(value instanceof AwaitArgument){return Promise.resolve(value.arg).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)})}return Promise.resolve(value).then(function(unwrapped){result.value=unwrapped;resolve(result)},reject)}}if(typeof process==="object"&&process.domain){invoke=process.domain.bind(invoke)}var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}this._invoke=enqueue}defineIteratorMethods(AsyncIterator.prototype);runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running")}if(state===GenStateCompleted){if(method==="throw"){throw arg}return doneResult()}while(true){var delegate=context.delegate;if(delegate){if(method==="return"||method==="throw"&&delegate.iterator[method]===undefined){context.delegate=null;var returnMethod=delegate.iterator["return"];if(returnMethod){var record=tryCatch(returnMethod,delegate.iterator,arg);if(record.type==="throw"){method="throw";arg=record.arg;continue}}if(method==="return"){continue}}var record=tryCatch(delegate.iterator[method],delegate.iterator,arg);if(record.type==="throw"){context.delegate=null;method="throw";arg=record.arg;continue}method="next";arg=undefined;var info=record.arg;if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc}else{state=GenStateSuspendedYield;return info}context.delegate=null}if(method==="next"){context.sent=context._sent=arg}else if(method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw arg}if(context.dispatchException(arg)){method="next";arg=undefined}}else if(method==="return"){context.abrupt("return",arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;var info={value:record.arg,done:context.done};if(record.arg===ContinueSentinel){if(context.delegate&&method==="next"){arg=undefined}}else{return info}}else if(record.type==="throw"){state=GenStateCompleted;method="throw";arg=record.arg}}}}defineIteratorMethods(Gp);Gp[iteratorSymbol]=function(){return this};Gp[toStringTagSymbol]="Generator";Gp.toString=function(){return"[object Generator]"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true)}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next==="function"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}runtime.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.next=finallyEntry.finallyLoc}else{this.complete(record)}return ContinueSentinel},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg}if(record.type==="break"||record.type==="continue"){this.next=record.arg}else if(record.type==="return"){this.rval=record.arg;this.next="end"}else if(record.type==="normal"&&afterLoc){this.next=afterLoc}},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel}}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};return ContinueSentinel}}}(typeof global==="object"?global:typeof window==="object"?window:typeof self==="object"?self:this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:327}],329:[function(require,module,exports){"use strict";var res="";var cache;module.exports=repeat;function repeat(str,num){if(typeof str!=="string"){throw new TypeError("repeat-string expects a string.")}if(num===1)return str;if(num===2)return str+str;var max=str.length*num;if(cache!==str||typeof cache==="undefined"){cache=str;res=""}while(max>res.length&&num>0){if(num&1){res+=str}num>>=1;if(!num)break;str+=str}return res.substr(0,max)}},{}],330:[function(require,module,exports){(function(window){var re={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function sprintf(){var key=arguments[0],cache=sprintf.cache;if(!(cache[key]&&cache.hasOwnProperty(key))){cache[key]=sprintf.parse(key)}return sprintf.format.call(null,cache[key],arguments)}sprintf.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type="",arg,output=[],i,k,match,pad,pad_character,pad_length,is_positive=true,sign="";for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==="string"){output[output.length]=parse_tree[i]}else if(node_type==="array"){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw new Error(sprintf("[sprintf] property '%s' does not exist",match[2][k]))}arg=arg[match[2][k]]}}else if(match[1]){arg=argv[match[1]]}else{arg=argv[cursor++]}if(get_type(arg)=="function"){arg=arg()}if(re.not_string.test(match[8])&&re.not_json.test(match[8])&&(get_type(arg)!="number"&&isNaN(arg))){throw new TypeError(sprintf("[sprintf] expecting number but found %s",get_type(arg)))}if(re.number.test(match[8])){is_positive=arg>=0}switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":case"i":arg=parseInt(arg,10);break;case"j":arg=JSON.stringify(arg,null,match[6]?parseInt(match[6]):0);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"g":arg=match[7]?parseFloat(arg).toPrecision(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg=arg>>>0;break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase();break}if(re.json.test(match[8])){output[output.length]=arg}else{if(re.number.test(match[8])&&(!is_positive||match[3])){sign=is_positive?"+":"-";arg=arg.toString().replace(re.sign,"")}else{sign=""}pad_character=match[4]?match[4]==="0"?"0":match[4].charAt(1):" ";pad_length=match[6]-(sign+arg).length;pad=match[6]?pad_length>0?str_repeat(pad_character,pad_length):"":"";output[output.length]=match[5]?sign+arg+pad:pad_character==="0"?sign+pad+arg:pad+sign+arg}}}return output.join("")};sprintf.cache={};sprintf.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=re.text.exec(_fmt))!==null){parse_tree[parse_tree.length]=match[0]}else if((match=re.modulo.exec(_fmt))!==null){parse_tree[parse_tree.length]="%"}else if((match=re.placeholder.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=re.key.exec(replacement_field))!==null){field_list[field_list.length]=field_match[1];while((replacement_field=replacement_field.substring(field_match[0].length))!==""){if((field_match=re.key_access.exec(replacement_field))!==null){field_list[field_list.length]=field_match[1]}else if((field_match=re.index_access.exec(replacement_field))!==null){field_list[field_list.length]=field_match[1]}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}match[2]=field_list}else{arg_names|=2}if(arg_names===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}parse_tree[parse_tree.length]=match}else{throw new SyntaxError("[sprintf] unexpected placeholder")}_fmt=_fmt.substring(match[0].length)}return parse_tree};var vsprintf=function(fmt,argv,_argv){_argv=(argv||[]).slice(0);_argv.splice(0,0,fmt);return sprintf.apply(null,_argv)};function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){return Array(multiplier+1).join(input)}if(typeof exports!=="undefined"){exports.sprintf=sprintf;exports.vsprintf=vsprintf}else{window.sprintf=sprintf;window.vsprintf=vsprintf;if(typeof define==="function"&&define.amd){define(function(){return{sprintf:sprintf,vsprintf:vsprintf}})}}})(typeof window==="undefined"?this:window)},{}],331:[function(require,module,exports){module.exports=Stream;var EE=require("events").EventEmitter;var inherits=require("inherits");inherits(Stream,EE);Stream.Readable=require("readable-stream/readable.js");Stream.Writable=require("readable-stream/writable.js");Stream.Duplex=require("readable-stream/duplex.js");Stream.Transform=require("readable-stream/transform.js");Stream.PassThrough=require("readable-stream/passthrough.js");Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause()}}}source.on("data",ondata);function ondrain(){if(source.readable&&source.resume){source.resume()}}dest.on("drain",ondrain);if(!dest._isStdio&&(!options||options.end!==false)){source.on("end",onend);source.on("close",onclose)}var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end()}function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==="function")dest.destroy()}function onerror(er){cleanup();if(EE.listenerCount(this,"error")===0){throw er}}source.on("error",onerror);dest.on("error",onerror);function cleanup(){source.removeListener("data",ondata);dest.removeListener("drain",ondrain);source.removeListener("end",onend);source.removeListener("close",onclose);source.removeListener("error",onerror);dest.removeListener("error",onerror);source.removeListener("end",cleanup);source.removeListener("close",cleanup);dest.removeListener("close",cleanup)}source.on("end",cleanup);source.on("close",cleanup);dest.on("close",cleanup);dest.emit("pipe",source);return dest}},{events:307,inherits:323,"readable-stream/duplex.js":333,"readable-stream/passthrough.js":339,"readable-stream/readable.js":340,"readable-stream/transform.js":341,"readable-stream/writable.js":342}],332:[function(require,module,exports){arguments[4][11][0].apply(exports,arguments)},{dup:11}],333:[function(require,module,exports){module.exports=require("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":334}],334:[function(require,module,exports){"use strict";var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key)}return keys};module.exports=Duplex;var processNextTick=require("process-nextick-args");var util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable");var Writable=require("./_stream_writable");util.inherits(Duplex,Readable);var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",onend)}function onend(){if(this.allowHalfOpen||this._writableState.ended)return;processNextTick(onEndNT,this);
}function onEndNT(self){self.end()}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}},{"./_stream_readable":336,"./_stream_writable":338,"core-util-is":306,inherits:323,"process-nextick-args":326}],335:[function(require,module,exports){"use strict";module.exports=PassThrough;var Transform=require("./_stream_transform");var util=require("core-util-is");util.inherits=require("inherits");util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":337,"core-util-is":306,inherits:323}],336:[function(require,module,exports){(function(process){"use strict";module.exports=Readable;var processNextTick=require("process-nextick-args");var isArray=require("isarray");Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length};var Stream;(function(){try{Stream=require("st"+"ream")}catch(_){}finally{if(!Stream)Stream=require("events").EventEmitter}})();var Buffer=require("buffer").Buffer;var bufferShim=require("buffer-shims");var util=require("core-util-is");util.inherits=require("inherits");var debugUtil=require("util");var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog("stream")}else{debug=function(){}}var StringDecoder;util.inherits(Readable,Stream);var hasPrependListener=typeof EE.prototype.prependListener==="function";function prependListener(emitter,event,fn){if(hasPrependListener)return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]]}var Duplex;function ReadableState(options,stream){Duplex=Duplex||require("./_stream_duplex");options=options||{};this.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.defaultEncoding=options.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}var Duplex;function Readable(options){Duplex=Duplex||require("./_stream_duplex");if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options&&typeof options.read==="function")this._read=options.read;Stream.call(this)}Readable.prototype.push=function(chunk,encoding){var state=this._readableState;if(!state.objectMode&&typeof chunk==="string"){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=bufferShim.from(chunk,encoding);encoding=""}}return readableAddChunk(this,state,chunk,encoding,false)};Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",true)};Readable.prototype.isPaused=function(){return this._readableState.flowing===false};function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er){stream.emit("error",er)}else if(chunk===null){state.reading=false;onEofChunk(stream,state)}else if(state.objectMode||chunk&&chunk.length>0){if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var _e=new Error("stream.unshift() after end event");stream.emit("error",_e)}else{var skipAdd;if(state.decoder&&!addToFront&&!encoding){chunk=state.decoder.write(chunk);skipAdd=!state.objectMode&&chunk.length===0}if(!addToFront)state.reading=false;if(!skipAdd){if(state.flowing&&state.length===0&&!state.sync){stream.emit("data",chunk);stream.read(0)}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream)}}maybeReadMore(stream,state)}}else if(!addToFront){state.reading=false}return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this};var MAX_HWM=8388608;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++}return n}function howMuchToRead(n,state){if(state.length===0&&state.ended)return 0;if(state.objectMode)return n===0?0:1;if(n===null||isNaN(n)){if(state.flowing&&state.buffer.length)return state.buffer[0].length;else return state.length}if(n<=0)return 0;if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n>state.length){if(!state.ended){state.needReadable=true;return 0}else{return state.length}}return n}Readable.prototype.read=function(n){debug("read",n);var state=this._readableState;var nOrig=n;if(typeof n!=="number"||n>0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug("read: emitReadable",state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null}var doRead=state.needReadable;debug("need readable",doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug("length less than watermark",doRead)}if(state.ended||state.reading){doRead=false;debug("reading or ended",doRead)}if(doRead){debug("do read");state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false}if(doRead&&!state.reading)n=howMuchToRead(nOrig,state);var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0}state.length-=n;if(state.length===0&&!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended&&state.length===0)endReadable(this);if(ret!==null)this.emit("data",ret);return ret};function chunkInvalid(state,chunk){var er=null;if(!Buffer.isBuffer(chunk)&&typeof chunk!=="string"&&chunk!==null&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}return er}function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;emitReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug("emitReadable",state.flowing);state.emittedReadable=true;if(state.sync)processNextTick(emitReadable_,stream);else emitReadable_(stream)}}function emitReadable_(stream){debug("emit readable");stream.emit("readable");flow(stream)}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;processNextTick(maybeReadMore_,stream,state)}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug("maybeReadMore read 0");stream.read(0);if(len===state.length)break;else len=state.length}state.readingMore=false}Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:cleanup;if(state.endEmitted)processNextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable){debug("onunpipe");if(readable===src){cleanup()}}function onend(){debug("onend");dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=false;function cleanup(){debug("cleanup");dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",cleanup);src.removeListener("data",ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain()}src.on("data",ondata);function ondata(chunk){debug("ondata");var ret=dest.write(chunk);if(false===ret){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug("false write response, pause",src._readableState.awaitDrain);src._readableState.awaitDrain++}src.pause()}}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);if(EElistenerCount(dest,"error")===0)dest.emit("error",er)}prependListener(dest,"error",onerror);function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish");dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe");src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){debug("pipe resume");src.resume()}return dest};function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,"data")){state.flowing=true;flow(src)}}}Readable.prototype.unpipe=function(dest){var state=this._readableState;if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit("unpipe",this);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var _i=0;_i<len;_i++){dests[_i].emit("unpipe",this)}return this}var i=indexOf(state.pipes,dest);if(i===-1)return this;state.pipes.splice(i,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==="data"&&false!==this._readableState.flowing){this.resume()}if(ev==="readable"&&!this._readableState.endEmitted){var state=this._readableState;if(!state.readableListening){state.readableListening=true;state.emittedReadable=false;state.needReadable=true;if(!state.reading){processNextTick(nReadingNextTick,this)}else if(state.length){emitReadable(this,state)}}}return res};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug("readable nexttick read 0");self.read(0)}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug("resume");state.flowing=true;resume(this,state)}return this};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;processNextTick(resume_,stream,state)}}function resume_(stream,state){if(!state.reading){debug("resume read 0");stream.read(0)}state.resumeScheduled=false;stream.emit("resume");flow(stream);if(state.flowing&&!state.reading)stream.read(0)}Readable.prototype.pause=function(){debug("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){debug("pause");this._readableState.flowing=false;this.emit("pause")}return this};function flow(stream){var state=stream._readableState;debug("flow",state.flowing);if(state.flowing){do{var chunk=stream.read()}while(null!==chunk&&state.flowing)}}Readable.prototype.wrap=function(stream){var state=this._readableState;var paused=false;var self=this;stream.on("end",function(){debug("wrapped end");if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)self.push(chunk)}self.push(null)});stream.on("data",function(chunk){debug("wrapped data");if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=self.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==="function"){this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i)}}var events=["error","close","destroy","pause","resume"];forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))});self._read=function(n){debug("wrapped _read",n);if(paused){paused=false;stream.resume()}};return self};Readable._fromList=fromList;function fromList(n,state){var list=state.buffer;var length=state.length;var stringMode=!!state.decoder;var objectMode=!!state.objectMode;var ret;if(list.length===0)return null;if(length===0)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length){if(stringMode)ret=list.join("");else if(list.length===1)ret=list[0];else ret=Buffer.concat(list,length);list.length=0}else{if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n);list[0]=buf.slice(n)}else if(n===list[0].length){ret=list.shift()}else{if(stringMode)ret="";else ret=bufferShim.allocUnsafe(n);var c=0;for(var i=0,l=list.length;i<l&&c<n;i++){var _buf=list[0];var cpy=Math.min(n-c,_buf.length);if(stringMode)ret+=_buf.slice(0,cpy);else _buf.copy(ret,c,0,cpy);if(cpy<_buf.length)list[0]=_buf.slice(cpy);else list.shift();c+=cpy}}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;processNextTick(endReadableNT,state,stream)}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end")}}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}}).call(this,require("_process"))},{"./_stream_duplex":334,_process:327,buffer:10,"buffer-shims":9,"core-util-is":306,events:307,inherits:323,isarray:332,"process-nextick-args":326,"string_decoder/":343,util:8}],337:[function(require,module,exports){"use strict";module.exports=Transform;var Duplex=require("./_stream_duplex");var util=require("core-util-is");util.inherits=require("inherits");util.inherits(Transform,Duplex);function TransformState(stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;this.writeencoding=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null;ts.writecb=null;if(data!==null&&data!==undefined)stream.push(data);cb(er);var rs=stream._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){stream._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState=new TransformState(this);var stream=this;this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==="function")this._transform=options.transform;if(typeof options.flush==="function")this._flush=options.flush}this.once("prefinish",function(){if(typeof this._flush==="function")this._flush(function(er){done(stream,er)});else done(stream)})}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("Not implemented")};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState;var ts=stream._transformState;if(ws.length)throw new Error("Calling transform done when ws.length != 0");if(ts.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}},{"./_stream_duplex":334,"core-util-is":306,inherits:323}],338:[function(require,module,exports){(function(process){"use strict";module.exports=Writable;var processNextTick=require("process-nextick-args");var asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:processNextTick;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var internalUtil={deprecate:require("util-deprecate")};var Stream;(function(){try{Stream=require("st"+"ream")}catch(_){}finally{if(!Stream)Stream=require("events").EventEmitter}})();var Buffer=require("buffer").Buffer;var bufferShim=require("buffer-shims");util.inherits(Writable,Stream);function nop(){}function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null}var Duplex;function WritableState(options,stream){Duplex=Duplex||require("./_stream_duplex");options=options||{};this.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function writableStateGetBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next}return out};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.")})}catch(_){}})();var Duplex;function Writable(options){Duplex=Duplex||require("./_stream_duplex");if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==="function")this._write=options.write;if(typeof options.writev==="function")this._writev=options.writev}Stream.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er);processNextTick(cb,er)}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError("May not write null values to stream")}else if(!Buffer.isBuffer(chunk)&&typeof chunk!=="string"&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}if(er){stream.emit("error",er);processNextTick(cb,er);valid=false}return valid}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;if(typeof encoding==="function"){cb=encoding;encoding=null}if(Buffer.isBuffer(chunk))encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,chunk,encoding,cb)}return ret};Writable.prototype.cork=function(){var state=this._writableState;state.corked++};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==="string")encoding=encoding.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);this._writableState.defaultEncoding=encoding;return this};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=bufferShim.from(chunk,encoding)}return chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding);if(Buffer.isBuffer(chunk))encoding="buffer";var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest=new WriteReq(chunk,encoding,cb);if(last){last.next=state.lastBufferedRequest}else{state.bufferedRequest=state.lastBufferedRequest}state.bufferedRequestCount+=1}else{doWrite(stream,state,false,len,chunk,encoding,cb)}return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync)processNextTick(cb,er);else cb(er);stream._writableState.errorEmitted=true;stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state)}if(sync){asyncWrite(afterWrite,stream,state,finished,cb)}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;while(entry){buffer[count]=entry;entry=entry.next;count+=1}doWrite(stream,state,true,state.length,buffer,"",holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null}else{state.corkedRequestsFree=new CorkedRequest(state)}}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;if(state.writing){break}}if(entry===null)state.lastBufferedRequest=null}state.bufferedRequestCount=0;state.bufferedRequest=entry;state.bufferProcessing=false}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork()}if(!state.ending&&!state.finished)endWritable(this,state,cb)};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function prefinish(stream,state){if(!state.prefinished){state.prefinished=true;stream.emit("prefinish")}}function finishMaybe(stream,state){var need=needFinish(state);if(need){if(state.pendingcb===0){prefinish(stream,state);state.finished=true;stream.emit("finish")}else{prefinish(stream,state)}}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)processNextTick(cb);else stream.once("finish",cb)}state.ended=true;stream.writable=false}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(err){var entry=_this.entry;_this.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next}if(state.corkedRequestsFree){state.corkedRequestsFree.next=_this}else{state.corkedRequestsFree=_this}}}}).call(this,require("_process"))},{"./_stream_duplex":334,_process:327,buffer:10,"buffer-shims":9,"core-util-is":306,events:307,inherits:323,"process-nextick-args":326,"util-deprecate":345}],339:[function(require,module,exports){module.exports=require("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":335}],340:[function(require,module,exports){(function(process){var Stream=function(){try{return require("st"+"ream")}catch(_){}}();exports=module.exports=require("./lib/_stream_readable.js");exports.Stream=Stream||exports;exports.Readable=exports;exports.Writable=require("./lib/_stream_writable.js");exports.Duplex=require("./lib/_stream_duplex.js");exports.Transform=require("./lib/_stream_transform.js");exports.PassThrough=require("./lib/_stream_passthrough.js");if(!process.browser&&process.env.READABLE_STREAM==="disable"&&Stream){module.exports=Stream}}).call(this,require("_process"))},{"./lib/_stream_duplex.js":334,"./lib/_stream_passthrough.js":335,"./lib/_stream_readable.js":336,"./lib/_stream_transform.js":337,"./lib/_stream_writable.js":338,_process:327}],341:[function(require,module,exports){module.exports=require("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":337}],342:[function(require,module,exports){module.exports=require("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":338}],343:[function(require,module,exports){var Buffer=require("buffer").Buffer;var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding)){throw new Error("Unknown encoding: "+encoding)}}var StringDecoder=exports.StringDecoder=function(encoding){this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,"");assertEncoding(encoding);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6);this.charReceived=0;this.charLength=0};StringDecoder.prototype.write=function(buffer){var charStr="";while(this.charLength){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;buffer.copy(this.charBuffer,this.charReceived,0,available);this.charReceived+=available;if(this.charReceived<this.charLength){return""}buffer=buffer.slice(available,buffer.length);charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize;charStr="";continue}this.charReceived=this.charLength=0;if(buffer.length===0){return charStr}break}this.detectIncompleteChar(buffer);var end=buffer.length;if(this.charLength){buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end);end-=this.charReceived}charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;this.charLength+=size;this.charReceived+=size;this.charBuffer.copy(this.charBuffer,size,0,size);buffer.copy(this.charBuffer,0,0,size);return charStr.substring(0,end)}return charStr};StringDecoder.prototype.detectIncompleteChar=function(buffer){var i=buffer.length>=3?3:buffer.length;for(;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i};StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length)res=this.write(buffer);if(this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res};function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2;this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3;this.charLength=this.charReceived?3:0}},{buffer:10}],344:[function(require,module,exports){(function(process){var Stream=require("stream");exports=module.exports=through;through.through=through;function through(write,end,opts){write=write||function(data){this.queue(data)};end=end||function(){this.queue(null)};var ended=false,destroyed=false,buffer=[],_ended=false;var stream=new Stream;stream.readable=stream.writable=true;stream.paused=false;stream.autoDestroy=!(opts&&opts.autoDestroy===false);stream.write=function(data){write.call(this,data);return!stream.paused};function drain(){while(buffer.length&&!stream.paused){var data=buffer.shift();if(null===data)return stream.emit("end");else stream.emit("data",data)}}stream.queue=stream.push=function(data){if(_ended)return stream;if(data===null)_ended=true;buffer.push(data);drain();return stream};stream.on("end",function(){stream.readable=false;if(!stream.writable&&stream.autoDestroy)process.nextTick(function(){stream.destroy()})});function _end(){stream.writable=false;end.call(stream);if(!stream.readable&&stream.autoDestroy)stream.destroy()}stream.end=function(data){if(ended)return;ended=true;if(arguments.length)stream.write(data);_end();return stream};stream.destroy=function(){if(destroyed)return;destroyed=true;ended=true;buffer.length=0;stream.writable=stream.readable=false;stream.emit("close");return stream};stream.pause=function(){if(stream.paused)return;stream.paused=true;return stream};stream.resume=function(){if(stream.paused){stream.paused=false;stream.emit("resume")}drain();if(!stream.paused)stream.emit("drain");return stream};return stream}}).call(this,require("_process"))},{_process:327,
stream:331}],345:[function(require,module,exports){(function(global){module.exports=deprecate;function deprecate(fn,msg){if(config("noDeprecation")){return fn}var warned=false;function deprecated(){if(!warned){if(config("throwDeprecation")){throw new Error(msg)}else if(config("traceDeprecation")){console.trace(msg)}else{console.warn(msg)}warned=true}return fn.apply(this,arguments)}return deprecated}function config(name){try{if(!global.localStorage)return false}catch(_){return false}var val=global.localStorage[name];if(null==val)return false;return String(val).toLowerCase()==="true"}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],346:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],347:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":346,_process:327,inherits:323}],348:[function(require,module,exports){(function(global){WebGLDebugUtils=function(){if(typeof window=="undefined"){window=global}var log=function(msg){if(window.console&&window.console.log){window.console.log(msg)}};var error=function(msg){if(window.console&&window.console.error){window.console.error(msg)}else{log(msg)}};var glValidEnumContexts={enable:{1:{0:true}},disable:{1:{0:true}},getParameter:{1:{0:true}},drawArrays:{3:{0:true}},drawElements:{4:{0:true,2:true}},createShader:{1:{0:true}},getShaderParameter:{2:{1:true}},getProgramParameter:{2:{1:true}},getShaderPrecisionFormat:{2:{0:true,1:true}},getVertexAttrib:{2:{1:true}},vertexAttribPointer:{6:{2:true}},bindTexture:{2:{0:true}},activeTexture:{1:{0:true}},getTexParameter:{2:{0:true,1:true}},texParameterf:{3:{0:true,1:true}},texParameteri:{3:{0:true,1:true,2:true}},texImage2D:{9:{0:true,2:true,6:true,7:true},6:{0:true,2:true,3:true,4:true}},texSubImage2D:{9:{0:true,6:true,7:true},7:{0:true,4:true,5:true}},copyTexImage2D:{8:{0:true,2:true}},copyTexSubImage2D:{8:{0:true}},generateMipmap:{1:{0:true}},compressedTexImage2D:{7:{0:true,2:true}},compressedTexSubImage2D:{8:{0:true,6:true}},bindBuffer:{2:{0:true}},bufferData:{3:{0:true,2:true}},bufferSubData:{3:{0:true}},getBufferParameter:{2:{0:true,1:true}},pixelStorei:{2:{0:true,1:true}},readPixels:{7:{4:true,5:true}},bindRenderbuffer:{2:{0:true}},bindFramebuffer:{2:{0:true}},checkFramebufferStatus:{1:{0:true}},framebufferRenderbuffer:{4:{0:true,1:true,2:true}},framebufferTexture2D:{5:{0:true,1:true,2:true}},getFramebufferAttachmentParameter:{3:{0:true,1:true,2:true}},getRenderbufferParameter:{2:{0:true,1:true}},renderbufferStorage:{4:{0:true,1:true}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:true}},blendFunc:{2:{0:true,1:true}},blendFuncSeparate:{4:{0:true,1:true,2:true,3:true}},blendEquation:{1:{0:true}},blendEquationSeparate:{2:{0:true,1:true}},stencilFunc:{3:{0:true}},stencilFuncSeparate:{4:{0:true,1:true}},stencilMaskSeparate:{2:{0:true}},stencilOp:{3:{0:true,1:true,2:true}},stencilOpSeparate:{4:{0:true,1:true,2:true,3:true}},cullFace:{1:{0:true}},frontFace:{1:{0:true}},drawArraysInstancedANGLE:{4:{0:true}},drawElementsInstancedANGLE:{5:{0:true,2:true}},blendEquationEXT:{1:{0:true}}};var glEnums=null;var enumStringToValue=null;function init(ctx){if(glEnums==null){glEnums={};enumStringToValue={};for(var propertyName in ctx){if(typeof ctx[propertyName]=="number"){glEnums[ctx[propertyName]]=propertyName;enumStringToValue[propertyName]=ctx[propertyName]}}}}function checkInit(){if(glEnums==null){throw"WebGLDebugUtils.init(ctx) not called"}}function mightBeEnum(value){checkInit();return glEnums[value]!==undefined}function glEnumToString(value){checkInit();var name=glEnums[value];return name!==undefined?"gl."+name:"/*UNKNOWN WebGL ENUM*/ 0x"+value.toString(16)+""}function glFunctionArgToString(functionName,numArgs,argumentIndex,value){var funcInfo=glValidEnumContexts[functionName];if(funcInfo!==undefined){var funcInfo=funcInfo[numArgs];if(funcInfo!==undefined){if(funcInfo[argumentIndex]){if(typeof funcInfo[argumentIndex]==="object"&&funcInfo[argumentIndex]["enumBitwiseOr"]!==undefined){var enums=funcInfo[argumentIndex]["enumBitwiseOr"];var orResult=0;var orEnums=[];for(var i=0;i<enums.length;++i){var enumValue=enumStringToValue[enums[i]];if((value&enumValue)!==0){orResult|=enumValue;orEnums.push(glEnumToString(enumValue))}}if(orResult===value){return orEnums.join(" | ")}else{return glEnumToString(value)}}else{return glEnumToString(value)}}}}if(value===null){return"null"}else if(value===undefined){return"undefined"}else{return value.toString()}}function glFunctionArgsToString(functionName,args){var argStr="";var numArgs=args.length;for(var ii=0;ii<numArgs;++ii){argStr+=(ii==0?"":", ")+glFunctionArgToString(functionName,numArgs,ii,args[ii])}return argStr}function makePropertyWrapper(wrapper,original,propertyName){wrapper.__defineGetter__(propertyName,function(){return original[propertyName]});wrapper.__defineSetter__(propertyName,function(value){original[propertyName]=value})}function makeFunctionWrapper(original,functionName){var f=original[functionName];return function(){var result=f.apply(original,arguments);return result}}function makeDebugContext(ctx,opt_onErrorFunc,opt_onFunc,opt_err_ctx){opt_err_ctx=opt_err_ctx||ctx;init(ctx);opt_onErrorFunc=opt_onErrorFunc||function(err,functionName,args){var argStr="";var numArgs=args.length;for(var ii=0;ii<numArgs;++ii){argStr+=(ii==0?"":", ")+glFunctionArgToString(functionName,numArgs,ii,args[ii])}error("WebGL error "+glEnumToString(err)+" in "+functionName+"("+argStr+")")};var glErrorShadow={};function makeErrorWrapper(ctx,functionName){return function(){if(opt_onFunc){opt_onFunc(functionName,arguments)}var result=ctx[functionName].apply(ctx,arguments);var err=opt_err_ctx.getError();if(err!=0){glErrorShadow[err]=true;opt_onErrorFunc(err,functionName,arguments)}return result}}var wrapper={};for(var propertyName in ctx){if(typeof ctx[propertyName]=="function"){if(propertyName!="getExtension"){wrapper[propertyName]=makeErrorWrapper(ctx,propertyName)}else{var wrapped=makeErrorWrapper(ctx,propertyName);wrapper[propertyName]=function(){var result=wrapped.apply(ctx,arguments);return makeDebugContext(result,opt_onErrorFunc,opt_onFunc,opt_err_ctx)}}}else{makePropertyWrapper(wrapper,ctx,propertyName)}}wrapper.getError=function(){for(var err in glErrorShadow){if(glErrorShadow.hasOwnProperty(err)){if(glErrorShadow[err]){glErrorShadow[err]=false;return err}}}return ctx.NO_ERROR};return wrapper}function resetToInitialState(ctx){var numAttribs=ctx.getParameter(ctx.MAX_VERTEX_ATTRIBS);var tmp=ctx.createBuffer();ctx.bindBuffer(ctx.ARRAY_BUFFER,tmp);for(var ii=0;ii<numAttribs;++ii){ctx.disableVertexAttribArray(ii);ctx.vertexAttribPointer(ii,4,ctx.FLOAT,false,0,0);ctx.vertexAttrib1f(ii,0)}ctx.deleteBuffer(tmp);var numTextureUnits=ctx.getParameter(ctx.MAX_TEXTURE_IMAGE_UNITS);for(var ii=0;ii<numTextureUnits;++ii){ctx.activeTexture(ctx.TEXTURE0+ii);ctx.bindTexture(ctx.TEXTURE_CUBE_MAP,null);ctx.bindTexture(ctx.TEXTURE_2D,null)}ctx.activeTexture(ctx.TEXTURE0);ctx.useProgram(null);ctx.bindBuffer(ctx.ARRAY_BUFFER,null);ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER,null);ctx.bindFramebuffer(ctx.FRAMEBUFFER,null);ctx.bindRenderbuffer(ctx.RENDERBUFFER,null);ctx.disable(ctx.BLEND);ctx.disable(ctx.CULL_FACE);ctx.disable(ctx.DEPTH_TEST);ctx.disable(ctx.DITHER);ctx.disable(ctx.SCISSOR_TEST);ctx.blendColor(0,0,0,0);ctx.blendEquation(ctx.FUNC_ADD);ctx.blendFunc(ctx.ONE,ctx.ZERO);ctx.clearColor(0,0,0,0);ctx.clearDepth(1);ctx.clearStencil(-1);ctx.colorMask(true,true,true,true);ctx.cullFace(ctx.BACK);ctx.depthFunc(ctx.LESS);ctx.depthMask(true);ctx.depthRange(0,1);ctx.frontFace(ctx.CCW);ctx.hint(ctx.GENERATE_MIPMAP_HINT,ctx.DONT_CARE);ctx.lineWidth(1);ctx.pixelStorei(ctx.PACK_ALIGNMENT,4);ctx.pixelStorei(ctx.UNPACK_ALIGNMENT,4);ctx.pixelStorei(ctx.UNPACK_FLIP_Y_WEBGL,false);ctx.pixelStorei(ctx.UNPACK_PREMULTIPLY_ALPHA_WEBGL,false);if(ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL){ctx.pixelStorei(ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL,ctx.BROWSER_DEFAULT_WEBGL)}ctx.polygonOffset(0,0);ctx.sampleCoverage(1,false);ctx.scissor(0,0,ctx.canvas.width,ctx.canvas.height);ctx.stencilFunc(ctx.ALWAYS,0,4294967295);ctx.stencilMask(4294967295);ctx.stencilOp(ctx.KEEP,ctx.KEEP,ctx.KEEP);ctx.viewport(0,0,ctx.canvas.width,ctx.canvas.height);ctx.clear(ctx.COLOR_BUFFER_BIT|ctx.DEPTH_BUFFER_BIT|ctx.STENCIL_BUFFER_BIT);while(ctx.getError());}function makeLostContextSimulatingCanvas(canvas){var unwrappedContext_;var wrappedContext_;var onLost_=[];var onRestored_=[];var wrappedContext_={};var contextId_=1;var contextLost_=false;var resourceId_=0;var resourceDb_=[];var numCallsToLoseContext_=0;var numCalls_=0;var canRestore_=false;var restoreTimeout_=0;var glErrorShadow_={};canvas.getContext=function(f){return function(){var ctx=f.apply(canvas,arguments);if(ctx instanceof WebGLRenderingContext){if(ctx!=unwrappedContext_){if(unwrappedContext_){throw"got different context"}unwrappedContext_=ctx;wrappedContext_=makeLostContextSimulatingContext(unwrappedContext_)}return wrappedContext_}return ctx}}(canvas.getContext);function wrapEvent(listener){if(typeof listener=="function"){return listener}else{return function(info){listener.handleEvent(info)}}}var addOnContextLostListener=function(listener){onLost_.push(wrapEvent(listener))};var addOnContextRestoredListener=function(listener){onRestored_.push(wrapEvent(listener))};function wrapAddEventListener(canvas){var f=canvas.addEventListener;canvas.addEventListener=function(type,listener,bubble){switch(type){case"webglcontextlost":addOnContextLostListener(listener);break;case"webglcontextrestored":addOnContextRestoredListener(listener);break;default:f.apply(canvas,arguments)}}}wrapAddEventListener(canvas);canvas.loseContext=function(){if(!contextLost_){contextLost_=true;numCallsToLoseContext_=0;++contextId_;while(unwrappedContext_.getError());clearErrors();glErrorShadow_[unwrappedContext_.CONTEXT_LOST_WEBGL]=true;var event=makeWebGLContextEvent("context lost");var callbacks=onLost_.slice();setTimeout(function(){for(var ii=0;ii<callbacks.length;++ii){callbacks[ii](event)}if(restoreTimeout_>=0){setTimeout(function(){canvas.restoreContext()},restoreTimeout_)}},0)}};canvas.restoreContext=function(){if(contextLost_){if(onRestored_.length){setTimeout(function(){if(!canRestore_){throw"can not restore. webglcontestlost listener did not call event.preventDefault"}freeResources();resetToInitialState(unwrappedContext_);contextLost_=false;numCalls_=0;canRestore_=false;var callbacks=onRestored_.slice();var event=makeWebGLContextEvent("context restored");for(var ii=0;ii<callbacks.length;++ii){callbacks[ii](event)}},0)}}};canvas.loseContextInNCalls=function(numCalls){if(contextLost_){throw"You can not ask a lost contet to be lost"}numCallsToLoseContext_=numCalls_+numCalls};canvas.getNumCalls=function(){return numCalls_};canvas.setRestoreTimeout=function(timeout){restoreTimeout_=timeout};function isWebGLObject(obj){return obj instanceof WebGLBuffer||obj instanceof WebGLFramebuffer||obj instanceof WebGLProgram||obj instanceof WebGLRenderbuffer||obj instanceof WebGLShader||obj instanceof WebGLTexture}function checkResources(args){for(var ii=0;ii<args.length;++ii){var arg=args[ii];if(isWebGLObject(arg)){return arg.__webglDebugContextLostId__==contextId_}}return true}function clearErrors(){var k=Object.keys(glErrorShadow_);for(var ii=0;ii<k.length;++ii){delete glErrorShadow_[k]}}function loseContextIfTime(){++numCalls_;if(!contextLost_){if(numCallsToLoseContext_==numCalls_){canvas.loseContext()}}}function makeLostContextFunctionWrapper(ctx,functionName){var f=ctx[functionName];return function(){loseContextIfTime();if(!contextLost_){var result=f.apply(ctx,arguments);return result}}}function freeResources(){for(var ii=0;ii<resourceDb_.length;++ii){var resource=resourceDb_[ii];if(resource instanceof WebGLBuffer){unwrappedContext_.deleteBuffer(resource)}else if(resource instanceof WebGLFramebuffer){unwrappedContext_.deleteFramebuffer(resource)}else if(resource instanceof WebGLProgram){unwrappedContext_.deleteProgram(resource)}else if(resource instanceof WebGLRenderbuffer){unwrappedContext_.deleteRenderbuffer(resource)}else if(resource instanceof WebGLShader){unwrappedContext_.deleteShader(resource)}else if(resource instanceof WebGLTexture){unwrappedContext_.deleteTexture(resource)}}}function makeWebGLContextEvent(statusMessage){return{statusMessage:statusMessage,preventDefault:function(){canRestore_=true}}}return canvas;function makeLostContextSimulatingContext(ctx){for(var propertyName in ctx){if(typeof ctx[propertyName]=="function"){wrappedContext_[propertyName]=makeLostContextFunctionWrapper(ctx,propertyName)}else{makePropertyWrapper(wrappedContext_,ctx,propertyName)}}wrappedContext_.getError=function(){loseContextIfTime();if(!contextLost_){var err;while(err=unwrappedContext_.getError()){glErrorShadow_[err]=true}}for(var err in glErrorShadow_){if(glErrorShadow_[err]){delete glErrorShadow_[err];return err}}return wrappedContext_.NO_ERROR};var creationFunctions=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];for(var ii=0;ii<creationFunctions.length;++ii){var functionName=creationFunctions[ii];wrappedContext_[functionName]=function(f){return function(){loseContextIfTime();if(contextLost_){return null}var obj=f.apply(ctx,arguments);obj.__webglDebugContextLostId__=contextId_;resourceDb_.push(obj);return obj}}(ctx[functionName])}var functionsThatShouldReturnNull=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(var ii=0;ii<functionsThatShouldReturnNull.length;++ii){var functionName=functionsThatShouldReturnNull[ii];wrappedContext_[functionName]=function(f){return function(){loseContextIfTime();if(contextLost_){return null}return f.apply(ctx,arguments)}}(wrappedContext_[functionName])}var isFunctions=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(var ii=0;ii<isFunctions.length;++ii){var functionName=isFunctions[ii];wrappedContext_[functionName]=function(f){return function(){loseContextIfTime();if(contextLost_){return false}return f.apply(ctx,arguments)}}(wrappedContext_[functionName])}wrappedContext_.checkFramebufferStatus=function(f){return function(){loseContextIfTime();if(contextLost_){return wrappedContext_.FRAMEBUFFER_UNSUPPORTED}return f.apply(ctx,arguments)}}(wrappedContext_.checkFramebufferStatus);wrappedContext_.getAttribLocation=function(f){return function(){loseContextIfTime();if(contextLost_){return-1}return f.apply(ctx,arguments)}}(wrappedContext_.getAttribLocation);wrappedContext_.getVertexAttribOffset=function(f){return function(){loseContextIfTime();if(contextLost_){return 0}return f.apply(ctx,arguments)}}(wrappedContext_.getVertexAttribOffset);wrappedContext_.isContextLost=function(){return contextLost_};return wrappedContext_}}return{init:init,mightBeEnum:mightBeEnum,glEnumToString:glEnumToString,glFunctionArgToString:glFunctionArgToString,glFunctionArgsToString:glFunctionArgsToString,makeDebugContext:makeDebugContext,makeLostContextSimulatingCanvas:makeLostContextSimulatingCanvas,resetToInitialState:resetToInitialState}}();module.exports=WebGLDebugUtils}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],349:[function(require,module,exports){"use strict";module.exports={hasTexture1:false,hasTextureCube1:false,enableLights:false,useReflection:false,enablePicking:false,hasPickingColors:false,hasFog:false}},{}],350:[function(require,module,exports){"use strict";module.exports=require("../dist/shaderlib-helpers")},{"../dist/shaderlib-helpers":1}],351:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Renderer=exports.cancelAnimationFrame=exports.requestAnimationFrame=undefined;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _desc,_value,_class;exports.frame=frame;exports.endFrame=endFrame;var _autobindDecorator=require("autobind-decorator");var _autobindDecorator2=_interopRequireDefault(_autobindDecorator);var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);var _utils=require("../utils");var _webgl=require("../webgl");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object["ke"+"ys"](descriptor).forEach(function(key){desc[key]=descriptor[key]});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if("value"in desc||desc.initializer){desc.writable=true}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined}if(desc.initializer===void 0){Object["define"+"Property"](target,property,desc);desc=null}return desc}var INITIAL_CONTEXT={tick:-1};var requestAnimationFrame=exports.requestAnimationFrame=_utils.isBrowser?window.requestAnimationFrame:nodeRequestAnimationFrame;var cancelAnimationFrame=exports.cancelAnimationFrame=_utils.isBrowser?window.cancelAnimationFrame:nodeCancelAnimationFrame;var animationFrameId=null;function frame(canvas,renderFrame){nextFrame(canvas,renderFrame,INITIAL_CONTEXT)}function endFrame(){if(animationFrameId){cancelAnimationFrame(animationFrameId);animationFrameId=null}}function nextFrame(canvas,renderFrame,context){context.tick++;resizeCanvasRenderBuffer(canvas);context.width=canvas.width;context.height=canvas.height;renderFrame(context);animationFrameId=requestAnimationFrame(nextFrame.bind(null,canvas,renderFrame,context))}function resizeCanvasRenderBuffer(canvas){var dpr=window.devicePixelRatio||1;canvas.width=canvas.clientWidth*dpr;canvas.height=canvas.clientHeight*dpr}function nodeRequestAnimationFrame(callback){return setTimeout(callback,1e3/60)}function nodeCancelAnimationFrame(requestId){return clearTimeout(requestId)}var bodyLoadPromise=new Promise(function(resolve,reject){window.onload=function(){resolve(document.body)}});var Renderer=exports.Renderer=(_class=function(){function Renderer(){var _this=this;var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$gl=_ref.gl;var gl=_ref$gl===undefined?null:_ref$gl;var _ref$canvas=_ref.canvas;var canvas=_ref$canvas===undefined?null:_ref$canvas;var _ref$width=_ref.width;var width=_ref$width===undefined?null:_ref$width;var _ref$height=_ref.height;var height=_ref$height===undefined?null:_ref$height;var _ref$autoResizeCanvas=_ref.autoResizeCanvas;var autoResizeCanvas=_ref$autoResizeCanvas===undefined?true:_ref$autoResizeCanvas;var _ref$autoResizeViewpo=_ref.autoResizeViewport;var autoResizeViewport=_ref$autoResizeViewpo===undefined?true:_ref$autoResizeViewpo;var _ref$autoResizeDrawin=_ref.autoResizeDrawingBuffer;var autoResizeDrawingBuffer=_ref$autoResizeDrawin===undefined?true:_ref$autoResizeDrawin;var _ref$useDevicePixelRa=_ref.useDevicePixelRatio;var useDevicePixelRatio=_ref$useDevicePixelRa===undefined?true:_ref$useDevicePixelRa;var glOpts=_objectWithoutProperties(_ref,["gl","canvas","width","height","autoResizeCanvas","autoResizeViewport","autoResizeDrawingBuffer","useDevicePixelRatio"]);_classCallCheck(this,Renderer);this.update({autoResizeDrawingBuffer:autoResizeDrawingBuffer,useDevicePixelRatio:useDevicePixelRatio});this.autoResizeCanvas=autoResizeCanvas;this.width=width;this.height=height;this._startPromise=bodyLoadPromise.then(function(body){canvas=typeof canvas==="string"?document.getElementById(canvas):canvas;_this.canvas=canvas||_this._createCanvas(autoResizeCanvas);(0,_assert2.default)(_this.canvas instanceof HTMLCanvasElement,"Illegal parameter canvas");_this.gl=gl||(0,_webgl.createGLContext)(_extends({canvas:_this.canvas},glOpts));if(Number.isFinite(width)&&Number.isFinite(height)){_this.resize(width,height)}return{}})}_createClass(Renderer,[{key:"update",value:function update(_ref2){var _ref2$autoResizeDrawi=_ref2.autoResizeDrawingBuffer;var autoResizeDrawingBuffer=_ref2$autoResizeDrawi===undefined?true:_ref2$autoResizeDrawi;var _ref2$autoResizeViewp=_ref2.autoResizeViewport;var autoResizeViewport=_ref2$autoResizeViewp===undefined?true:_ref2$autoResizeViewp;var _ref2$useDevicePixelR=_ref2.useDevicePixelRatio;var useDevicePixelRatio=_ref2$useDevicePixelR===undefined?true:_ref2$useDevicePixelR;this.autoResizeDrawingBuffer=autoResizeDrawingBuffer;this.autoResizeViewport=autoResizeViewport;this.useDevicePixelRatio=useDevicePixelRatio;return this}},{key:"init",value:function init(onInit){var _this2=this;this._startPromise=this._startPromise.then(function(){_this2._context=_extends({},INITIAL_CONTEXT,{gl:_this2.gl,canvas:_this2.canvas,renderer:_this2,stop:_this2.stop});return onInit(_this2._context)||{}});return this}},{key:"frame",value:function frame(onRenderFrame){var _this3=this;this.stop();this._onRender=onRenderFrame;this._context=_extends({},INITIAL_CONTEXT,{gl:this.gl,canvas:this.canvas,renderer:this,stop:this.stop});this._startPromise.then(function(){var appContext=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];if((typeof appContext==="undefined"?"undefined":_typeof(appContext))==="object"&&appContext!==null){
_this3._context=_extends({},appContext,_this3._context)}_this3._nextFrame()});return this}},{key:"stop",value:function stop(){if(this._animationFrameId){cancelAnimationFrame(this._animationFrameId);this._animationFrameId=null}return this}},{key:"resizeCanvas",value:function resizeCanvas(width,height){if(this.canvas){this.canvas.style.width=width+"px";this.canvas.style.height=height+"px";this.autoResizeCanvas=false}return this}},{key:"resizeDrawingBuffer",value:function resizeDrawingBuffer(width,height){if(this.canvas){this.canvas.width=width;this.canvas.height=height;this.autoResizeDrawingBuffer=false}return this}},{key:"_nextFrame",value:function _nextFrame(){this._resizeCanvasDrawingBuffer(this.canvas);this._context.width=this.canvas.width;this._context.height=this.canvas.height;this._context.tick++;if(this.autoResizeViewport){this.gl.viewport(0,0,this._context.width,this._context.height)}this._onRender(this._context);this._animationFrameId=requestAnimationFrame(this._nextFrame)}},{key:"_createCanvas",value:function _createCanvas(){var canvas=document.createElement("canvas");canvas.id="lumagl-canvas";canvas.style.width="100%";canvas.style.height="100%";var body=document.body;body.insertBefore(canvas,body.firstChild);return canvas}},{key:"_resizeCanvasDrawingBuffer",value:function _resizeCanvasDrawingBuffer(){if(this.autoResizeDrawingBuffer){var dpr=this.useDevicePixelRatio?window.devicePixelRatio||1:1;this.canvas.width=this.canvas.clientWidth*dpr;this.canvas.height=this.canvas.clientHeight*dpr}}}]);return Renderer}(),_applyDecoratedDescriptor(_class.prototype,"stop",[_autobindDecorator2.default],Object.getOwnPropertyDescriptor(_class.prototype,"stop"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_nextFrame",[_autobindDecorator2.default],Object.getOwnPropertyDescriptor(_class.prototype,"_nextFrame"),_class.prototype),_class)},{"../utils":389,"../webgl":399,assert:3,"autobind-decorator":5}],352:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=require("../utils");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Queue=[];var Fx=function(){function Fx(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Fx);this.opt=(0,_utils.merge)({delay:0,duration:1e3,transition:function transition(x){return x},onCompute:_utils.noop,onComplete:_utils.noop},options)}_createClass(Fx,[{key:"start",value:function start(options){this.opt=(0,_utils.merge)(this.opt,options||{});this.time=Date.now();this.animating=true;Queue.push(this)}},{key:"step",value:function step(){if(!this.animating){return}var currentTime=Date.now(),time=this.time,opt=this.opt,delay=opt.delay,duration=opt.duration,delta=0;if(currentTime<time+delay){opt.onCompute.call(this,delta);return}if(currentTime<time+delay+duration){delta=opt.transition((currentTime-time-delay)/duration);opt.onCompute.call(this,delta)}else{this.animating=false;opt.onCompute.call(this,1);opt.onComplete.call(this)}}}],[{key:"compute",value:function compute(from,to,delta){return from+(to-from)*delta}}]);return Fx}();exports.default=Fx;Fx.Queue=Queue;Fx.Transition={linear:function linear(p){return p}};var Trans=Fx.Transition;Fx.prototype.time=null;function makeTrans(transition,params){params=(0,_utils.splat)(params);return Object.assign(transition,{easeIn:function easeIn(pos){return transition(pos,params)},easeOut:function easeOut(pos){return 1-transition(1-pos,params)},easeInOut:function easeInOut(pos){return pos<=.5?transition(2*pos,params)/2:(2-transition(2*(1-pos),params))/2}})}var transitions={Pow:function Pow(p,x){return Math.pow(p,x[0]||6)},Expo:function Expo(p){return Math.pow(2,8*(p-1))},Circ:function Circ(p){return 1-Math.sin(Math.acos(p))},Sine:function Sine(p){return 1-Math.sin((1-p)*Math.PI/2)},Back:function Back(p,x){x=x[0]||1.618;return Math.pow(p,2)*((x+1)*p-x)},Bounce:function Bounce(p){var value;for(var a=0,b=1;1;a+=b,b/=2){if(p>=(7-4*a)/11){value=b*b-Math.pow((11-6*a-11*p)/4,2);break}}return value},Elastic:function Elastic(p,x){return Math.pow(2,10*--p)*Math.cos(20*p*Math.PI*(x[0]||1)/3)}};for(var t in transitions){Trans[t]=makeTrans(transitions[t])}["Quad","Cubic","Quart","Quint"].forEach(function(elem,i){Trans[elem]=makeTrans(function(p){return Math.pow(p,[i+2])})});var global;try{global=window}catch(e){global=null}var checkFxQueue=function checkFxQueue(){var oldQueue=Queue;Queue=[];if(oldQueue.length){for(var i=0,l=oldQueue.length,fx;i<l;i++){fx=oldQueue[i];fx.step();if(fx.animating){Queue.push(fx)}}Fx.Queue=Queue}};if(global){var found=false;["webkitAnimationTime","mozAnimationTime","animationTime","webkitAnimationStartTime","mozAnimationStartTime","animationStartTime"].forEach(function(impl){if(impl in global){Fx.animationTime=function(){return global[impl]};found=true}});if(!found){Fx.animationTime=Date.now}found=false;["webkitRequestAnimationFrame","mozRequestAnimationFrame","requestAnimationFrame"].forEach(function(impl){if(impl in global){Fx.requestAnimationFrame=function(callback){global[impl](function(){checkFxQueue();callback()})};found=true}});if(!found){Fx.requestAnimationFrame=function(callback){setTimeout(function(){checkFxQueue();callback()},1e3/60)}}}},{"../utils":389}],353:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultShaders=getDefaultShaders;exports.getStringFromHTML=getStringFromHTML;exports.getShadersFromHTML=getShadersFromHTML;var _shaderlib=require("../../shaderlib");var _shaderlib2=_interopRequireDefault(_shaderlib);var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDefaultShaders(_ref){var id=_ref.id;return{vs:_shaderlib2.default.Vertex.Default,fs:_shaderlib2.default.Fragment.Default,id:id}}function getStringFromHTML(id){return document.getElementById(id).innerHTML}function getShadersFromHTML(_ref2){var vs=_ref2.vs;var fs=_ref2.fs;var id=_ref2.id;(0,_assert2.default)(vs);(0,_assert2.default)(fs);return{vs:document.getElementById(vs).innerHTML,fs:document.getElementById(fs).innerHTML,id:id}}},{"../../shaderlib":350,assert:3}],354:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkerGroup=exports.Fx=undefined;var _media=require("./media");Object.keys(_media).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _media[key]}})});var _fx=require("./fx");Object.defineProperty(exports,"Fx",{enumerable:true,get:function get(){return _interopRequireDefault(_fx).default}});var _workers=require("./workers");Object.defineProperty(exports,"WorkerGroup",{enumerable:true,get:function get(){return _interopRequireDefault(_workers).default}});var _helpers=require("./helpers");Object.keys(_helpers).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _helpers[key]}})});var _frame=require("./frame");Object.keys(_frame).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _frame[key]}})});var _fx2=_interopRequireDefault(_fx);var _workers2=_interopRequireDefault(_workers);var helpers=_interopRequireWildcard(_helpers);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}if(typeof window!=="undefined"&&window.LumaGL){window.LumaGL.addons={Fx:_fx2.default,WorkerGroup:_workers2.default};Object.assign(window.LumaGL.addons,helpers)}},{"./frame":351,"./fx":352,"./helpers":353,"./media":355,"./workers":356}],355:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.postProcessImage=postProcessImage;var _webgl=require("../webgl");var _geometry=require("../core/geometry");var _camera=require("../core/camera");var _scenegraph=require("../scenegraph");var _scenegraph2=_interopRequireDefault(_scenegraph);var _utils=require("../utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var length=.16568542494923805;var camera=new _camera.PerspectiveCamera({fov:45,aspect:1,near:.1,far:500,position:[0,0,.2]});function postProcessImage(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var program=_ref.program;var fromTexture=_ref.fromTexture;var toFrameBuffer=_ref.toFrameBuffer;var toScreen=_ref.toScreen;var width=_ref.width;var height=_ref.height;var _ref$viewportX=_ref.viewportX;var viewportX=_ref$viewportX===undefined?0:_ref$viewportX;var _ref$viewportY=_ref.viewportY;var viewportY=_ref$viewportY===undefined?0:_ref$viewportY;var _ref$aspectRatio=_ref.aspectRatio;var aspectRatio=_ref$aspectRatio===undefined?Math.max(height/width,width/height):_ref$aspectRatio;var textures=opt.fromTexture?(0,_utils.splat)(opt.fromTexture):[];var framebuffer=opt.toFrameBuffer;var screen=!!opt.toScreen;var width=opt.width||app.canvas.width;var height=opt.height||app.canvas.height;var x=opt.viewportX;var y=opt.viewportY;var plane=new _geometry.Plane({program:program,type:"x,y",xlen:length,ylen:length,offset:0});plane.textures=textures;plane.program=program;camera.aspect=opt.aspectRatio;camera.update();var scene=new _scenegraph2.default(app,program,camera);scene.program=program;if(!scene.models.length){scene.add(plane)}var fbo=new FrameBuffer(framebuffer,{width:width,height:height,bindToTexture:{parameters:[{name:"TEXTURE_MAG_FILTER",value:"LINEAR"},{name:"TEXTURE_MIN_FILTER",value:"LINEAR",generateMipmap:false}]},bindToRenderBuffer:false});fbo.bind();gl.viewport(x,y,width,height);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);program.setUniforms(opt.uniforms||{});scene.renderToTexture(framebuffer);app.setFrameBuffer(framebuffer,false);if(screen){program.use();gl.viewport(x,y,width,height);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);program.setUniforms(opt.uniforms||{});scene.render()}return this}},{"../core/camera":359,"../core/geometry":362,"../scenegraph":385,"../utils":389,"../webgl":399}],356:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var WorkerGroup=function(){function WorkerGroup(fileName,n){_classCallCheck(this,WorkerGroup);var workers=this.workers=[];while(n--){workers.push(new Worker(fileName))}}_createClass(WorkerGroup,[{key:"map",value:function map(func){var workers=this.workers;var configs=this.configs=[];for(var i=0,l=workers.length;i<l;i++){configs.push(func&&func(i))}return this}},{key:"reduce",value:function reduce(opt){var fn=opt.reduceFn;var workers=this.workers;var configs=this.configs;var l=workers.length;var acum=opt.initialValue;var message=function _(e){l--;if(acum===undefined){acum=e.data}else{acum=fn(acum,e.data)}if(l===0){opt.onComplete(acum)}};for(var i=0,ln=l;i<ln;i++){var w=workers[i];w.onmessage=message;w.postMessage(configs[i])}return this}}]);return WorkerGroup}();exports.default=WorkerGroup},{}],357:[function(require,module,exports){"use strict";require("babel-polyfill");var _index=require("./index");var LumaGL=_interopRequireWildcard(_index);var _addons=require("./addons");var addons=_interopRequireWildcard(_addons);var _utils=require("./utils");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}if(typeof window!=="undefined"){Object.assign(_utils.lumagl,LumaGL);_utils.lumagl.addons=addons}},{"./addons":354,"./index":373,"./utils":389,"babel-polyfill":6}],358:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=require("../utils");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var AttributeManager=function(){function AttributeManager(_ref){var _ref$id=_ref.id;var id=_ref$id===undefined?"":_ref$id;_classCallCheck(this,AttributeManager);this.id=id;this.attributes={};this.allocedInstances=-1;this.needsRedraw=true;this.userData={};Object.seal(this)}_createClass(AttributeManager,[{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"getChangedAttributes",value:function getChangedAttributes(_ref2){var _ref2$clearChangedFla=_ref2.clearChangedFlags;var clearChangedFlags=_ref2$clearChangedFla===undefined?false:_ref2$clearChangedFla;var attributes=this.attributes;var changedAttributes={};for(var attributeName in attributes){var attribute=attributes[attributeName];if(attribute.changed){attribute.changed=attribute.changed&&!clearChangedFlags;changedAttributes[attributeName]=attribute}}return changedAttributes}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var _ref3=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref3$clearRedrawFlag=_ref3.clearRedrawFlags;var clearRedrawFlags=_ref3$clearRedrawFlag===undefined?false:_ref3$clearRedrawFlag;var redraw=this.needsRedraw;redraw=redraw||this.needsRedraw;this.needsRedraw=this.needsRedraw&&!clearRedrawFlags;return redraw}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var redraw=arguments.length<=0||arguments[0]===undefined?true:arguments[0];this.needsRedraw=true;return this}},{key:"add",value:function add(attributes,updaters){var newAttributes=this._add(attributes,updaters,{});Object.assign(this.attributes,newAttributes)}},{key:"addDynamic",value:function addDynamic(attributes,updaters){var newAttributes=this._add(attributes,updaters,{autoUpdate:true});Object.assign(this.attributes,newAttributes)}},{key:"addInstanced",value:function addInstanced(attributes,updaters){var newAttributes=this._add(attributes,updaters,{instanced:1,autoUpdate:true});Object.assign(this.attributes,newAttributes)}},{key:"invalidate",value:function invalidate(attributeName){var attributes=this.attributes;var attribute=attributes[attributeName];(0,_assert2.default)(attribute);attribute.needsUpdate=true;_utils.log.log(1,"invalidated attribute "+attributeName+" for "+this.id)}},{key:"invalidateAll",value:function invalidateAll(){var attributes=this.attributes;for(var attributeName in attributes){this.invalidate(attributeName)}}},{key:"update",value:function update(){var _ref4=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var numInstances=_ref4.numInstances;var _ref4$buffers=_ref4.buffers;var buffers=_ref4$buffers===undefined?{}:_ref4$buffers;var context=_ref4.context;var data=_ref4.data;var getValue=_ref4.getValue;var opts=_objectWithoutProperties(_ref4,["numInstances","buffers","context","data","getValue"]);this._checkBuffers(buffers,opts);this._setBuffers(buffers);this._allocateBuffers({numInstances:numInstances});this._updateBuffers({numInstances:numInstances,context:context,data:data,getValue:getValue})}},{key:"_setBuffers",value:function _setBuffers(bufferMap,opt){var attributes=this.attributes;for(var attributeName in attributes){var attribute=attributes[attributeName];var buffer=bufferMap[attributeName];if(buffer){attribute.isExternalBuffer=true;attribute.needsUpdate=false;if(attribute.value!==buffer){attribute.value=buffer;attribute.changed=true;this.needsRedraw=true}}else{attribute.isExternalBuffer=false}}}},{key:"_allocateBuffers",value:function _allocateBuffers(_ref5){var numInstances=_ref5.numInstances;var allocedInstances=this.allocedInstances;var attributes=this.attributes;(0,_assert2.default)(numInstances!==undefined);if(numInstances>allocedInstances){var allocCount=Math.max(numInstances,1);for(var attributeName in attributes){var attribute=attributes[attributeName];var size=attribute.size;var isExternalBuffer=attribute.isExternalBuffer;var autoUpdate=attribute.autoUpdate;if(!isExternalBuffer&&autoUpdate){var ArrayType=attribute.type||Float32Array;attribute.value=new ArrayType(size*allocCount);attribute.needsUpdate=true;_utils.log.log(2,"allocated "+allocCount+" "+attributeName+" for "+this.id)}}this.allocedInstances=allocCount}}},{key:"_updateBuffers",value:function _updateBuffers(_ref6){var numInstances=_ref6.numInstances;var data=_ref6.data;var getValue=_ref6.getValue;var context=_ref6.context;var attributes=this.attributes;for(var attributeName in attributes){var attribute=attributes[attributeName];var update=attribute.update;if(attribute.needsUpdate&&attribute.autoUpdate){if(update){_utils.log.log(2,"autoupdating "+numInstances+" "+attributeName+" for "+this.id);update.call(context,attribute,numInstances)}else{_utils.log.log(2,"autocalculating "+numInstances+" "+attributeName+" for "+this.id);this._updateAttributeFromData(attribute,data,getValue)}attribute.needsUpdate=false;attribute.changed=true;this.needsRedraw=true}}}},{key:"_updateAttributeFromData",value:function _updateAttributeFromData(attribute){var data=arguments.length<=1||arguments[1]===undefined?[]:arguments[1];var getValue=arguments.length<=2||arguments[2]===undefined?function(x){return x}:arguments[2];var i=0;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=data[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var object=_step.value;var values=getValue(object);if(!attribute.isExternalBuffer){var value=attribute.value;var size=attribute.size;value[i*size+0]=values[attribute[0]];if(size>=2){value[i*size+1]=values[attribute[0]]}if(size>=3){value[i*size+2]=values[attribute[0]]}if(size>=4){value[i*size+3]=values[attribute[0]]}}i++}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}},{key:"_checkBuffers",value:function _checkBuffers(){var bufferMap=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var opts=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var attributes=this.attributes;var numInstances=this.numInstances;for(var attributeName in bufferMap){var attribute=attributes[attributeName];var buffer=bufferMap[attributeName];if(!attribute&&!opts.ignoreUnknownAttributes){throw new Error("Unknown attribute prop "+attributeName)}if(attribute){if(!(buffer instanceof Float32Array)){throw new Error("Attribute properties must be of type Float32Array")}if(attribute.auto&&buffer.length<=numInstances*attribute.size){throw new Error("Attribute prop array must match length and size")}}}}},{key:"_add",value:function _add(attributes,updaters){var _extraProps=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var newAttributes={};for(var attributeName in attributes){var attribute=attributes[attributeName];var updater=updaters&&updaters[attributeName];this._validate(attributeName,attribute,updater);var attributeData=_extends({target:undefined,isIndexed:false,userData:{}},attribute,updater,{isExternalBuffer:false,needsUpdate:true,changed:true,size:attribute.size,value:attribute.value||null},_extraProps);Object.seal(attributeData);this.attributes[attributeName]=attributeData}return newAttributes}},{key:"_validate",value:function _validate(attributeName,attribute,updater){(0,_assert2.default)(typeof attribute.size==="number","Attribute definition for "+attributeName+" missing size");(0,_assert2.default)(typeof attribute[0]==="string","Attribute definition for "+attributeName+" missing key 0");if(attribute.size>=2){(0,_assert2.default)(typeof attribute[1]==="string","Attribute definition for "+attributeName+" missing key 1")}if(attribute.size>=3){(0,_assert2.default)(typeof attribute[2]==="string","Attribute definition for "+attributeName+" missing key 2")}if(attribute.size>=4){(0,_assert2.default)(typeof attribute[3]==="string","Attribute definition for "+attributeName+" missing key 3")}(0,_assert2.default)(!updater||typeof updater.update==="function","Attribute updater for "+attributeName+" missing update method")}}]);return AttributeManager}();exports.default=AttributeManager},{"../utils":389,assert:3}],359:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OrthoCamera=exports.PerspectiveCamera=exports.Camera=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _math=require("../math");var _utils=require("../utils");function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Camera=exports.Camera=function(){function Camera(){var opts=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Camera);opts=(0,_utils.merge)({fov:45,near:.1,far:500,aspect:1,position:new _math.Vec3(0,0,0),target:new _math.Vec3(0,0,-1),up:new _math.Vec3(0,1,0)},opts);this.fov=opts.fov;this.near=opts.near;this.far=opts.far;this.aspect=opts.aspect;this.position=opts.position;this.target=opts.target;this.up=opts.up;this.view=new _math.Mat4;this.uniforms={};this.projection=new _math.Mat4;Object.seal(this);this.update()}_createClass(Camera,[{key:"project",value:function project(){return null}},{key:"unproject",value:function unproject(){return null}},{key:"getUniforms",value:function getUniforms(){return this.uniforms}},{key:"_updateUniforms",value:function _updateUniforms(){var viewProjection=this.view.mulMat4(this.projection);var viewProjectionInverse=viewProjection.invert();this.uniforms={cameraPosition:this.position,projectionMatrix:this.projection,viewMatrix:this.view,viewProjectionMatrix:viewProjection,viewInverseMatrix:this.view.invert(),viewProjectionInverseMatrix:viewProjectionInverse}}}]);return Camera}();var PerspectiveCamera=exports.PerspectiveCamera=function(_Camera){_inherits(PerspectiveCamera,_Camera);function PerspectiveCamera(){_classCallCheck(this,PerspectiveCamera);return _possibleConstructorReturn(this,Object.getPrototypeOf(PerspectiveCamera).apply(this,arguments))}_createClass(PerspectiveCamera,[{key:"update",value:function update(){this.projection=(new _math.Mat4).perspective(this.fov,this.aspect,this.near,this.far);this.view.lookAt(this.position,this.target,this.up);this._updateUniforms()}}]);return PerspectiveCamera}(Camera);var OrthoCamera=exports.OrthoCamera=function(){function OrthoCamera(){_classCallCheck(this,OrthoCamera)}_createClass(OrthoCamera,[{key:"update",value:function update(){var ymax=this.near*Math.tan(this.fov*Math.PI/360);var ymin=-ymax;var xmin=ymin*this.aspect;var xmax=ymax*this.aspect;this.projection=(new _math.Mat4).ortho(xmin,xmax,ymin,ymax,this.near,this.far);this.view.lookAt(this.position,this.target,this.up);this._updateUniforms()}}]);return OrthoCamera}()},{"../math":383,"../utils":389}],360:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var MAX_TEXTURES=exports.MAX_TEXTURES=10;var MAX_POINT_LIGHTS=exports.MAX_POINT_LIGHTS=4;var PICKING_RES=exports.PICKING_RES=4},{}],361:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Keys=exports.EventsProxy=exports.stop=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.get=get;exports.getWheel=getWheel;exports.getKey=getKey;exports.isRightClick=isRightClick;exports.getPos=getPos;exports.addEvents=addEvents;var _utils=require("../utils");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var KEYS={enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,delete:46};function toO3D(n){return n!==true?n:false}function _getPos(elem){var bbox=elem.getBoundingClientRect();return{x:bbox.left,y:bbox.top,bbox:bbox}}function get(e,win){win=win||window;return e||win.event}function getWheel(e){return e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}function getKey(e){var code=e.which||e.keyCode;var key=keyOf(code);var fKey=code-111;if(fKey>0&&fKey<13){key="f"+fKey}key=key||String.fromCharCode(code).toLowerCase();return{code:code,key:key,shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}function isRightClick(e){return e.which===3||e.button===2}function getPos(e,win){win=win||window;e=e||win.event;var doc=win.document;doc=doc.documentElement||doc.body;if(e.touches&&e.touches.length){var touchesPos=[];var l=e.touches.length;var evt=void 0;for(var i=0;i<l;++i){evt=e.touches[i];touchesPos.push({x:evt.pageX||evt.clientX+doc.scrollLeft,y:evt.pageY||evt.clientY+doc.scrollTop})}return touchesPos}var page={x:e.pageX||e.clientX+doc.scrollLeft,y:e.pageY||e.clientY+doc.scrollTop};return[page]}function _stop(e){if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}exports.stop=_stop;var EventsProxy=exports.EventsProxy=function(){function EventsProxy(domElem,opt){_classCallCheck(this,EventsProxy);this.scene=opt.scene;this.domElem=domElem;this.pos=_getPos(domElem);this.opt=this.callbacks=opt;this.size={width:domElem.width||domElem.offsetWidth,height:domElem.height||domElem.offsetHeight};this.attachEvents()}_createClass(EventsProxy,[{key:"attachEvents",value:function attachEvents(){var _this=this;var domElem=this.domElem;var opt=this.opt;if(opt.disableContextMenu){domElem.oncontextmenu=function(){return false}}if(opt.enableMouse){["mouseup","mousedown","mousemove","mouseover","mouseout"].forEach(function(action){domElem.addEventListener(action,function(e,win){_this[action](_this.eventInfo(action,e,win))},false)});var type="";if(!document.getBoxObjectFor&&window.mozInnerScreenX===null){type="mousewheel"}else{type="DOMMouseScroll"}domElem.addEventListener(type,function(e,win){_this["mousewheel"](_this.eventInfo("mousewheel",e,win))},false)}if(opt.enableTouch){["touchstart","touchmove","touchend"].forEach(function(action){domElem.addEventListener(action,function(e,win){_this[action](_this.eventInfo(action,e,win))},false)})}if(opt.enableKeyboard){["keydown","keyup"].forEach(function(action){document.addEventListener(action,function(e,win){_this[action](_this.eventInfo(action,e,win))},false)})}}},{key:"eventInfo",value:function eventInfo(type,e,win){var domElem=this.domElem;var scene=this.scene;var opt=this.opt;var size=this.getSize();var relative=opt.relative;var centerOrigin=opt.centerOrigin;var pos=opt.cachePosition&&this.pos||_getPos(domElem);var ge=get(e,win);var epos=getPos(e,win);var origPos={x:epos[0].x,y:epos[0].y};var evt={};var x=void 0;var y=void 0;for(var i=0,l=epos.length;i<l;++i){x=epos[i].x;y=epos[i].y;if(relative){x-=pos.x;y-=pos.y;if(centerOrigin){x-=size.width/2;y-=size.height/2;y*=-1}}epos[i].x=x;epos[i].y=y}switch(type){case"mousewheel":evt.wheel=getWheel(ge);break;case"keydown":case"keyup":Object.assign(evt,getKey(ge));break;case"mouseup":evt.isRightClick=isRightClick(ge);break;default:break}var cacheTarget=void 0;Object.assign(evt,{x:epos[0].x,y:epos[0].y,posArray:epos,cache:false,stop:function stop(){_stop(ge)},getTarget:function getTarget(){if(cacheTarget){return cacheTarget}return cacheTarget=opt.picking&&scene.pick(origPos.x-pos.x,origPos.y-pos.y)||true}});evt.event=ge;return evt}},{key:"getSize",value:function getSize(){if(this.cacheSize){return this.size}var domElem=this.domElem;return{width:domElem.width||domElem.offsetWidth,height:domElem.height||domElem.offsetHeight}}},{key:"mouseup",value:function mouseup(e){if(!this.moved){if(e.isRightClick){this.callbacks.onRightClick(e,this.hovered)}else{this.callbacks.onClick(e,toO3D(this.pressed));
}}if(this.pressed){if(this.moved){this.callbacks.onDragEnd(e,toO3D(this.pressed))}else{this.callbacks.onDragCancel(e,toO3D(this.pressed))}this.pressed=this.moved=false}}},{key:"mouseout",value:function mouseout(e){var rt=e.relatedTarget;var domElem=this.domElem;while(rt&&rt.parentNode){if(domElem===rt.parentNode){return}rt=rt.parentNode}if(this.hovered){this.callbacks.onMouseLeave(e,this.hovered);this.hovered=false}if(this.pressed&&this.moved){this.callbacks.onDragEnd(e);this.pressed=this.moved=false}}},{key:"mouseover",value:function mouseover(e){}},{key:"mousemove",value:function mousemove(e){if(this.pressed){this.moved=true;this.callbacks.onDragMove(e,toO3D(this.pressed));return}if(this.hovered){var target=toO3D(e.getTarget());if(!target||target.hash!==this.hash){this.callbacks.onMouseLeave(e,this.hovered);this.hovered=target;this.hash=target;if(target){this.hash=target.hash;this.callbacks.onMouseEnter(e,this.hovered)}}else{this.callbacks.onMouseMove(e,this.hovered)}}else{this.hovered=toO3D(e.getTarget());this.hash=this.hovered;if(this.hovered){this.hash=this.hovered.hash;this.callbacks.onMouseEnter(e,this.hovered)}}if(!this.opt.picking){this.callbacks.onMouseMove(e)}}},{key:"mousewheel",value:function mousewheel(e){this.callbacks.onMouseWheel(e)}},{key:"mousedown",value:function mousedown(e){this.pressed=e.getTarget();this.callbacks.onDragStart(e,toO3D(this.pressed))}},{key:"touchstart",value:function touchstart(e){this.touched=e.getTarget();this.touchedLastPosition={x:e.x,y:e.y};this.callbacks.onTouchStart(e,toO3D(this.touched))}},{key:"touchmove",value:function touchmove(e){if(this.touched){this.touchMoved=true;this.callbacks.onTouchMove(e,toO3D(this.touched))}}},{key:"touchend",value:function touchend(e){if(this.touched){if(this.touchMoved){this.callbacks.onTouchEnd(e,toO3D(this.touched))}else{e.x=isNaN(e.x)?this.touchedLastPosition.x:e.x;e.y=isNaN(e.y)?this.touchedLastPosition.y:e.y;this.callbacks.onTap(e,toO3D(this.touched));this.callbacks.onTouchCancel(e,toO3D(this.touched))}this.touched=this.touchMoved=false}}},{key:"keydown",value:function keydown(e){this.callbacks.onKeyDown(e)}},{key:"keyup",value:function keyup(e){this.callbacks.onKeyUp(e)}}]);return EventsProxy}();Object.assign(EventsProxy.prototype,{hovered:false,pressed:false,touched:false,touchedLastPosition:{x:0,y:0},touchMoved:false,moved:false});function addEvents(domElement){var opt=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];opt=_extends({cachePosition:true,cacheSize:true,relative:true,centerOrigin:true,disableContextMenu:true,bind:false,picking:false,enableTouch:true,enableMouse:true,enableKeyboard:true,onClick:_utils.noop,onRightClick:_utils.noop,onDragStart:_utils.noop,onDragMove:_utils.noop,onDragEnd:_utils.noop,onDragCancel:_utils.noop,onTouchStart:_utils.noop,onTouchMove:_utils.noop,onTouchEnd:_utils.noop,onTouchCancel:_utils.noop,onTap:_utils.noop,onMouseMove:_utils.noop,onMouseEnter:_utils.noop,onMouseLeave:_utils.noop,onMouseWheel:_utils.noop,onKeyDown:_utils.noop,onKeyUp:_utils.noop},opt);var bind=opt.bind;if(bind){for(var name in opt){if(name.match(/^on[a-zA-Z0-9]+$/)){(function(fname,fn){opt[fname]=function f(){fn.apply(bind,Array.prototype.slice.call(arguments))}})(name,opt[name])}}}return new EventsProxy(domElement,opt)}var Keys=exports.Keys=KEYS;function keyOf(code){var keyMap=Keys;for(var name in keyMap){if(keyMap[name]===code){return name}}}},{"../utils":389}],362:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=require("../utils");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ILLEGAL_ARG="Geometry: Illegal argument";var Geometry=function(){function Geometry(_ref){var _ref$id=_ref.id;var id=_ref$id===undefined?(0,_utils.uid)("geometry"):_ref$id;var _ref$drawMode=_ref.drawMode;var drawMode=_ref$drawMode===undefined?"TRIANGLES":_ref$drawMode;var _ref$vertexCount=_ref.vertexCount;var vertexCount=_ref$vertexCount===undefined?undefined:_ref$vertexCount;var attributes=_ref.attributes;var attrs=_objectWithoutProperties(_ref,["id","drawMode","vertexCount","attributes"]);_classCallCheck(this,Geometry);(0,_assert2.default)(drawMode,ILLEGAL_ARG);this.id=id;this.drawMode=drawMode;this.vertexCount=vertexCount;this.attributes={};this.needsRedraw=true;this.userData={};Object.seal(this);if(attributes){this.setAttributes(attributes)}else{this.setAttributes(attrs)}}_createClass(Geometry,[{key:"setNeedsRedraw",value:function setNeedsRedraw(){var redraw=arguments.length<=0||arguments[0]===undefined?true:arguments[0];this.needsRedraw=redraw;return this}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref2$clearRedrawFlag=_ref2.clearRedrawFlags;var clearRedrawFlags=_ref2$clearRedrawFlag===undefined?false:_ref2$clearRedrawFlag;var redraw=false;redraw=redraw||this.needsRedraw;this.needsRedraw=this.needsRedraw&&!clearRedrawFlags;return redraw}},{key:"setVertexCount",value:function setVertexCount(vertexCount){this.vertexCount=vertexCount}},{key:"getVertexCount",value:function getVertexCount(){if(this.vertexCount!==undefined){return this.vertexCount}else if(this.attributes.indices){return this.attributes.indices.value.length}else if(this.attributes.vertices){return this.attributes.vertices.value.length/3}else if(this.attributes.positions){return this.attributes.positions.value.length/3}return false}},{key:"hasAttribute",value:function hasAttribute(attributeName){return Boolean(this.attributes[attributeName])}},{key:"getAttribute",value:function getAttribute(attributeName){var attribute=this.attributes[attributeName];(0,_assert2.default)(attribute);return attribute.value}},{key:"getArray",value:function getArray(attributeName){var attribute=this.attributes[attributeName];(0,_assert2.default)(attribute);return attribute.value}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"setAttributes",value:function setAttributes(attributes){for(var attributeName in attributes){var attribute=attributes[attributeName];attribute=ArrayBuffer.isView(attribute)?{value:attribute}:attribute;(0,_assert2.default)(ArrayBuffer.isView(attribute.value),this._print(attributeName)+": must be a typed array or an object"+"with value as typed array");this._autoDetectAttribute(attributeName,attribute);this.attributes[attributeName]=_extends({},attribute,{instanced:attribute.instanced||0})}this.setNeedsRedraw();return this}},{key:"_autoDetectAttribute",value:function _autoDetectAttribute(attributeName,attribute){var category=void 0;switch(attributeName){case"indices":category=category||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":category="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":category="vectors";break}switch(category){case"vectors":attribute.size=attribute.size||3;break;case"uvs":attribute.size=attribute.size||2;break;case"indices":attribute.size=attribute.size||1;attribute.isIndexed=attribute.isIndexed||true;(0,_assert2.default)(attribute.value instanceof Uint16Array||attribute.value instanceof Uint32Array,'attribute array for "indices" must be of integer type');break}(0,_assert2.default)(attribute.size,"attribute "+attributeName+" needs size")}},{key:"_print",value:function _print(attributeName){return"Geometry "+this.id+" attribute "+attributeName}}]);return Geometry}();exports.default=Geometry},{"../utils":389,assert:3}],363:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _geometry=require("./geometry");Object.defineProperty(exports,"Geometry",{enumerable:true,get:function get(){return _interopRequireDefault(_geometry).default}});var _model=require("./model");Object.defineProperty(exports,"Model",{enumerable:true,get:function get(){return _interopRequireDefault(_model).default}});var _attributeManager=require("./attribute-manager");Object.defineProperty(exports,"AttributeManager",{enumerable:true,get:function get(){return _interopRequireDefault(_attributeManager).default}});var _camera=require("./camera");Object.keys(_camera).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _camera[key]}})});var _event=require("./event");Object.keys(_event).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _event[key]}})});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./attribute-manager":358,"./camera":359,"./event":361,"./geometry":362,"./model":364}],364:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.Material=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webgl=require("../webgl");var _object3d=require("../scenegraph/object-3d");var _object3d2=_interopRequireDefault(_object3d);var _utils=require("../utils");var _config=require("./config");var _geometry=require("./geometry");var _geometry2=_interopRequireDefault(_geometry);var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Material=exports.Material=function Material(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$shininess=_ref.shininess;var shininess=_ref$shininess===undefined?0:_ref$shininess;var _ref$reflection=_ref.reflection;var reflection=_ref$reflection===undefined?0:_ref$reflection;var _ref$refraction=_ref.refraction;var refraction=_ref$refraction===undefined?0:_ref$refraction;_classCallCheck(this,Material);this.shininess=shininess;this.reflection=reflection;this.refraction=refraction};var Model=function(_Object3D){_inherits(Model,_Object3D);function Model(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var program=_ref2.program;var _ref2$gl=_ref2.gl;var gl=_ref2$gl===undefined?null:_ref2$gl;var _ref2$vs=_ref2.vs;var vs=_ref2$vs===undefined?null:_ref2$vs;var _ref2$fs=_ref2.fs;var fs=_ref2$fs===undefined?null:_ref2$fs;var geometry=_ref2.geometry;var _ref2$material=_ref2.material;var material=_ref2$material===undefined?null:_ref2$material;var textures=_ref2.textures;var _ref2$isInstanced=_ref2.isInstanced;var isInstanced=_ref2$isInstanced===undefined?false:_ref2$isInstanced;var _ref2$instanceCount=_ref2.instanceCount;var instanceCount=_ref2$instanceCount===undefined?0:_ref2$instanceCount;var _ref2$vertexCount=_ref2.vertexCount;var vertexCount=_ref2$vertexCount===undefined?undefined:_ref2$vertexCount;var _ref2$pickable=_ref2.pickable;var pickable=_ref2$pickable===undefined?false:_ref2$pickable;var _ref2$pick=_ref2.pick;var pick=_ref2$pick===undefined?null:_ref2$pick;var _ref2$uniforms=_ref2.uniforms;var uniforms=_ref2$uniforms===undefined?{}:_ref2$uniforms;var _ref2$attributes=_ref2.attributes;var attributes=_ref2$attributes===undefined?{}:_ref2$attributes;var _ref2$render=_ref2.render;var render=_ref2$render===undefined?null:_ref2$render;var _ref2$onBeforeRender=_ref2.onBeforeRender;var onBeforeRender=_ref2$onBeforeRender===undefined?function(){}:_ref2$onBeforeRender;var _ref2$onAfterRender=_ref2.onAfterRender;var onAfterRender=_ref2$onAfterRender===undefined?function(){}:_ref2$onAfterRender;var opts=_objectWithoutProperties(_ref2,["program","gl","vs","fs","geometry","material","textures","isInstanced","instanceCount","vertexCount","pickable","pick","uniforms","attributes","render","onBeforeRender","onAfterRender"]);_classCallCheck(this,Model);(0,_assert2.default)(geometry instanceof _geometry2.default,"Model needs a geometry");var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Model).call(this,opts));_this.program=program||new _webgl.Program(gl,{vs:vs,fs:fs});(0,_assert2.default)(_this.program instanceof _webgl.Program,"Model needs a program");if(opts.instanced){console.warn("Warning: "+'Model constructor: parameter "instanced" renamed to "isInstanced". '+"This will become a hard error in a future version of luma.gl.");isInstanced=isInstanced||opts.instanced}if(textures){throw new Error('Model constructor: parameter "textures" deprecated. '+"Use uniforms to set textures")}_this.buffers={};_this.userData={};_this.drawParams={};_this.dynamic=false;_this.needsRedraw=true;_this.material=material;_this.setGeometry(geometry);_this.attributes={};_this.setAttributes(attributes);_this.uniforms={};_this.setUniforms(_extends({},_this.program.defaultUniforms,uniforms));_this.isInstanced=isInstanced;_this.instanceCount=instanceCount;_this.vertexCount=vertexCount;_this.pickable=Boolean(pickable);_this.pick=pick||function(){return false};_this.onBeforeRender=onBeforeRender;_this.onAfterRender=onAfterRender;return _this}_createClass(Model,[{key:"setNeedsRedraw",value:function setNeedsRedraw(){var redraw=arguments.length<=0||arguments[0]===undefined?true:arguments[0];this.needsRedraw=redraw;return this}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var _ref3=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref3$clearRedrawFlag=_ref3.clearRedrawFlags;var clearRedrawFlags=_ref3$clearRedrawFlag===undefined?false:_ref3$clearRedrawFlag;var redraw=false;redraw=redraw||this.needsRedraw;this.needsRedraw=this.needsRedraw&&!clearRedrawFlags;redraw=redraw||this.geometry.getNeedsRedraw({clearRedrawFlags:clearRedrawFlags});return redraw}},{key:"setInstanceCount",value:function setInstanceCount(instanceCount){(0,_assert2.default)(instanceCount!==undefined);this.instanceCount=instanceCount;return this}},{key:"getInstanceCount",value:function getInstanceCount(){return this.instanceCount}},{key:"setVertexCount",value:function setVertexCount(vertexCount){this.vertexCount=vertexCount;return this}},{key:"getVertexCount",value:function getVertexCount(){return this.vertexCount===undefined?this.geometry.getVertexCount():this.vertexCount}},{key:"isPickable",value:function isPickable(){return this.pickable}},{key:"setPickable",value:function setPickable(){var pickable=arguments.length<=0||arguments[0]===undefined?true:arguments[0];this.pickable=Boolean(pickable);return this}},{key:"getProgram",value:function getProgram(){return this.program}},{key:"getGeometry",value:function getGeometry(){return this.geometry}},{key:"setGeometry",value:function setGeometry(geometry){this.geometry=geometry;this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());this.setNeedsRedraw();return this}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"setAttributes",value:function setAttributes(){var attributes=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];Object.assign(this.attributes,attributes);this._createBuffersFromAttributeDescriptors(attributes);this.setNeedsRedraw();return this}},{key:"getUniforms",value:function getUniforms(){return this.uniforms}},{key:"setUniforms",value:function setUniforms(){var uniforms=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];(0,_webgl.checkUniformValues)(uniforms);Object.assign(this.uniforms,uniforms);this.setNeedsRedraw();return this}},{key:"render",value:function render(){var uniforms=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var camera=uniforms.camera;var viewMatrix=uniforms.viewMatrix;var otherUniforms=_objectWithoutProperties(uniforms,["camera","viewMatrix"]);if(camera){this.setUniforms(camera.getUniforms())}if(viewMatrix){this.setUniforms(this.getCoordinateUniforms(viewMatrix))}_utils.log.log(2,"Rendering model "+this.id+" - setting state",this);this.setProgramState(otherUniforms);var drawParams=this.drawParams;if(drawParams.isInstanced&&!this.isInstanced){_utils.log.warn(0,"Found instanced attributes on non-instanced model")}this.onBeforeRender();_utils.log.log(2,"Rendering model "+this.id+" - calling draw",this);this._log(3);var gl=this.program.gl;var geometry=this.geometry;var isInstanced=this.isInstanced;var instanceCount=this.instanceCount;var isIndexed=drawParams.isIndexed;var indexType=drawParams.indexType;(0,_webgl.draw)(gl,{drawMode:geometry.drawMode,vertexCount:this.getVertexCount(),isIndexed:isIndexed,indexType:indexType,isInstanced:isInstanced,instanceCount:instanceCount});this.onAfterRender();this.unsetProgramState();this.setNeedsRedraw(false);return this}},{key:"setProgramState",value:function setProgramState(uniforms){var program=this.program;program.use();program.setUniforms(_extends({},this.uniforms,uniforms));this.drawParams={};program.setBuffers(this.buffers,{drawParams:this.drawParams});return this}},{key:"unsetProgramState",value:function unsetProgramState(){this.program.unsetBuffers();return this}},{key:"_createBuffersFromAttributeDescriptors",value:function _createBuffersFromAttributeDescriptors(attributes){var gl=this.program.gl;for(var attributeName in attributes){var attribute=attributes[attributeName];if(attribute instanceof _webgl.Buffer){this.buffers[attributeName]=attribute}else{this.buffers[attributeName]=this.buffers[attributeName]||new _webgl.Buffer(gl);var buffer=this.buffers[attributeName];buffer.setData(_extends({},attribute,{data:attribute.value,target:attribute.isIndexed?_webgl.WebGL.ELEMENT_ARRAY_BUFFER:_webgl.WebGL.ARRAY_BUFFER}))}}return this}},{key:"_log",value:function _log(){var priority=arguments.length<=0||arguments[0]===undefined?3:arguments[0];if(_utils.log.priority>=priority){var table=this._getAttributesTable({header:"Attributes "+this.geometry.id,program:this.program,attributes:_extends({},this.geometry.attributes,this.attributes)});_utils.log.table(priority,table);table=(0,_webgl.getUniformsTable)({header:"Uniforms "+this.geometry.id,program:this.program,uniforms:this.uniforms});_utils.log.table(priority,table)}}},{key:"_getAttributesTable",value:function _getAttributesTable(){var _ref4=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var attributes=_ref4.attributes;var _ref4$header=_ref4.header;var header=_ref4$header===undefined?"Attributes":_ref4$header;var program=_ref4.program;(0,_assert2.default)(program);var attributeLocations=program._attributeLocations;var table=table||_defineProperty({},header,{});for(var attributeName in attributeLocations){var attribute=attributes[attributeName];var location=attributeLocations[attributeName];table[attributeName]=this._getAttributeEntry(attribute,location)}for(var _attributeName in attributes){var _attribute=attributes[_attributeName];if(!table[_attributeName]){table[_attributeName]=this._getAttributeEntry(_attribute,null)}}return table}},{key:"_getAttributeEntry",value:function _getAttributeEntry(attribute,location){var round=function round(num){return Math.round(num*10)/10};if(attribute){if(location===null){location=attribute.isIndexed?"ELEMENT_ARRAY_BUFFER":"NOT USED"}if(attribute instanceof _webgl.Buffer){var buffer=attribute;return{Location:location,Type:buffer.layout.type,Instanced:buffer.layout.instanced,Verts:round(buffer.data.length/buffer.layout.size),Size:buffer.layout.size,Bytes:buffer.data.length*buffer.data.BYTES_PER_ELEMENT}}return{Location:location,Type:attribute.value.constructor.name,Instanced:attribute.instanced,Verts:round(attribute.value.length/attribute.size),Size:attribute.size,Bytes:attribute.value.length*attribute.value.BYTES_PER_ELEMENT}}return{Location:location,Type:"NOT PROVIDED",Instanced:"N/A",Verts:"N/A",Size:"N/A",Bytes:"N/A"}}},{key:"setTextures",value:function setTextures(){var textures=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];throw new Error("model.setTextures replaced: setUniforms({sampler2D: new Texture2D})")}},{key:"hash",get:function get(){return this.id+" "+this.$pickingIndex}}]);return Model}(_object3d2.default);exports.default=Model},{"../scenegraph/object-3d":386,"../utils":389,"../webgl":399,"./config":360,"./geometry":362,assert:3}],365:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.ConeGeometry=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _truncatedCone=require("./truncated-cone");var _model=require("../core/model");var _model2=_interopRequireDefault(_model);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ConeGeometry=exports.ConeGeometry=function(_TruncatedConeGeometr){_inherits(ConeGeometry,_TruncatedConeGeometr);function ConeGeometry(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$radius=_ref.radius;var radius=_ref$radius===undefined?1:_ref$radius;var _ref$cap=_ref.cap;var cap=_ref$cap===undefined?true:_ref$cap;var opts=_objectWithoutProperties(_ref,["radius","cap"]);_classCallCheck(this,ConeGeometry);return _possibleConstructorReturn(this,Object.getPrototypeOf(ConeGeometry).call(this,_extends({},opts,{topRadius:0,topCap:Boolean(cap),bottomCap:Boolean(cap),bottomRadius:radius})))}return ConeGeometry}(_truncatedCone.TruncatedConeGeometry);var Cone=function(_Model){_inherits(Cone,_Model);function Cone(){var opts=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Cone);return _possibleConstructorReturn(this,Object.getPrototypeOf(Cone).call(this,_extends({geometry:new ConeGeometry(opts)},opts)))}return Cone}(_model2.default);exports.default=Cone},{"../core/model":364,"./truncated-cone":372}],366:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.CubeGeometry=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _geometry=require("../core/geometry");var _geometry2=_interopRequireDefault(_geometry);var _model=require("../core/model");var _model2=_interopRequireDefault(_model);var _utils=require("../utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CUBE_INDICES=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];var CUBE_POSITIONS=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1];var CUBE_NORMALS=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0];var CUBE_TEX_COORDS=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1];var CubeGeometry=exports.CubeGeometry=function(_Geometry){_inherits(CubeGeometry,_Geometry);function CubeGeometry(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$id=_ref.id;var id=_ref$id===undefined?(0,_utils.uid)("cube-geometry"):_ref$id;var opts=_objectWithoutProperties(_ref,["id"]);_classCallCheck(this,CubeGeometry);return _possibleConstructorReturn(this,Object.getPrototypeOf(CubeGeometry).call(this,_extends({},opts,{id:id,attributes:{indices:new Uint16Array(CUBE_INDICES),positions:new Float32Array(CUBE_POSITIONS),normals:new Float32Array(CUBE_NORMALS),texCoords:new Float32Array(CUBE_TEX_COORDS)}})))}return CubeGeometry}(_geometry2.default);var Cube=function(_Model){_inherits(Cube,_Model);function Cube(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref2$id=_ref2.id;var id=_ref2$id===undefined?(0,_utils.uid)("cube"):_ref2$id;var opts=_objectWithoutProperties(_ref2,["id"]);_classCallCheck(this,Cube);return _possibleConstructorReturn(this,Object.getPrototypeOf(Cube).call(this,_extends({},opts,{id:id,geometry:new CubeGeometry(opts)})))}return Cube}(_model2.default);exports.default=Cube},{"../core/geometry":362,"../core/model":364,"../utils":389}],367:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.CylinderGeometry=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _truncatedCone=require("./truncated-cone");var _model=require("../core/model");var _model2=_interopRequireDefault(_model);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CylinderGeometry=exports.CylinderGeometry=function(_TruncatedConeGeometr){_inherits(CylinderGeometry,_TruncatedConeGeometr);function CylinderGeometry(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$radius=_ref.radius;var radius=_ref$radius===undefined?1:_ref$radius;var opts=_objectWithoutProperties(_ref,["radius"]);_classCallCheck(this,CylinderGeometry);return _possibleConstructorReturn(this,Object.getPrototypeOf(CylinderGeometry).call(this,_extends({},opts,{bottomRadius:radius,topRadius:radius})))}return CylinderGeometry}(_truncatedCone.TruncatedConeGeometry);var Cylinder=function(_Model){_inherits(Cylinder,_Model);function Cylinder(opts){_classCallCheck(this,Cylinder);return _possibleConstructorReturn(this,Object.getPrototypeOf(Cylinder).call(this,_extends({},opts,{geometry:new CylinderGeometry(opts)})))}return Cylinder}(_model2.default);exports.default=Cylinder},{"../core/model":364,"./truncated-cone":372}],368:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.IcoSphereGeometry=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){
target[key]=source[key]}}}return target};var _math=require("../math");var _geometry=require("../core/geometry");var _geometry2=_interopRequireDefault(_geometry);var _model=require("../core/model");var _model2=_interopRequireDefault(_model);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function noop(){}var ICO_POSITIONS=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0];var ICO_INDICES=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1];var IcoSphereGeometry=exports.IcoSphereGeometry=function(_Geometry){_inherits(IcoSphereGeometry,_Geometry);function IcoSphereGeometry(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$iterations=_ref.iterations;var iterations=_ref$iterations===undefined?0:_ref$iterations;var _ref$onAddVertex=_ref.onAddVertex;var onAddVertex=_ref$onAddVertex===undefined?noop:_ref$onAddVertex;var opts=_objectWithoutProperties(_ref,["iterations","onAddVertex"]);_classCallCheck(this,IcoSphereGeometry);var PI=Math.PI;var PI2=PI*2;var positions=[].concat(ICO_POSITIONS);var indices=[].concat(ICO_INDICES);positions.push();indices.push();var getMiddlePoint=function(){var pointMemo={};return function(i1,i2){i1*=3;i2*=3;var mini=i1<i2?i1:i2;var maxi=i1>i2?i1:i2;var key=mini+"|"+maxi;if(key in pointMemo){return pointMemo[key]}var x1=positions[i1];var y1=positions[i1+1];var z1=positions[i1+2];var x2=positions[i2];var y2=positions[i2+1];var z2=positions[i2+2];var xm=(x1+x2)/2;var ym=(y1+y2)/2;var zm=(z1+z2)/2;var len=Math.sqrt(xm*xm+ym*ym+zm*zm);xm/=len;ym/=len;zm/=len;positions.push(xm,ym,zm);return pointMemo[key]=positions.length/3-1}}();for(var i=0;i<iterations;i++){var indices2=[];for(var j=0;j<indices.length;j+=3){var a=getMiddlePoint(indices[j+0],indices[j+1]);var b=getMiddlePoint(indices[j+1],indices[j+2]);var c=getMiddlePoint(indices[j+2],indices[j+0]);indices2.push(c,indices[j+0],a,a,indices[j+1],b,b,indices[j+2],c,a,b,c)}indices=indices2}var normals=new Array(indices.length*3);var texCoords=new Array(indices.length*2);var l=indices.length;for(var _i=l-3;_i>=0;_i-=3){var i1=indices[_i+0];var i2=indices[_i+1];var i3=indices[_i+2];var in1=i1*3;var in2=i2*3;var in3=i3*3;var iu1=i1*2;var iu2=i2*2;var iu3=i3*2;var x1=positions[in1+0];var y1=positions[in1+1];var z1=positions[in1+2];var theta1=Math.acos(z1/Math.sqrt(x1*x1+y1*y1+z1*z1));var phi1=Math.atan2(y1,x1)+PI;var v1=theta1/PI;var u1=1-phi1/PI2;var x2=positions[in2+0];var y2=positions[in2+1];var z2=positions[in2+2];var theta2=Math.acos(z2/Math.sqrt(x2*x2+y2*y2+z2*z2));var phi2=Math.atan2(y2,x2)+PI;var v2=theta2/PI;var u2=1-phi2/PI2;var x3=positions[in3+0];var y3=positions[in3+1];var z3=positions[in3+2];var theta3=Math.acos(z3/Math.sqrt(x3*x3+y3*y3+z3*z3));var phi3=Math.atan2(y3,x3)+PI;var v3=theta3/PI;var u3=1-phi3/PI2;var vec1=[x3-x2,y3-y2,z3-z2];var vec2=[x1-x2,y1-y2,z1-z2];var normal=_math.Vec3.cross(vec1,vec2).$unit();var newIndex=void 0;if((u1===0||u2===0||u3===0)&&(u1===0||u1>.5)&&(u2===0||u2>.5)&&(u3===0||u3>.5)){positions.push(positions[in1+0],positions[in1+1],positions[in1+2]);newIndex=positions.length/3-1;indices.push(newIndex);texCoords[newIndex*2+0]=1;texCoords[newIndex*2+1]=v1;normals[newIndex*3+0]=normal.x;normals[newIndex*3+1]=normal.y;normals[newIndex*3+2]=normal.z;positions.push(positions[in2+0],positions[in2+1],positions[in2+2]);newIndex=positions.length/3-1;indices.push(newIndex);texCoords[newIndex*2+0]=1;texCoords[newIndex*2+1]=v2;normals[newIndex*3+0]=normal.x;normals[newIndex*3+1]=normal.y;normals[newIndex*3+2]=normal.z;positions.push(positions[in3+0],positions[in3+1],positions[in3+2]);newIndex=positions.length/3-1;indices.push(newIndex);texCoords[newIndex*2+0]=1;texCoords[newIndex*2+1]=v3;normals[newIndex*3+0]=normal.x;normals[newIndex*3+1]=normal.y;normals[newIndex*3+2]=normal.z}normals[in1+0]=normals[in2+0]=normals[in3+0]=normal.x;normals[in1+1]=normals[in2+1]=normals[in3+1]=normal.y;normals[in1+2]=normals[in2+2]=normals[in3+2]=normal.z;texCoords[iu1+0]=u1;texCoords[iu1+1]=v1;texCoords[iu2+0]=u2;texCoords[iu2+1]=v2;texCoords[iu3+0]=u3;texCoords[iu3+1]=v3}return _possibleConstructorReturn(this,Object.getPrototypeOf(IcoSphereGeometry).call(this,_extends({},opts,{attributes:{positions:new Float32Array(positions),normals:new Float32Array(normals),texCoords:new Float32Array(texCoords),indices:new Uint16Array(indices)}})))}return IcoSphereGeometry}(_geometry2.default);var IcoSphere=function(_Model){_inherits(IcoSphere,_Model);function IcoSphere(){var opts=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,IcoSphere);return _possibleConstructorReturn(this,Object.getPrototypeOf(IcoSphere).call(this,_extends({},opts,{geometry:new IcoSphereGeometry(opts)})))}return IcoSphere}(_model2.default);exports.default=IcoSphere},{"../core/geometry":362,"../core/model":364,"../math":383}],369:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _cone=require("./cone");Object.defineProperty(exports,"Cone",{enumerable:true,get:function get(){return _interopRequireDefault(_cone).default}});Object.defineProperty(exports,"ConeGeometry",{enumerable:true,get:function get(){return _cone.ConeGeometry}});var _cube=require("./cube");Object.defineProperty(exports,"Cube",{enumerable:true,get:function get(){return _interopRequireDefault(_cube).default}});Object.defineProperty(exports,"CubeGeometry",{enumerable:true,get:function get(){return _cube.CubeGeometry}});var _cylinder=require("./cylinder");Object.defineProperty(exports,"Cylinder",{enumerable:true,get:function get(){return _interopRequireDefault(_cylinder).default}});Object.defineProperty(exports,"CylinderGeometry",{enumerable:true,get:function get(){return _cylinder.CylinderGeometry}});var _icoSphere=require("./ico-sphere");Object.defineProperty(exports,"IcoSphere",{enumerable:true,get:function get(){return _interopRequireDefault(_icoSphere).default}});Object.defineProperty(exports,"IcoSphereGeometry",{enumerable:true,get:function get(){return _icoSphere.IcoSphereGeometry}});var _plane=require("./plane");Object.defineProperty(exports,"Plane",{enumerable:true,get:function get(){return _interopRequireDefault(_plane).default}});Object.defineProperty(exports,"PlaneGeometry",{enumerable:true,get:function get(){return _plane.PlaneGeometry}});var _sphere=require("./sphere");Object.defineProperty(exports,"Sphere",{enumerable:true,get:function get(){return _interopRequireDefault(_sphere).default}});Object.defineProperty(exports,"SphereGeometry",{enumerable:true,get:function get(){return _sphere.SphereGeometry}});Object.defineProperty(exports,"TruncatedCone",{enumerable:true,get:function get(){return _interopRequireDefault(_cone).default}});Object.defineProperty(exports,"TruncatedConeGeometry",{enumerable:true,get:function get(){return _cone.TruncatedConeGeometry}});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./cone":365,"./cube":366,"./cylinder":367,"./ico-sphere":368,"./plane":370,"./sphere":371}],370:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.PlaneGeometry=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _geometry=require("../core/geometry");var _geometry2=_interopRequireDefault(_geometry);var _model=require("../core/model");var _model2=_interopRequireDefault(_model);var _utils=require("../utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PlaneGeometry=exports.PlaneGeometry=function(_Geometry){_inherits(PlaneGeometry,_Geometry);function PlaneGeometry(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$type=_ref.type;var type=_ref$type===undefined?"x,y":_ref$type;var _ref$offset=_ref.offset;var offset=_ref$offset===undefined?0:_ref$offset;var _ref$flipCull=_ref.flipCull;var flipCull=_ref$flipCull===undefined?false:_ref$flipCull;var _ref$unpack=_ref.unpack;var unpack=_ref$unpack===undefined?false:_ref$unpack;var _ref$id=_ref.id;var id=_ref$id===undefined?(0,_utils.uid)("plane-geometry"):_ref$id;var opts=_objectWithoutProperties(_ref,["type","offset","flipCull","unpack","id"]);_classCallCheck(this,PlaneGeometry);var coords=type.split(",");var c1len=opts[coords[0]+"len"];var c2len=opts[coords[1]+"len"];var subdivisions1=opts["n"+coords[0]]||1;var subdivisions2=opts["n"+coords[1]]||1;var numVertices=(subdivisions1+1)*(subdivisions2+1);var positions=new Float32Array(numVertices*3);var normals=new Float32Array(numVertices*3);var texCoords=new Float32Array(numVertices*2);if(flipCull){c1len=-c1len}var i2=0;var i3=0;for(var z=0;z<=subdivisions2;z++){for(var x=0;x<=subdivisions1;x++){var u=x/subdivisions1;var v=z/subdivisions2;texCoords[i2+0]=flipCull?1-u:u;texCoords[i2+1]=v;switch(type){case"x,y":positions[i3+0]=c1len*u-c1len*.5;positions[i3+1]=c2len*v-c2len*.5;positions[i3+2]=offset;normals[i3+0]=0;normals[i3+1]=0;normals[i3+2]=flipCull?1:-1;break;case"x,z":positions[i3+0]=c1len*u-c1len*.5;positions[i3+1]=offset;positions[i3+2]=c2len*v-c2len*.5;normals[i3+0]=0;normals[i3+1]=flipCull?1:-1;normals[i3+2]=0;break;case"y,z":positions[i3+0]=offset;positions[i3+1]=c1len*u-c1len*.5;positions[i3+2]=c2len*v-c2len*.5;normals[i3+0]=flipCull?1:-1;normals[i3+1]=0;normals[i3+2]=0;break;default:break}i2+=2;i3+=3}}var numVertsAcross=subdivisions1+1;var indices=new Uint16Array(subdivisions1*subdivisions2*6);for(var _z=0;_z<subdivisions2;_z++){for(var _x2=0;_x2<subdivisions1;_x2++){var index=(_z*subdivisions1+_x2)*6;indices[index+0]=(_z+0)*numVertsAcross+_x2;indices[index+1]=(_z+1)*numVertsAcross+_x2;indices[index+2]=(_z+0)*numVertsAcross+_x2+1;indices[index+3]=(_z+1)*numVertsAcross+_x2;indices[index+4]=(_z+1)*numVertsAcross+_x2+1;indices[index+5]=(_z+0)*numVertsAcross+_x2+1}}if(unpack){var positions2=new Float32Array(indices.length*3);var normals2=new Float32Array(indices.length*3);var texCoords2=new Float32Array(indices.length*2);for(var _x3=0;_x3<indices.length;++_x3){var _index=indices[_x3];positions2[_x3*3+0]=positions[_index*3+0];positions2[_x3*3+1]=positions[_index*3+1];positions2[_x3*3+2]=positions[_index*3+2];normals2[_x3*3+0]=normals[_index*3+0];normals2[_x3*3+1]=normals[_index*3+1];normals2[_x3*3+2]=normals[_index*3+2];texCoords2[_x3*2+0]=texCoords[_index*2+0];texCoords2[_x3*2+1]=texCoords[_index*2+1]}positions=positions2;normals=normals2;texCoords=texCoords2;indices=undefined}return _possibleConstructorReturn(this,Object.getPrototypeOf(PlaneGeometry).call(this,_extends({},opts,{id:id,attributes:_extends({positions:positions,normals:normals,texCoords:texCoords},indices?{indices:indices}:{})})))}return PlaneGeometry}(_geometry2.default);var Plane=function(_Model){_inherits(Plane,_Model);function Plane(_ref2){var _ref2$id=_ref2.id;var id=_ref2$id===undefined?(0,_utils.uid)("plane"):_ref2$id;var opts=_objectWithoutProperties(_ref2,["id"]);_classCallCheck(this,Plane);return _possibleConstructorReturn(this,Object.getPrototypeOf(Plane).call(this,_extends({},opts,{id:id,geometry:new PlaneGeometry(opts)})))}return Plane}(_model2.default);exports.default=Plane},{"../core/geometry":362,"../core/model":364,"../utils":389}],371:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.SphereGeometry=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _geometry=require("../core/geometry");var _geometry2=_interopRequireDefault(_geometry);var _model=require("../core/model");var _model2=_interopRequireDefault(_model);var _utils=require("../utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SphereGeometry=exports.SphereGeometry=function(_Geometry){_inherits(SphereGeometry,_Geometry);function SphereGeometry(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$nlat=_ref.nlat;var nlat=_ref$nlat===undefined?10:_ref$nlat;var _ref$nlong=_ref.nlong;var nlong=_ref$nlong===undefined?10:_ref$nlong;var _ref$radius=_ref.radius;var radius=_ref$radius===undefined?1:_ref$radius;var _ref$id=_ref.id;var id=_ref$id===undefined?(0,_utils.uid)("sphere-geometry"):_ref$id;var opts=_objectWithoutProperties(_ref,["nlat","nlong","radius","id"]);_classCallCheck(this,SphereGeometry);var startLat=0;var endLat=Math.PI;var latRange=endLat-startLat;var startLong=0;var endLong=2*Math.PI;var longRange=endLong-startLong;var numVertices=(nlat+1)*(nlong+1);if(typeof radius==="number"){(function(){var value=radius;radius=function radius(n1,n2,n3,u,v){return value}})()}var positions=new Float32Array(numVertices*3);var normals=new Float32Array(numVertices*3);var texCoords=new Float32Array(numVertices*2);var indices=new Uint16Array(nlat*nlong*6);for(var y=0;y<=nlat;y++){for(var x=0;x<=nlong;x++){var u=x/nlong;var v=y/nlat;var index=x+y*(nlong+1);var i2=index*2;var i3=index*3;var theta=longRange*u;var phi=latRange*v;var sinTheta=Math.sin(theta);var cosTheta=Math.cos(theta);var sinPhi=Math.sin(phi);var cosPhi=Math.cos(phi);var ux=cosTheta*sinPhi;var uy=cosPhi;var uz=sinTheta*sinPhi;var r=radius(ux,uy,uz,u,v);positions[i3+0]=r*ux;positions[i3+1]=r*uy;positions[i3+2]=r*uz;normals[i3+0]=ux;normals[i3+1]=uy;normals[i3+2]=uz;texCoords[i2+0]=u;texCoords[i2+1]=v}}var numVertsAround=nlat+1;for(var _x2=0;_x2<nlat;_x2++){for(var _y=0;_y<nlong;_y++){var _index=(_x2*nlong+_y)*6;indices[_index+0]=_y*numVertsAround+_x2;indices[_index+1]=_y*numVertsAround+_x2+1;indices[_index+2]=(_y+1)*numVertsAround+_x2;indices[_index+3]=(_y+1)*numVertsAround+_x2;indices[_index+4]=_y*numVertsAround+_x2+1;indices[_index+5]=(_y+1)*numVertsAround+_x2+1}}return _possibleConstructorReturn(this,Object.getPrototypeOf(SphereGeometry).call(this,_extends({},opts,{id:id,attributes:{positions:positions,indices:indices,normals:normals,texCoords:texCoords}})))}return SphereGeometry}(_geometry2.default);var Sphere=function(_Model){_inherits(Sphere,_Model);function Sphere(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref2$id=_ref2.id;var id=_ref2$id===undefined?(0,_utils.uid)("sphere"):_ref2$id;var opts=_objectWithoutProperties(_ref2,["id"]);_classCallCheck(this,Sphere);return _possibleConstructorReturn(this,Object.getPrototypeOf(Sphere).call(this,_extends({},opts,{id:id,geometry:new SphereGeometry(opts)})))}return Sphere}(_model2.default);exports.default=Sphere},{"../core/geometry":362,"../core/model":364,"../utils":389}],372:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.TruncatedConeGeometry=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _geometry=require("../core/geometry");var _geometry2=_interopRequireDefault(_geometry);var _model=require("../core/model");var _model2=_interopRequireDefault(_model);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TruncatedConeGeometry=exports.TruncatedConeGeometry=function(_Geometry){_inherits(TruncatedConeGeometry,_Geometry);function TruncatedConeGeometry(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$bottomRadius=_ref.bottomRadius;var bottomRadius=_ref$bottomRadius===undefined?0:_ref$bottomRadius;var _ref$topRadius=_ref.topRadius;var topRadius=_ref$topRadius===undefined?0:_ref$topRadius;var _ref$height=_ref.height;var height=_ref$height===undefined?1:_ref$height;var _ref$nradial=_ref.nradial;var nradial=_ref$nradial===undefined?10:_ref$nradial;var _ref$nvertical=_ref.nvertical;var nvertical=_ref$nvertical===undefined?10:_ref$nvertical;var _ref$topCap=_ref.topCap;var topCap=_ref$topCap===undefined?false:_ref$topCap;var _ref$bottomCap=_ref.bottomCap;var bottomCap=_ref$bottomCap===undefined?false:_ref$bottomCap;var opts=_objectWithoutProperties(_ref,["bottomRadius","topRadius","height","nradial","nvertical","topCap","bottomCap"]);_classCallCheck(this,TruncatedConeGeometry);var extra=(topCap?2:0)+(bottomCap?2:0);var numVertices=(nradial+1)*(nvertical+1+extra);var slant=Math.atan2(bottomRadius-topRadius,height);var msin=Math.sin;var mcos=Math.cos;var mpi=Math.PI;var cosSlant=mcos(slant);var sinSlant=msin(slant);var start=topCap?-2:0;var end=nvertical+(bottomCap?2:0);var vertsAroundEdge=nradial+1;var positions=new Float32Array(numVertices*3);var normals=new Float32Array(numVertices*3);var texCoords=new Float32Array(numVertices*2);var indices=new Uint16Array(nradial*(nvertical+extra)*6);var i3=0;var i2=0;for(var i=start;i<=end;i++){var v=i/nvertical;var y=height*v;var ringRadius=void 0;if(i<0){y=0;v=1;ringRadius=bottomRadius}else if(i>nvertical){y=height;v=1;ringRadius=topRadius}else{ringRadius=bottomRadius+(topRadius-bottomRadius)*(i/nvertical)}if(i===-2||i===nvertical+2){ringRadius=0;v=0}y-=height/2;for(var j=0;j<vertsAroundEdge;j++){var sin=msin(j*mpi*2/nradial);var cos=mcos(j*mpi*2/nradial);positions[i3+0]=sin*ringRadius;positions[i3+1]=y;positions[i3+2]=cos*ringRadius;normals[i3+0]=i<0||i>nvertical?0:sin*cosSlant;normals[i3+1]=i<0?-1:i>nvertical?1:sinSlant;normals[i3+2]=i<0||i>nvertical?0:cos*cosSlant;texCoords[i2+0]=j/nradial;texCoords[i2+1]=v;i2+=2;i3+=3}}for(var _i=0;_i<nvertical+extra;_i++){for(var _j=0;_j<nradial;_j++){var index=(_i*nradial+_j)*6;indices[index+0]=vertsAroundEdge*(_i+0)+0+_j;indices[index+1]=vertsAroundEdge*(_i+0)+1+_j;indices[index+2]=vertsAroundEdge*(_i+1)+1+_j;indices[index+3]=vertsAroundEdge*(_i+0)+0+_j;indices[index+4]=vertsAroundEdge*(_i+1)+1+_j;indices[index+5]=vertsAroundEdge*(_i+1)+0+_j}}return _possibleConstructorReturn(this,Object.getPrototypeOf(TruncatedConeGeometry).call(this,_extends({},opts,{attributes:{positions:positions,normals:normals,texCoords:texCoords,indices:indices}})))}return TruncatedConeGeometry}(_geometry2.default);var TruncatedCone=function(_Model){_inherits(TruncatedCone,_Model);function TruncatedCone(opts){_classCallCheck(this,TruncatedCone);return _possibleConstructorReturn(this,Object.getPrototypeOf(TruncatedCone).call(this,_extends({},opts,{geometry:new TruncatedConeGeometry(opts)})))}return TruncatedCone}(_model2.default);exports.default=TruncatedCone},{"../core/geometry":362,"../core/model":364}],373:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _webgl=require("./webgl");Object.keys(_webgl).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _webgl[key]}})});var _webgl2=require("./webgl2");Object.keys(_webgl2).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _webgl2[key]}})});var _io=require("./io");Object.keys(_io).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _io[key]}})});var _math=require("./math");Object.keys(_math).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _math[key]}})});var _scenegraph=require("./scenegraph");Object.keys(_scenegraph).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _scenegraph[key]}})});var _geometry=require("./geometry");Object.keys(_geometry).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _geometry[key]}})});var _core=require("./core");Object.keys(_core).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _core[key]}})});var _shaderlib=require("../shaderlib");Object.defineProperty(exports,"Shaders",{enumerable:true,get:function get(){return _interopRequireDefault(_shaderlib).default}});var _fx=require("./addons/fx");Object.defineProperty(exports,"Fx",{enumerable:true,get:function get(){return _interopRequireDefault(_fx).default}});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"../shaderlib":350,"./addons/fx":352,"./core":363,"./geometry":369,"./io":378,"./math":383,"./scenegraph":385,"./webgl":399,"./webgl2":409}],374:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.readFile=exports.writeFile=undefined;var _utils=require("../../utils");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}if(!(0,_utils.isBrowser)()){global.navigator={userAgent:"MSIE 9."}}var saveAs=require("filesaver.js");if(!(0,_utils.isBrowser)()){delete global.navigator}var window=require("global/window");var File=window.File;var Blob=window.Blob;function writeFile(file,data,options){var callback=arguments.length<=3||arguments[3]===undefined?function(){}:arguments[3];if(callback===undefined&&typeof options==="function"){options=undefined;callback=options}if(typeof data==="string"){data=new Blob(data)}return new Promise(function(resolve,reject){var result=void 0;try{result=saveAs(data,file,options)}catch(error){reject(error);return callback(error,null)}resolve();return callback(null,result)})}function readFile(file){return new Promise(function(resolve,reject){try{(function(){(0,_assert2.default)(File,"window.File not defined. Must run under browser.");(0,_assert2.default)(file instanceof File,"parameter must be a File object");var reader=new window.FileReader;reader.onerror=function(e){return reject(new Error(getFileErrorMessage(e)))};reader.onabort=function(){return reject(new Error("Read operation was aborted."))};reader.onload=function(){return resolve(reader.result)};reader.readAsText(file)})()}catch(error){reject(error)}})}function getFileErrorMessage(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:return"File not found.";case e.target.error.NOT_READABLE_ERR:return"File not readable.";case e.target.error.ABORT_ERR:return"Read operation was aborted.";case e.target.error.SECURITY_ERR:return"File is in a locked state.";case e.target.error.ENCODING_ERR:return'File is too long to encode in "data://" URL.';default:return"Read error."}}exports.writeFile=writeFile;exports.readFile=readFile}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../utils":389,assert:3,"filesaver.js":308,"global/window":313}],375:[function(require,module,exports){(function(process,Buffer){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.compressImage=compressImage;exports.loadImage=loadImage;var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);var _through=require("through");var _through2=_interopRequireDefault(_through);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function compressImage(image,type){if(image instanceof HTMLCanvasElement){var _canvas=image;return _canvas.toDataURL(type)}(0,_assert2.default)(image instanceof Image,"getImageData accepts image or canvas");var canvas=document.createElement("canvas");canvas.width=image.width;canvas.height=image.height;canvas.getContext("2d").drawImage(image,0,0);var data=canvas.toDataURL(type||"png").replace(/^data:image\/(png|jpg);base64,/,"");var result=(0,_through2.default)();process.nextTick(function(){return result.end(new Buffer(data,"base64"))});return result}function loadImage(url){return new Promise(function(resolve,reject){try{(function(){var image=new Image;image.onload=function(){resolve(image)};image.onerror=function(){reject(new Error("Could not load image "+url+"."))};image.src=url})()}catch(error){reject(error)}})}}).call(this,require("_process"),require("buffer").Buffer)},{_process:327,assert:3,buffer:10,through:344}],376:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.loadFile=loadFile;function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function noop(){}var XHR_STATES={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETED:4};var XHR=function(){function XHR(_ref){var url=_ref.url;var _ref$path=_ref.path;var path=_ref$path===undefined?null:_ref$path;var _ref$method=_ref.method;var method=_ref$method===undefined?"GET":_ref$method;var _ref$async=_ref.async;var async=_ref$async===undefined?true:_ref$async;var _ref$noCache=_ref.noCache;var noCache=_ref$noCache===undefined?false:_ref$noCache;var _ref$sendAsBinary=_ref.sendAsBinary;var sendAsBinary=_ref$sendAsBinary===undefined?false:_ref$sendAsBinary;var _ref$responseType=_ref.responseType;var responseType=_ref$responseType===undefined?false:_ref$responseType;var _ref$onProgress=_ref.onProgress;var onProgress=_ref$onProgress===undefined?noop:_ref$onProgress;var _ref$onSuccess=_ref.onSuccess;var onSuccess=_ref$onSuccess===undefined?noop:_ref$onSuccess;var _ref$onError=_ref.onError;var onError=_ref$onError===undefined?noop:_ref$onError;var _ref$onAbort=_ref.onAbort;var onAbort=_ref$onAbort===undefined?noop:_ref$onAbort;var _ref$onComplete=_ref.onComplete;var onComplete=_ref$onComplete===undefined?noop:_ref$onComplete;var opt=_objectWithoutProperties(_ref,["url","path","method","async","noCache","sendAsBinary","responseType","onProgress","onSuccess","onError","onAbort","onComplete"]);_classCallCheck(this,XHR);this.url=path?path.join(path,url):url;this.method=method;this.async=async;this.noCache=noCache;this.sendAsBinary=sendAsBinary;this.responseType=responseType;this.req=new XMLHttpRequest;this.req.onload=function(e){return onComplete(e)};this.req.onerror=function(e){return onError(e)};this.req.onabort=function(e){return onAbort(e)};this.req.onprogress=function(e){if(e.lengthComputable){onProgress(e,Math.round(e.loaded/e.total*100))}else{onProgress(e,-1)}}}_createClass(XHR,[{key:"setRequestHeader",value:function setRequestHeader(header,value){this.req.setRequestHeader(header,value);return this}},{key:"sendAsync",value:function sendAsync(){var _this=this;var body=arguments.length<=0||arguments[0]===undefined?this.body||null:arguments[0];return new Promise(function(resolve,reject){try{(function(){var req=_this.req;var method=_this.method;var async=_this.async;var noCache=_this.noCache;var sendAsBinary=_this.sendAsBinary;var responseType=_this.responseType;var url=_this.url;if(noCache){url+=(url.indexOf("?")>=0?"&":"?")+Date.now()}req.open(method,url,async);if(responseType){req.responseType=responseType}if(async){req.onreadystatechange=function(e){if(req.readyState===XHR_STATES.COMPLETED){if(req.status===200){resolve(req.responseType?req.response:req.responseText);
}else{reject(new Error(req.status+": "+url))}}}}if(sendAsBinary){req.sendAsBinary(body)}else{req.send(body)}if(!async){if(req.status===200){resolve(req.responseType?req.response:req.responseText)}else{reject(new Error(req.status+": "+url))}}})()}catch(error){reject(error)}})}}]);return XHR}();function loadFile(opts){var xhr=new XHR(opts);return xhr.sendAsync()}},{}],377:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.browserFs=exports.loadFile=undefined;var _browserRequest=require("./browser-request");Object.defineProperty(exports,"loadFile",{enumerable:true,get:function get(){return _browserRequest.loadFile}});var _browserImageIo=require("./browser-image-io");Object.keys(_browserImageIo).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _browserImageIo[key]}})});var _browserFs=require("./browser-fs");var browserFs=_interopRequireWildcard(_browserFs);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}exports.browserFs=browserFs},{"./browser-fs":374,"./browser-image-io":375,"./browser-request":376}],378:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _platform=require("./platform");Object.keys(_platform).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _platform[key]}})});var _loadFiles=require("./load-files");Object.keys(_loadFiles).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _loadFiles[key]}})})},{"./load-files":379,"./platform":381}],379:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports.loadFiles=loadFiles;exports.loadImages=loadImages;exports.loadTextures=loadTextures;exports.loadProgram=loadProgram;exports.loadModel=loadModel;exports.parseModel=parseModel;var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);var _platform=require("./platform");var _webgl=require("../webgl");var _core=require("../core");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function noop(){}function loadFiles(_ref){var urls=_ref.urls;var _ref$onProgress=_ref.onProgress;var onProgress=_ref$onProgress===undefined?noop:_ref$onProgress;var opts=_objectWithoutProperties(_ref,["urls","onProgress"]);(0,_assert2.default)(urls.every(function(url){return typeof url==="string"}),"loadImages: {urls} must be array of strings");var count=0;return Promise.all(urls.map(function(url){var promise=(0,_platform.loadFile)(_extends({url:url},opts));promise.then(function(file){return onProgress({progress:++count/urls.length,count:count,total:urls.length,url:url})});return promise}))}function loadImages(_ref2){var urls=_ref2.urls;var _ref2$onProgress=_ref2.onProgress;var onProgress=_ref2$onProgress===undefined?noop:_ref2$onProgress;var opts=_objectWithoutProperties(_ref2,["urls","onProgress"]);(0,_assert2.default)(urls.every(function(url){return typeof url==="string"}),"loadImages: {urls} must be array of strings");var count=0;return Promise.all(urls.map(function(url){var promise=(0,_platform.loadImage)(url);promise.then(function(file){return onProgress({progress:++count/urls.length,count:count,total:urls.length,url:url})});return promise}))}function loadTextures(gl,_ref3){var urls=_ref3.urls;var _ref3$onProgress=_ref3.onProgress;var onProgress=_ref3$onProgress===undefined?noop:_ref3$onProgress;var opts=_objectWithoutProperties(_ref3,["urls","onProgress"]);(0,_assert2.default)(urls.every(function(url){return typeof url==="string"}),"loadTextures: {urls} must be array of strings");return loadImages(_extends({urls:urls,onProgress:onProgress},opts)).then(function(images){return images.map(function(img,i){var params=Array.isArray(opts.parameters)?opts.parameters[i]:opts.parameters;params=params===undefined?{}:params;return new _webgl.Texture2D(gl,_extends({id:urls[i]},params,{data:img}))})})}function loadProgram(gl,_ref4){var vs=_ref4.vs;var fs=_ref4.fs;var _ref4$onProgress=_ref4.onProgress;var onProgress=_ref4$onProgress===undefined?noop:_ref4$onProgress;var opts=_objectWithoutProperties(_ref4,["vs","fs","onProgress"]);return loadFiles(_extends({urls:[vs,fs],onProgress:onProgress},opts)).then(function(_ref5){var _ref6=_slicedToArray(_ref5,2);var vsText=_ref6[0];var fsText=_ref6[1];return new _webgl.Program(gl,_extends({vs:vsText,fs:fsText},opts))})}function loadModel(gl,_ref7){var url=_ref7.url;var _ref7$onProgress=_ref7.onProgress;var onProgress=_ref7$onProgress===undefined?noop:_ref7$onProgress;var opts=_objectWithoutProperties(_ref7,["url","onProgress"]);return loadFiles(_extends({urls:[url],onProgress:onProgress},opts)).then(function(_ref8){var _ref9=_slicedToArray(_ref8,1);var file=_ref9[0];return parseModel(gl,_extends({file:file},opts))})}function parseModel(gl,_ref10){var file=_ref10.file;var _ref10$program=_ref10.program;var program=_ref10$program===undefined?new _webgl.Program(gl):_ref10$program;var opts=_objectWithoutProperties(_ref10,["file","program"]);var json=typeof file==="string"?parseJSON(file):file;var attributes={};var modelOptions={};for(var key in json){var value=json[key];if(Array.isArray(value)){attributes[key]=key==="indices"?new Uint16Array(value):new Float32Array(value)}else{modelOptions[key]=value}}return new _core.Model(_extends({program:program,geometry:new _core.Geometry({attributes:attributes})},modelOptions,opts))}function parseJSON(file){try{return JSON.parse(file)}catch(error){throw new Error("Failed to parse JSON: "+error)}}},{"../core":363,"../webgl":399,"./platform":381,assert:3}],380:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.readFile=readFile;exports.writeFile=writeFile;exports.compressImage=compressImage;exports.loadImage=loadImage;var _utils=require("../../utils");function notImplemented(functionName){return function(){throw new Error(functionName+" not available (see luma.gl/headless-io)")}}function readFile(){return(_utils.lumaGlobals.nodeIO.readFile||notImplemented("readFile")).apply(undefined,arguments)}function writeFile(){return(_utils.lumaGlobals.nodeIO.writeFile||notImplemented("writeFile")).apply(undefined,arguments)}function compressImage(){var f=_utils.lumaGlobals.nodeIO.compressImage||notImplemented("compressImage");return f.apply(undefined,arguments)}function loadImage(){return(_utils.lumaGlobals.nodeIO.loadImage||notImplemented("loadImage")).apply(undefined,arguments)}},{"../../utils":389}],381:[function(require,module,exports){"use strict";var _utils=require("../utils");module.exports=(0,_utils.isBrowser)()?require("./browser"):require("./node")},{"../utils":389,"./browser":377,"./node":380}],382:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _extendableBuiltin5(cls){function ExtendableBuiltin(){var instance=Reflect.construct(cls,Array.from(arguments));Object.setPrototypeOf(instance,Object.getPrototypeOf(this));return instance}ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(ExtendableBuiltin,cls)}else{ExtendableBuiltin.__proto__=cls}return ExtendableBuiltin}function _extendableBuiltin3(cls){function ExtendableBuiltin(){var instance=Reflect.construct(cls,Array.from(arguments));Object.setPrototypeOf(instance,Object.getPrototypeOf(this));return instance}ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(ExtendableBuiltin,cls)}else{ExtendableBuiltin.__proto__=cls}return ExtendableBuiltin}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _extendableBuiltin(cls){function ExtendableBuiltin(){var instance=Reflect.construct(cls,Array.from(arguments));Object.setPrototypeOf(instance,Object.getPrototypeOf(this));return instance}ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(ExtendableBuiltin,cls)}else{ExtendableBuiltin.__proto__=cls}return ExtendableBuiltin}var sqrt=Math.sqrt;var sin=Math.sin;var cos=Math.cos;var tan=Math.tan;var pi=Math.PI;var slice=Array.prototype.slice;var Vec3=exports.Vec3=function(_extendableBuiltin2){_inherits(Vec3,_extendableBuiltin2);function Vec3(){var x=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var y=arguments.length<=1||arguments[1]===undefined?0:arguments[1];var z=arguments.length<=2||arguments[2]===undefined?0:arguments[2];_classCallCheck(this,Vec3);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Vec3).call(this,3));_this[0]=x;_this[1]=y;_this[2]=z;return _this}_createClass(Vec3,[{key:"x",get:function get(){return this[0]},set:function set(value){return this[0]=value}},{key:"y",get:function get(){return this[1]},set:function set(value){return this[1]=value}},{key:"z",get:function get(){return this[2]},set:function set(value){return this[2]=value}}],[{key:"create",value:function create(){return new Vec3(3)}}]);return Vec3}(_extendableBuiltin(Array));var generics={setVec3:function setVec3(dest,vec){dest[0]=vec[0];dest[1]=vec[1];dest[2]=vec[2];return dest},set:function set(dest,x,y,z){dest[0]=x;dest[1]=y;dest[2]=z;return dest},add:function add(dest,vec){return new Vec3(dest[0]+vec[0],dest[1]+vec[1],dest[2]+vec[2])},$add:function $add(dest,vec){dest[0]+=vec[0];dest[1]+=vec[1];dest[2]+=vec[2];return dest},add2:function add2(dest,a,b){dest[0]=a[0]+b[0];dest[1]=a[1]+b[1];dest[2]=a[2]+b[2];return dest},sub:function sub(dest,vec){return new Vec3(dest[0]-vec[0],dest[1]-vec[1],dest[2]-vec[2])},$sub:function $sub(dest,vec){dest[0]-=vec[0];dest[1]-=vec[1];dest[2]-=vec[2];return dest},sub2:function sub2(dest,a,b){dest[0]=a[0]-b[0];dest[1]=a[1]-b[1];dest[2]=a[2]-b[2];return dest},scale:function scale(dest,s){return new Vec3(dest[0]*s,dest[1]*s,dest[2]*s)},$scale:function $scale(dest,s){dest[0]*=s;dest[1]*=s;dest[2]*=s;return dest},neg:function neg(dest){return new Vec3(-dest[0],-dest[1],-dest[2])},$neg:function $neg(dest){dest[0]=-dest[0];dest[1]=-dest[1];dest[2]=-dest[2];return dest},unit:function unit(dest){var len=Vec3.norm(dest);if(len>0){return Vec3.scale(dest,1/len)}return Vec3.clone(dest)},$unit:function $unit(dest){var len=Vec3.norm(dest);if(len>0){return Vec3.$scale(dest,1/len)}return dest},cross:function cross(dest,vec){var dx=dest[0],dy=dest[1],dz=dest[2],vx=vec[0],vy=vec[1],vz=vec[2];return new Vec3(dy*vz-dz*vy,dz*vx-dx*vz,dx*vy-dy*vx)},$cross:function $cross(dest,vec){var dx=dest[0],dy=dest[1],dz=dest[2],vx=vec[0],vy=vec[1],vz=vec[2];dest[0]=dy*vz-dz*vy;dest[1]=dz*vx-dx*vz;dest[2]=dx*vy-dy*vx;return dest},distTo:function distTo(dest,vec){var dx=dest[0]-vec[0],dy=dest[1]-vec[1],dz=dest[2]-vec[2];return sqrt(dx*dx+dy*dy+dz*dz)},distToSq:function distToSq(dest,vec){var dx=dest[0]-vec[0],dy=dest[1]-vec[1],dz=dest[2]-vec[2];return dx*dx+dy*dy+dz*dz},norm:function norm(dest){var dx=dest[0],dy=dest[1],dz=dest[2];return sqrt(dx*dx+dy*dy+dz*dz)},normSq:function normSq(dest){var dx=dest[0],dy=dest[1],dz=dest[2];return dx*dx+dy*dy+dz*dz},dot:function dot(dest,vec){return dest[0]*vec[0]+dest[1]*vec[1]+dest[2]*vec[2]},clone:function clone(dest){if(dest instanceof Vec3){return new Vec3(dest[0],dest[1],dest[2])}return Vec3.setVec3(new Float32Array(3),dest)},toFloat32Array:function toFloat32Array(dest){var ans=dest.typedContainer;if(!ans){return dest}ans[0]=dest[0];ans[1]=dest[1];ans[2]=dest[2];return ans}};var proto=Vec3.prototype;for(var method in generics){Vec3[method]=generics[method];proto[method]=function _(m){return function(){var args=slice.call(arguments);args.unshift(this);return Vec3[m].apply(Vec3,args)}}(method)}var Mat4=exports.Mat4=function(_extendableBuiltin4){_inherits(Mat4,_extendableBuiltin4);function Mat4(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){_classCallCheck(this,Mat4);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(Mat4).call(this,16));_this2.length=16;if(typeof n11==="number"){_this2.set(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44)}else{_this2.id()}_this2.typedContainer=new Float32Array(16);return _this2}_createClass(Mat4,[{key:"n11",get:function get(){return this[0]},set:function set(val){this[0]=val}},{key:"n12",get:function get(){return this[4]},set:function set(val){this[4]=val}},{key:"n13",get:function get(){return this[8]},set:function set(val){this[8]=val}},{key:"n14",get:function get(){return this[12]},set:function set(val){this[12]=val}},{key:"n21",get:function get(){return this[1]},set:function set(val){this[1]=val}},{key:"n22",get:function get(){return this[5]},set:function set(val){this[5]=val}},{key:"n23",get:function get(){return this[9]},set:function set(val){this[9]=val}},{key:"n24",get:function get(){return this[13]},set:function set(val){this[13]=val}},{key:"n31",get:function get(){return this[2]},set:function set(val){this[2]=val}},{key:"n32",get:function get(){return this[6]},set:function set(val){this[6]=val}},{key:"n33",get:function get(){return this[10]},set:function set(val){this[10]=val}},{key:"n34",get:function get(){return this[14]},set:function set(val){this[14]=val}},{key:"n41",get:function get(){return this[3]},set:function set(val){this[3]=val}},{key:"n42",get:function get(){return this[7]},set:function set(val){this[7]=val}},{key:"n43",get:function get(){return this[11]},set:function set(val){this[11]=val}},{key:"n44",get:function get(){return this[15]},set:function set(val){this[15]=val}}],[{key:"create",value:function create(){return new Array(16)}}]);return Mat4}(_extendableBuiltin3(Array));generics={id:function id(dest){dest[0]=1;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=1;dest[6]=0;dest[7]=0;dest[8]=0;dest[9]=0;dest[10]=1;dest[11]=0;dest[12]=0;dest[13]=0;dest[14]=0;dest[15]=1;return dest},clone:function clone(dest){if(dest instanceof Mat4){return new Mat4(dest[0],dest[4],dest[8],dest[12],dest[1],dest[5],dest[9],dest[13],dest[2],dest[6],dest[10],dest[14],dest[3],dest[7],dest[11],dest[15])}return new typedArray(dest)},set:function set(dest,n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){dest[0]=n11;dest[4]=n12;dest[8]=n13;dest[12]=n14;dest[1]=n21;dest[5]=n22;dest[9]=n23;dest[13]=n24;dest[2]=n31;dest[6]=n32;dest[10]=n33;dest[14]=n34;dest[3]=n41;dest[7]=n42;dest[11]=n43;dest[15]=n44;return dest},mulVec3:function mulVec3(dest,vec){var ans=Vec3.clone(vec);return Mat4.$mulVec3(dest,ans)},$mulVec3:function $mulVec3(dest,vec){var vx=vec[0],vy=vec[1],vz=vec[2],d=1/(dest[3]*vx+dest[7]*vy+dest[11]*vz+dest[15]);vec[0]=(dest[0]*vx+dest[4]*vy+dest[8]*vz+dest[12])*d;vec[1]=(dest[1]*vx+dest[5]*vy+dest[9]*vz+dest[13])*d;vec[2]=(dest[2]*vx+dest[6]*vy+dest[10]*vz+dest[14])*d;return vec},mulMat42:function mulMat42(dest,a,b){var a11=a[0],a12=a[1],a13=a[2],a14=a[3],a21=a[4],a22=a[5],a23=a[6],a24=a[7],a31=a[8],a32=a[9],a33=a[10],a34=a[11],a41=a[12],a42=a[13],a43=a[14],a44=a[15],b11=b[0],b12=b[1],b13=b[2],b14=b[3],b21=b[4],b22=b[5],b23=b[6],b24=b[7],b31=b[8],b32=b[9],b33=b[10],b34=b[11],b41=b[12],b42=b[13],b43=b[14],b44=b[15];dest[0]=b11*a11+b12*a21+b13*a31+b14*a41;dest[1]=b11*a12+b12*a22+b13*a32+b14*a42;dest[2]=b11*a13+b12*a23+b13*a33+b14*a43;dest[3]=b11*a14+b12*a24+b13*a34+b14*a44;dest[4]=b21*a11+b22*a21+b23*a31+b24*a41;dest[5]=b21*a12+b22*a22+b23*a32+b24*a42;dest[6]=b21*a13+b22*a23+b23*a33+b24*a43;dest[7]=b21*a14+b22*a24+b23*a34+b24*a44;dest[8]=b31*a11+b32*a21+b33*a31+b34*a41;dest[9]=b31*a12+b32*a22+b33*a32+b34*a42;dest[10]=b31*a13+b32*a23+b33*a33+b34*a43;dest[11]=b31*a14+b32*a24+b33*a34+b34*a44;dest[12]=b41*a11+b42*a21+b43*a31+b44*a41;dest[13]=b41*a12+b42*a22+b43*a32+b44*a42;dest[14]=b41*a13+b42*a23+b43*a33+b44*a43;dest[15]=b41*a14+b42*a24+b43*a34+b44*a44;return dest},mulMat4:function mulMat4(a,b){var m=Mat4.clone(a);return Mat4.mulMat42(m,a,b)},$mulMat4:function $mulMat4(a,b){return Mat4.mulMat42(a,a,b)},add:function add(dest,m){var copy=Mat4.clone(dest);return Mat4.$add(copy,m)},$add:function $add(dest,m){dest[0]+=m[0];dest[1]+=m[1];dest[2]+=m[2];dest[3]+=m[3];dest[4]+=m[4];dest[5]+=m[5];dest[6]+=m[6];dest[7]+=m[7];dest[8]+=m[8];dest[9]+=m[9];dest[10]+=m[10];dest[11]+=m[11];dest[12]+=m[12];dest[13]+=m[13];dest[14]+=m[14];dest[15]+=m[15];return dest},transpose:function transpose(dest){var m=Mat4.clone(dest);return Mat4.$transpose(m)},$transpose:function $transpose(dest){var n4=dest[4],n8=dest[8],n12=dest[12],n1=dest[1],n9=dest[9],n13=dest[13],n2=dest[2],n6=dest[6],n14=dest[14],n3=dest[3],n7=dest[7],n11=dest[11];dest[1]=n4;dest[2]=n8;dest[3]=n12;dest[4]=n1;dest[6]=n9;dest[7]=n13;dest[8]=n2;dest[9]=n6;dest[11]=n14;dest[12]=n3;dest[13]=n7;dest[14]=n11;return dest},rotateAxis:function rotateAxis(dest,theta,vec){var m=Mat4.clone(dest);return Mat4.$rotateAxis(m,theta,vec)},$rotateAxis:function $rotateAxis(dest,theta,vec){var s=sin(theta),c=cos(theta),nc=1-c,vx=vec[0],vy=vec[1],vz=vec[2],m11=vx*vx*nc+c,m12=vx*vy*nc+vz*s,m13=vx*vz*nc-vy*s,m21=vy*vx*nc-vz*s,m22=vy*vy*nc+c,m23=vy*vz*nc+vx*s,m31=vx*vz*nc+vy*s,m32=vy*vz*nc-vx*s,m33=vz*vz*nc+c,d11=dest[0],d12=dest[1],d13=dest[2],d14=dest[3],d21=dest[4],d22=dest[5],d23=dest[6],d24=dest[7],d31=dest[8],d32=dest[9],d33=dest[10],d34=dest[11],d41=dest[12],d42=dest[13],d43=dest[14],d44=dest[15];dest[0]=d11*m11+d21*m12+d31*m13;dest[1]=d12*m11+d22*m12+d32*m13;dest[2]=d13*m11+d23*m12+d33*m13;dest[3]=d14*m11+d24*m12+d34*m13;dest[4]=d11*m21+d21*m22+d31*m23;dest[5]=d12*m21+d22*m22+d32*m23;dest[6]=d13*m21+d23*m22+d33*m23;dest[7]=d14*m21+d24*m22+d34*m23;dest[8]=d11*m31+d21*m32+d31*m33;dest[9]=d12*m31+d22*m32+d32*m33;dest[10]=d13*m31+d23*m32+d33*m33;dest[11]=d14*m31+d24*m32+d34*m33;return dest},rotateXYZ:function rotateXYZ(dest,rx,ry,rz){var ans=Mat4.clone(dest);return Mat4.$rotateXYZ(ans,rx,ry,rz)},$rotateXYZ:function $rotateXYZ(dest,rx,ry,rz){var d11=dest[0],d12=dest[1],d13=dest[2],d14=dest[3],d21=dest[4],d22=dest[5],d23=dest[6],d24=dest[7],d31=dest[8],d32=dest[9],d33=dest[10],d34=dest[11],crx=cos(rx),cry=cos(ry),crz=cos(rz),srx=sin(rx),sry=sin(ry),srz=sin(rz),m11=cry*crz,m21=-crx*srz+srx*sry*crz,m31=srx*srz+crx*sry*crz,m12=cry*srz,m22=crx*crz+srx*sry*srz,m32=-srx*crz+crx*sry*srz,m13=-sry,m23=srx*cry,m33=crx*cry;dest[0]=d11*m11+d21*m12+d31*m13;dest[1]=d12*m11+d22*m12+d32*m13;dest[2]=d13*m11+d23*m12+d33*m13;dest[3]=d14*m11+d24*m12+d34*m13;dest[4]=d11*m21+d21*m22+d31*m23;dest[5]=d12*m21+d22*m22+d32*m23;dest[6]=d13*m21+d23*m22+d33*m23;dest[7]=d14*m21+d24*m22+d34*m23;dest[8]=d11*m31+d21*m32+d31*m33;dest[9]=d12*m31+d22*m32+d32*m33;dest[10]=d13*m31+d23*m32+d33*m33;dest[11]=d14*m31+d24*m32+d34*m33;return dest},translate:function translate(dest,x,y,z){var m=Mat4.clone(dest);return Mat4.$translate(m,x,y,z)},$translate:function $translate(dest,x,y,z){dest[12]=dest[0]*x+dest[4]*y+dest[8]*z+dest[12];dest[13]=dest[1]*x+dest[5]*y+dest[9]*z+dest[13];dest[14]=dest[2]*x+dest[6]*y+dest[10]*z+dest[14];dest[15]=dest[3]*x+dest[7]*y+dest[11]*z+dest[15];return dest},scale:function scale(dest,x,y,z){var m=Mat4.clone(dest);return Mat4.$scale(m,x,y,z)},$scale:function $scale(dest,x,y,z){dest[0]*=x;dest[1]*=x;dest[2]*=x;dest[3]*=x;dest[4]*=y;dest[5]*=y;dest[6]*=y;dest[7]*=y;dest[8]*=z;dest[9]*=z;dest[10]*=z;dest[11]*=z;return dest},invert:function invert(dest){var m=Mat4.clone(dest);return Mat4.$invert(m)},$invert:function $invert(dest){var x0=dest[0],x1=dest[1],x2=dest[2],x3=dest[3],x4=dest[4],x5=dest[5],x6=dest[6],x7=dest[7],x8=dest[8],x9=dest[9],x10=dest[10],x11=dest[11],x12=dest[12],x13=dest[13],x14=dest[14],x15=dest[15];var a0=x0*x5-x1*x4,a1=x0*x6-x2*x4,a2=x0*x7-x3*x4,a3=x1*x6-x2*x5,a4=x1*x7-x3*x5,a5=x2*x7-x3*x6,b0=x8*x13-x9*x12,b1=x8*x14-x10*x12,b2=x8*x15-x11*x12,b3=x9*x14-x10*x13,b4=x9*x15-x11*x13,b5=x10*x15-x11*x14;var invdet=1/(a0*b5-a1*b4+a2*b3+a3*b2-a4*b1+a5*b0);dest[0]=(+x5*b5-x6*b4+x7*b3)*invdet;dest[1]=(-x1*b5+x2*b4-x3*b3)*invdet;dest[2]=(+x13*a5-x14*a4+x15*a3)*invdet;dest[3]=(-x9*a5+x10*a4-x11*a3)*invdet;dest[4]=(-x4*b5+x6*b2-x7*b1)*invdet;dest[5]=(+x0*b5-x2*b2+x3*b1)*invdet;dest[6]=(-x12*a5+x14*a2-x15*a1)*invdet;dest[7]=(+x8*a5-x10*a2+x11*a1)*invdet;dest[8]=(+x4*b4-x5*b2+x7*b0)*invdet;dest[9]=(-x0*b4+x1*b2-x3*b0)*invdet;dest[10]=(+x12*a4-x13*a2+x15*a0)*invdet;dest[11]=(-x8*a4+x9*a2-x11*a0)*invdet;dest[12]=(-x4*b3+x5*b1-x6*b0)*invdet;dest[13]=(+x0*b3-x1*b1+x2*b0)*invdet;dest[14]=(-x12*a3+x13*a1-x14*a0)*invdet;dest[15]=(+x8*a3-x9*a1+x10*a0)*invdet;return dest},lookAt:function lookAt(dest,eye,center,up){var z=Vec3.sub(eye,center);z.$unit();var x=Vec3.cross(up,z);x.$unit();var y=Vec3.cross(z,x);y.$unit();return Mat4.set(dest,x[0],x[1],x[2],-x.dot(eye),y[0],y[1],y[2],-y.dot(eye),z[0],z[1],z[2],-z.dot(eye),0,0,0,1)},frustum:function frustum(dest,left,right,bottom,top,near,far){var rl=right-left,tb=top-bottom,fn=far-near;dest[0]=near*2/rl;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=near*2/tb;dest[6]=0;dest[7]=0;dest[8]=(right+left)/rl;dest[9]=(top+bottom)/tb;dest[10]=-(far+near)/fn;dest[11]=-1;dest[12]=0;dest[13]=0;dest[14]=-(far*near*2)/fn;dest[15]=0;return dest},perspective:function perspective(dest,fov,aspect,near,far){var ymax=near*tan(fov*pi/360),ymin=-ymax,xmin=ymin*aspect,xmax=ymax*aspect;return Mat4.frustum(dest,xmin,xmax,ymin,ymax,near,far)},ortho:function ortho(dest,left,right,top,bottom,near,far){var te=this.elements,w=right-left,h=top-bottom,p=far-near,x=(right+left)/w,y=(top+bottom)/h,z=(far+near)/p;dest[0]=2/w;dest[4]=0;dest[8]=0;dest[12]=-x;dest[1]=0;dest[5]=2/h;dest[9]=0;dest[13]=-y;dest[2]=0;dest[6]=0;dest[10]=-2/p;dest[14]=-z;dest[3]=0;dest[7]=0;dest[11]=0;dest[15]=1;return dest},toFloat32Array:function toFloat32Array(dest){var ans=dest.typedContainer;if(!ans){return dest}ans[0]=dest[0];ans[1]=dest[1];ans[2]=dest[2];ans[3]=dest[3];ans[4]=dest[4];ans[5]=dest[5];ans[6]=dest[6];ans[7]=dest[7];ans[8]=dest[8];ans[9]=dest[9];ans[10]=dest[10];ans[11]=dest[11];ans[12]=dest[12];ans[13]=dest[13];ans[14]=dest[14];ans[15]=dest[15];return ans}};proto=Mat4.prototype;for(method in generics){Mat4[method]=generics[method];proto[method]=function(m){return function(){var args=slice.call(arguments);args.unshift(this);return Mat4[m].apply(Mat4,args)}}(method)}var Quat=exports.Quat=function(_extendableBuiltin6){_inherits(Quat,_extendableBuiltin6);function Quat(x,y,z,w){_classCallCheck(this,Quat);var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(Quat).call(this,4));_this3[0]=x||0;_this3[1]=y||0;_this3[2]=z||0;_this3[3]=w||0;_this3.typedContainer=new Float32Array(4);return _this3}_createClass(Quat,null,[{key:"create",value:function create(){return new Array(4)}},{key:"fromVec3",value:function fromVec3(v,r){return new Quat(v[0],v[1],v[2],r||0)}},{key:"fromMat4",value:function fromMat4(m){var u;var v;var w;if(m[0]>m[5]&&m[0]>m[10]){u=0;v=1;w=2}else if(m[5]>m[0]&&m[5]>m[10]){u=1;v=2;w=0}else{u=2;v=0;w=1}var r=sqrt(1+m[u*5]-m[v*5]-m[w*5]);var q=new Quat;q[u]=.5*r;q[v]=.5*(m["n"+v+""+u]+m["n"+u+""+v])/r;q[w]=.5*(m["n"+u+""+w]+m["n"+w+""+u])/r;q[3]=.5*(m["n"+v+""+w]-m["n"+w+""+v])/r;return q}},{key:"fromXRotation",value:function fromXRotation(angle){return new Quat(sin(angle/2),0,0,cos(angle/2))}},{key:"fromYRotation",value:function fromYRotation(angle){return new Quat(0,sin(angle/2),0,cos(angle/2))}},{key:"fromZRotation",value:function fromZRotation(angle){return new Quat(0,0,sin(angle/2),cos(angle/2))}},{key:"fromAxisRotation",value:function fromAxisRotation(vec,angle){var x=vec[0],y=vec[1],z=vec[2],d=1/sqrt(x*x+y*y+z*z),s=sin(angle/2),c=cos(angle/2);return new Quat(s*x*d,s*y*d,s*z*d,c)}}]);return Quat}(_extendableBuiltin5(Array));generics={setQuat:function setQuat(dest,q){dest[0]=q[0];dest[1]=q[1];dest[2]=q[2];dest[3]=q[3];return dest},set:function set(dest,x,y,z,w){dest[0]=x||0;dest[1]=y||0;dest[2]=z||0;dest[3]=w||0;return dest},clone:function clone(dest){if(dest instanceof Quat){return new Quat(dest[0],dest[1],dest[2],dest[3])}return Quat.setQuat(new typedArray(4),dest)},neg:function neg(dest){return new Quat(-dest[0],-dest[1],-dest[2],-dest[3])},$neg:function $neg(dest){dest[0]=-dest[0];dest[1]=-dest[1];dest[2]=-dest[2];dest[3]=-dest[3];return dest},add:function add(dest,q){return new Quat(dest[0]+q[0],dest[1]+q[1],dest[2]+q[2],dest[3]+q[3])},$add:function $add(dest,q){dest[0]+=q[0];dest[1]+=q[1];dest[2]+=q[2];dest[3]+=q[3];return dest},sub:function sub(dest,q){return new Quat(dest[0]-q[0],dest[1]-q[1],dest[2]-q[2],dest[3]-q[3])},$sub:function $sub(dest,q){dest[0]-=q[0];dest[1]-=q[1];dest[2]-=q[2];dest[3]-=q[3];return dest},scale:function scale(dest,s){return new Quat(dest[0]*s,dest[1]*s,dest[2]*s,dest[3]*s)},$scale:function $scale(dest,s){dest[0]*=s;dest[1]*=s;dest[2]*=s;dest[3]*=s;return dest},mulQuat:function mulQuat(dest,q){var aX=dest[0],aY=dest[1],aZ=dest[2],aW=dest[3],bX=q[0],bY=q[1],bZ=q[2],bW=q[3];return new Quat(aW*bX+aX*bW+aY*bZ-aZ*bY,aW*bY+aY*bW+aZ*bX-aX*bZ,aW*bZ+aZ*bW+aX*bY-aY*bX,aW*bW-aX*bX-aY*bY-aZ*bZ)},$mulQuat:function $mulQuat(dest,q){var aX=dest[0],aY=dest[1],aZ=dest[2],aW=dest[3],bX=q[0],bY=q[1],bZ=q[2],bW=q[3];dest[0]=aW*bX+aX*bW+aY*bZ-aZ*bY;dest[1]=aW*bY+aY*bW+aZ*bX-aX*bZ;dest[2]=aW*bZ+aZ*bW+aX*bY-aY*bX;dest[3]=aW*bW-aX*bX-aY*bY-aZ*bZ;return dest},divQuat:function divQuat(dest,q){var aX=dest[0],aY=dest[1],aZ=dest[2],aW=dest[3],bX=q[0],bY=q[1],bZ=q[2],bW=q[3];var d=1/(bW*bW+bX*bX+bY*bY+bZ*bZ);return new Quat((aX*bW-aW*bX-aY*bZ+aZ*bY)*d,(aX*bZ-aW*bY+aY*bW-aZ*bX)*d,(aY*bX+aZ*bW-aW*bZ-aX*bY)*d,(aW*bW+aX*bX+aY*bY+aZ*bZ)*d)},$divQuat:function $divQuat(dest,q){var aX=dest[0],aY=dest[1],aZ=dest[2],aW=dest[3],bX=q[0],bY=q[1],bZ=q[2],bW=q[3];var d=1/(bW*bW+bX*bX+bY*bY+bZ*bZ);dest[0]=(aX*bW-aW*bX-aY*bZ+aZ*bY)*d;dest[1]=(aX*bZ-aW*bY+aY*bW-aZ*bX)*d;dest[2]=(aY*bX+aZ*bW-aW*bZ-aX*bY)*d;dest[3]=(aW*bW+aX*bX+aY*bY+aZ*bZ)*d;return dest},invert:function invert(dest){var q0=dest[0],q1=dest[1],q2=dest[2],q3=dest[3];var d=1/(q0*q0+q1*q1+q2*q2+q3*q3);return new Quat(-q0*d,-q1*d,-q2*d,q3*d)},$invert:function $invert(dest){var q0=dest[0],q1=dest[1],q2=dest[2],q3=dest[3];var d=1/(q0*q0+q1*q1+q2*q2+q3*q3);dest[0]=-q0*d;dest[1]=-q1*d;dest[2]=-q2*d;dest[3]=q3*d;return dest},norm:function norm(dest){var a=dest[0],b=dest[1],c=dest[2],d=dest[3];return sqrt(a*a+b*b+c*c+d*d)},normSq:function normSq(dest){var a=dest[0],b=dest[1],c=dest[2],d=dest[3];return a*a+b*b+c*c+d*d},unit:function unit(dest){return Quat.scale(dest,1/Quat.norm(dest))},$unit:function $unit(dest){return Quat.$scale(dest,1/Quat.norm(dest))},conjugate:function conjugate(dest){return new Quat(-dest[0],-dest[1],-dest[2],dest[3])},$conjugate:function $conjugate(dest){dest[0]=-dest[0];dest[1]=-dest[1];dest[2]=-dest[2];return dest}};proto=Quat.prototype={};for(method in generics){Quat[method]=generics[method];proto[method]=function(m){return function(){var args=slice.call(arguments);args.unshift(this);return Quat[m].apply(Quat,args)}}(method)}Vec3.fromQuat=function(q){return new Vec3(q[0],q[1],q[2])};Mat4.fromQuat=function(q){var a=q[3],b=q[0],c=q[1],d=q[2];return new Mat4(a*a+b*b-c*c-d*d,2*b*c-2*a*d,2*b*d+2*a*c,0,2*b*c+2*a*d,a*a-b*b+c*c-d*d,2*c*d-2*a*b,0,2*b*d-2*a*c,2*c*d+2*a*b,a*a-b*b-c*c+d*d,0,0,0,0,1)}},{}],383:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _arrayImpl=require("./array-impl");Object.keys(_arrayImpl).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _arrayImpl[key]}})})},{"./array-impl":382}],384:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _object3d=require("./object-3d");var _object3d2=_interopRequireDefault(_object3d);var _math=require("../math");var _utils=require("../utils");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{
constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Group=function(_Object3D){_inherits(Group,_Object3D);function Group(_ref){var _ref$children=_ref.children;var children=_ref$children===undefined?[]:_ref$children;var opts=_objectWithoutProperties(_ref,["children"]);_classCallCheck(this,Group);children.every(function(child){return(0,_assert2.default)(child instanceof _object3d2.default)});var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Group).call(this,opts));_this.children=children;return _this}_createClass(Group,[{key:"add",value:function add(){for(var _len=arguments.length,children=Array(_len),_key=0;_key<_len;_key++){children[_key]=arguments[_key]}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=children[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var child=_step.value;if(Array.isArray(child)){this.add.apply(this,_toConsumableArray(child))}else{this.children.push(child)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return this}},{key:"remove",value:function remove(child){var children=this.children;var indexOf=children.indexOf(child);if(indexOf>-1){children.splice(indexOf,1)}return this}},{key:"removeAll",value:function removeAll(){this.children=[];return this}},{key:"traverse",value:regeneratorRuntime.mark(function traverse(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref2$viewMatrix=_ref2.viewMatrix;var viewMatrix=_ref2$viewMatrix===undefined?new _math.Mat4:_ref2$viewMatrix;var _iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,child,matrix,worldMatrix;return regeneratorRuntime.wrap(function traverse$(_context){while(1){switch(_context.prev=_context.next){case 0:_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context.prev=3;_iterator2=this.children[Symbol.iterator]();case 5:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context.next=19;break}child=_step2.value;matrix=child.matrix;worldMatrix=viewMatrix.mulMat4(matrix);if(!(child instanceof Group)){_context.next=13;break}return _context.delegateYield(child.traverse({matrix:matrix,worldMatrix:worldMatrix}),"t0",11);case 11:_context.next=16;break;case 13:if(child.program){child.program.use();child.program.setUniforms({worldMatrix:worldMatrix})}_context.next=16;return child;case 16:_iteratorNormalCompletion2=true;_context.next=5;break;case 19:_context.next=25;break;case 21:_context.prev=21;_context.t1=_context["catch"](3);_didIteratorError2=true;_iteratorError2=_context.t1;case 25:_context.prev=25;_context.prev=26;if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}case 28:_context.prev=28;if(!_didIteratorError2){_context.next=31;break}throw _iteratorError2;case 31:return _context.finish(28);case 32:return _context.finish(25);case 33:case"end":return _context.stop()}}},traverse,this,[[3,21,25,33],[26,,28,32]])})},{key:"traverseReverse",value:regeneratorRuntime.mark(function traverseReverse(_ref3){var viewMatrix=_ref3.viewMatrix;var i,child,matrix,worldMatrix;return regeneratorRuntime.wrap(function traverseReverse$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:i=this.children.length-1;case 1:if(!(i>=0)){_context2.next=15;break}child=this.children[i];matrix=child.matrix;worldMatrix=viewMatrix.mulMat4(matrix);if(!(child instanceof Group)){_context2.next=9;break}return _context2.delegateYield(child.traverseReverse({matrix:matrix,worldMatrix:worldMatrix}),"t0",7);case 7:_context2.next=12;break;case 9:if(child.program){child.program.use();child.program.setUniforms({worldMatrix:worldMatrix})}_context2.next=12;return child;case 12:--i;_context2.next=1;break;case 15:case"end":return _context2.stop()}}},traverseReverse,this)})}]);return Group}(_object3d2.default);exports.default=Group},{"../math":383,"../utils":389,"./object-3d":386,assert:3}],385:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _object3d=require("./object-3d");Object.defineProperty(exports,"Object3D",{enumerable:true,get:function get(){return _interopRequireDefault(_object3d).default}});var _group=require("./group");Object.defineProperty(exports,"Group",{enumerable:true,get:function get(){return _interopRequireDefault(_group).default}});var _scene=require("./scene");Object.defineProperty(exports,"Scene",{enumerable:true,get:function get(){return _interopRequireDefault(_scene).default}});var _pick=require("./pick");Object.keys(_pick).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _pick[key]}})});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./group":384,"./object-3d":386,"./pick":387,"./scene":388}],386:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _math=require("../math");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);var _utils=require("../utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Object3D=function(){function Object3D(_ref){var id=_ref.id;var _ref$display=_ref.display;var display=_ref$display===undefined?true:_ref$display;_classCallCheck(this,Object3D);this.position=new _math.Vec3;this.rotation=new _math.Vec3;this.scale=new _math.Vec3(1,1,1);this.matrix=new _math.Mat4;this.id=id||(0,_utils.uid)();this.display=true;this.userData={}}_createClass(Object3D,[{key:"setPosition",value:function setPosition(position){(0,_assert2.default)(position instanceof _math.Vec3,"setPosition requires vector argument");this.position=position;return this}},{key:"setRotation",value:function setRotation(rotation){(0,_assert2.default)(rotation instanceof _math.Vec3,"setRotation requires vector argument");this.rotation=rotation;return this}},{key:"setScale",value:function setScale(scale){(0,_assert2.default)(scale instanceof _math.Vec3,"setScale requires vector argument");this.scale=scale;return this}},{key:"setMatrixComponents",value:function setMatrixComponents(_ref2){var position=_ref2.position;var rotation=_ref2.rotation;var scale=_ref2.scale;var _ref2$update=_ref2.update;var update=_ref2$update===undefined?true:_ref2$update;if(position){this.setPosition(position)}if(rotation){this.setRotation(rotation)}if(scale){this.setScale(scale)}if(update){this.updateMatrix()}return this}},{key:"updateMatrix",value:function updateMatrix(){var pos=this.position;var rot=this.rotation;var scale=this.scale;this.matrix.id();this.matrix.$translate(pos.x,pos.y,pos.z);this.matrix.$rotateXYZ(rot.x,rot.y,rot.z);this.matrix.$scale(scale.x,scale.y,scale.z);return this}},{key:"update",value:function update(){var _ref3=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var position=_ref3.position;var rotation=_ref3.rotation;var scale=_ref3.scale;if(position){this.setPosition(position)}if(rotation){this.setRotation(rotation)}if(scale){this.setScale(scale)}this.updateMatrix();return this}},{key:"getCoordinateUniforms",value:function getCoordinateUniforms(viewMatrix){(0,_assert2.default)(viewMatrix);var matrix=this.matrix;var worldMatrix=viewMatrix.mulMat4(matrix);var worldInverse=worldMatrix.invert();var worldInverseTranspose=worldInverse.transpose();return{objectMatrix:matrix,worldMatrix:worldMatrix,worldInverseMatrix:worldInverse,worldInverseTransposeMatrix:worldInverseTranspose}}},{key:"transform",value:function transform(){if(!this.parent){this.endPosition.setVec3(this.position);this.endRotation.setVec3(this.rotation);this.endScale.setVec3(this.scale)}else{var parent=this.parent;this.endPosition.setVec3(this.position.add(parent.endPosition));this.endRotation.setVec3(this.rotation.add(parent.endRotation));this.endScale.setVec3(this.scale.add(parent.endScale))}var ch=this.children;for(var i=0;i<ch.length;++i){ch[i].transform()}return this}}]);return Object3D}();exports.default=Object3D},{"../math":383,"../utils":389,assert:3}],387:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pickModels=pickModels;var _webgl=require("../webgl");var _webglChecks=require("../webgl/webgl-checks");var _group=require("./group");var _group2=_interopRequireDefault(_group);var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ILLEGAL_ARG="Illegal argument to pick";function pickModels(gl,_ref){var group=_ref.group;var camera=_ref.camera;var viewMatrix=_ref.viewMatrix;var x=_ref.x;var y=_ref.y;var _ref$pickingFBO=_ref.pickingFBO;var pickingFBO=_ref$pickingFBO===undefined?null:_ref$pickingFBO;var _ref$pickingProgram=_ref.pickingProgram;var pickingProgram=_ref$pickingProgram===undefined?null:_ref$pickingProgram;var _ref$pickingColors=_ref.pickingColors;var pickingColors=_ref$pickingColors===undefined?null:_ref$pickingColors;(0,_webglChecks.assertWebGLRenderingContext)(gl);(0,_assert2.default)(group instanceof _group2.default,ILLEGAL_ARG);(0,_assert2.default)(Array.isArray(viewMatrix),ILLEGAL_ARG);pickingFBO=pickingFBO||new _webgl.FramebufferObject(gl,{width:gl.canvas.width,height:gl.canvas.height});var picked=[];(0,_webgl.glContextWithState)(gl,{frameBuffer:pickingFBO,scissorTest:{x:x,y:gl.canvas.height-y,w:1,h:1}},function(){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=group.traverseReverse({viewMatrix:viewMatrix})[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var model=_step.value;if(model.isPickable()){gl.clear(_webgl.GL.COLOR_BUFFER_BIT|_webgl.GL.DEPTH_BUFFER_BIT);model.setUniforms({renderPickingBuffer:1});model.render(gl,{camera:camera,viewMatrix:viewMatrix});model.setUniforms({renderPickingBuffer:0});var color=new Uint8Array(4);gl.readPixels(x,gl.canvas.height-y,1,1,gl.RGBA,gl.UNSIGNED_BYTE,color);var isPicked=color[0]!==0||color[1]!==0||color[2]!==0||color[3]!==0;picked.push({model:model,color:color,isPicked:isPicked})}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}});return picked}},{"../webgl":399,"../webgl/webgl-checks":406,"./group":384,assert:3}],388:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _config=require("../core/config");var config=_interopRequireWildcard(_config);var _camera=require("../core/camera");var _math=require("../math");var _utils=require("../utils");var _group=require("./group");var _group2=_interopRequireDefault(_group);var _pick=require("./pick");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var INVALID_ARGUMENT="LumaGL.Scene invalid argument";function noop(){}var DEFAULT_SCENE_OPTS={lights:{enable:false,ambient:{r:.2,g:.2,b:.2},directional:{direction:{x:1,y:1,z:1},color:{r:0,g:0,b:0}}},effects:{fog:false},clearColor:true,clearDepth:true,backgroundColor:{r:0,g:0,b:0,a:1},backgroundDepth:1};var Scene=function(_Group){_inherits(Scene,_Group);function Scene(gl,opts){_classCallCheck(this,Scene);(0,_assert2.default)(gl,INVALID_ARGUMENT);opts=(0,_utils.merge)(DEFAULT_SCENE_OPTS,opts);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Scene).call(this,opts));_this.gl=gl;_this.config=opts;_this.needsRedraw=false;Object.seal(_this);return _this}_createClass(Scene,[{key:"setNeedsRedraw",value:function setNeedsRedraw(){var redraw=arguments.length<=0||arguments[0]===undefined?true:arguments[0];this.needsRedraw=redraw;return this}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$clearRedrawFlags=_ref.clearRedrawFlags;var clearRedrawFlags=_ref$clearRedrawFlags===undefined?false:_ref$clearRedrawFlags;var redraw=false;redraw=redraw||this.needsRedraw;this.needsRedraw=this.needsRedraw&&!clearRedrawFlags;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.traverse()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var model=_step.value;redraw=redraw||model.getNeedsRedraw({clearRedrawFlags:clearRedrawFlags})}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return redraw}},{key:"clear",value:function clear(gl){if(this.config.clearColor){var bg=this.config.backgroundColor;gl.clearColor(bg.r,bg.g,bg.b,bg.a)}if(this.config.clearDepth){gl.clearDepth(this.config.backgroundDepth)}if(this.config.clearColor&&this.config.clearDepth){gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT)}else if(this.config.clearColor){gl.clear(gl.COLOR_BUFFER_BIT)}else if(this.config.clearDepth){gl.clear(gl.DEPTH_BUFFER_BIT)}return this}},{key:"render",value:function render(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var camera=_ref2.camera;var _ref2$onBeforeRender=_ref2.onBeforeRender;var onBeforeRender=_ref2$onBeforeRender===undefined?noop:_ref2$onBeforeRender;var _ref2$onAfterRender=_ref2.onAfterRender;var onAfterRender=_ref2$onAfterRender===undefined?noop:_ref2$onAfterRender;var _ref2$context=_ref2.context;var context=_ref2$context===undefined?{}:_ref2$context;var opts=_objectWithoutProperties(_ref2,["camera","onBeforeRender","onAfterRender","context"]);var gl=this.gl;this.clear(gl);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.traverse({viewMatrix:camera.view})[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var model=_step2.value;if(model.display){onBeforeRender(model,context);this.renderObject({model:model,camera:camera,context:context});onAfterRender(model,context)}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return this}},{key:"renderObject",value:function renderObject(_ref3){var model=_ref3.model;var camera=_ref3.camera;var _ref3$context=_ref3.context;var context=_ref3$context===undefined?{}:_ref3$context;(0,_assert2.default)(camera instanceof _camera.Camera,"Invalid Camera in Scene.renderObject");var program=model.program;this.setupLighting(program);this.setupEffects(program);model.onBeforeRender(camera,context);model.render({camera:camera,viewMatrix:camera.view});model.onAfterRender(camera,context);return this}},{key:"pickModels",value:function pickModels(gl,_ref4){var camera=_ref4.camera;var x=_ref4.x;var y=_ref4.y;var opts=_objectWithoutProperties(_ref4,["camera","x","y"]);var viewMatrix=camera.view;return(0,_pick.pickModels)(gl,_extends({group:this,camera:camera,viewMatrix:viewMatrix,x:x,y:y},opts))}},{key:"setupLighting",value:function setupLighting(program){var _config$lights=this.config.lights;var enable=_config$lights.enable;var ambient=_config$lights.ambient;var directional=_config$lights.directional;var points=_config$lights.points;program.setUniforms({enableLights:enable});if(!enable){return this}if(ambient){this.setupAmbientLighting(program,ambient)}if(directional){this.setupDirectionalLighting(program,directional)}if(points){this.setupPointLighting(program,points)}return this}},{key:"setupAmbientLighting",value:function setupAmbientLighting(program,ambient){program.setUniforms({ambientColor:[ambient.r,ambient.g,ambient.b]});return this}},{key:"setupDirectionalLighting",value:function setupDirectionalLighting(program,directional){var color=directional.color;var direction=directional.direction;var dir=new _math.Vec3(direction.x,direction.y,direction.z).$unit().$scale(-1);program.setUniforms({directionalColor:[color.r,color.g,color.b],lightingDirection:[dir.x,dir.y,dir.z]});return this}},{key:"setupPointLighting",value:function setupPointLighting(program,points){points=points instanceof Array?points:[points];var numberPoints=points.length;program.setUniforms({numberPoints:numberPoints});var pointLocations=[];var pointColors=[];var enableSpecular=[];var pointSpecularColors=[];var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=points[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var point=_step3.value;var position=point.position;var color=point.color;var diffuse=point.diffuse;var specular=point.specular;var pointColor=color||diffuse;pointLocations.push(position.x,position.y,position.z);pointColors.push(pointColor.r,pointColor.g,pointColor.b);enableSpecular.push(Number(Boolean(specular)));if(specular){pointSpecularColors.push(specular.r,specular.g,specular.b)}else{pointSpecularColors.push(0,0,0)}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}if(pointLocations.length){program.setUniforms({pointLocation:pointLocations,pointColor:pointColors});program.setUniforms({enableSpecular:enableSpecular,pointSpecularColor:pointSpecularColors})}return this}},{key:"setupEffects",value:function setupEffects(program){var fog=this.config.effects.fog;if(fog){var _fog$color=fog.color;var color=_fog$color===undefined?{r:.5,g:.5,b:.5}:_fog$color;program.setUniforms({hasFog:true,fogNear:fog.near,fogFar:fog.far,fogColor:[color.r,color.g,color.b]})}else{program.setUniforms({hasFog:false})}return this}}]);return Scene}(_group2.default);exports.default=Scene;Scene.MAX_TEXTURES=config.MAX_TEXTURES;Scene.MAX_POINT_LIGHTS=config.MAX_POINT_LIGHTS;Scene.PICKING_RES=config.PICKING_RES},{"../core/camera":359,"../core/config":360,"../math":383,"../utils":389,"./group":384,"./pick":387,assert:3}],389:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _log=require("./log");Object.defineProperty(exports,"log",{enumerable:true,get:function get(){return _interopRequireDefault(_log).default}});var _utils=require("./utils");Object.keys(_utils).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})});var _isBrowser=require("./is-browser");Object.keys(_isBrowser).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _isBrowser[key]}})});var _promisify=require("./promisify");Object.keys(_promisify).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _promisify[key]}})});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./is-browser":390,"./log":391,"./promisify":392,"./utils":393}],390:[function(require,module,exports){(function(process,global){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};function isBrowser(){var isNode=(typeof process==="undefined"?"undefined":_typeof(process))==="object"&&String(process)==="[object process]"&&!process.browser;return!isNode}var glob=isBrowser()?window:global;if(glob.lumagl){throw new Error("lumagl multiple copies detected")}glob.lumagl={};glob.luma=glob.lumagl;glob.LumaGL=glob.lumagl;glob.lumagl.globals={headlessGL:null,headlessTypes:null,modules:{},nodeIO:{}};module.exports={isBrowser:isBrowser,global:glob,lumagl:glob.lumagl,lumaGlobals:glob.lumagl.globals}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:327}],391:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _isBrowser=require("./is-browser");var _log={priority:0,table:function table(priority,_table){if(priority<=_log.priority&&_table){console.table(_table)}},log:function log(priority){if(priority<=_log.priority){var _console;for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}(_console=console).debug.apply(_console,args)}},info:function info(priority){if(priority<=_log.priority){var _console2;for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}(_console2=console).log.apply(_console2,args)}},warn:function warn(priority){if(priority<=_log.priority){var _console3;for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3]}(_console3=console).warn.apply(_console3,args)}}};_isBrowser.lumagl.log=_log;exports.default=_log},{"./is-browser":390}],392:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.promisify=promisify;function promisify(func){return function promisifiedFunction(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return new Promise(function(resolve,reject){function callback(error,data){try{if(error){reject(error)}else{resolve(data)}}catch(e){reject(e)}}func.apply(undefined,args.concat([callback]))})}}},{}],393:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.splat=splat;exports.noop=noop;exports.uid=uid;exports.merge=merge;exports.getArrayType=getArrayType;exports.getGLTypeFromArrayType=getGLTypeFromArrayType;exports.getGLTypeFromArray=getGLTypeFromArray;exports.getArrayTypeFromGLType=getArrayTypeFromGLType;function splat(a){return a?Array.isArray(a)?a:[a]:[]}function noop(){}var uidCounters={};function uid(){var id=arguments.length<=0||arguments[0]===undefined?"id":arguments[0];uidCounters[id]=uidCounters[id]||1;var count=uidCounters[id]++;return id+"-"+count}function merge(objects){var mix={};for(var i=0,l=arguments.length;i<l;i++){var object=arguments[i];if(!object||object.constructor.name!=="Object"){continue}for(var key in object){var op=object[key];var mp=mix[key];if(mp&&op.constructor.name==="Object"&&mp.constructor.name==="Object"){mix[key]=merge(mp,op)}else{mix[key]=detach(op)}}}return mix}function detach(elem){var t=elem.constructor.name;var ans=void 0;if(t==="Object"){ans={};for(var p in elem){ans[p]=detach(elem[p])}}else if(t==="Array"){ans=[];for(var i=0,l=elem.length;i<l;i++){ans[i]=detach(elem[i])}}else{ans=elem}return ans}function getArrayType(array){if(array instanceof Float32Array){return Float32Array}else if(array instanceof Uint16Array){return Uint16Array}else if(array instanceof Uint32Array){return Uint32Array}else if(array instanceof Uint8Array){return Uint8Array}else if(array instanceof Uint8ClampedArray){return Uint8ClampedArray}else if(array instanceof Int8Array){return Int8Array}else if(array instanceof Int16Array){return Int16Array}else if(array instanceof Int32Array){return Int32Array}throw new Error("Failed to deduce type from array")}function getGLTypeFromArrayType(arrayType){switch(arrayType){case Float32Array:return"FLOAT";case Uint16Array:return"UNSIGNED_SHORT";case Uint32Array:return"UNSIGNED_INT";case Uint8Array:return"UNSIGNED_BYTE";case Uint8ClampedArray:return"UNSIGNED_BYTE";case Int8Array:return"BYTE";case Int16Array:return"SHORT";case Int32Array:return"INT";default:return null}throw new Error("Failed to deduce type from array")}function getGLTypeFromArray(array){return getGLTypeFromArrayType(getArrayType(array))}function getArrayTypeFromGLType(glTypeString){var clamped=arguments.length<=1||arguments[1]===undefined?false:arguments[1];switch(glTypeString){case"FLOAT":return Float32Array;case"UNSIGNED_SHORT":case"UNSIGNED_SHORT_5_6_5":case"UNSIGNED_SHORT_4_4_4_4":case"UNSIGNED_SHORT_5_5_5_1":return Uint16Array;case"UNSIGNED_INT":return Uint32Array;case"UNSIGNED_BYTE":return clamped?Uint8ClampedArray:Uint8Array;case"BYTE":return Int8Array;case"SHORT":return Int16Array;case"INT":return Int32Array;default:throw new Error("Failed to deduce type from array")}}},{}],394:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.BufferLayout=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglTypes=require("./webgl-types");var _webglChecks=require("./webgl-checks");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ERR_WEBGL2="WebGL2 required";var BufferLayout=exports.BufferLayout=function BufferLayout(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var type=_ref.type;var _ref$size=_ref.size;var size=_ref$size===undefined?1:_ref$size;var _ref$offset=_ref.offset;var offset=_ref$offset===undefined?0:_ref$offset;var _ref$stride=_ref.stride;var stride=_ref$stride===undefined?0:_ref$stride;var _ref$normalized=_ref.normalized;var normalized=_ref$normalized===undefined?false:_ref$normalized;var _ref$integer=_ref.integer;var integer=_ref$integer===undefined?false:_ref$integer;var _ref$instanced=_ref.instanced;var instanced=_ref$instanced===undefined?0:_ref$instanced;_classCallCheck(this,BufferLayout);this.type=type;this.size=size;this.offset=offset;this.stride=stride;this.normalized=normalized;this.integer=integer;this.instanced=instanced};var Buffer=function(){_createClass(Buffer,null,[{key:"makeFrom",value:function makeFrom(gl){var object=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return object instanceof Buffer?object:new Buffer(gl).setData({handle:object.handle||object})}}]);function Buffer(){var gl=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref2=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var id=_ref2.id;var handle=_ref2.handle;_classCallCheck(this,Buffer);(0,_webglChecks.assertWebGLRenderingContext)(gl);handle=handle||gl.createBuffer();if(!(handle instanceof _webglTypes.WebGLBuffer)){throw new Error("Failed to create WebGLBuffer")}this.gl=gl;this.handle=handle;this.id=id;this.bytes=undefined;this.data=null;this.target=_webglTypes.GL.ARRAY_BUFFER;this.layout=null;this.userData={};Object.seal(this)}_createClass(Buffer,[{key:"delete",value:function _delete(){var gl=this.gl;if(this.handle){gl.deleteBuffer(this.handle);this.handle=null}return this}},{key:"setData",value:function setData(){var _ref3=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var data=_ref3.data;var bytes=_ref3.bytes;var _ref3$target=_ref3.target;var target=_ref3$target===undefined?_webglTypes.GL.ARRAY_BUFFER:_ref3$target;var _ref3$usage=_ref3.usage;var usage=_ref3$usage===undefined?_webglTypes.GL.STATIC_DRAW:_ref3$usage;var layout=_ref3.layout;var type=_ref3.type;var _ref3$size=_ref3.size;var size=_ref3$size===undefined?1:_ref3$size;var _ref3$offset=_ref3.offset;var offset=_ref3$offset===undefined?0:_ref3$offset;var _ref3$stride=_ref3.stride;var stride=_ref3$stride===undefined?0:_ref3$stride;var _ref3$normalized=_ref3.normalized;var normalized=_ref3$normalized===undefined?false:_ref3$normalized;var _ref3$integer=_ref3.integer;var integer=_ref3$integer===undefined?false:_ref3$integer;var _ref3$instanced=_ref3.instanced;var instanced=_ref3$instanced===undefined?0:_ref3$instanced;var gl=this.gl;(0,_assert2.default)(data||bytes>=0,"Buffer.setData needs data or bytes");type=type||(0,_webglChecks.glTypeFromArray)(data);if(data){(0,_webglChecks.assertArrayTypeMatch)(data,type,"in Buffer.setData")}this.bytes=bytes;this.data=data;this.target=target;this.layout=layout||new BufferLayout({type:type,size:size,offset:offset,stride:stride,normalized:normalized,integer:integer,instanced:instanced});this.bind({target:target});gl.bufferData(target,data||bytes,usage);this.unbind({target:target});return this}},{key:"subData",value:function subData(){var _ref4=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];
var data=_ref4.data;var _ref4$offset=_ref4.offset;var offset=_ref4$offset===undefined?0:_ref4$offset;var gl=this.gl;(0,_assert2.default)(data,"Buffer.updateData needs data");this.bind({target:_webglTypes.GL.ARRAY_BUFFER});gl.bufferSubData(_webglTypes.GL.ARRAY_BUFFER,offset,data);this.unbind({target:_webglTypes.GL.ARRAY_BUFFER});return this}},{key:"bind",value:function bind(){var _ref5=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref5$target=_ref5.target;var target=_ref5$target===undefined?this.target:_ref5$target;this.gl.bindBuffer(target,this.handle);return this}},{key:"unbind",value:function unbind(){var _ref6=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref6$target=_ref6.target;var target=_ref6$target===undefined?this.target:_ref6$target;return this}},{key:"bindBase",value:function bindBase(){var _ref7=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref7$target=_ref7.target;var target=_ref7$target===undefined?this.target:_ref7$target;var index=_ref7.index;(0,_assert2.default)(this.gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);this.gl.bindBufferBase(target,index,this.handle);return this}},{key:"unbindBase",value:function unbindBase(){var _ref8=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref8$target=_ref8.target;var target=_ref8$target===undefined?this.target:_ref8$target;var index=_ref8.index;(0,_assert2.default)(this.gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);this.gl.bindBufferBase(target,index,null);return this}},{key:"bindRange",value:function bindRange(){var _ref9=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref9$target=_ref9.target;var target=_ref9$target===undefined?this.target:_ref9$target;var index=_ref9.index;var _ref9$offset=_ref9.offset;var offset=_ref9$offset===undefined?0:_ref9$offset;var size=_ref9.size;(0,_assert2.default)(this.gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);this.gl.bindBufferRange(target,index,this.handle,offset,size);return this}},{key:"unbindRange",value:function unbindRange(){var _ref10=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref10$target=_ref10.target;var target=_ref10$target===undefined?this.target:_ref10$target;var index=_ref10.index;(0,_assert2.default)(this.gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);this.gl.bindBufferBase(target,index,null);return this}}]);return Buffer}();exports.default=Buffer},{"./webgl-checks":406,"./webgl-types":408,assert:3}],395:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createGLContext=createGLContext;exports.glGet=glGet;exports.getGLExtension=getGLExtension;exports.glGetDebugInfo=glGetDebugInfo;exports.glContextWithState=glContextWithState;exports.glGetError=glGetError;exports.glCheckError=glCheckError;exports.getExtension=getExtension;var _webglDebug=require("webgl-debug");var _webglDebug2=_interopRequireDefault(_webglDebug);var _webglTypes=require("./webgl-types");var _webglChecks=require("./webgl-checks");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);var _utils=require("../utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function createGLContext(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$headlessGL=_ref.headlessGL;var headlessGL=_ref$headlessGL===undefined?null:_ref$headlessGL;var headless=_ref.headless;var canvas=_ref.canvas;var _ref$width=_ref.width;var width=_ref$width===undefined?800:_ref$width;var _ref$height=_ref.height;var height=_ref$height===undefined?600:_ref$height;var _ref$webgl=_ref.webgl2;var webgl2=_ref$webgl===undefined?false:_ref$webgl;var _ref$debug=_ref.debug;var debug=_ref$debug===undefined?true:_ref$debug;var opts=_objectWithoutProperties(_ref,["headlessGL","headless","canvas","width","height","webgl2","debug"]);var gl=void 0;if(!(0,_utils.isBrowser)()){headlessGL=headlessGL||_utils.lumaGlobals.headlessGL;if(!headlessGL){throw new Error("Cannot create headless WebGL context, headlessGL not available")}gl=headlessGL(width,height,opts);if(!gl){throw new Error("headlessGL failed to create headless WebGL context")}}else{canvas=typeof canvas==="string"?document.getElementById(canvas):canvas;if(!canvas){canvas=document.createElement("canvas")}canvas.addEventListener("webglcontextcreationerror",function(e){_utils.log.log(0,e.statusMessage||"Unknown error")},false);if(webgl2){gl=canvas.getContext("webgl2",opts);gl=gl||canvas.getContext("experimental-webgl2",opts)}gl=gl||canvas.getContext("webgl",opts);gl=gl||canvas.getContext("experimental-webgl",opts);(0,_assert2.default)(gl,"Failed to create WebGLRenderingContext")}if((0,_utils.isBrowser)()&&debug){var debugGL=_webglDebug2.default.makeDebugContext(gl,throwOnError,validateArgsAndLog);var WebGLDebugContext=function WebGLDebugContext(){_classCallCheck(this,WebGLDebugContext)};Object.assign(WebGLDebugContext.prototype,debugGL);gl=debugGL;gl.debug=true;_utils.log.priority=_utils.log.priority<1?1:_utils.log.priority;logInfo(gl);_utils.log.log(0,"Change lumaLog.priority in console to control logging (0-3, default 1)");_utils.log.log(0,"Set lumaLog.break to array of matching strings to break on gl logs")}return gl}function logInfo(gl){var webGL=(0,_webglChecks.isWebGL2RenderingContext)(gl)?"WebGL2":"WebGL1";var info=glGetDebugInfo(gl);var driver=info?"using driver: "+info.vendor+" "+info.renderer:"";var debug=gl.debug?"debug":"";_utils.log.log(0,webGL+" "+debug+" context created "+driver,gl)}function glGet(gl,name){var value=name;if(typeof name==="string"){value=gl[name];(0,_assert2.default)(value!==undefined,"Accessing gl."+name)}return value}function getGLExtension(gl,extensionName){var ERROR="Illegal arg to getExtension";(0,_assert2.default)(gl instanceof _webglTypes.WebGLRenderingContext,ERROR);(0,_assert2.default)(typeof extensionName==="string",ERROR);var extension=gl.getExtension(extensionName);(0,_assert2.default)(extension,extensionName+" not supported!");return extension}function glGetDebugInfo(gl){var info=gl.getExtension("WEBGL_debug_renderer_info");if(info&&info.UNMASKED_VENDOR_WEBGL&&info.UNMASKED_RENDERER_WEBGL){return{vendor:gl.getParameter(info.UNMASKED_VENDOR_WEBGL),renderer:gl.getParameter(info.UNMASKED_RENDERER_WEBGL)}}return null}function glContextWithState(gl,_ref2,func){var scissorTest=_ref2.scissorTest;var frameBuffer=_ref2.frameBuffer;var scissorTestWasEnabled=void 0;if(scissorTest){scissorTestWasEnabled=gl.isEnabled(gl.SCISSOR_TEST);var x=scissorTest.x;var y=scissorTest.y;var w=scissorTest.w;var h=scissorTest.h;gl.enable(gl.SCISSOR_TEST);gl.scissor(x,y,w,h)}if(frameBuffer){frameBuffer.bind()}try{func(gl)}finally{if(!scissorTestWasEnabled){gl.disable(gl.SCISSOR_TEST)}if(frameBuffer){gl.bindFramebuffer(gl.FRAMEBUFFER,null)}}}function getFunctionString(functionName,functionArgs){var args=_webglDebug2.default.glFunctionArgsToString(functionName,functionArgs);args=""+args.slice(0,100)+(args.length>100?"...":"");return"gl."+functionName+"("+args+")"}function throwOnError(err,functionName,args){var errorMessage=_webglDebug2.default.glEnumToString(err);var functionArgs=_webglDebug2.default.glFunctionArgsToString(functionName,args);throw new Error(errorMessage+" was caused by call to: "+("gl."+functionName+"("+functionArgs+")"))}function validateArgsAndLog(functionName,functionArgs){var functionString=void 0;if(_utils.log.priority>=3){functionString=getFunctionString(functionName,functionArgs);_utils.log.info(3,""+functionString)}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=functionArgs[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var arg=_step.value;if(arg===undefined){functionString=functionString||getFunctionString(functionName,functionArgs);throw new Error("Undefined argument: "+functionString)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var breaks=_utils.log.break;if(_utils.log.break){functionString=functionString||getFunctionString(functionName,functionArgs);var isBreakpoint=_utils.log.break&&_utils.log.break.every(function(breakString){return functionString.indexOf(breakString)!==-1});if(isBreakpoint){debugger}}}function glGetError(gl){var errorStack=[];var glError=gl.getError();while(glError!==gl.NO_ERROR){errorStack.push(glGetErrorMessage(gl,glError));glError=gl.getError()}return errorStack.length?new Error(errorStack.join("\n")):null}function glCheckError(gl){if(gl.debug){var error=glGetError(gl);if(error){throw error}}}function glGetErrorMessage(gl,glError){switch(glError){case gl.CONTEXT_LOST_WEBGL:return"WebGL context lost";case gl.INVALID_ENUM:return"WebGL invalid enumerated argument";case gl.INVALID_VALUE:return"WebGL invalid value";case gl.INVALID_OPERATION:return"WebGL invalid operation";case gl.INVALID_FRAMEBUFFER_OPERATION:return"WebGL invalid framebuffer operation";case gl.OUT_OF_MEMORY:return"WebGL out of memory";default:return"WebGL unknown error "+glError}}function getExtension(gl,extensionName){_utils.log.warn(0,"luma.gl: getExtension is deprecated");return getGLExtension(gl,extensionName)}},{"../utils":389,"./webgl-checks":406,"./webgl-types":408,assert:3,"webgl-debug":348}],396:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.draw=draw;var _context=require("./context");var _webglChecks=require("./webgl-checks");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function draw(gl,_ref){var _ref$drawMode=_ref.drawMode;var drawMode=_ref$drawMode===undefined?gl.TRIANGLES:_ref$drawMode;var vertexCount=_ref.vertexCount;var _ref$offset=_ref.offset;var offset=_ref$offset===undefined?0:_ref$offset;var _ref$isIndexed=_ref.isIndexed;var isIndexed=_ref$isIndexed===undefined?false:_ref$isIndexed;var _ref$indexType=_ref.indexType;var indexType=_ref$indexType===undefined?gl.UNSIGNED_SHORT:_ref$indexType;var _ref$isInstanced=_ref.isInstanced;var isInstanced=_ref$isInstanced===undefined?false:_ref$isInstanced;var _ref$instanceCount=_ref.instanceCount;var instanceCount=_ref$instanceCount===undefined?0:_ref$instanceCount;(0,_webglChecks.assertWebGLRenderingContext)(gl);drawMode=(0,_context.glGet)(gl,drawMode);indexType=(0,_context.glGet)(gl,indexType);(0,_webglChecks.assertDrawMode)(drawMode,"in draw");if(isIndexed){(0,_webglChecks.assertIndexType)(indexType,"in draw")}if(isInstanced){var extension=gl.getExtension("ANGLE_instanced_arrays");if(isIndexed){extension.drawElementsInstancedANGLE(drawMode,vertexCount,indexType,offset,instanceCount)}else{extension.drawArraysInstancedANGLE(drawMode,offset,vertexCount,instanceCount)}}else if(isIndexed){gl.drawElements(drawMode,vertexCount,indexType,offset)}else{gl.drawArrays(drawMode,offset,vertexCount)}}},{"./context":395,"./webgl-checks":406,assert:3}],397:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglTypes=require("./webgl-types");var _webglChecks=require("./webgl-checks");var _framebuffer=require("./framebuffer");var _framebuffer2=_interopRequireDefault(_framebuffer);var _renderbuffer=require("./renderbuffer");var _renderbuffer2=_interopRequireDefault(_renderbuffer);var _texture=require("./texture");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var FramebufferObject=function(){function FramebufferObject(gl){var _ref=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var _ref$width=_ref.width;var width=_ref$width===undefined?1:_ref$width;var _ref$height=_ref.height;var height=_ref$height===undefined?1:_ref$height;var _ref$depth=_ref.depth;var depth=_ref$depth===undefined?true:_ref$depth;var _ref$minFilter=_ref.minFilter;var minFilter=_ref$minFilter===undefined?_webglTypes.WebGL.NEAREST:_ref$minFilter;var _ref$magFilter=_ref.magFilter;var magFilter=_ref$magFilter===undefined?_webglTypes.WebGL.NEAREST:_ref$magFilter;var _ref$format=_ref.format;var format=_ref$format===undefined?_webglTypes.WebGL.RGBA:_ref$format;var _ref$type=_ref.type;var type=_ref$type===undefined?_webglTypes.WebGL.UNSIGNED_BYTE:_ref$type;_classCallCheck(this,FramebufferObject);(0,_webglChecks.assertWebGLRenderingContext)(gl);this.gl=gl;this.depth=depth;this.minFilter=minFilter;this.magFilter=magFilter;this.format=format;this.type=type;this.resize(width,height)}_createClass(FramebufferObject,[{key:"resize",value:function resize(width,height){(0,_assert2.default)(width>=0&&height>=0,"Width and height need to be integers");if(width===this.width&&height===this.height){return}var gl=this.gl;var fb=new _framebuffer2.default(gl);var colorBuffer=new _texture.Texture2D(gl,{minFilter:this.minFilter,magFilter:this.magFilter}).setImageData({data:null,width:width,height:height,type:this.type,format:this.format});fb.attachTexture({attachment:_webglTypes.WebGL.COLOR_ATTACHMENT0,texture:colorBuffer});if(this.colorBuffer){this.colorBuffer.delete()}this.colorBuffer=colorBuffer;if(this.depth){var depthBuffer=new _renderbuffer2.default(gl).storage({internalFormat:_webglTypes.WebGL.DEPTH_COMPONENT16,width:width,height:height});fb.attachRenderbuffer({attachment:_webglTypes.WebGL.DEPTH_ATTACHMENT,renderbuffer:depthBuffer});if(this.depthBuffer){this.depthBuffer.delete()}this.depthBuffer=depthBuffer}fb.checkStatus();this.width=width;this.height=height;if(this.fb){this.fb.delete()}this.fb=fb}},{key:"bind",value:function bind(){this.fb.bind()}},{key:"unbind",value:function unbind(){this.fb.unbind()}}]);return FramebufferObject}();exports.default=FramebufferObject},{"./framebuffer":398,"./renderbuffer":401,"./texture":403,"./webgl-checks":406,"./webgl-types":408,assert:3}],398:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglTypes=require("./webgl-types");var _webglChecks=require("./webgl-checks");var _context=require("./context");var _texture=require("./texture");var _renderbuffer=require("./renderbuffer");var _renderbuffer2=_interopRequireDefault(_renderbuffer);require("../utils");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function glFormatComponents(format){switch(format){case _webglTypes.WebGL.ALPHA:return 1;case _webglTypes.WebGL.RGB:return 3;case _webglTypes.WebGL.RGBA:return 4}throw new Error("Unknown format")}var Framebuffer=function(){_createClass(Framebuffer,null,[{key:"makeFrom",value:function makeFrom(gl){var object=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return object instanceof Framebuffer?object:new Framebuffer(gl,{handle:object.handle||object})}}]);function Framebuffer(gl){_classCallCheck(this,Framebuffer);(0,_webglChecks.assertWebGLRenderingContext)(gl);this.gl=gl;this.handle=gl.createFramebuffer();if(!this.handle){throw new Error("Failed to create WebGL Framebuffer")}}_createClass(Framebuffer,[{key:"delete",value:function _delete(){var gl=this.gl;gl.deleteFramebuffer(this.handle)}},{key:"bind",value:function bind(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$target=_ref.target;var target=_ref$target===undefined?_webglTypes.WebGL.FRAMEBUFFER:_ref$target;var gl=this.gl;gl.bindFramebuffer((0,_context.glGet)(gl,target),this.handle);return this}},{key:"unbind",value:function unbind(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref2$target=_ref2.target;var target=_ref2$target===undefined?_webglTypes.WebGL.FRAMEBUFFER:_ref2$target;var gl=this.gl;gl.bindFramebuffer((0,_context.glGet)(gl,target),null);return this}},{key:"readPixels",value:function readPixels(_ref3){var _ref3$x=_ref3.x;var x=_ref3$x===undefined?0:_ref3$x;var _ref3$y=_ref3.y;var y=_ref3$y===undefined?0:_ref3$y;var width=_ref3.width;var height=_ref3.height;var _ref3$format=_ref3.format;var format=_ref3$format===undefined?_webglTypes.WebGL.RGBA:_ref3$format;var type=_ref3.type;var _ref3$pixelArray=_ref3.pixelArray;var pixelArray=_ref3$pixelArray===undefined?null:_ref3$pixelArray;var gl=this.gl;if(!pixelArray){type=type||_webglTypes.WebGL.UNSIGNED_BYTE;var ArrayType=(0,_context.glArrayFromType)(type);var components=glFormatComponents(format);pixelArray=pixelArray||new ArrayType(width*height*components)}type=type||(0,_context.glTypeFromArray)(pixelArray);this.bind();gl.readPixels(x,y,width,height,format,type,pixelArray);this.unbind();return pixelArray}},{key:"attachTexture",value:function attachTexture(){var _ref4=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref4$texture=_ref4.texture;var texture=_ref4$texture===undefined?null:_ref4$texture;var _ref4$target=_ref4.target;var target=_ref4$target===undefined?_webglTypes.WebGL.FRAMEBUFFER:_ref4$target;var _ref4$attachment=_ref4.attachment;var attachment=_ref4$attachment===undefined?_webglTypes.WebGL.COLOR_ATTACHMENT0:_ref4$attachment;var _ref4$textureTarget=_ref4.textureTarget;var textureTarget=_ref4$textureTarget===undefined?_webglTypes.WebGL.TEXTURE_2D:_ref4$textureTarget;var _ref4$mipmapLevel=_ref4.mipmapLevel;var mipmapLevel=_ref4$mipmapLevel===undefined?0:_ref4$mipmapLevel;var gl=this.gl;texture=texture&&_texture.Texture2D.makeFrom(gl,texture);this.bind({target:target});gl.framebufferTexture2D((0,_context.glGet)(gl,target),(0,_context.glGet)(gl,attachment),(0,_context.glGet)(gl,textureTarget),texture.handle,mipmapLevel);this.unbind();return this}},{key:"attachRenderbuffer",value:function attachRenderbuffer(){var _ref5=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref5$renderbuffer=_ref5.renderbuffer;var renderbuffer=_ref5$renderbuffer===undefined?null:_ref5$renderbuffer;var _ref5$attachment=_ref5.attachment;var attachment=_ref5$attachment===undefined?_webglTypes.WebGL.COLOR_ATTACHMENT0:_ref5$attachment;var _ref5$target=_ref5.target;var target=_ref5$target===undefined?_webglTypes.WebGL.FRAMEBUFFER:_ref5$target;var _ref5$renderbufferTar=_ref5.renderbufferTarget;var renderbufferTarget=_ref5$renderbufferTar===undefined?_webglTypes.WebGL.RENDERBUFFER:_ref5$renderbufferTar;var gl=this.gl;renderbuffer=renderbuffer&&_renderbuffer2.default.makeFrom(gl,renderbuffer);this.bind({target:target});gl.framebufferRenderbuffer((0,_context.glGet)(gl,target),(0,_context.glGet)(gl,attachment),(0,_context.glGet)(gl,renderbufferTarget),renderbuffer.handle);this.unbind({target:target});return this}},{key:"checkStatus",value:function checkStatus(){var _ref6=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref6$target=_ref6.target;var target=_ref6$target===undefined?_webglTypes.WebGL.FRAMEBUFFER:_ref6$target;var gl=this.gl;this.bind({target:target});var status=gl.checkFramebufferStatus((0,_context.glGet)(gl,target));this.unbind({target:target});if(status!==gl.FRAMEBUFFER_COMPLETE){throw new Error(this._getFrameBufferStatus(status))}return this}},{key:"blit",value:function blit(_ref7){var srcX0=_ref7.srcX0;var srcY0=_ref7.srcY0;var srcX1=_ref7.srcX1;var srcY1=_ref7.srcY1;var dstX0=_ref7.dstX0;var dstY0=_ref7.dstY0;var dstX1=_ref7.dstX1;var dstY1=_ref7.dstY1;var mask=_ref7.mask;var _ref7$filter=_ref7.filter;var filter=_ref7$filter===undefined?_webglTypes.WebGL.NEAREST:_ref7$filter;var gl=this.gl;(0,_context.assertWebGL2)(gl);gl.blitFramebuffer(srcX0,srcY0,srcX1,srcY1,dstX0,dstY0,dstX1,dstY1,mask,filter);return this}},{key:"textureLayer",value:function textureLayer(){var _ref8=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref8$target=_ref8.target;var target=_ref8$target===undefined?_webglTypes.WebGL.FRAMEBUFFER:_ref8$target;var attachment=_ref8.attachment;var texture=_ref8.texture;var level=_ref8.level;var layer=_ref8.layer;var gl=this.gl;(0,_context.assertWebGL2)(gl);gl.framebufferTextureLayer(target,attachment,texture,level,layer);return this}},{key:"invalidate",value:function invalidate(_ref9){var _ref9$target=_ref9.target;var target=_ref9$target===undefined?_webglTypes.WebGL.FRAMEBUFFER:_ref9$target;var _ref9$attachments=_ref9.attachments;var attachments=_ref9$attachments===undefined?[]:_ref9$attachments;var gl=this.gl;(0,_context.assertWebGL2)(gl);gl.invalidateFramebuffer((0,_context.glConstant)(target),attachments);return this}},{key:"invalidateSub",value:function invalidateSub(_ref10){var _ref10$target=_ref10.target;var target=_ref10$target===undefined?_webglTypes.WebGL.FRAMEBUFFER:_ref10$target;var _ref10$attachments=_ref10.attachments;var attachments=_ref10$attachments===undefined?[]:_ref10$attachments;var _ref10$x=_ref10.x;var x=_ref10$x===undefined?0:_ref10$x;var _ref10$y=_ref10.y;var y=_ref10$y===undefined?0:_ref10$y;var width=_ref10.width;var height=_ref10.height;var gl=this.gl;(0,_context.assertWebGL2)(gl);gl.invalidateFramebuffer((0,_context.glConstant)(target),attachments,x,y,width,height);return this}},{key:"readBuffer",value:function readBuffer(_ref11){var src=_ref11.src;var gl=this.gl;(0,_context.assertWebGL2)(gl);gl.readBuffer(src);return this}},{key:"alphaSize",value:function alphaSize(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE)}},{key:"blueSize",value:function blueSize(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE)}},{key:"colorEncoding",value:function colorEncoding(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING)}},{key:"componentType",value:function componentType(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE)}},{key:"depthSize",value:function depthSize(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE)}},{key:"greenSize",value:function greenSize(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE)}},{key:"objectName",value:function objectName(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME)}},{key:"objectType",value:function objectType(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE)}},{key:"redSize",value:function redSize(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_RED_SIZE)}},{key:"stencilSize",value:function stencilSize(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE)}},{key:"cubeMapFace",value:function cubeMapFace(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE)}},{key:"layer",value:function layer(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER)}},{key:"level",value:function level(){return this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL)}},{key:"getParameters",value:function getParameters(){return{alphaSize:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE),blueSize:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE),colorEncoding:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING),componentType:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE),depthSize:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE),greenSize:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE),objectName:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME),objectType:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE),redSize:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_RED_SIZE),stencilSize:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE),cubeMapFace:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE),layer:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER),level:this.getAttachmentParameter(_webglTypes.WebGL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL)}}},{key:"getAttachmentParameter",value:function getAttachmentParameter(){var _ref12=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var pname=_ref12.pname;var target=_ref12.target;var attachment=_ref12.attachment;var gl=this.gl;(0,_context.assertWebGL2)(gl);var value=gl.getFramebufferAttachmentParameter(target,attachment,pname);return value}},{key:"_getFrameBufferStatus",value:function _getFrameBufferStatus(status){var gl=this.gl;var error=void 0;switch(status){case gl.FRAMEBUFFER_COMPLETE:error="Success. Framebuffer is correctly set up";break;case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:error="The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.";break;case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:error="There is no attachment.";break;case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:error="Height and width of the attachment are not the same.";break;case gl.FRAMEBUFFER_UNSUPPORTED:error="The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer.";break;case gl.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:error="The values of gl.RENDERBUFFER_SAMPLES are different among attached renderbuffers, or are non-zero if the attached images are a mix of renderbuffers and textures.";break;default:error="Framebuffer error "+status;break}return error}}]);return Framebuffer}();exports.default=Framebuffer},{"../utils":389,"./context":395,"./renderbuffer":401,"./texture":403,"./webgl-checks":406,"./webgl-types":408,assert:3}],399:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FBO=exports.FramebufferObject=exports.VertexAttributes=exports.TextureCube=exports.Texture2D=exports.Texture=exports.Renderbuffer=exports.Framebuffer=exports.Program=exports.Shader=exports.Buffer=exports.GL=undefined;var _webglConstants=require("./webgl-constants");Object.defineProperty(exports,"GL",{enumerable:true,get:function get(){return _interopRequireDefault(_webglConstants).default}});var _webglTypes=require("./webgl-types");Object.keys(_webglTypes).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _webglTypes[key]}})});var _webglChecks=require("./webgl-checks");Object.keys(_webglChecks).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _webglChecks[key]}})});var _buffer=require("./buffer");Object.defineProperty(exports,"Buffer",{enumerable:true,get:function get(){return _interopRequireDefault(_buffer).default}});var _shader=require("./shader");Object.defineProperty(exports,"Shader",{enumerable:true,get:function get(){return _interopRequireDefault(_shader).default}});var _program=require("./program");Object.defineProperty(exports,"Program",{enumerable:true,get:function get(){return _interopRequireDefault(_program).default}});var _framebuffer=require("./framebuffer");Object.defineProperty(exports,"Framebuffer",{enumerable:true,get:function get(){return _interopRequireDefault(_framebuffer).default}});var _renderbuffer=require("./renderbuffer");Object.defineProperty(exports,"Renderbuffer",{enumerable:true,get:function get(){return _interopRequireDefault(_renderbuffer).default}});var _texture=require("./texture");Object.defineProperty(exports,"Texture",{enumerable:true,get:function get(){return _texture.Texture}});Object.defineProperty(exports,"Texture2D",{enumerable:true,get:function get(){return _texture.Texture2D}});Object.defineProperty(exports,"TextureCube",{enumerable:true,get:function get(){return _texture.TextureCube}});var _context=require("./context");Object.keys(_context).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _context[key]}})});var _draw=require("./draw");Object.keys(_draw).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _draw[key]}})});var _uniforms=require("./uniforms");Object.keys(_uniforms).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _uniforms[key]}})});var _fbo=require("./fbo");Object.defineProperty(exports,"FramebufferObject",{enumerable:true,get:function get(){return _interopRequireDefault(_fbo).default}});Object.defineProperty(exports,"FBO",{enumerable:true,get:function get(){return _interopRequireDefault(_fbo).default}});var _vertexAttributes=require("./vertex-attributes");var VertexAttributes=_interopRequireWildcard(_vertexAttributes);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.VertexAttributes=VertexAttributes},{"./buffer":394,"./context":395,"./draw":396,"./fbo":397,"./framebuffer":398,"./program":400,"./renderbuffer":401,"./shader":402,"./texture":403,"./uniforms":404,"./vertex-attributes":405,"./webgl-checks":406,"./webgl-constants":407,"./webgl-types":408}],400:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);
if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.getUniformDescriptors=getUniformDescriptors;var _webglTypes=require("./webgl-types");var _webglChecks=require("./webgl-checks");var _context=require("./context");var _vertexAttributes=require("./vertex-attributes");var VertexAttributes=_interopRequireWildcard(_vertexAttributes);var _buffer2=require("./buffer");var _buffer3=_interopRequireDefault(_buffer2);var _texture=require("./texture");var _uniforms=require("./uniforms");var _shader=require("./shader");var _shaderlib=require("../../shaderlib");var _shaderlib2=_interopRequireDefault(_shaderlib);var _utils=require("../utils");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ERR_WEBGL2="WebGL2 required";var Program=function(){_createClass(Program,null,[{key:"makeFrom",value:function makeFrom(gl){var object=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return object instanceof Program?object:new Program(gl).setData({handle:object.handle||object})}}]);function Program(gl){var _ref=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var id=_ref.id;var _ref$vs=_ref.vs;var vs=_ref$vs===undefined?_shaderlib2.default.DEFAULT.vs:_ref$vs;var _ref$fs=_ref.fs;var fs=_ref$fs===undefined?_shaderlib2.default.DEFAULT.fs:_ref$fs;var _ref$defaultUniforms=_ref.defaultUniforms;var defaultUniforms=_ref$defaultUniforms===undefined?_shaderlib2.default.DEFAULT.defaultUniforms:_ref$defaultUniforms;var handle=_ref.handle;_classCallCheck(this,Program);(0,_webglChecks.assertWebGLRenderingContext)(gl);if(arguments.length>2){throw new Error("Wrong number of arguments to Program(gl, {vs, fs, id})")}this.vs=new _shader.VertexShader(gl,vs);this.fs=new _shader.FragmentShader(gl,fs);var programName=this.vs.getName()||this.fs.getName();programName=programName?programName+"-program":"program";this.id=id||(0,_utils.uid)(programName);this.gl=gl;this.defaultUniforms=defaultUniforms;this.handle=handle;if(!this.handle){this.handle=gl.createProgram();this._compileAndLink(vs,fs)}if(!this.handle){throw new Error("Failed to create program")}this._attributeLocations=this._getAttributeLocations();this._attributeCount=this.getAttributeCount();this._warn=[];this._filledLocations={};this._uniformSetters=this._getUniformSetters();this._uniformCount=this.getUniformCount();this._textureIndexCounter=0;this.userData={};Object.seal(this)}_createClass(Program,[{key:"delete",value:function _delete(){var gl=this.gl;if(this.handle){gl.deleteProgram(this.handle);(0,_context.glCheckError)(gl)}this.handle=null;return this}},{key:"_compileAndLink",value:function _compileAndLink(vs,fs){var gl=this.gl;gl.attachShader(this.handle,this.vs.handle);gl.attachShader(this.handle,this.fs.handle);gl.linkProgram(this.handle);gl.validateProgram(this.handle);var linked=gl.getProgramParameter(this.handle,gl.LINK_STATUS);if(!linked){throw new Error("Error linking "+gl.getProgramInfoLog(this.handle))}}},{key:"use",value:function use(){var gl=this.gl;gl.useProgram(this.handle);return this}},{key:"clearBuffers",value:function clearBuffers(){this._filledLocations={};return this}},{key:"_print",value:function _print(bufferName){return"Program "+this.id+": Attribute "+bufferName}},{key:"setBuffers",value:function setBuffers(buffers){var _ref2=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var _ref2$clear=_ref2.clear;var clear=_ref2$clear===undefined?true:_ref2$clear;var _ref2$check=_ref2.check;var check=_ref2$check===undefined?true:_ref2$check;var _ref2$drawParams=_ref2.drawParams;var drawParams=_ref2$drawParams===undefined?{}:_ref2$drawParams;var gl=this.gl;if(Array.isArray(buffers)){throw new Error("Program.setBuffers expects map of buffers")}if(clear){this.clearBuffers()}drawParams.isInstanced=false;drawParams.isIndexed=false;drawParams.indexType=null;var _sortBuffersByLocatio=this._sortBuffersByLocation(buffers);var locations=_sortBuffersByLocatio.locations;var elements=_sortBuffersByLocatio.elements;for(var location=0;location<locations.length;++location){var bufferName=locations[location];var buffer=buffers[bufferName];if(!buffer){VertexAttributes.disable(gl,location)}else{var divisor=buffer.layout.instanced?1:0;VertexAttributes.enable(gl,location);VertexAttributes.setBuffer({gl:gl,location:location,buffer:buffer});VertexAttributes.setDivisor(gl,location,divisor);drawParams.isInstanced=buffer.layout.instanced>0;this._filledLocations[bufferName]=true}}if(elements){var _buffer=buffers[elements];_buffer.bind();drawParams.isIndexed=true;drawParams.indexType=_buffer.layout.type}if(check){this.checkBuffers()}return this}},{key:"_sortBuffersByLocation",value:function _sortBuffersByLocation(buffers){var elements=null;var locations=new Array(this._attributeCount);for(var bufferName in buffers){var buffer=_buffer3.default.makeFrom(this.gl,buffers[bufferName]);var location=this._attributeLocations[bufferName];if(location===undefined){if(buffer.target===_webglTypes.GL.ELEMENT_ARRAY_BUFFER&&elements){throw new Error(this._print(bufferName)+" duplicate gl.ELEMENT_ARRAY_BUFFER")}else if(buffer.target===_webglTypes.GL.ELEMENT_ARRAY_BUFFER){elements=bufferName}else if(!this._warn[bufferName]){_utils.log.warn(2,this._print(bufferName)+" not used");this._warn[bufferName]=true}}else{if(buffer.target===_webglTypes.GL.ELEMENT_ARRAY_BUFFER){throw new Error(this._print(bufferName)+":"+location+" "+"has both location and type gl.ELEMENT_ARRAY_BUFFER")}locations[location]=bufferName}}return{locations:locations,elements:elements}}},{key:"checkBuffers",value:function checkBuffers(){for(var attributeName in this._attributeLocations){if(!this._filledLocations[attributeName]&&!this._warn[attributeName]){var location=this._attributeLocations[attributeName];_utils.log.warn(0,"Program "+this.id+": "+("Attribute "+location+":"+attributeName+" not supplied"));this._warn[attributeName]=true}}return this}},{key:"unsetBuffers",value:function unsetBuffers(){var gl=this.gl;var length=this._attributeCount;for(var i=1;i<length;++i){VertexAttributes.disable(gl,i)}gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null);return this}},{key:"setUniforms",value:function setUniforms(uniforms){for(var uniformName in uniforms){var uniform=uniforms[uniformName];var uniformSetter=this._uniformSetters[uniformName];if(uniformSetter){if(uniform instanceof _texture.Texture){if(uniformSetter.textureIndex===undefined){uniformSetter.textureIndex=this._textureIndexCounter++}var texture=uniform;var textureIndex=uniformSetter.textureIndex;texture.bind(textureIndex);uniformSetter(textureIndex)}else{uniformSetter(uniform)}}}return this}},{key:"getAttachedShadersCount",value:function getAttachedShadersCount(){return this.getProgramParameter(this.gl.ATTACHED_SHADERS)}},{key:"getAttributeCount",value:function getAttributeCount(){return this.getProgramParameter(this.gl.ACTIVE_ATTRIBUTES)}},{key:"getAttributeInfo",value:function getAttributeInfo(location){return this.gl.getActiveAttrib(this.handle,location)}},{key:"getAttributeName",value:function getAttributeName(location){return this.getAttributeInfo(location).name}},{key:"getAttributeLocation",value:function getAttributeLocation(attributeName){return this.gl.getAttribLocation(this.handle,attributeName)}},{key:"getUniformCount",value:function getUniformCount(){return this.getProgramParameter(_webglTypes.GL.ACTIVE_UNIFORMS)}},{key:"getUniformInfo",value:function getUniformInfo(index){return this.gl.getActiveUniform(this.handle,index)}},{key:"getUniformLocation",value:function getUniformLocation(name){return this.gl.getUniformLocation(this.handle,name)}},{key:"getUniformValue",value:function getUniformValue(location){return this.gl.getUniform(this.handle,location)}},{key:"isFlaggedForDeletion",value:function isFlaggedForDeletion(){return this.getProgramParameter(this.gl.DELETE_STATUS)}},{key:"getLastLinkStatus",value:function getLastLinkStatus(){return this.getProgramParameter(this.gl.LINK_STATUS)}},{key:"getLastValidationStatus",value:function getLastValidationStatus(){return this.getProgramParameter(this.gl.VALIDATE_STATUS)}},{key:"getTransformFeedbackBufferMode",value:function getTransformFeedbackBufferMode(){var gl=this.gl;(0,_assert2.default)(gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);return this.getProgramParameter(this.gl.TRANSFORM_FEEDBACK_BUFFER_MODE)}},{key:"getTransformFeedbackVaryingsCount",value:function getTransformFeedbackVaryingsCount(){var gl=this.gl;(0,_assert2.default)(gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);return this.getProgramParameter(this.gl.TRANSFORM_FEEDBACK_VARYINGS)}},{key:"getActiveUniformBlocksCount",value:function getActiveUniformBlocksCount(){var gl=this.gl;(0,_assert2.default)(gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);return this.getProgramParameter(this.gl.ACTIVE_UNIFORM_BLOCKS)}},{key:"getFragDataLocation",value:function getFragDataLocation(varyingName){var gl=this.gl;(0,_assert2.default)(gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);var location=gl.getFragDataLocation(this.handle,varyingName);(0,_context.glCheckError)(gl);return location}},{key:"getProgramParameter",value:function getProgramParameter(pname){var gl=this.gl;var parameter=gl.getProgramParameter(this.handle,pname);(0,_context.glCheckError)(gl);return parameter}},{key:"_areAllAttributesEnabled",value:function _areAllAttributesEnabled(){var gl=this.gl;var length=this._attributeCount;for(var i=0;i<length;++i){if(!VertexAttributes.isEnabled(gl,i)){return false}}return true}},{key:"_getAttributeLocations",value:function _getAttributeLocations(){var attributeLocations={};var length=this.getAttributeCount();for(var location=0;location<length;location++){var name=this.getAttributeName(location);attributeLocations[name]=location}return attributeLocations}},{key:"_getUniformSetters",value:function _getUniformSetters(){var gl=this.gl;var uniformSetters={};var length=this.getUniformCount();for(var i=0;i<length;i++){var info=this.getUniformInfo(i);var parsedName=(0,_uniforms.parseUniformName)(info.name);var location=this.getUniformLocation(parsedName.name);uniformSetters[parsedName.name]=(0,_uniforms.getUniformSetter)(gl,location,info,parsedName.isArray)}return uniformSetters}},{key:"setTextures",value:function setTextures(textures){throw new Error("setTextures replaced with setAttributes")}},{key:"unsetTextures",value:function unsetTextures(textures){throw new Error("unsetTextures replaced with setAttributes")}},{key:"setTexture",value:function setTexture(texture,index){throw new Error("setTexture replaced with setAttributes")}}]);return Program}();exports.default=Program;function getUniformDescriptors(gl,program){var uniformDecriptors={};var length=program.getUniformCount();for(var i=0;i<length;i++){var info=program.getUniformInfo(i);var location=program.getUniformLocation(info.name);var descriptor=(0,_uniforms.getUniformSetter)(gl,location,info);uniformDecriptors[descriptor.name]=descriptor}return uniformDecriptors}},{"../../shaderlib":350,"../utils":389,"./buffer":394,"./context":395,"./shader":402,"./texture":403,"./uniforms":404,"./vertex-attributes":405,"./webgl-checks":406,"./webgl-types":408,assert:3}],401:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglChecks=require("./webgl-checks");var _context=require("./context");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Renderbuffer=function(){_createClass(Renderbuffer,null,[{key:"makeFrom",value:function makeFrom(gl){var object=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return object instanceof Renderbuffer?object:new Renderbuffer(gl,{handle:object.handle||object})}}]);function Renderbuffer(gl){var opts=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,Renderbuffer);(0,_webglChecks.assertWebGLRenderingContext)(gl);this.gl=gl;this.handle=gl.createRenderbuffer();if(!this.handle){throw new Error("Failed to create WebGL Renderbuffer")}}_createClass(Renderbuffer,[{key:"delete",value:function _delete(){var gl=this.gl;gl.deleteRenderbuffer(this.handle);return this}},{key:"bind",value:function bind(){var gl=this.gl;gl.bindRenderbuffer(gl.RENDERBUFFER,this.handle);return this}},{key:"unbind",value:function unbind(){var gl=this.gl;gl.bindRenderbuffer(gl.RENDERBUFFER,this.handle);return this}},{key:"storage",value:function storage(_ref){var internalFormat=_ref.internalFormat;var width=_ref.width;var height=_ref.height;var gl=this.gl;(0,_assert2.default)(internalFormat,"Needs internalFormat");this.bind();gl.renderbufferStorage(gl.RENDERBUFFER,(0,_context.glGet)(gl,internalFormat),width,height);this.unbind();return this}},{key:"getParameter",value:function getParameter(pname){var gl=this.gl;this.bind();var value=gl.getRenderbufferParameter(gl.RENDERBUFFER,(0,_context.glGet)(gl,pname));this.unbind();return value}},{key:"storageMultisample",value:function storageMultisample(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var samples=_ref2.samples;var internalformat=_ref2.internalformat;var width=_ref2.width;var height=_ref2.height;var gl=this.gl;(0,_context.assertWebGL2)(gl);gl.renderbufferStorageMultisample(gl.RENDERBUFFER,samples,internalformat,width,height);return this}},{key:"getInternalformatParameter",value:function getInternalformatParameter(_ref3){var internalformat=_ref3.internalformat;var _ref3$pname=_ref3.pname;var pname=_ref3$pname===undefined?"SAMPLES":_ref3$pname;var gl=this.gl;(0,_context.assertWebGL2)(gl);return gl.getInternalformatParameter(gl.RENDERBUFFER,internalformat,pname)}},{key:"width",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_WIDTH)}},{key:"height",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_HEIGHT)}},{key:"internalFormat",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_INTERNAL_FORMAT)}},{key:"greenSize",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_GREEN_SIZE)}},{key:"blueSize",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_BLUE_SIZE)}},{key:"redSize",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_RED_SIZE)}},{key:"alphaSize",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_ALPHA_SIZE)}},{key:"depthSize",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_DEPTH_SIZE)}},{key:"stencilSize",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_STENCIL_SIZE)}},{key:"samples",get:function get(){return this.getParameter(this.gl.RENDERBUFFER_SAMPLES)}}]);return Renderbuffer}();exports.default=Renderbuffer},{"./context":395,"./webgl-checks":406,assert:3}],402:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FragmentShader=exports.VertexShader=exports.Shader=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglTypes=require("./webgl-types");var _glFormatCompilerError=require("gl-format-compiler-error");var _glFormatCompilerError2=_interopRequireDefault(_glFormatCompilerError);var _glslShaderName=require("glsl-shader-name");var _glslShaderName2=_interopRequireDefault(_glslShaderName);var _utils=require("../utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Shader=exports.Shader=function(){function Shader(gl,shaderSource,shaderType){_classCallCheck(this,Shader);this.id=(0,_glslShaderName2.default)(shaderSource)||(0,_utils.uid)(this._getName(shaderType));this.gl=gl;this.shaderType=shaderType;this.shaderSource=shaderSource;this.handle=gl.createShader(shaderType);if(this.handle===null){throw new Error("Error creating shader with type "+shaderType)}this._compile(shaderSource)}_createClass(Shader,[{key:"delete",value:function _delete(){var gl=this.gl;if(this.handle){gl.deleteShader(this.handle);this.handle=null}}},{key:"getName",value:function getName(){return(0,_glslShaderName2.default)(this.shaderSource)}},{key:"_compile",value:function _compile(shaderSource){var gl=this.gl;gl.shaderSource(this.handle,shaderSource);gl.compileShader(this.handle);var compiled=gl.getShaderParameter(this.handle,_webglTypes.GL.COMPILE_STATUS);if(!compiled){var info=gl.getShaderInfoLog(this.handle);gl.deleteShader(this.handle);var formattedLog=void 0;try{formattedLog=(0,_glFormatCompilerError2.default)(info,shaderSource,this.shaderType)}catch(error){_utils.log.warn("Error formatting glsl compiler error:",error);throw new Error("Error while compiling the shader "+info)}throw new Error(formattedLog.long)}}},{key:"_getName",value:function _getName(shaderType){switch(shaderType){case _webglTypes.GL.VERTEX_SHADER:return"vertex-shader";case _webglTypes.GL.FRAGMENT_SHADER:return"fragment-shader";default:return"shader"}}}]);return Shader}();var VertexShader=exports.VertexShader=function(_Shader){_inherits(VertexShader,_Shader);function VertexShader(gl,shaderSource){_classCallCheck(this,VertexShader);return _possibleConstructorReturn(this,Object.getPrototypeOf(VertexShader).call(this,gl,shaderSource,_webglTypes.GL.VERTEX_SHADER))}return VertexShader}(Shader);var FragmentShader=exports.FragmentShader=function(_Shader2){_inherits(FragmentShader,_Shader2);function FragmentShader(gl,shaderSource){_classCallCheck(this,FragmentShader);return _possibleConstructorReturn(this,Object.getPrototypeOf(FragmentShader).call(this,gl,shaderSource,_webglTypes.GL.FRAGMENT_SHADER))}return FragmentShader}(Shader)},{"../utils":389,"./webgl-types":408,"gl-format-compiler-error":312,"glsl-shader-name":314}],403:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TextureCube=exports.Texture2D=exports.Texture=undefined;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglTypes=require("./webgl-types");var _webglChecks=require("./webgl-checks");var _buffer=require("./buffer");var _buffer2=_interopRequireDefault(_buffer);var _framebuffer=require("./framebuffer");var _framebuffer2=_interopRequireDefault(_framebuffer);var _utils=require("../utils");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Texture=exports.Texture=function(){function Texture(gl,_ref){var _ref$id=_ref.id;var id=_ref$id===undefined?(0,_utils.uid)("texture"):_ref$id;var _ref$unpackFlipY=_ref.unpackFlipY;var unpackFlipY=_ref$unpackFlipY===undefined?true:_ref$unpackFlipY;var _ref$magFilter=_ref.magFilter;var magFilter=_ref$magFilter===undefined?_webglTypes.WebGL.NEAREST:_ref$magFilter;var _ref$minFilter=_ref.minFilter;var minFilter=_ref$minFilter===undefined?_webglTypes.WebGL.NEAREST:_ref$minFilter;var _ref$wrapS=_ref.wrapS;var wrapS=_ref$wrapS===undefined?_webglTypes.WebGL.CLAMP_TO_EDGE:_ref$wrapS;var _ref$wrapT=_ref.wrapT;var wrapT=_ref$wrapT===undefined?_webglTypes.WebGL.CLAMP_TO_EDGE:_ref$wrapT;var _ref$target=_ref.target;var target=_ref$target===undefined?_webglTypes.WebGL.TEXTURE_2D:_ref$target;var handle=_ref.handle;var opts=_objectWithoutProperties(_ref,["id","unpackFlipY","magFilter","minFilter","wrapS","wrapT","target","handle"]);_classCallCheck(this,Texture);(0,_webglChecks.assertWebGLRenderingContext)(gl);this.handle=handle||gl.createTexture();this.id=id;this.gl=gl;this.target=target;this.hasFloatTexture=gl.getExtension("OES_texture_float");this.width=null;this.height=null;this.textureUnit=undefined;this.userData={};this.setPixelStorageModes(_extends({},opts,{unpackFlipY:unpackFlipY}));this.setParameters(_extends({},opts,{magFilter:magFilter,minFilter:minFilter,wrapS:wrapS,wrapT:wrapT}))}_createClass(Texture,[{key:"delete",value:function _delete(){if(this.handle){this.gl.deleteTexture(this.handle);this.handle=null}return this}},{key:"toString",value:function toString(){return"Texture("+this.id+","+this.width+"x"+this.height+")"}},{key:"generateMipmap",value:function generateMipmap(){this.gl.bindTexture(this.target,this.handle);this.gl.generateMipmap(this.target);this.gl.bindTexture(this.target,null);return this}},{key:"setImageData",value:function setImageData(_ref2){var _ref2$target=_ref2.target;var target=_ref2$target===undefined?this.target:_ref2$target;var _ref2$pixels=_ref2.pixels;var pixels=_ref2$pixels===undefined?null:_ref2$pixels;var _ref2$data=_ref2.data;var data=_ref2$data===undefined?null:_ref2$data;var width=_ref2.width;var height=_ref2.height;var _ref2$mipmapLevel=_ref2.mipmapLevel;var mipmapLevel=_ref2$mipmapLevel===undefined?0:_ref2$mipmapLevel;var _ref2$format=_ref2.format;var format=_ref2$format===undefined?_webglTypes.WebGL.RGBA:_ref2$format;var type=_ref2.type;var _ref2$offset=_ref2.offset;var offset=_ref2$offset===undefined?0:_ref2$offset;var _ref2$border=_ref2.border;var border=_ref2$border===undefined?0:_ref2$border;var opts=_objectWithoutProperties(_ref2,["target","pixels","data","width","height","mipmapLevel","format","type","offset","border"]);var gl=this.gl;pixels=pixels||data;if(pixels&&pixels.data){var ndarray=pixels;pixels=ndarray.data;width=ndarray.shape[0];height=ndarray.shape[1]}gl.bindTexture(this.target,this.handle);if(pixels===null){width=width||1;height=height||1;type=type||_webglTypes.WebGL.UNSIGNED_BYTE;gl.texImage2D(target,mipmapLevel,format,width,height,border,format,type,pixels);this.width=width;this.height=height}else if(ArrayBuffer.isView(pixels)){(0,_assert2.default)(width>0&&height>0,"Texture2D: Width and height required");type=type||(0,_webglChecks.glTypeFromArray)(pixels);if(type===gl.FLOAT&&!this.hasFloatTexture){throw new Error("floating point textures are not supported.")}gl.texImage2D(target,mipmapLevel,format,width,height,border,format,type,pixels);this.width=width;this.height=height}else if(pixels instanceof _webglTypes.WebGLBuffer||pixels instanceof _buffer2.default){(0,_assert2.default)(gl instanceof _webglTypes.WebGL2RenderingContext,"Requires WebGL2");type=type||_webglTypes.WebGL.UNSIGNED_BYTE;var buffer=_buffer2.default.makeFrom(pixels);gl.bindBuffer(_webglTypes.WebGL.PIXEL_UNPACK_BUFFER,buffer.handle);gl.texImage2D(target,mipmapLevel,format,width,height,border,format,type,offset);gl.bindBuffer(_webglTypes.WebGL.GL_PIXEL_UNPACK_BUFFER,null);this.width=width;this.height=height}else{var imageSize=this._deduceImageSize(pixels);(0,_assert2.default)(width===undefined&&height===undefined,"Texture2D.setImageData: Width and height must not be provided");type=type||_webglTypes.WebGL.UNSIGNED_BYTE;gl.texImage2D(target,mipmapLevel,format,format,type,pixels);this.width=imageSize.width;this.height=imageSize.height}gl.bindTexture(this.target,null);return this}},{key:"_deduceImageSize",value:function _deduceImageSize(image){if(typeof ImageData!=="undefined"&&image instanceof ImageData){return{width:image.width,height:image.height}}else if(typeof HTMLImageElement!=="undefined"&&image instanceof HTMLImageElement){return{width:image.naturalWidth,height:image.naturalHeight}}else if(typeof HTMLCanvasElement!=="undefined"&&image instanceof HTMLCanvasElement){return{width:image.width,height:image.height}}else if(typeof HTMLVideoElement!=="undefined"&&image instanceof HTMLVideoElement){return{width:image.videoWidth,height:image.videoHeight}}throw new Error("Unknown image data format. Failed to deduce image size")}},{key:"setPixelStorageModes",value:function setPixelStorageModes(){var _ref3=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var packAlignment=_ref3.packAlignment;var unpackAlignment=_ref3.unpackAlignment;var unpackFlipY=_ref3.unpackFlipY;var unpackPremultiplyAlpha=_ref3.unpackPremultiplyAlpha;var unpackColorspaceConversion=_ref3.unpackColorspaceConversion;var packRowLength=_ref3.packRowLength;var packSkipPixels=_ref3.packSkipPixels;var packSkipRows=_ref3.packSkipRows;var unpackRowLength=_ref3.unpackRowLength;var unpackImageHeight=_ref3.unpackImageHeight;var unpackSkipPixels=_ref3.unpackSkipPixels;var unpackSkipRows=_ref3.unpackSkipRows;var unpackSkipImages=_ref3.unpackSkipImages;var gl=this.gl;gl.bindTexture(this.target,this.handle);if(packAlignment){gl.pixelStorei(gl.PACK_ALIGNMENT,packAlignment)}if(unpackAlignment){gl.pixelStorei(gl.UNPACK_ALIGNMENT,unpackAlignment)}if(unpackFlipY){gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,unpackFlipY)}if(unpackPremultiplyAlpha){gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,unpackPremultiplyAlpha)}if(unpackColorspaceConversion){gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,unpackColorspaceConversion)}if(packRowLength){gl.pixelStorei(gl.PACK_ROW_LENGTH,packRowLength)}if(packSkipPixels){gl.pixelStorei(gl.PACK_SKIP_PIXELS,packSkipPixels)}if(packSkipRows){gl.pixelStorei(gl.PACK_SKIP_ROWS,packSkipRows)}if(unpackRowLength){gl.pixelStorei(gl.UNPACK_ROW_LENGTH,unpackRowLength)}if(unpackImageHeight){gl.pixelStorei(gl.UNPACK_IMAGE_HEIGHT,unpackImageHeight)}if(unpackSkipPixels){gl.pixelStorei(gl.UNPACK_SKIP_PIXELS,unpackSkipPixels)}if(unpackSkipRows){gl.pixelStorei(gl.UNPACK_SKIP_ROWS,unpackSkipRows)}if(unpackSkipImages){gl.pixelStorei(gl.UNPACK_SKIP_IMAGES,unpackSkipImages)}gl.bindTexture(this.target,null);return this}},{key:"setParameters",value:function setParameters(_ref4){var magFilter=_ref4.magFilter;var minFilter=_ref4.minFilter;var wrapS=_ref4.wrapS;var wrapT=_ref4.wrapT;var wrapR=_ref4.wrapR;var baseLevel=_ref4.baseLevel;var maxLevel=_ref4.maxLevel;var minLOD=_ref4.minLOD;var maxLOD=_ref4.maxLOD;var compareFunc=_ref4.compareFunc;var compareMode=_ref4.compareMode;var gl=this.gl;gl.bindTexture(this.target,this.handle);if(magFilter){gl.texParameteri(this.target,gl.TEXTURE_MAG_FILTER,magFilter)}if(minFilter){gl.texParameteri(this.target,gl.TEXTURE_MIN_FILTER,minFilter)}if(wrapS){gl.texParameteri(this.target,gl.TEXTURE_WRAP_S,wrapS)}if(wrapT){gl.texParameteri(this.target,gl.TEXTURE_WRAP_T,wrapT)}if(wrapR){gl.texParameteri(this.target,gl.TEXTURE_WRAP_R,wrapR)}if(baseLevel){gl.texParameteri(this.target,gl.TEXTURE_BASE_LEVEL,baseLevel)}if(maxLevel){gl.texParameteri(this.target,gl.TEXTURE_MAX_LEVEL,maxLevel)}if(compareFunc){gl.texParameteri(this.target,gl.TEXTURE_COMPARE_FUNC,compareFunc)}if(compareMode){gl.texParameteri(this.target,gl.TEXTURE_COMPARE_MODE,compareMode)}if(minLOD){gl.texParameterf(this.target,gl.TEXTURE_MIN_LOD,minLOD)}if(maxLOD){gl.texParameterf(this.target,gl.TEXTURE_MAX_LOD,maxLOD)}gl.bindTexture(this.target,null);return this}},{key:"getParameters",value:function getParameters(){var gl=this.gl;gl.bindTexture(this.target,this.handle);var webglParams={magFilter:gl.getTexParameter(this.target,gl.TEXTURE_MAG_FILTER),minFilter:gl.getTexParameter(this.target,gl.TEXTURE_MIN_FILTER),wrapS:gl.getTexParameter(this.target,gl.TEXTURE_WRAP_S),wrapT:gl.getTexParameter(this.target,gl.TEXTURE_WRAP_T)};gl.bindTexture(this.target,null);return webglParams}},{key:"image2D",value:function image2D(_ref5){var pixels=_ref5.pixels;var _ref5$format=_ref5.format;var format=_ref5$format===undefined?_webglTypes.WebGL.RGBA:_ref5$format;var _ref5$type=_ref5.type;var type=_ref5$type===undefined?_webglTypes.WebGL.UNSIGNED_BYTE:_ref5$type;if(type===_webglTypes.WebGL.FLOAT&&!this.hasFloatTexture){throw new Error("floating point textures are not supported.")}this.gl.bindTexture(this.target,this.handle);this.gl.texImage2D(_webglTypes.WebGL.TEXTURE_2D,0,format,format,type,pixels);this.gl.bindTexture(this.target,null);return this;
}},{key:"update",value:function update(opts){throw new Error("Texture.update() is deprecated()")}}]);return Texture}();var Texture2D=exports.Texture2D=function(_Texture){_inherits(Texture2D,_Texture);_createClass(Texture2D,null,[{key:"makeFrom",value:function makeFrom(gl){var object=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return object instanceof Texture2D?object:new Texture2D(gl,{handle:object.handle||object})}},{key:"makeFromSolidColor",value:function makeFromSolidColor(gl,_ref6){var _ref7=_slicedToArray(_ref6,4);var _ref7$=_ref7[0];var r=_ref7$===undefined?0:_ref7$;var _ref7$2=_ref7[1];var g=_ref7$2===undefined?0:_ref7$2;var _ref7$3=_ref7[2];var b=_ref7$3===undefined?0:_ref7$3;var _ref7$4=_ref7[3];var a=_ref7$4===undefined?1:_ref7$4;return new Texture2D(gl,{pixels:new Uint8Array([r,g,b,a]),width:1,format:gl.RGBA,magFilter:gl.NEAREST,minFilter:gl.NEAREST})}},{key:"makeFromPixelArray",value:function makeFromPixelArray(gl,_ref8){var dataArray=_ref8.dataArray;var format=_ref8.format;var width=_ref8.width;var height=_ref8.height;var opts=_objectWithoutProperties(_ref8,["dataArray","format","width","height"]);var dataTypedArray=new Uint8Array(dataArray);return new Texture2D(gl,_extends({pixels:dataTypedArray,width:1,format:gl.RGBA},opts))}}]);function Texture2D(gl){var opts=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,Texture2D);(0,_webglChecks.assertWebGLRenderingContext)(gl);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Texture2D).call(this,gl,_extends({},opts,{target:gl.TEXTURE_2D})));_this.width=null;_this.height=null;Object.seal(_this);_this.setImageData(opts);if(opts.generateMipmap){_this.generateMipmap()}return _this}_createClass(Texture2D,[{key:"bind",value:function bind(){var textureUnit=arguments.length<=0||arguments[0]===undefined?this.textureUnit:arguments[0];var gl=this.gl;if(textureUnit===undefined){throw new Error("Texture.bind: must specify texture unit")}this.textureUnit=textureUnit;gl.activeTexture(gl.TEXTURE0+textureUnit);gl.bindTexture(this.target,this.handle);return textureUnit}},{key:"unbind",value:function unbind(){var gl=this.gl;if(this.textureUnit===undefined){throw new Error("Texture.unbind: texture unit not specified")}gl.activeTexture(gl.TEXTURE0+this.textureUnit);gl.bindTexture(this.target,null);return this.textureUnit}},{key:"getActiveUnit",value:function getActiveUnit(){return this.gl.getParameter(_webglTypes.WebGL.ACTIVE_TEXTURE)-_webglTypes.WebGL.TEXTURE0}},{key:"setPixels",value:function setPixels(_ref9){var buffer=_ref9.buffer;var _ref9$offset=_ref9.offset;var offset=_ref9$offset===undefined?0:_ref9$offset;var _ref9$width=_ref9.width;var width=_ref9$width===undefined?null:_ref9$width;var _ref9$height=_ref9.height;var height=_ref9$height===undefined?null:_ref9$height;var _ref9$mipmapLevel=_ref9.mipmapLevel;var mipmapLevel=_ref9$mipmapLevel===undefined?0:_ref9$mipmapLevel;var _ref9$internalFormat=_ref9.internalFormat;var internalFormat=_ref9$internalFormat===undefined?_webglTypes.WebGL.RGBA:_ref9$internalFormat;var _ref9$format=_ref9.format;var format=_ref9$format===undefined?_webglTypes.WebGL.RGBA:_ref9$format;var _ref9$type=_ref9.type;var type=_ref9$type===undefined?_webglTypes.WebGL.UNSIGNED_BYTE:_ref9$type;var _ref9$border=_ref9.border;var border=_ref9$border===undefined?0:_ref9$border;var opts=_objectWithoutProperties(_ref9,["buffer","offset","width","height","mipmapLevel","internalFormat","format","type","border"]);var gl=this.gl;buffer=_buffer2.default.makeFrom(buffer);gl.bindBuffer(_webglTypes.WebGL.PIXEL_UNPACK_BUFFER,buffer.target);this.bind();gl.texImage2D(gl.TEXTURE_2D,mipmapLevel,format,width,height,border,format,type,buffer.target);this.unbind();gl.bindBuffer(_webglTypes.WebGL.GL_PIXEL_UNPACK_BUFFER,null);return this}},{key:"setImageDataFromCompressedBuffer",value:function setImageDataFromCompressedBuffer(_ref10){var buffer=_ref10.buffer;var _ref10$offset=_ref10.offset;var offset=_ref10$offset===undefined?0:_ref10$offset;var _ref10$width=_ref10.width;var width=_ref10$width===undefined?null:_ref10$width;var _ref10$height=_ref10.height;var height=_ref10$height===undefined?null:_ref10$height;var _ref10$mipmapLevel=_ref10.mipmapLevel;var mipmapLevel=_ref10$mipmapLevel===undefined?0:_ref10$mipmapLevel;var _ref10$internalFormat=_ref10.internalFormat;var internalFormat=_ref10$internalFormat===undefined?_webglTypes.WebGL.RGBA:_ref10$internalFormat;var _ref10$format=_ref10.format;var format=_ref10$format===undefined?_webglTypes.WebGL.RGBA:_ref10$format;var _ref10$type=_ref10.type;var type=_ref10$type===undefined?_webglTypes.WebGL.UNSIGNED_BYTE:_ref10$type;var _ref10$border=_ref10.border;var border=_ref10$border===undefined?0:_ref10$border;var opts=_objectWithoutProperties(_ref10,["buffer","offset","width","height","mipmapLevel","internalFormat","format","type","border"]);var gl=this.gl;gl.compressedTexImage2D(this.target,mipmapLevel,internalFormat,width,height,border,buffer);return this}},{key:"copyImageFromFramebuffer",value:function copyImageFromFramebuffer(_ref11){var framebuffer=_ref11.framebuffer;var _ref11$offset=_ref11.offset;var offset=_ref11$offset===undefined?0:_ref11$offset;var x=_ref11.x;var y=_ref11.y;var width=_ref11.width;var height=_ref11.height;var _ref11$mipmapLevel=_ref11.mipmapLevel;var mipmapLevel=_ref11$mipmapLevel===undefined?0:_ref11$mipmapLevel;var _ref11$internalFormat=_ref11.internalFormat;var internalFormat=_ref11$internalFormat===undefined?_webglTypes.WebGL.RGBA:_ref11$internalFormat;var _ref11$type=_ref11.type;var type=_ref11$type===undefined?_webglTypes.WebGL.UNSIGNED_BYTE:_ref11$type;var _ref11$border=_ref11.border;var border=_ref11$border===undefined?0:_ref11$border;var opts=_objectWithoutProperties(_ref11,["framebuffer","offset","x","y","width","height","mipmapLevel","internalFormat","type","border"]);var gl=this.gl;framebuffer=_framebuffer2.default.makeFrom(framebuffer);framebuffer.bind();this.bind();gl.copyTexImage2D(this.target,mipmapLevel,internalFormat,x,y,width,height,border);this.unbind();framebuffer.unbind()}},{key:"copySubImage",value:function copySubImage(_ref12){var pixels=_ref12.pixels;var _ref12$offset=_ref12.offset;var offset=_ref12$offset===undefined?0:_ref12$offset;var x=_ref12.x;var y=_ref12.y;var width=_ref12.width;var height=_ref12.height;var _ref12$mipmapLevel=_ref12.mipmapLevel;var mipmapLevel=_ref12$mipmapLevel===undefined?0:_ref12$mipmapLevel;var _ref12$internalFormat=_ref12.internalFormat;var internalFormat=_ref12$internalFormat===undefined?_webglTypes.WebGL.RGBA:_ref12$internalFormat;var _ref12$type=_ref12.type;var type=_ref12$type===undefined?_webglTypes.WebGL.UNSIGNED_BYTE:_ref12$type;var _ref12$border=_ref12.border;var border=_ref12$border===undefined?0:_ref12$border}}]);return Texture2D}(Texture);var TextureCube=exports.TextureCube=function(_Texture2){_inherits(TextureCube,_Texture2);_createClass(TextureCube,null,[{key:"makeFrom",value:function makeFrom(gl){var object=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return object instanceof TextureCube?object:new TextureCube(gl,{handle:object.handle||object})}}]);function TextureCube(gl){var opts=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,TextureCube);(0,_webglChecks.assertWebGLRenderingContext)(gl);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(TextureCube).call(this,gl,_extends({},opts,{target:gl.TEXTURE_CUBE_MAP})));_this2.setCubeMapImageData(opts);return _this2}_createClass(TextureCube,[{key:"bind",value:function bind(){var _ref13=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var index=_ref13.index;var gl=this.gl;if(index!==undefined){gl.activeTexture(gl.TEXTURE0+index)}gl.bindTexture(gl.TEXTURE_CUBE_MAP,this.handle);if(index===undefined){var result=gl.getParameter(gl.ACTIVE_TEXTURE)-gl.TEXTURE0;return result}return index}},{key:"unbind",value:function unbind(){var gl=this.gl;gl.bindTexture(gl.TEXTURE_CUBE_MAP,null)}},{key:"setCubeMapImageData",value:function setCubeMapImageData(_ref14){var width=_ref14.width;var height=_ref14.height;var pixels=_ref14.pixels;var data=_ref14.data;var _ref14$border=_ref14.border;var border=_ref14$border===undefined?0:_ref14$border;var _ref14$format=_ref14.format;var format=_ref14$format===undefined?_webglTypes.WebGL.RGBA:_ref14$format;var _ref14$type=_ref14.type;var type=_ref14$type===undefined?_webglTypes.WebGL.UNSIGNED_BYTE:_ref14$type;var _ref14$generateMipmap=_ref14.generateMipmap;var generateMipmap=_ref14$generateMipmap===undefined?false:_ref14$generateMipmap;var opts=_objectWithoutProperties(_ref14,["width","height","pixels","data","border","format","type","generateMipmap"]);var gl=this.gl;pixels=pixels||data;this.bind();if(this.width||this.height){gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X,0,format,width,height,border,format,type,pixels.pos.x);gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Y,0,format,width,height,border,format,type,pixels.pos.y);gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Z,0,format,width,height,border,format,type,pixels.pos.z);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_X,0,format,width,height,border,format,type,pixels.neg.x);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,format,width,height,border,format,type,pixels.neg.y);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,format,width,height,border,format,type,pixels.neg.z)}else{gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X,0,format,format,type,pixels.pos.x);gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Y,0,format,format,type,pixels.pos.y);gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Z,0,format,format,type,pixels.pos.z);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_X,0,format,format,type,pixels.neg.x);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,format,format,type,pixels.neg.y);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,format,format,type,pixels.neg.z)}this.unbind();if(generateMipmap){this.generateMipmap()}return this}}]);return TextureCube}(Texture)},{"../utils":389,"./buffer":394,"./framebuffer":398,"./webgl-checks":406,"./webgl-types":408,assert:3}],404:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _UNIFORM_BASE_DESCRIP;exports.parseUniformName=parseUniformName;exports.getUniformSetter=getUniformSetter;exports.checkUniformValues=checkUniformValues;exports.getUniformsTable=getUniformsTable;var _webglTypes=require("./webgl-types");var _texture=require("./texture");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UNIFORM_BASE_DESCRIPTORS=(_UNIFORM_BASE_DESCRIP={},_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.FLOAT,{function:"uniform1f",type:Float32Array}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.INT,{function:"uniform1i",type:Uint16Array}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.BOOL,{function:"uniform1i",type:Uint16Array}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.FLOAT_VEC2,{function:"uniform2fv",type:Float32Array,elements:2}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.FLOAT_VEC3,{function:"uniform3fv",type:Float32Array,elements:3}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.FLOAT_VEC4,{function:"uniform4fv",type:Float32Array,elements:4}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.INT_VEC2,{function:"uniform2iv",type:Uint16Array,elements:2}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.INT_VEC3,{function:"uniform3iv",type:Uint16Array,elements:3}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.INT_VEC4,{function:"uniform4iv",type:Uint16Array,elements:4}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.BOOL_VEC2,{function:"uniform2iv",type:Uint16Array,elements:2}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.BOOL_VEC3,{function:"uniform3fv",type:Uint16Array,elements:3}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.BOOL_VEC4,{function:"uniform4iv",type:Uint16Array,elements:4}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.FLOAT_MAT2,{function:"uniformMatrix2fv",type:Float32Array,matrix:true,elements:4}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.FLOAT_MAT3,{mfunction:"uniformMatrix3fv",type:Float32Array,matrix:true,elements:9}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.FLOAT_MAT4,{function:"uniformMatrix4fv",type:Float32Array,matrix:true,elements:16}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.SAMPLER_2D,{function:"uniform1i",type:Uint16Array,texture:true}),_defineProperty(_UNIFORM_BASE_DESCRIP,_webglTypes.WebGL.SAMPLER_CUBE,{function:"uniform1i",type:Uint16Array,texture:true}),_UNIFORM_BASE_DESCRIP);function parseUniformName(name){var UNIFORM_NAME_REGEXP=/([^\[]*)(\[[0-9]+\])?/;var matches=name.match(UNIFORM_NAME_REGEXP);if(!matches||matches.length<2){throw new Error("Failed to parse GLSL uniform name "+name)}return{name:matches[1],length:matches[2]||1,isArray:Boolean(matches[2])}}function getUniformSetter(gl,location,info){var descriptor=UNIFORM_BASE_DESCRIPTORS[info.type];if(!descriptor){throw new Error("Unknown GLSL uniform type "+info.type)}var glFunction=gl[descriptor.function].bind(gl);var TypedArray=descriptor.type;var flatArrayLength=info.size*(descriptor.elements||1);var setter=void 0;if(flatArrayLength>1){setter=function setter(val){if(!(val instanceof TypedArray)){var typedArray=new TypedArray(flatArrayLength);typedArray.set(val);val=typedArray}(0,_assert2.default)(val.length===flatArrayLength);if(descriptor.matrix){glFunction(location,false,val)}else{glFunction(location,val)}}}else{setter=function setter(val){return glFunction(location,val)}}return setter}function checkUniformValues(uniforms,source){for(var uniformName in uniforms){var value=uniforms[uniformName];if(!checkUniformValue(value)){source=source?source+" ":"";console.error(source+" Bad uniform "+uniformName,value);throw new Error(source+" Bad uniform "+uniformName)}}return true}function checkUniformValue(value){var ok=true;if(value instanceof _texture.Texture){ok=true}else if(Array.isArray(value)){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=value[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var element=_step.value;if(!isFinite(element)){ok=false}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}ok=ok&&value.length>0}else if(ArrayBuffer.isView(value)){ok=value.length>0}else if(!isFinite(value)){ok=false}return ok}function getUniformsTable(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$header=_ref.header;var header=_ref$header===undefined?"Uniforms":_ref$header;var program=_ref.program;var uniforms=_ref.uniforms;(0,_assert2.default)(program);var uniformLocations=program._uniformSetters;var table=_defineProperty({},header,{});for(var uniformName in uniformLocations){var uniform=uniforms[uniformName];if(uniform!==undefined){table[uniformName]={Type:uniform,Value:uniform.toString()}}}for(var _uniformName in uniformLocations){var _uniform=uniforms[_uniformName];if(_uniform===undefined){table[_uniformName]={Type:"NOT PROVIDED",Value:"N/A"}}}for(var _uniformName2 in uniforms){var _uniform2=uniforms[_uniformName2];if(!table[_uniformName2]){table[_uniformName2]={Type:"NOT USED: "+_uniform2,Value:_uniform2.toString()}}}return table}},{"./texture":403,"./webgl-types":408,assert:3}],405:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMaxAttributes=getMaxAttributes;exports.hasDivisor=hasDivisor;exports.isEnabled=isEnabled;exports.getBuffer=getBuffer;exports.getGeneric=getGeneric;exports.getSize=getSize;exports.getType=getType;exports.isNormalized=isNormalized;exports.isInteger=isInteger;exports.getStride=getStride;exports.getOffset=getOffset;exports.enable=enable;exports.disable=disable;exports.setDivisor=setDivisor;exports.getDivisor=getDivisor;exports.setBuffer=setBuffer;exports.setGeneric=setGeneric;exports.setGenericValues=setGenericValues;var _webglTypes=require("./webgl-types");var _webglChecks=require("./webgl-checks");var _buffer=require("./buffer");var _buffer2=_interopRequireDefault(_buffer);var _context=require("./context");var _utils=require("../utils");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ERR_WEBGL2="WebGL2 required";function glGetLumaInfo(gl){if(!gl.luma){gl.luma={extensions:{}}}if(gl.luma.extensions["ANGLE_instanced_arrays"]===undefined){gl.luma.extensions["ANGLE_instanced_arrays"]=gl.getExtension("ANGLE_instanced_arrays")}return gl.luma}function getMaxAttributes(gl){(0,_webglChecks.assertWebGLRenderingContext)(gl);return gl.getParameter(gl.MAX_VERTEX_ATTRIBS);return maxAttributes}function hasDivisor(gl){(0,_webglChecks.assertWebGLRenderingContext)(gl);return Boolean(gl instanceof _webglTypes.WebGL2RenderingContext||gl.getExtension(gl,"ANGLE_instanced_arrays"))}function isEnabled(gl,location){return Boolean(get(gl,location,gl.VERTEX_ATTRIB_ARRAY_ENABLED))}function getBuffer(gl,location){return get(gl,location,gl.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING)}function getGeneric(gl,location){return get(gl,gl.CURRENT_VERTEX_ATTRIB)}function getSize(gl,location){return get(location,gl.VERTEX_ATTRIB_ARRAY_SIZE)}function getType(gl,location){return get(location,gl.VERTEX_ATTRIB_ARRAY_TYPE)}function isNormalized(gl,location){return get(location,gl.VERTEX_ATTRIB_ARRAY_NORMALIZED)}function isInteger(gl,location){(0,_assert2.default)(gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);return get(location,gl.VERTEX_ATTRIB_ARRAY_INTEGER)}function getStride(gl,location){return get(location,gl.VERTEX_ATTRIB_ARRAY_STRIDE)}function getOffset(gl,location){var pname=arguments.length<=2||arguments[2]===undefined?gl.VERTEX_ATTRIB_ARRAY_POINTER:arguments[2];return gl.getVertexAttribOffset(location,pname)}function get(gl,location,pname){(0,_webglChecks.assertWebGLRenderingContext)(gl);return gl.getVertexAttrib(location,pname)}function enable(gl,location){gl.enableVertexAttribArray(location)}function disable(gl,location){if(location>0){gl.disableVertexAttribArray(location)}}function setDivisor(gl,location,divisor){if(gl instanceof _webglTypes.WebGL2RenderingContext){gl.vertexAttribDivisor(location,divisor);return}var ext=glGetLumaInfo(gl).extensions["ANGLE_instanced_arrays"];if(ext){ext.vertexAttribDivisorANGLE(location,divisor);return}if(divisor!==0){throw new Error("WebGL instanced rendering not supported")}}function getDivisor(gl,location){(0,_assert2.default)(location>0);if(gl instanceof _webglTypes.WebGL2RenderingContext){var divisor=get(location,gl.VERTEX_ATTRIB_ARRAY_DIVISOR);return divisor}var ext=glGetLumaInfo(gl).extensions["ANGLE_instanced_arrays"];if(ext){var _divisor=get(location,ext.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE);return _divisor}return 0}function setBuffer(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var gl=_ref.gl;var location=_ref.location;var buffer=_ref.buffer;var target=_ref.target;var layout=_ref.layout;(0,_webglChecks.assertWebGLRenderingContext)(gl);buffer=_buffer2.default.makeFrom(gl,buffer);target=(0,_context.glGet)(gl,target!==undefined?target:buffer.target);layout=layout!==undefined?layout:buffer.layout;(0,_assert2.default)(target,"setBuffer needs target");(0,_assert2.default)(layout,"setBuffer called on uninitialized buffer");buffer.bind({target:gl.ARRAY_BUFFER});if(!layout.integer){gl.vertexAttribPointer(location,layout.size,(0,_context.glGet)(gl,layout.type),layout.normalized,layout.stride,layout.offset)}else{(0,_assert2.default)(gl instanceof _webglTypes.WebGL2RenderingContext,ERR_WEBGL2);gl.vertexAttribIPointer(location,layout.size,(0,_context.glGet)(gl,layout.type),layout.stride,layout.offset)}buffer.unbind({target:gl.ARRAY_BUFFER})}function setGeneric(_ref2){var gl=_ref2.gl;var location=_ref2.location;var array=_ref2.array;_utils.log.warn(0,"VertexAttributes.setGeneric is not well tested");if(array instanceof Float32Array){gl.vertexAttrib4fv(location,array)}else if(array instanceof Int32Array){(0,_assert2.default)(gl instanceof _webglTypes.WebGL2RenderingContext,"WebGL2 required");gl.vertexAttribI4iv(location,array)}else if(array instanceof Uint32Array){(0,_assert2.default)(gl instanceof _webglTypes.WebGL2RenderingContext,"WebGL2 required");gl.vertexAttribI4uiv(location,array)}}function setGenericValues(gl,location,v0,v1,v2,v3){_utils.log.warn(0,"VertexAttributes.setGenericValues is not well tested");switch(arguments.length-1){case 1:gl.vertexAttrib1f(location,v0);break;case 2:gl.vertexAttrib2f(location,v0,v1);break;case 3:gl.vertexAttrib3f(location,v0,v1,v2);break;case 4:gl.vertexAttrib4f(location,v0,v1,v2,v3);break;default:throw new Error("vertex attribute size must be between 1 and 4")}}},{"../utils":389,"./buffer":394,"./context":395,"./webgl-checks":406,"./webgl-types":408,assert:3}],406:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GL_BUFFER_USAGE=exports.GL_TARGETS=exports.GL_DRAW_MODES=exports.GL_INDEX_TYPES=undefined;exports.isWebGLRenderingContext=isWebGLRenderingContext;exports.isWebGL2RenderingContext=isWebGL2RenderingContext;exports.assertWebGLRenderingContext=assertWebGLRenderingContext;exports.assertWebGL2RenderingContext=assertWebGL2RenderingContext;exports.glKey=glKey;exports.isIndexType=isIndexType;exports.assertIndexType=assertIndexType;exports.isDrawMode=isDrawMode;exports.assertDrawMode=assertDrawMode;exports.glTypeFromArray=glTypeFromArray;exports.assertArrayTypeMatch=assertArrayTypeMatch;exports.glArrayFromType=glArrayFromType;var _webglTypes=require("./webgl-types");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ERR_CONTEXT="Invalid WebGLRenderingContext";var ERR_WEBGL2="Requires WebGL2";function isWebGLRenderingContext(gl){return gl instanceof _webglTypes.WebGLRenderingContext||gl&&gl.ARRAY_BUFFER===34962}function isWebGL2RenderingContext(gl){return gl instanceof _webglTypes.WebGL2RenderingContext||gl&&gl.TEXTURE_BINDING_3D===32874}function assertWebGLRenderingContext(gl){(0,_assert2.default)(isWebGLRenderingContext(gl),ERR_CONTEXT)}function assertWebGL2RenderingContext(gl){(0,_assert2.default)(isWebGL2RenderingContext(gl),ERR_WEBGL2)}function glKey(value){for(var key in _webglTypes.WebGL){if(_webglTypes.WebGL[key]===value){return key}}return String(value)}var GL_INDEX_TYPES=exports.GL_INDEX_TYPES=["UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT"].map(function(constant){return _webglTypes.WebGL[constant]});function isIndexType(type){return GL_INDEX_TYPES.indexOf(type)!==-1}function assertIndexType(glType,source){(0,_assert2.default)(isIndexType(glType),"Bad index type gl."+glKey(glType)+" "+source)}var GL_DRAW_MODES=exports.GL_DRAW_MODES=["POINTS","LINE_STRIP","LINE_LOOP","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","TRIANGLES"].map(function(constant){return _webglTypes.WebGL[constant]});function isDrawMode(glMode){return GL_DRAW_MODES.indexOf(glMode)!==-1}function assertDrawMode(glType,source){(0,_assert2.default)(isDrawMode(glType),"Bad draw mode gl."+glKey(glType)+" "+source)}var GL_TARGETS=exports.GL_TARGETS=["ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","COPY_READ_BUFFER","COPY_WRITE_BUFFER","TRANSFORM_FEEDBACK_BUFFER","UNIFORM_BUFFER","PIXEL_PACK_BUFFER","PIXEL_UNPACK_BUFFER"].map(function(constant){return _webglTypes.WebGL[constant]}).filter(function(constant){return constant});var GL_BUFFER_USAGE=exports.GL_BUFFER_USAGE=["STATIC_DRAW","DYNAMIC_DRAW","STREAM_DRAW","STATIC_READ","DYNAMIC_READ","STREAM_READ","STATIC_COPY","DYNAMIC_COPY","STREAM_COPY"].map(function(constant){return _webglTypes.WebGL[constant]}).filter(function(constant){return constant});function glTypeFromArray(array){if(array instanceof Float32Array){return _webglTypes.WebGL.FLOAT}else if(array instanceof Uint16Array){return _webglTypes.WebGL.UNSIGNED_SHORT}else if(array instanceof Uint32Array){return _webglTypes.WebGL.UNSIGNED_INT}else if(array instanceof Uint8Array){return _webglTypes.WebGL.UNSIGNED_BYTE}else if(array instanceof Uint8ClampedArray){return _webglTypes.WebGL.UNSIGNED_BYTE}else if(array instanceof Int8Array){return _webglTypes.WebGL.BYTE}else if(array instanceof Int16Array){return _webglTypes.WebGL.SHORT}else if(array instanceof Int32Array){return _webglTypes.WebGL.INT}throw new Error("Failed to deduce WebGL type from array")}function assertArrayTypeMatch(array,type,source){(0,_assert2.default)(type===glTypeFromArray(array),(array.constructor.name||"Array")+" "+("does not match element type gl."+glKey(type)+" "+source))}function glArrayFromType(glType){var clamped=arguments.length<=1||arguments[1]===undefined?false:arguments[1];switch(glType){case _webglTypes.WebGL.FLOAT:return Float32Array;case _webglTypes.WebGL.UNSIGNED_SHORT:case _webglTypes.WebGL.UNSIGNED_SHORT_5_6_5:case _webglTypes.WebGL.UNSIGNED_SHORT_4_4_4_4:case _webglTypes.WebGL.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case _webglTypes.WebGL.UNSIGNED_INT:return Uint32Array;case _webglTypes.WebGL.UNSIGNED_BYTE:return clamped?Uint8ClampedArray:Uint8Array;case _webglTypes.WebGL.BYTE:return Int8Array;case _webglTypes.WebGL.SHORT:return Int16Array;case _webglTypes.WebGL.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}},{"./webgl-types":408,assert:3}],407:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _glConstants=require("gl-constants");var _glConstants2=_interopRequireDefault(_glConstants);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getWebGLConstants(){var constants={};var WebGLContext=glob.WebGL2RenderingContext||WebGLRenderingContext;for(var key in WebGLContext.prototype){if(typeof WebGLContext[key]!=="function"){constants[key]=WebGLContext[key]}}Object.freeze(constants);return constants}exports.default=_glConstants2.default},{"gl-constants":309}],408:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GL=exports.WebGL=exports.WebGL2RenderingContext=exports.WebGLShaderPrecisionFormat=exports.WebGLActiveInfo=exports.WebGLUniformLocation=exports.WebGLTexture=exports.WebGLRenderbuffer=exports.WebGLFramebuffer=exports.WebGLBuffer=exports.WebGLShader=exports.WebGLProgram=exports.WebGLRenderingContext=exports.Image=undefined;var _webglConstants=require("./webgl-constants");Object.defineProperty(exports,"WebGL",{enumerable:true,get:function get(){return _interopRequireDefault(_webglConstants).default}});Object.defineProperty(exports,"GL",{enumerable:true,get:function get(){return _interopRequireDefault(_webglConstants).default}});var _utils=require("../utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ERR_WEBGL_MISSING="\nWebGL API is missing. To run luma.gl under Node.js,\nplease install headless-gl and import 'luma.gl/headless' instead of 'luma.gl'.\n";var _ref=_utils.lumaGlobals.headlessTypes||_utils.global;var WebGLRenderingContext=_ref.WebGLRenderingContext;var WebGLProgram=_ref.WebGLProgram;var WebGLShader=_ref.WebGLShader;var WebGLBuffer=_ref.WebGLBuffer;var WebGLFramebuffer=_ref.WebGLFramebuffer;var WebGLRenderbuffer=_ref.WebGLRenderbuffer;var WebGLTexture=_ref.WebGLTexture;var WebGLUniformLocation=_ref.WebGLUniformLocation;var WebGLActiveInfo=_ref.WebGLActiveInfo;var WebGLShaderPrecisionFormat=_ref.WebGLShaderPrecisionFormat;var allWebGLTypesAvailable=WebGLRenderingContext&&WebGLProgram&&WebGLShader&&WebGLBuffer&&WebGLFramebuffer&&WebGLRenderbuffer&&WebGLTexture&&WebGLUniformLocation&&WebGLActiveInfo&&WebGLShaderPrecisionFormat;if(!allWebGLTypesAvailable){throw new Error(ERR_WEBGL_MISSING)}function getWebGL2RenderingContext(){var WebGL2RenderingContextNotSupported=function WebGL2RenderingContextNotSupported(){_classCallCheck(this,WebGL2RenderingContextNotSupported)};return _utils.global.WebGL2RenderingContext||WebGL2RenderingContextNotSupported}function getImage(){var ImageNotSupported=function ImageNotSupported(){_classCallCheck(this,ImageNotSupported)};return _utils.global.Image||ImageNotSupported}var WebGL2RenderingContext=getWebGL2RenderingContext();var Image=getImage();exports.Image=Image;exports.WebGLRenderingContext=WebGLRenderingContext;exports.WebGLProgram=WebGLProgram;exports.WebGLShader=WebGLShader;exports.WebGLBuffer=WebGLBuffer;exports.WebGLFramebuffer=WebGLFramebuffer;exports.WebGLRenderbuffer=WebGLRenderbuffer;exports.WebGLTexture=WebGLTexture;exports.WebGLUniformLocation=WebGLUniformLocation;exports.WebGLActiveInfo=WebGLActiveInfo;exports.WebGLShaderPrecisionFormat=WebGLShaderPrecisionFormat;exports.WebGL2RenderingContext=WebGL2RenderingContext},{"../utils":389,"./webgl-constants":407}],409:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _vertexArrayObject=require("./vertex-array-object");Object.defineProperty(exports,"VertexArrayObject",{enumerable:true,get:function get(){return _interopRequireDefault(_vertexArrayObject).default}});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./vertex-array-object":410}],410:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglTypes=require("../webgl/webgl-types");var _webglChecks=require("../webgl/webgl-checks");var _context=require("../webgl/context");var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var OES_vertex_array_object="OES_vertex_array_object";var VertexArrayObject=function(){_createClass(VertexArrayObject,null,[{key:"isSupported",value:function isSupported(gl){(0,_webglChecks.assertWebGLRenderingContext)(gl);return gl instanceof _webglTypes.WebGL2RenderingContext||gl.getExtension("OES_vertex_array_object")}},{key:"wrap",value:function wrap(gl,object){return object instanceof VertexArrayObject?object:new VertexArrayObject(gl,{handle:object.handle||object})}}]);function VertexArrayObject(gl){var _ref=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var handle=_ref.handle;_classCallCheck(this,VertexArrayObject);(0,_webglChecks.assertWebGLRenderingContext)(gl);(0,_assert2.default)(VertexArrayObject.isSupported(gl),"VertexArrayObject: WebGL2 or OES_vertex_array_object required");handle=handle||createVertexArray(gl);if(!handle){throw new Error("Could not create VertexArrayObject")}this.gl=gl;this.handle=handle;this.userData={};Object.seal(this)}_createClass(VertexArrayObject,[{key:"delete",value:function _delete(){
var gl=this.gl;deleteVertexArray(gl,this.handle);(0,_context.glCheckError)(gl);return this}},{key:"bind",value:function bind(){var gl=this.gl;bindVertexArray(gl,this.handle);return this}},{key:"unbind",value:function unbind(){var gl=this.gl;bindVertexArray(gl,null);return this}}]);return VertexArrayObject}();exports.default=VertexArrayObject;function createVertexArray(gl){if(gl instanceof _webglTypes.WebGL2RenderingContext){return gl.createVertexArray()}var ext=gl.getExtension(OES_vertex_array_object);if(ext){return ext.createVertexArrayOES()}return null}function deleteVertexArray(gl,vertexArray){if(gl instanceof _webglTypes.WebGL2RenderingContext){gl.deleteVertexArray(vertexArray)}var ext=gl.getExtension(OES_vertex_array_object);if(ext){ext.deleteVertexArrayOES(vertexArray)}(0,_context.glCheckError)(gl)}function isVertexArray(gl,vertexArray){if(gl instanceof _webglTypes.WebGL2RenderingContext){return gl.isVertexArray(vertexArray)}var ext=gl.getExtension(OES_vertex_array_object);if(ext){return ext.isVertexArrayOES(vertexArray)}return false}function bindVertexArray(gl,vertexArray){if(gl instanceof _webglTypes.WebGL2RenderingContext){gl.bindVertexArray(vertexArray)}var ext=gl.getExtension(OES_vertex_array_object);if(ext){ext.bindVertexArrayOES(vertexArray)}(0,_context.glCheckError)(gl)}},{"../webgl/context":395,"../webgl/webgl-checks":406,"../webgl/webgl-types":408,assert:3}]},{},[357]);
