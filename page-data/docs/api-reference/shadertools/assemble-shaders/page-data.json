{"componentChunkName":"component---node-modules-gatsby-theme-ocular-src-react-templates-documentation-jsx","path":"/docs/api-reference/shadertools/assemble-shaders","result":{"data":{"docBySlug":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{"id":"shader-assembly","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#shader-assembly","ariaLabel":"shader assembly permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Shader Assembly"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"luma.gl's module shader system is primarily exposed via the function "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"assembleShaders"}]},{"type":"text","value":" which composes base vertex and fragment shader source with shader modules, hook functions and injections to generate the final vertex and fragment shader source that can be used to create a program."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"code-classlanguage-textassembleshaderscode","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#code-classlanguage-textassembleshaderscode","ariaLabel":"code classlanguage textassembleshaderscode permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"assembleShaders"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Takes the source code of a vertex shader and a fragment shader, and a list of modules, defines, etc. Outputs resolved source code for both shaders, after adding prologue, adding defines, importing and transpiling modules, and injecting any shader fragments)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"vs"}]},{"type":"text","value":" - vertex shader source"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"fs"}]},{"type":"text","value":" - fragment shader source code"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" - "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" for the shader, will be used to inject shader names (using "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#define SHADER_NAME"}]},{"type":"text","value":") if not already present in the source."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"prologue"}]},{"type":"text","value":"="},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":" (Boolean) - Will inject platform prologue (see below)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"defines"}]},{"type":"text","value":"="},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"{}"}]},{"type":"text","value":" (Object) - a map of key/value pairs representing custom "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#define"}]},{"type":"text","value":"s to be injected into the shader source"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"modules"}]},{"type":"text","value":"="},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"[]"}]},{"type":"text","value":" (Array) - list of shader modules (either objects defining the module, or names of previously registered modules)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"inject"}]},{"type":"text","value":"="},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"{}"}]},{"type":"text","value":" (Object) - map of substituions,"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hookFunctions"}]},{"type":"text","value":"="},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"[]"}]},{"type":"text","value":" Array of hook functions descriptions. Descriptions can simply be the hook function signature (with a prefix "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"vs"}]},{"type":"text","value":" for vertex shader, or "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"fs"}]},{"type":"text","value":" for fragment shader) or an object with the hook signature, and a header and footer that will always appear in the hook function. For example:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"transpileToGLSL100"}]},{"type":"text","value":": force transpilation to GLSL ES 1.0 (see below)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"js"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'vs:MY_HOOK_FUNCTION1(inout vec4 color)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    hook"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'fs:MY_HOOK_FUNCTION2(inout vec4 color)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    header"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'if (color.a == 0.0) discard;\\n'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    footer"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'color.a *= 1.2;\\n'"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Returns:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"vs"}]},{"type":"text","value":" - the resolved vertex shader"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"fs"}]},{"type":"text","value":" - the resolved fragment shader"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"getUniforms"}]},{"type":"text","value":" - a combined "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"getUniforms"}]},{"type":"text","value":" function covering all modules."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"moduleMap"}]},{"type":"text","value":" - a map with all resolved modules, keyed by name"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"shader-hooks-and-module-injections","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#shader-hooks-and-module-injections","ariaLabel":"shader hooks and module injections permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Shader Hooks and Module Injections"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Shader hooks and module injections are a system that allows for shader to be written in a generic manner, with behaviour modified when modules are included. For example if we define a shader hook as "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"fs:MY_HOOK_FUNCTION(inout vec4 color)"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"assembleShader"}]},{"type":"text","value":" will inject the following function automatically into our fragment shader:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"c"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-c"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"MY_HOOK_FUNCTION"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"inout vec4 color"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We can the write our fragment shader as follows:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"c"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-c"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-c"]},"children":[{"type":"text","value":"precision highp "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"float"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"main"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  vec4 color "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"vec4"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1.0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  gl_FragColor "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"MY_HOOK_FUNCTION"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"color"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"By default, the hook function is a no-op, so this doesn't do anything. However, if we add a module injection like the following:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"js"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  picking"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'fs:VERTEX_HOOK_FUNCTION'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'color = vec4(1.0, 0.0, 0.0, 1.0);'"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And pass the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"picking"}]},{"type":"text","value":" module to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"assembledShaders"}]},{"type":"text","value":", the hook function will be updated as follows:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"c"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-c"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"MY_HOOK_FUNCTION"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"inout vec4 color"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  color "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"vec4"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1.0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1.0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The hook function now changes the color from white to red."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"constants-and-values","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#constants-and-values","ariaLabel":"constants and values permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Constants and Values"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"predefined-injection-hooks","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#predefined-injection-hooks","ariaLabel":"predefined injection hooks permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Predefined Injection Hooks"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Key"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Shader"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"vs:#decl"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Vertex"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Inject at top of shader (declarations)"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"vs:#main-start"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Vertex"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Injected at the very beginning of main function"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"vs:#main-end"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Vertex"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Injected at the very end of main function"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"fs:#decl"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Fragment"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Inject at top of shader (declarations)"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"fs:#main-start"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Fragment"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Injected at the very beginning of main function"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"fs:#main-end"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Fragment"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Injected at the very end of main function"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"NOTE"}]},{"type":"text","value":": Injections assume that the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"main"}]},{"type":"text","value":" function appears last in a shader."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"usage","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#usage","ariaLabel":"usage permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Usage"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"injection-map","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#injection-map","ariaLabel":"injection map permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Injection Map"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"assembleShaders"}]},{"type":"text","value":" (and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Model"}]},{"type":"text","value":" constructor) will take an "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"inject"}]},{"type":"text","value":" argument that contains a map of:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"keys indicating hooks (predefined or functions)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"values representing code to be injected. This can be either a simple string or an object containing the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"injection"}]},{"type":"text","value":" string and an "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"order"}]},{"type":"text","value":" indicating its priority."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Examples:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"  inject: {\n    'fs:#main-end': '  gl_FragColor = picking_filterColor(gl_FragColor)'\n  }"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"js"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"ProgramManager"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getDefaultProgramManager"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"gl"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addShaderHook"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'fs:MYHOOK_fragmentColor(inout vec4 color)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Model"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"gl"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  vs"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  fs"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","template-string"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"void main() {\n    MYHOOK_fragmentColor(gl_FragColor);\n  }"}]},{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  modules"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"picking"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n  inject"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'fs:#main-start'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'gl_FragColor = vec4(1., 0., 0., 1.);'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'fs:MYHOOK_fragmentColor'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      injection"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'  color = picking_filterColor(color);'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n      order"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"9999"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"transpilation","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#transpilation","ariaLabel":"transpilation permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Transpilation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"transpileToGLSL100"}]},{"type":"text","value":" option is used, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"assembleShaders"}]},{"type":"text","value":" will attempt to transpile shaders to GLSL ES 1.0. This is a limited text replacement and requires that certain conventions be followed:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Statements are written one per line."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Only one fragment shader output is supported."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"GLSL 3.0-only features, such as 3D textures are not supported."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Text transformations are performed according to the following tables:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vertex Shaders"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"3.00 ES"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"1.00 ES"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Comment"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"in"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"attribute"}]}]},{"type":"element","tagName":"td","properties":{},"children":[]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"out"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"varying"}]}]},{"type":"element","tagName":"td","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Fragment Shaders"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"3.00 ES"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"1.00 ES"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Comment"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"in"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"varying"}]}]},{"type":"element","tagName":"td","properties":{},"children":[]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"out vec4 <varName>"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gl_FragColor"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"<varName>"}]},{"type":"text","value":" declaration is removed and usage in the code are replaced with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"gl_FragColor"}]}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"texture"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"texture2D"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"texture"}]},{"type":"text","value":" will be replaced with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"texture2D"}]},{"type":"text","value":" to ensure 1.00 code is correct. See note on "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"textureCube"}]},{"type":"text","value":" below."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"textureCube"}]},{"type":"text","value":" *"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"textureCube"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"textureCube"}]},{"type":"text","value":" is not valid 3.00 syntax, but must be used to ensure 1.00 code is correct, because "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"texture"}]},{"type":"text","value":" will be substituted with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"texture2D"}]},{"type":"text","value":" when transpiled to 100. Also "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"textureCube"}]},{"type":"text","value":" will be replaced with correct "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"texture"}]},{"type":"text","value":" syntax when transpiled to 300."}]}]}]}]}],"data":{"quirksMode":false}},"timeToRead":5,"excerpt":"Shader Assembly luma.gl's module shader system is primarily exposed via the function  which composes base vertex and fragment shader sourceâ€¦","frontmatter":{"title":"Shader Assembly"}}},"pageContext":{"relativeLinks":{"docs/README":"/docs","../../../../docs":"/docs","docs":"/docs","docs/getting-started/README":"/docs/getting-started","../../../getting-started":"/docs/getting-started","docs/getting-started":"/docs/getting-started","docs/getting-started/external-context":"/docs/getting-started/external-context","../../../getting-started/external-context":"/docs/getting-started/external-context","docs/getting-started/hello-cube":"/docs/getting-started/hello-cube","../../../getting-started/hello-cube":"/docs/getting-started/hello-cube","docs/getting-started/hello-instancing-high":"/docs/getting-started/hello-instancing-high","../../../getting-started/hello-instancing-high":"/docs/getting-started/hello-instancing-high","docs/getting-started/hello-instancing-low":"/docs/getting-started/hello-instancing-low","../../../getting-started/hello-instancing-low":"/docs/getting-started/hello-instancing-low","docs/getting-started/hello-instancing-mid":"/docs/getting-started/hello-instancing-mid","../../../getting-started/hello-instancing-mid":"/docs/getting-started/hello-instancing-mid","docs/getting-started/high-medium-low":"/docs/getting-started/high-medium-low","../../../getting-started/high-medium-low":"/docs/getting-started/high-medium-low","docs/getting-started/hello-triangle":"/docs/getting-started/hello-triangle","../../../getting-started/hello-triangle":"/docs/getting-started/hello-triangle","docs/getting-started/lighting":"/docs/getting-started/lighting","../../../getting-started/lighting":"/docs/getting-started/lighting","docs/getting-started/shader-hooks":"/docs/getting-started/shader-hooks","../../../getting-started/shader-hooks":"/docs/getting-started/shader-hooks","docs/getting-started/transform-feedback":"/docs/getting-started/transform-feedback","../../../getting-started/transform-feedback":"/docs/getting-started/transform-feedback","docs/getting-started/shader-modules-low":"/docs/getting-started/shader-modules-low","../../../getting-started/shader-modules-low":"/docs/getting-started/shader-modules-low","docs/getting-started/shader-modules":"/docs/getting-started/shader-modules","../../../getting-started/shader-modules":"/docs/getting-started/shader-modules","docs/getting-started/whats-next":"/docs/getting-started/whats-next","../../../getting-started/whats-next":"/docs/getting-started/whats-next","docs/developer-guide/bundling":"/docs/developer-guide/bundling","../../../developer-guide/bundling":"/docs/developer-guide/bundling","docs/developer-guide/accessors":"/docs/developer-guide/accessors","../../../developer-guide/accessors":"/docs/developer-guide/accessors","docs/developer-guide/debugging":"/docs/developer-guide/debugging","../../../developer-guide/debugging":"/docs/developer-guide/debugging","docs/developer-guide/shader-modules":"/docs/developer-guide/shader-modules","../../../developer-guide/shader-modules":"/docs/developer-guide/shader-modules","docs/developer-guide/transform-feedback":"/docs/developer-guide/transform-feedback","../../../developer-guide/transform-feedback":"/docs/developer-guide/transform-feedback","docs/contributor-guide/README":"/docs/contributor-guide","../../../contributor-guide":"/docs/contributor-guide","docs/contributor-guide":"/docs/contributor-guide","docs/api-reference/debug":"/docs/api-reference/debug","../../debug":"/docs/api-reference/debug","docs/api-reference/README":"/docs/api-reference","../../../api-reference":"/docs/api-reference","docs/api-reference":"/docs/api-reference","docs/api-reference/test-utils/snapshot-test-runner":"/docs/api-reference/test-utils/snapshot-test-runner","../../test-utils/snapshot-test-runner":"/docs/api-reference/test-utils/snapshot-test-runner","docs/api-reference/webgl/accessor":"/docs/api-reference/webgl/accessor","../../webgl/accessor":"/docs/api-reference/webgl/accessor","docs/api-reference/webgl/query":"/docs/api-reference/webgl/query","../../webgl/query":"/docs/api-reference/webgl/query","docs/api-reference/webgl/renderbuffer":"/docs/api-reference/webgl/renderbuffer","../../webgl/renderbuffer":"/docs/api-reference/webgl/renderbuffer","docs/api-reference/webgl/shader":"/docs/api-reference/webgl/shader","../../webgl/shader":"/docs/api-reference/webgl/shader","docs/api-reference/webgl/texture-2d":"/docs/api-reference/webgl/texture-2d","../../webgl/texture-2d":"/docs/api-reference/webgl/texture-2d","docs/api-reference/webgl/texture-cube":"/docs/api-reference/webgl/texture-cube","../../webgl/texture-cube":"/docs/api-reference/webgl/texture-cube","docs/api-reference/webgl/texture-3d":"/docs/api-reference/webgl/texture-3d","../../webgl/texture-3d":"/docs/api-reference/webgl/texture-3d","docs/api-reference/webgl/transform-feedback":"/docs/api-reference/webgl/transform-feedback","../../webgl/transform-feedback":"/docs/api-reference/webgl/transform-feedback","docs/api-reference/webgl/uniform-buffer-layout":"/docs/api-reference/webgl/uniform-buffer-layout","../../webgl/uniform-buffer-layout":"/docs/api-reference/webgl/uniform-buffer-layout","docs/api-reference/shadertools/assemble-shaders":"/docs/api-reference/shadertools/assemble-shaders","../assemble-shaders":"/docs/api-reference/shadertools/assemble-shaders","docs/api-reference/shadertools/core-shader-modules":"/docs/api-reference/shadertools/core-shader-modules","../core-shader-modules":"/docs/api-reference/shadertools/core-shader-modules","docs/api-reference/gltools/context":"/docs/api-reference/gltools/context","../../gltools/context":"/docs/api-reference/gltools/context","docs/api-reference/gltools/device-pixels":"/docs/api-reference/gltools/device-pixels","../../gltools/device-pixels":"/docs/api-reference/gltools/device-pixels","docs/api-reference/webgl/resource":"/docs/api-reference/webgl/resource","../../webgl/resource":"/docs/api-reference/webgl/resource","docs/api-reference/experimental/warning":"/docs/api-reference/experimental/warning","../../experimental/warning":"/docs/api-reference/experimental/warning","docs/api-reference/engine/geometry":"/docs/api-reference/engine/geometry","../../engine/geometry":"/docs/api-reference/engine/geometry","docs/api-reference/engine/geometries":"/docs/api-reference/engine/geometries","../../engine/geometries":"/docs/api-reference/engine/geometries","docs/api-reference/engine/program-manager":"/docs/api-reference/engine/program-manager","../../engine/program-manager":"/docs/api-reference/engine/program-manager","docs/api-reference/webgl/context/context-properties":"/docs/api-reference/webgl/context/context-properties","../../webgl/context/context-properties":"/docs/api-reference/webgl/context/context-properties","docs/api-reference/experimental/scenegraph/group-node":"/docs/api-reference/experimental/scenegraph/group-node","../../experimental/scenegraph/group-node":"/docs/api-reference/experimental/scenegraph/group-node","docs/api-reference/experimental/scenegraph/model-node":"/docs/api-reference/experimental/scenegraph/model-node","../../experimental/scenegraph/model-node":"/docs/api-reference/experimental/scenegraph/model-node","docs/api-reference/experimental/scenegraph/scenegraph-node":"/docs/api-reference/experimental/scenegraph/scenegraph-node","../../experimental/scenegraph/scenegraph-node":"/docs/api-reference/experimental/scenegraph/scenegraph-node","docs/api-reference/engine/transform/buffer-transform":"/docs/api-reference/engine/transform/buffer-transform","../../engine/transform/buffer-transform":"/docs/api-reference/engine/transform/buffer-transform","docs/api-reference/engine/transform/texture-transform":"/docs/api-reference/engine/transform/texture-transform","../../engine/transform/texture-transform":"/docs/api-reference/engine/transform/texture-transform","docs/api-reference/engine/animation/key-frames":"/docs/api-reference/engine/animation/key-frames","../../engine/animation/key-frames":"/docs/api-reference/engine/animation/key-frames","docs/api-reference/engine/animation/timeline":"/docs/api-reference/engine/animation/timeline","../../engine/animation/timeline":"/docs/api-reference/engine/animation/timeline","docs/getting-started/instanced-transform":"/docs/getting-started/instanced-transform","../../../getting-started/instanced-transform":"/docs/getting-started/instanced-transform","docs/api-reference/webgl/buffer":"/docs/api-reference/webgl/buffer","../../webgl/buffer":"/docs/api-reference/webgl/buffer","docs/api-reference/webgl/program":"/docs/api-reference/webgl/program","../../webgl/program":"/docs/api-reference/webgl/program","docs/api-reference/webgl/moving-data":"/docs/api-reference/webgl/moving-data","../../webgl/moving-data":"/docs/api-reference/webgl/moving-data","docs/api-reference/webgl/framebuffer":"/docs/api-reference/webgl/framebuffer","../../webgl/framebuffer":"/docs/api-reference/webgl/framebuffer","docs/api-reference/webgl/vertex-array-object":"/docs/api-reference/webgl/vertex-array-object","../../webgl/vertex-array-object":"/docs/api-reference/webgl/vertex-array-object","docs/api-reference/webgl/vertex-array":"/docs/api-reference/webgl/vertex-array","../../webgl/vertex-array":"/docs/api-reference/webgl/vertex-array","docs/api-reference/shadertools/effects-shader-modules":"/docs/api-reference/shadertools/effects-shader-modules","../effects-shader-modules":"/docs/api-reference/shadertools/effects-shader-modules","docs/api-reference/webgl/context/feature-checking":"/docs/api-reference/webgl/context/feature-checking","../../webgl/context/feature-checking":"/docs/api-reference/webgl/context/feature-checking","docs/api-reference/engine/animation-loop":"/docs/api-reference/engine/animation-loop","../../engine/animation-loop":"/docs/api-reference/engine/animation-loop","docs/api-reference/engine/model":"/docs/api-reference/engine/model","../../engine/model":"/docs/api-reference/engine/model","docs/api-reference/engine/transform":"/docs/api-reference/engine/transform","../../engine/transform":"/docs/api-reference/engine/transform","docs/api-reference/webgl/texture":"/docs/api-reference/webgl/texture","../../webgl/texture":"/docs/api-reference/webgl/texture","docs/api-reference/gltools/parameter-setting":"/docs/api-reference/gltools/parameter-setting","../../gltools/parameter-setting":"/docs/api-reference/gltools/parameter-setting","docs/upgrade-guide":"/docs/upgrade-guide","../../../upgrade-guide":"/docs/upgrade-guide","docs/whats-new":"/docs/whats-new","../../../whats-new":"/docs/whats-new"},"slug":"docs/api-reference/shadertools/assemble-shaders","toc":"docs"}}}