<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-legacy/legacy-upgrade-guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Legacy Upgrade Guide | luma.gl</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://luma.gl/docs/legacy/legacy-upgrade-guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Legacy Upgrade Guide | luma.gl"><meta data-rh="true" name="description" content="This page contains upgrade guides for older luma.gl releases (up through v8.5). For upgrading to luma.gl v9, refer to the main Upgrade Guide."><meta data-rh="true" property="og:description" content="This page contains upgrade guides for older luma.gl releases (up through v8.5). For upgrading to luma.gl v9, refer to the main Upgrade Guide."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://luma.gl/docs/legacy/legacy-upgrade-guide"><link data-rh="true" rel="alternate" href="https://luma.gl/docs/legacy/legacy-upgrade-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://luma.gl/docs/legacy/legacy-upgrade-guide" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.73cc160a.css">
<script src="/assets/js/runtime~main.9c131655.js" defer="defer"></script>
<script src="/assets/js/main.9667d192.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.png" alt="vis.gl Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.png" alt="vis.gl Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">luma.gl</b></a><a class="navbar__item navbar__link" href="/examples">Examples</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/docs/tutorials">Tutorials</a><a href="https://medium.com/vis-gl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/visgl/luma.gl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current,docs-examples-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/whats-new">What&#x27;s New</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/upgrade-guide">Upgrade Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/tutorials/">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/api-guide/">API Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/api-reference/">API Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/developer-guide/">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/legacy/porting-guide">Legacy Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/legacy/porting-guide">Porting Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/legacy/legacy-upgrade-guide">Legacy Upgrade Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/legacy/legacy-whats-new">Legacy What&#x27;s New</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Legacy Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Legacy Upgrade Guide</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Legacy Upgrade Guide</h1>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This page contains upgrade guides for older luma.gl releases (up through v8.5). For upgrading to luma.gl v9, refer to the main <a href="/docs/upgrade-guide">Upgrade Guide</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v85">Upgrading to v8.5<a class="hash-link" aria-label="Direct link to Upgrading to v8.5" title="Direct link to Upgrading to v8.5" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v85">​</a></h2>
<p><strong>Transpilation Changes</strong></p>
<ul>
<li>The <code>&quot;module&quot;</code> entry point is now only lightly transpiled for the most commonly used evergreen browsers. This change offers significant savings on bundle size. If your application needs to support older browsers such as IE 11, make sure to include <code>node_modules</code> in your babel config.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v80">Upgrading to v8.0<a class="hash-link" aria-label="Direct link to Upgrading to v8.0" title="Direct link to Upgrading to v8.0" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v80">​</a></h2>
<p>The key goals of luma.gl v8.0 were to simplify the core architecture and significantly improve performance. The number of modules has been reduced from 14 to 9, and they are now structured around layers of abstraction (high-level to low-level) to clarify the relationship between them. Unfinished and rarely-used components have been removed, reducing the complexity of the API and leading to significant performance gains (see <a href="/docs/whats-new">What&#x27;s New</a>) for details).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="module-restructure">Module Restructure<a class="hash-link" aria-label="Direct link to Module Restructure" title="Direct link to Module Restructure" href="/docs/legacy/legacy-upgrade-guide#module-restructure">​</a></h4>
<p>The module structure has been significantly changed for v8.0 with the intention of clarifying the purpose of each module and the relationships between them.</p>
<table><thead><tr><th>New Module</th><th>Purpose</th><th>Components from v7</th></tr></thead><tbody><tr><td>constants</td><td>WebGL enum values</td><td>Same as before</td></tr><tr><td>shadertools</td><td>Tools for manipulating and composing shader text</td><td>shadertools and effects (formerly glfx)</td></tr><tr><td>gltools</td><td>Creation, tooling and polyfilling for the WebGL context</td><td>webgl2-polyfill and webgl-state-tracker</td></tr><tr><td>webgl</td><td>Wrapper classes for WebGL</td><td>Same as before</td></tr><tr><td>core</td><td>Single module re-exporting key parts of engine, webgl, gltools, shadertools</td><td>Changes described below</td></tr><tr><td>engine</td><td>High-level drawing APIs</td><td>core/model, engine/animation-loop, core/resource-management, addons/animation, core/geometry, core/transform</td></tr><tr><td>debug</td><td>Debug tooling for the other modules</td><td>Same as before</td></tr><tr><td>test-utils</td><td>Test tooling for the other modules</td><td>Same as before</td></tr><tr><td>experimental</td><td>Experimental, unsupported APIs</td><td>core/scenegraph, gpgpu, addons/gltf, addons/webvr</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes">Breaking changes<a class="hash-link" aria-label="Direct link to Breaking changes" title="Direct link to Breaking changes" href="/docs/legacy/legacy-upgrade-guide#breaking-changes">​</a></h4>
<ul>
<li><code>Texture2D</code>&#x27;s <code>unpackFlipY</code> option is removed. This change ensures that all data sources (Image, ImageBitmap, typed array) are treated consistently. As a result, textures created from Image objects and URL strings are now y-flipped from the v7.3 default. To get the old behavior, specify the <code>pixelStore</code> option:</li>
</ul>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Texture2D</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pixelStore</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">GL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">UNPACK_FLIP_Y_WEBGL</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>createGLContext</code> will no longer attempt to create a headlessgl context under node.js. One can either create headless context externally and use <code>instrumentGLContext</code> to prepare it for use with luma.gl or use <code>createHeadlessContext</code> from <code>@luma.gl/test-utils</code> to create a headlessgl context.</li>
<li><code>registerShaderModules</code> has been removed. Modules can be imported and used directly where necessary.</li>
<li><code>createShaderHook</code> and <code>createModuleInjection</code> have been removed. Use <code>ProgramManager.getDefaultProgramManger(gl).addShaderHook</code> &amp;&amp; the shader module <a href="/docs/api-guide/shaders/shader-modules">inject field</a> instead.</li>
<li><code>ProgramManager.getDefaultProgramManger(gl).addModuleInjection</code> been removed. Use the shader module <a href="/docs/api-guide/shaders/shader-modules">inject field</a> instead.</li>
<li><code>getParameter</code> and <code>setParameter</code> have been removed. Use <code>getParameters</code> and <code>setParameters</code> instead.</li>
<li>The following are no longer exported by @luma.gl/core, but can still be imported from the modules indicated:</li>
</ul>
<table><thead><tr><th></th><th>Available in</th></tr></thead><tbody><tr><td>Query, VertexArrayObject, VertexArray, UniformBufferLayout, Shader, VertexShader, FragmentShader, clearBuffer, clearBuffer, copyToDataUrl, copyToImage, blit, setPathPrefix, loadFile, loadImage</td><td>@luma.gl/webgl</td></tr><tr><td>resizeGLContext</td><td>@luma.gl/gltools</td></tr><tr><td>combineInjects, lights, getQualifierDetails, getPassthroughFS, typeToChannelSuffix, typeToChannelCount, convertToVec4</td><td>@luma.gl/shadertools</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="smaller-changes">Smaller changes<a class="hash-link" aria-label="Direct link to Smaller changes" title="Direct link to Smaller changes" href="/docs/legacy/legacy-upgrade-guide#smaller-changes">​</a></h4>
<ul>
<li>Functions are no longer accepted as uniform values to the <code>Model</code> class. The same effect can be achieved by updating the uniform values each frame prior to drawing.</li>
<li><code>BaseModel</code> and <code>Model</code> have been consolidated in <code>Model</code>. <code>Model</code> can be used as a substitute for <code>BaseModel</code> where necessary.</li>
<li><code>AmbientLight</code>, <code>DirectionalLight</code>, <code>PointLight</code>, <code>PhongMaterial</code>, <code>PBRMaterial</code>, <code>CameraNode</code> have been removed from @luma.gl/core. These were either empty classes or simple data objects and so can be replaced by plain JavaScript objects in most cases.</li>
<li><code>ShaderCache</code> has been removed and superseded by <code>ProgramManager</code>.</li>
<li><code>VertexArray.getDrawParams</code> no longer takes overrides as an argument. The calling function can manually override values as needed.</li>
<li>@luma.gl/main has been removed. Use individual modules instead.</li>
<li><code>Multipass</code> classes have been removed.</li>
<li>Seer support has been removed.</li>
<li>Timeline and Keyframes have been moved from @luma.gl/addons to @luma.gl/engine.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v73">Upgrading to v7.3<a class="hash-link" aria-label="Direct link to Upgrading to v7.3" title="Direct link to Upgrading to v7.3" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v73">​</a></h2>
<p><code>ProgramManager</code> has replaced <code>ShaderCache</code> in the <code>Model</code> class as a more robust resource manager. Use of the <code>ShaderCache</code> with <code>Model</code> will not affect functionality in any way, but it is now a no-op.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v70">Upgrading to v7.0<a class="hash-link" aria-label="Direct link to Upgrading to v7.0" title="Direct link to Upgrading to v7.0" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v70">​</a></h2>
<p>luma.gl v7.0 represents a major overhaul of the API. The majority of changes are in areas that are only infrequently used by applications, and the intention is that most applications should only require very light porting.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="loading-functions-removed">Loading Functions Removed<a class="hash-link" aria-label="Direct link to Loading Functions Removed" title="Direct link to Loading Functions Removed" href="/docs/legacy/legacy-upgrade-guide#loading-functions-removed">​</a></h4>
<p>Extensive loading functionality is now provided by a new companion framework <a href="https://loaders.gl/" target="_blank" rel="noopener noreferrer">loaders.gl</a> and because of this, most of the limited legacy luma.gl loading functions have been removed.</p>
<p>For the most common case (loading of images for use with textures), loading functions are no longer needed as the <code>data</code> prop in the <code>Texture2D</code> constructor now accepts url strings and <code>Promise</code> objects (this is the new Async Textures function).</p>
<table><thead><tr><th>Removed Function</th><th>Replacement</th></tr></thead><tbody><tr><td><code>loadTexture(url, parameters)</code></td><td><code>new Texture(gl, {data: url, parameters})</code></td></tr><tr><td><code>loadFiles</code></td><td>Multiple calls to <code>loadFile</code></td></tr><tr><td><code>loadImages</code></td><td>Multiple calls to <code>loadImage</code></td></tr><tr><td><code>loadTextures</code></td><td>As per <code>loadTexture</code></td></tr><tr><td><code>loadProgram</code></td><td>Manually load <code>fs</code> and <code>vs</code>, call <code>new Program(gl, {vs, fs})</code></td></tr><tr><td><code>loadModel</code></td><td>call <code>loadFile</code> and copy <code>parseModel</code> code from examples/lesson/16</td></tr><tr><td><code>parseModel</code></td><td>call <code>loadFile</code> and copy <code>parseModel</code> code from examples/lesson/16</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="attribute-class-removed">Attribute Class Removed<a class="hash-link" aria-label="Direct link to Attribute Class Removed" title="Direct link to Attribute Class Removed" href="/docs/legacy/legacy-upgrade-guide#attribute-class-removed">​</a></h4>
<p>This experimental class has been moved to deck.gl and is now an internal class. Attribute accessor API improvements in luma.gl v7 should cover any issue.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sampler-class-removed">Sampler Class Removed<a class="hash-link" aria-label="Direct link to Sampler Class Removed" title="Direct link to Sampler Class Removed" href="/docs/legacy/legacy-upgrade-guide#sampler-class-removed">​</a></h4>
<p>The <code>Sampler</code> class has been removed as its utility was limited and it added complexity to the library. It may be added back in the future if a clear use case arises.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="texture2darray-class-removed">Texture2DArray Class Removed<a class="hash-link" aria-label="Direct link to Texture2DArray Class Removed" title="Direct link to Texture2DArray Class Removed" href="/docs/legacy/legacy-upgrade-guide#texture2darray-class-removed">​</a></h4>
<p>The <code>Texture2DArray</code> class has been removed as its utility was limited and the status of support was unclear due to limited testing. It may be added back in the future if a clear use case arises.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fencesync-class-removed">FenceSync Class Removed<a class="hash-link" aria-label="Direct link to FenceSync Class Removed" title="Direct link to FenceSync Class Removed" href="/docs/legacy/legacy-upgrade-guide#fencesync-class-removed">​</a></h4>
<p>The <code>FenceSync</code> class has been removed as its utility was limited. It may be added back in the future if a clear use case arises. If required, syncing can be done directly through the <code>WebGLFenceSync</code> object.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="framebuffer-and-texture-copy-and-blit-methods">Framebuffer and Texture: Copy and Blit methods<a class="hash-link" aria-label="Direct link to Framebuffer and Texture: Copy and Blit methods" title="Direct link to Framebuffer and Texture: Copy and Blit methods" href="/docs/legacy/legacy-upgrade-guide#framebuffer-and-texture-copy-and-blit-methods">​</a></h4>
<p>Following member function of <code>Framebuffer</code> and <code>Texture</code> classes are no longer supported, instead use the corresponding new global methods:</p>
<table><thead><tr><th>Removed method</th><th>Replacement</th></tr></thead><tbody><tr><td><code>Framebuffer.readPixels</code></td><td><code>readPixelsToArray</code></td></tr><tr><td><code>Framebuffer.readPixelsToBuffer</code></td><td><code>readPixelsToBuffer</code></td></tr><tr><td><code>Frambuffer.copyToDataUrl</code></td><td><code>copyToDataUrl</code></td></tr><tr><td><code>Frambuffer.copyToImage</code></td><td><code>copyToImage</code></td></tr><tr><td><code>Frambuffer.copyToTexture</code></td><td><code>copyToTexture</code></td></tr><tr><td><code>Frambuffer.blit</code></td><td><code>blit</code></td></tr><tr><td><code>Texture.copyFramebuffer</code></td><td><code>copyToTexture</code></td></tr></tbody></table>
<p>Parameters have also changed in some cases, see separate section.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="debug-functionality-moved-to-separate-npm-module">Debug functionality moved to separate npm module<a class="hash-link" aria-label="Direct link to Debug functionality moved to separate npm module" title="Direct link to Debug functionality moved to separate npm module" href="/docs/legacy/legacy-upgrade-guide#debug-functionality-moved-to-separate-npm-module">​</a></h4>
<p>To reduce bundle size and increase separation of concerns, debug functionality is now more cleanly separated from the core library and needs to be imported from a separate npm module:</p>
<p>To upgrade, install the new module</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install @luma.gl/debug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And replace</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;luma.gl/debug&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>with</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@luma.gl/debug&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="model">Model<a class="hash-link" aria-label="Direct link to Model" title="Direct link to Model" href="/docs/legacy/legacy-upgrade-guide#model">​</a></h4>
<p>Changes:</p>
<ul>
<li><code>Model</code> no longer extends <code>ScenegraphNode</code>. This ensures that applications that do not need scenegraph support do not need to include scenegraph related code. Use the new <code>ModelNode</code> class to inject <code>Models</code> into scenegraphs.</li>
</ul>
<p>Deletions:</p>
<ul>
<li>Redraw flag handling has been removed: <code>Model.setNeedsRedraw()</code> and <code>Model.getNeedsRedraw()</code>.</li>
</ul>
<p>Additions:</p>
<ul>
<li>A new <code>Model.isAnimated()</code> method is provided, indicating that redraws are required every frame.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="geometry">Geometry<a class="hash-link" aria-label="Direct link to Geometry" title="Direct link to Geometry" href="/docs/legacy/legacy-upgrade-guide#geometry">​</a></h4>
<p>The <code>Geometry</code> class has been simplified and is now a conceptually &quot;immutable&quot; class that holds typed arrays and accessor metatadata describing attributes for a geometry.</p>
<table><thead><tr><th>Removal</th><th>Replacement</th><th>Reason for Change</th></tr></thead><tbody><tr><td><code>Geometry.drawMode</code> no longer accepts <code>String</code> values</td><td><code>Geometry.DRAW_MODE</code> enum</td><td>API simplification</td></tr><tr><td><code>Geometry.setNeedsRedraw()</code></td><td>N/A</td><td>Not needed for immutable geometry</td></tr><tr><td><code>Geometry.getNeedsRedraw()</code></td><td>N/A</td><td>Not needed for immutable geometry</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="buffer">Buffer<a class="hash-link" aria-label="Direct link to Buffer" title="Direct link to Buffer" href="/docs/legacy/legacy-upgrade-guide#buffer">​</a></h4>
<table><thead><tr><th>Removed Method</th><th>Replacement</th><th>Reason for Change</th></tr></thead><tbody><tr><td><code>Buffer.updateAccessor(...)</code></td><td><code>Buffer.setAccessor(new Accessor(buffer.accessor, ...)</code></td><td>Decoupling accessors from <code>Buffer</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="framebuffer">Framebuffer<a class="hash-link" aria-label="Direct link to Framebuffer" title="Direct link to Framebuffer" href="/docs/legacy/legacy-upgrade-guide#framebuffer">​</a></h4>
<p>To maximize rendering performance, the default framebuffer is no longer preserved between frames.</p>
<p>The most common use case for preserving the draw buffer is capturing canvas contents into an image via <code>toDataURL</code>. This can now be done via <code>AnimationLoop.toDataURL</code> which returns a <code>Promise</code> that resolves to the canvas data URL:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dataURL </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> animationLoop</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toDataURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">snapshotImage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">src </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dataURL</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>More generally, moving code that depends on canvas contents to the end of <code>onRender</code>, after all draw operations, will ensure that canvas contents are available.</p>
<p>Prior behaviour can re-enabled using the <code>glOptions</code> argument to the <code>createGLContext</code> or <code>AnimationLoop</code> constructors:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AnimationLoop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    preserveDrawingBuffer</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that setting <code>preserveDrawingBuffers</code> may result in a performance drop on some platforms.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="query">Query<a class="hash-link" aria-label="Direct link to Query" title="Direct link to Query" href="/docs/legacy/legacy-upgrade-guide#query">​</a></h4>
<p>Use <code>Query.getTimerMilliseconds</code> to retrieve timer results in milliseconds. <code>Query.getResult</code> now returns raw query results.</p>
<p>To improve performance and simplify the library, support for tracking <code>Query</code> instances with promises has changed: The <code>Query</code> constructor no longer takes <code>onComplete</code> and <code>onError</code> callbacks, and <code>pollGLContext</code> has been removed. Instead <code>Query.createPoll</code> now provides a simple, optional promise-based API.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="copy-and-blit-parameter-unification">Copy And Blit Parameter Unification<a class="hash-link" aria-label="Direct link to Copy And Blit Parameter Unification" title="Direct link to Copy And Blit Parameter Unification" href="/docs/legacy/legacy-upgrade-guide#copy-and-blit-parameter-unification">​</a></h4>
<p>Names of certain parameters to these methods have been unified in an effort to reduce confusion and use the same conventions across all functions implementing image read-back, copy or blit.</p>
<p>This table lists parameter mapping between old and new function.</p>
<table><thead><tr><th><code>Framebuffer.readPixels</code></th><th><code>readPixelsToArray</code></th></tr></thead><tbody><tr><td>-</td><td><code>source</code></td></tr><tr><td><code>opts.x</code></td><td><code>opts.sourceX</code></td></tr><tr><td><code>opts.y</code></td><td><code>opts.sourceY</code></td></tr><tr><td><code>opts.width</code></td><td><code>opts.sourceWidth</code></td></tr><tr><td><code>opts.height</code></td><td><code>opts.sourceHeight</code></td></tr><tr><td><code>opts.format</code></td><td><code>opts.sourceFormat</code></td></tr><tr><td><code>opts.type</code></td><td><code>opts.sourceType</code></td></tr><tr><td><code>opts.attachment</code></td><td><code>opts.sourceAttachment</code></td></tr><tr><td><code>opts.pixelArray</code></td><td><code>opts.target</code></td></tr></tbody></table>
<table><thead><tr><th><code>Framebuffer.readPixelsToBuffer</code></th><th><code>readPixelsToBuffer</code></th></tr></thead><tbody><tr><td>-</td><td><code>source</code></td></tr><tr><td><code>opts.x</code></td><td><code>opts.sourceX</code></td></tr><tr><td><code>opts.y</code></td><td><code>opts.sourceY</code></td></tr><tr><td><code>opts.width</code></td><td><code>opts.sourceWidth</code></td></tr><tr><td><code>opts.height</code></td><td><code>opts.sourceHeight</code></td></tr><tr><td><code>opts.format</code></td><td><code>opts.sourceFormat</code></td></tr><tr><td><code>opts.type</code></td><td><code>opts.sourceType</code></td></tr><tr><td><code>opts.buffer</code></td><td><code>opts.target</code></td></tr><tr><td><code>opts.byteOffset</code></td><td><code>opts.targetByteOffset</code></td></tr></tbody></table>
<table><thead><tr><th><code>Framebuffer.copyToDataUrl</code></th><th><code>copyToDataUrl</code></th></tr></thead><tbody><tr><td>-</td><td><code>source</code></td></tr><tr><td><code>opts.attachment</code></td><td><code>opts.sourceAttachment</code></td></tr><tr><td><code>opts.maxheight</code></td><td><code>opts.targetMaxHeight</code></td></tr></tbody></table>
<table><thead><tr><th><code>Framebuffer.copyToImage</code></th><th><code>copyToImage</code></th></tr></thead><tbody><tr><td>-</td><td><code>source</code></td></tr><tr><td><code>opts.attachment</code></td><td><code>opts.sourceAttachment</code></td></tr><tr><td><code>opts.image</code></td><td><code>opts.targetImage</code></td></tr></tbody></table>
<table><thead><tr><th><code>Framebuffer.copyToTexture</code></th><th><code>copyToTexture</code></th></tr></thead><tbody><tr><td>-</td><td><code>source</code></td></tr><tr><td><code>opts.target</code></td><td><code>target</code></td></tr><tr><td><code>opts.texture</code></td><td><code>target</code></td></tr><tr><td><code>opts.x</code></td><td><code>opts.sourceX</code></td></tr><tr><td><code>opts.y</code></td><td><code>opts.sourceY</code></td></tr><tr><td><code>opts.xoffset</code></td><td><code>opts.targetX</code></td></tr><tr><td><code>opts.yoffset</code></td><td><code>opts.targetY</code></td></tr><tr><td><code>opts.zoffset</code></td><td><code>opts.targetZ</code></td></tr><tr><td><code>opts.width</code></td><td><code>opts.width</code></td></tr><tr><td><code>opts.height</code></td><td><code>opts.height</code></td></tr><tr><td><code>opts.internalFormat</code></td><td><code>opts.targetInternalFormat</code></td></tr><tr><td><code>opts.mipmapLevel</code></td><td><code>opts.targetMipmapLevel</code></td></tr></tbody></table>
<table><thead><tr><th><code>Texture.copyFramebuffer</code></th><th><code>copyToTexture</code></th></tr></thead><tbody><tr><td><code>opts.framebuffer</code></td><td><code>source</code></td></tr><tr><td><code>opts.target</code></td><td><code>target</code></td></tr><tr><td><code>opts.x</code></td><td><code>opts.sourceX</code></td></tr><tr><td><code>opts.y</code></td><td><code>opts.sourceY</code></td></tr><tr><td><code>opts.width</code></td><td><code>opts.width</code></td></tr><tr><td><code>opts.height</code></td><td><code>opts.height</code></td></tr><tr><td><code>opts.internalFormat</code></td><td><code>opts.targetInternalFormat</code></td></tr><tr><td><code>opts.level</code></td><td><code>opts.targetMipmapLevel</code></td></tr></tbody></table>
<table><thead><tr><th><code>Framebuffer.blit</code></th><th><code>blit</code></th></tr></thead><tbody><tr><td><code>opts.srcFramebuffer</code></td><td><code>source</code></td></tr><tr><td>-</td><td><code>target</code></td></tr><tr><td><code>opts.attachment</code></td><td><code>opts.sourceAttachment</code></td></tr><tr><td><code>opts.srcX0</code></td><td><code>opts.sourceX0</code></td></tr><tr><td><code>opts.srcX1</code></td><td><code>opts.sourceX1</code></td></tr><tr><td><code>opts.srcY0</code></td><td><code>opts.sourceY0</code></td></tr><tr><td><code>opts.srcY1</code></td><td><code>opts.sourceY1</code></td></tr><tr><td><code>opts.dstX0</code></td><td><code>opts.targetX0</code></td></tr><tr><td><code>opts.dstX1</code></td><td><code>opts.targetX1</code></td></tr><tr><td><code>opts.dstY0</code></td><td><code>opts.targetY0</code></td></tr><tr><td><code>opts.dstY1</code></td><td><code>opts.targetY1</code></td></tr><tr><td><code>opts.color</code></td><td><code>opts.color</code></td></tr><tr><td><code>opts.depth</code></td><td><code>opts.depth</code></td></tr><tr><td><code>opts.stencil</code></td><td><code>opts.stencil</code></td></tr><tr><td><code>opts.mask</code></td><td><code>opts.mask</code></td></tr><tr><td><code>opts.filter</code></td><td><code>opts.filter</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="geometry-scenegraph-models">Geometry Scenegraph Models<a class="hash-link" aria-label="Direct link to Geometry Scenegraph Models" title="Direct link to Geometry Scenegraph Models" href="/docs/legacy/legacy-upgrade-guide#geometry-scenegraph-models">​</a></h4>
<p>Geometry scenegraph models have been deprecated. Simply create a <code>Model</code> or <code>ModelNode</code> and explicitly pass a <code>Geometry</code> instance as
an argument, e.g.:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sphere </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  geometry</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SphereGeometry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nlat</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nlong</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    radius</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v60">Upgrading to v6.0<a class="hash-link" aria-label="Direct link to Upgrading to v6.0" title="Direct link to Upgrading to v6.0" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v60">​</a></h2>
<p>luma.gl v6.0 underwent a major API cleanup, resulting in a smaller, easier-to-learn API and smaller application bundles. While there are many smaller changes, the impact on most applications should be limited:</p>
<ul>
<li>Most removed functions were in practice rarely used by applications, and the impact on typical luma.gl applications should be limited.</li>
<li>A number of API changes are related to moving attribute management from <code>Program</code> to <code>VertexArray</code>, however for higher level applications that work with the <code>Model</code> class rather than <code>Program</code> directly, there should not be much impact.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gl-constants-import-path">GL Constants Import Path<a class="hash-link" aria-label="Direct link to GL Constants Import Path" title="Direct link to GL Constants Import Path" href="/docs/legacy/legacy-upgrade-guide#gl-constants-import-path">​</a></h4>
<p>The biggest change for many apps will probably be that the static <code>GL</code> symbol (that contains all WebGL 2 constants) must now be separately imported GL from &#x27;luma.gl/constants&#x27;.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-exports-new-naming-convention">Experimental Exports: New Naming Convention<a class="hash-link" aria-label="Direct link to Experimental Exports: New Naming Convention" title="Direct link to Experimental Exports: New Naming Convention" href="/docs/legacy/legacy-upgrade-guide#experimental-exports-new-naming-convention">​</a></h4>
<p>Experimental exports are now prefixed with underscore (_). The <code>experimental</code> &quot;name space&quot; export has been removed.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// NOW: luma.gl v6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">_Attribute </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> Attribute</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;luma.gl&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// BEFORE: luma.gl v5.x</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">experimental</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;luma.gl&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Attribute</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> experimental</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This change will enable tree-shaking bundlers to remove unused experimental exports, resulting in smaller final application bundles.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="removed-symbols">Removed symbols<a class="hash-link" aria-label="Direct link to Removed symbols" title="Direct link to Removed symbols" href="/docs/legacy/legacy-upgrade-guide#removed-symbols">​</a></h4>
<p>Math functions were moved from luma.gl to the separate math.gl module in v4.1. As of v6.0, they are no longer forwarded by luma.gl and now need to be imported directly from math.gl:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">radians</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> degrees</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Vector2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Vector3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Vector4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Matrix4</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@math.gl/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>luma.gl v6.0 removes a number of previously deprecated symbols. luma.gl will now issue an error rather than a warning if the old usage is detecated.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="constants">Constants<a class="hash-link" aria-label="Direct link to Constants" title="Direct link to Constants" href="/docs/legacy/legacy-upgrade-guide#constants">​</a></h4>
<table><thead><tr><th>Removed symbol</th><th>Replacement</th><th>Reason for change</th></tr></thead><tbody><tr><td><code>GL</code></td><td><code>import {GL} from &#x27;luma.gl/constants&#x27;</code></td><td>Bundle size reduction (by making this import optional).</td></tr><tr><td><code>glGet(name)</code></td><td><code>glGet(gl, name)</code></td><td>Bundle size reduction (Was deprecated in v5.3)</td></tr><tr><td><code>glKey(value)</code></td><td><code>glKey(gl, value)</code></td><td>Bundle size reduction (Was deprecated in v5.3)</td></tr><tr><td><code>glKeyType(value)</code></td><td><code>glKeyType(gl, value)</code></td><td>Bundle size reduction (Was deprecated in v5.3)</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="context">Context<a class="hash-link" aria-label="Direct link to Context" title="Direct link to Context" href="/docs/legacy/legacy-upgrade-guide#context">​</a></h4>
<table><thead><tr><th>Removed symbol</th><th>Replacement</th><th>Reason for change</th></tr></thead><tbody><tr><td><code>deleteGLContest</code></td><td><code>destroyGLContext</code></td><td>Naming audit (Was deprecated in v5.3)</td></tr><tr><td><code>pollContext</code></td><td><code>pollGLContext</code></td><td>Naming audit (Was deprecated in v5.3)</td></tr><tr><td><code>trackContextCreation</code></td><td>N/A</td><td>Rarely used, overly specialized</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="global-functions">Global Functions<a class="hash-link" aria-label="Direct link to Global Functions" title="Direct link to Global Functions" href="/docs/legacy/legacy-upgrade-guide#global-functions">​</a></h4>
<table><thead><tr><th>Removed symbol</th><th>Replacement</th><th>Reason for change</th></tr></thead><tbody><tr><td><code>readPixels</code></td><td><code>Framebuffer.readPixels</code></td><td>Naming audit (was deprecated in v3.0)</td></tr><tr><td><code>FrameBufferObject</code></td><td><code>FrameBuffer</code></td><td>Naming audit (was deprecated in v3.0)</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="animationloop">AnimationLoop<a class="hash-link" aria-label="Direct link to AnimationLoop" title="Direct link to AnimationLoop" href="/docs/legacy/legacy-upgrade-guide#animationloop">​</a></h4>
<table><thead><tr><th>Removed symbol</th><th>Replacement</th><th>Reason for change</th></tr></thead><tbody><tr><td><code>AnimationLoop.setViewParams()</code></td><td><code>AnimationLoop.setProps()</code></td><td>Naming audit</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="program">Program<a class="hash-link" aria-label="Direct link to Program" title="Direct link to Program" href="/docs/legacy/legacy-upgrade-guide#program">​</a></h4>
<table><thead><tr><th>Removed symbol</th><th>Replacement</th><th>Reason for change</th></tr></thead><tbody><tr><td><code>varyingMap</code></td><td>N/A (<code>configuration</code>)</td><td>Program now auto discovers varyings.</td></tr><tr><td><code>Program.setAttributes()</code></td><td><code>VertexArray.setAttributes()</code></td><td>Attribute management moved to <code>VertexArray</code></td></tr><tr><td><code>Program.setBuffers()</code></td><td><code>VertexArray.setAttributes()</code></td><td>Attribute management moved to <code>VertexArray</code></td></tr><tr><td><code>Program.setVertexArray()</code></td><td><code>Program.draw({vertexArray})</code></td><td>No longer needed, just supply a <code>VertexArray</code> to <code>Program.draw()</code></td></tr><tr><td><code>Program.unsetBuffers()</code></td><td>N/A</td><td>No longer needed, just supply a <code>VertexArray</code> to <code>Program.draw()</code></td></tr><tr><td><code>Program.use()</code></td><td><code>gl.useProgram(program.handle)</code></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td><code>getUniformCount()</code></td><td><code>getParameter(GL.ACTIVE_UNIFORMS)</code></td><td>Rarely needed</td></tr><tr><td><code>getUniformInfo()</code></td><td><code>gl.getActiveUniform()</code></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td><code>getUniformLocation()</code></td><td><code>gl.getUniformLocation()</code></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td><code>getUniformValue()</code></td><td><code>gl.getUniform()</code></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td>&#x27;getVarying()&#x27;</td><td></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td>&#x27;getFragDataLocation()&#x27;</td><td></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td>&#x27;getAttachedShaders()&#x27;</td><td></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td>&#x27;getAttributeCount()&#x27;</td><td></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td>&#x27;getAttributeLocation()&#x27;</td><td></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td>&#x27;getAttributeInfo()&#x27;</td><td></td><td>Rarely needed by apps, can use raw WebGL API</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="transformfeedback">TransformFeedback<a class="hash-link" aria-label="Direct link to TransformFeedback" title="Direct link to TransformFeedback" href="/docs/legacy/legacy-upgrade-guide#transformfeedback">​</a></h4>
<table><thead><tr><th>Removed symbol</th><th>Replacement</th><th>Reason for change</th></tr></thead><tbody><tr><td><code>TransformFeedback.pause()</code></td><td><code>gl.pauseTransformFeedback</code></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td><code>TransformFeedback.resume()</code></td><td><code>gl.resumeTransformFeedback</code></td><td>Rarely needed by apps, can use raw WebGL API</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="vertexarray">VertexArray<a class="hash-link" aria-label="Direct link to VertexArray" title="Direct link to VertexArray" href="/docs/legacy/legacy-upgrade-guide#vertexarray">​</a></h4>
<table><thead><tr><th>Removed symbol</th><th>Replacement</th><th>Reason for change</th></tr></thead><tbody><tr><td><code>VertexArray.setBuffers()</code></td><td><code>VertexArray.setAttributes()</code></td><td>API Audit, setAttributes handles more cases.</td></tr><tr><td><code>VertexArray.setGeneric()</code></td><td><code>VertexArray.setConstant()</code></td><td>API Audit, prefer &quot;constant&quot; instead of &quot;generic&quot;</td></tr><tr><td><code>VertexArray.filledLocations()</code></td><td>N/A</td><td>No longer needed.</td></tr><tr><td><code>VertexArray.clearBindings()</code></td><td><code>VertexArray.reset()</code></td><td>API Audit</td></tr><tr><td><code>VertexArray.setLocations()</code></td><td><code>VertexArray.constructor({program})</code></td><td>Autodetected from <code>program</code> parameter</td></tr><tr><td><code>VertexArray.setGenericValues()</code></td><td><code>VertexArray.setConstant()</code></td><td>API Audit, prefer &quot;constant&quot; instead of &quot;generic&quot;</td></tr><tr><td><code>VertexArray.setDivisor()</code></td><td><code>gl.vertexAttribDivisor()</code></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td><code>VertexArray.enable()</code></td><td><code>gl.enableVertexAttribArray()</code></td><td>Rarely needed by apps, can use raw WebGL API</td></tr><tr><td><code>VertexArray.disable()</code></td><td><code>gl.disableVertexAttribArray()</code></td><td>Rarely needed by apps, can use raw WebGL API</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v53">Upgrading to v5.3<a class="hash-link" aria-label="Direct link to Upgrading to v5.3" title="Direct link to Upgrading to v5.3" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v53">​</a></h2>
<p>v5.3 deprecates a number of symbols. It is recommended that you replace their usage in your source code.</p>
<table><thead><tr><th>Deprecated symbol</th><th>Replacement</th><th>Reason</th></tr></thead><tbody><tr><td><code>GL</code></td><td><code>import {GL} from &#x27;luma.gl/constants&#x27;</code></td><td>Bundle size concerns</td></tr><tr><td><code>deleteGLContest</code></td><td><code>destroyGLContext</code></td><td>API Audit: Naming alignment</td></tr><tr><td><code>pollContext</code></td><td><code>pollGLContext</code></td><td>API Audit: Naming alignment</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v52">Upgrading to v5.2<a class="hash-link" aria-label="Direct link to Upgrading to v5.2" title="Direct link to Upgrading to v5.2" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v52">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-under-nodejs">Running under Node.js<a class="hash-link" aria-label="Direct link to Running under Node.js" title="Direct link to Running under Node.js" href="/docs/legacy/legacy-upgrade-guide#running-under-nodejs">​</a></h4>
<p><a href="/docs/tutorials/">Using with Node</a>: <code>&quot;import luma.gl/headless&quot;</code> is no longer required for luma.gl to load headless gl and the usage has been deprecated. You can now simply remove any such import statements from your code.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-debug-contexts">Using Debug Contexts<a class="hash-link" aria-label="Direct link to Using Debug Contexts" title="Direct link to Using Debug Contexts" href="/docs/legacy/legacy-upgrade-guide#using-debug-contexts">​</a></h4>
<p><a href="/docs/developer-guide/debugging">Debugging</a>: The Khronos group&#x27;s <code>WebGLDeveloperTools</code> are automatically installed when luma.gl is installed, but are not actually bundled into the application unless explicitly imported. This avoids impacting the size of production bundles built on luma.gl that typically do not need debug support.</p>
<p>To use debug support, first import the debug tools, then call <code>getDebugContext</code> to create a debug contexts from a normal WebGL context:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;luma.gl/debug&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> gl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getDebugContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v50">Upgrading to v5.0<a class="hash-link" aria-label="Direct link to Upgrading to v5.0" title="Direct link to Upgrading to v5.0" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v50">​</a></h2>
<p>Please read this documentation before upgrading your luma.gl dependency from v4 to v5. In v5 a number of previously deprecated features have been removed and a number of additional deprecations have been made at the same time.</p>
<p>Before upgrading to v5, it is highly recommended to run your application using latest v4 release, and check the console for any deprecated warnings, if there are any replace deprecated API with newer API as listed below.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="model-class">Model Class<a class="hash-link" aria-label="Direct link to Model Class" title="Direct link to Model Class" href="/docs/legacy/legacy-upgrade-guide#model-class">​</a></h4>
<p>The <code>Model</code> constructor expects a gl context as the first argument.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// v5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">opts</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">program</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Following style construction was deprecated in v4 and is now removed in v5.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// NOT SUPPORTED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">opts</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">program</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="usedevicepixelratio">useDevicePixelRatio<a class="hash-link" aria-label="Direct link to useDevicePixelRatio" title="Direct link to useDevicePixelRatio" href="/docs/legacy/legacy-upgrade-guide#usedevicepixelratio">​</a></h4>
<p><code>useDevicePixelRatio</code> is used as a an argument in <code>AnimationLoop</code> class constructor and <code>pickModels</code> method. It is now deprecated in v5, but still supported with a warning message and will be removed in next major version update. It is recommended to use <code>useDevicePixels</code> instead.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="geometry-1">Geometry<a class="hash-link" aria-label="Direct link to Geometry" title="Direct link to Geometry" href="/docs/legacy/legacy-upgrade-guide#geometry-1">​</a></h4>
<p><code>Geometry</code> class construction with inline attributes was deprecated in v4 and now removed in v5.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// NOT SUPPORTED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Geometry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  positions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Float32Array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  colors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Float32Array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>All attributes should be grouped inside <code>attribute</code> object.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// SUPPORTED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Geometry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> attributes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   positions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Float32Array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   colors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     size</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Float32Array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="removed-features">Removed Features<a class="hash-link" aria-label="Direct link to Removed Features" title="Direct link to Removed Features" href="/docs/legacy/legacy-upgrade-guide#removed-features">​</a></h4>
<p>Following features were deprecated in v3 and v4 are now removed in v5.</p>
<ul>
<li>Global symbols:</li>
</ul>
<table><thead><tr><th>Removed symbol / Usage</th><th>Replacement</th><th>Comment</th></tr></thead><tbody><tr><td><code>withState</code></td><td><code>withParameters</code></td><td>State management</td></tr><tr><td><code>glContextWithState</code></td><td><code>withParameters</code></td><td>State management</td></tr><tr><td><code>withParameters({frameBuffer})</code></td><td><code>withParameters({framebuffer})</code></td><td>State management</td></tr><tr><td><code>MONOLITHIC_SHADERS</code></td><td><code>MODULAR_SHADERS</code></td><td>default shaders</td></tr><tr><td><code>isWebGLContext</code></td><td>N/A, WebGLDevice is always WebGL2</td><td>WebGL context validation</td></tr><tr><td><code>isWebGL2Context</code></td><td>N/A, WebGLDevice is always WebGL2</td><td>WebGL 2 context validation</td></tr><tr><td><code>Camera</code>, <code>PerspectiveCamera</code>, <code>OrthoCamera</code></td><td><code>None</code></td><td></td></tr><tr><td><code>Scene</code></td><td><code>None</code></td><td></td></tr></tbody></table>
<ul>
<li>Texture construction options:</li>
</ul>
<table><thead><tr><th>Removed symbol / Usage</th><th>Replacement</th></tr></thead><tbody><tr><td><code>generateMipmaps</code></td><td><code>mipmaps</code></td></tr><tr><td><code>magFilter</code></td><td><code>parameters[GL.TEXTURE_MAG_FILTER]</code></td></tr><tr><td><code>minFilter</code></td><td><code>parameters[GL.TEXTURE_MIN_FILTER]</code></td></tr><tr><td><code>wrapS</code></td><td><code>parameters[GL.TEXTURE_WRAP_S]</code></td></tr><tr><td><code>wrapT</code></td><td><code>parameters[GL.TEXTURE_WRAP_T]</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v40">Upgrading to v4.0<a class="hash-link" aria-label="Direct link to Upgrading to v4.0" title="Direct link to Upgrading to v4.0" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v40">​</a></h2>
<p>luma.gl v4 is a major release with API changes. Please read this documentation before upgrading your luma.gl&#x27;s dependency from v3 to v4.
In addition, a number of previously deprecated features have been removed and a number of additional deprecations have been made at the same time in this version.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="removed-features-1">Removed Features<a class="hash-link" aria-label="Direct link to Removed Features" title="Direct link to Removed Features" href="/docs/legacy/legacy-upgrade-guide#removed-features-1">​</a></h4>
<p>Some previously deprecated classes and functions have been removed in luma.gl v4 and applications must be updated with the new classes and functions if they are still using these.</p>
<table><thead><tr><th>Symbol</th><th>Replacement</th><th>Comment</th></tr></thead><tbody><tr><td><code>Vec3</code></td><td><code>Vector3</code></td><td><a href="https://github.com/uber-web/math.gl" target="_blank" rel="noopener noreferrer">New math library</a></td></tr><tr><td><code>Mat4</code></td><td><code>Matrix4</code></td><td><a href="https://github.com/uber-web/math.gl" target="_blank" rel="noopener noreferrer">New math library</a></td></tr><tr><td><code>Quat</code></td><td><code>Quaternion</code></td><td><a href="https://github.com/uber-web/math.gl" target="_blank" rel="noopener noreferrer">New math library</a></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deprecated-features">Deprecated Features<a class="hash-link" aria-label="Direct link to Deprecated Features" title="Direct link to Deprecated Features" href="/docs/legacy/legacy-upgrade-guide#deprecated-features">​</a></h4>
<p>Some classes and functions have been deprecated in luma.gl v4. They will continue to function in v4, but a warning in the console will be generated. These functions are expected to be removed in a future major versions of luma.gl.</p>
<table><thead><tr><th>Symbol</th><th>Replacement</th><th>Comment</th></tr></thead><tbody><tr><td><code>withState</code></td><td><code>withParameters</code></td><td>New WebGL state management</td></tr><tr><td><code>glContextWithState</code></td><td><code>withParameters</code></td><td>New WebGL state management</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="model-class-1">Model Class<a class="hash-link" aria-label="Direct link to Model Class" title="Direct link to Model Class" href="/docs/legacy/legacy-upgrade-guide#model-class-1">​</a></h4>
<p>The <code>Model</code> constructor now expects a gl context as the first argument.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// v3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">opts</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">program</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// v4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">opts</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">program</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>the gl context used to be extracted from the supplied program or provided along side with other options, but in luma.gl v4, it is expected as a separate argument to the constructor. This change is because luma.gl v4 emphasizes sharing shaders rather than programs (often indirectly via shader caching / shader assembly), it is less common that a gl context is available.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-to-v30">Upgrading to v3.0<a class="hash-link" aria-label="Direct link to Upgrading to v3.0" title="Direct link to Upgrading to v3.0" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v30">​</a></h2>
<p>V3 was a fairly minor release, a number of deprecations were made.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deprecations">Deprecations<a class="hash-link" aria-label="Direct link to Deprecations" title="Direct link to Deprecations" href="/docs/legacy/legacy-upgrade-guide#deprecations">​</a></h4>
<table><thead><tr><th>Symbol</th><th>Replacement</th><th>Comment</th></tr></thead><tbody><tr><td><code>Vec3</code></td><td><code>Vector3</code></td><td><a href="https://github.com/uber-web/math.gl" target="_blank" rel="noopener noreferrer">New math library</a></td></tr><tr><td><code>Mat4</code></td><td><code>Matrix4</code></td><td><a href="https://github.com/uber-web/math.gl" target="_blank" rel="noopener noreferrer">New math library</a></td></tr><tr><td><code>Quat</code></td><td><code>Quaternion</code></td><td><a href="https://github.com/uber-web/math.gl" target="_blank" rel="noopener noreferrer">New math library</a></td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/visgl/luma.gl/tree/main/docs/../docs/legacy/legacy-upgrade-guide.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/legacy/porting-guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Porting Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/legacy/legacy-whats-new"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Legacy What&#x27;s New</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v85">Upgrading to v8.5</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v80">Upgrading to v8.0</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v73">Upgrading to v7.3</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v70">Upgrading to v7.0</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v60">Upgrading to v6.0</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v53">Upgrading to v5.3</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v52">Upgrading to v5.2</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v50">Upgrading to v5.0</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v40">Upgrading to v4.0</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/legacy/legacy-upgrade-guide#upgrading-to-v30">Upgrading to v3.0</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/../docs">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/deckgl/shared_invite/zt-7oeoqie8-NQqzSp5SLTFMDeNSPxi7eg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack workspace<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://medium.com/vis-gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">vis.gl blog (Medium)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/visgl/luma.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 OpenJS Foundation</div></div></div></footer></div>
</body>
</html>