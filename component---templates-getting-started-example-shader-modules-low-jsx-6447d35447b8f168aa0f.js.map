{"version":3,"sources":["webpack:///../examples/utils/index.js","webpack:///../examples/getting-started/shader-modules-low/app.js","webpack:///./templates/getting-started/example-shader-modules-low.jsx"],"names":["MiniAnimationLoop","start","stop","delete","onFinalize","waitForRender","Promise","_setDisplay","_getCanvas","props","canvas","document","dpr","window","_getContainer","this","container","parent","width","height","style","position","top","appendChild","_removeContainer","removeChild","getRandom","s","c","Math","n","vs","fs","offsetLeftModule","name","inject","offsetRightModule","AppAnimationLoop","getInfo","gl","assembled1","assembleShaders","modules","hookFunctions","vShader1","fShader1","program1","colorLocation1","Float32Array","assembled2","vShader2","fShader2","program2","colorLocation2","positionBuffer","positionLocation1","positionLocation2","resources","requestAnimationFrame","draw","cancelAnimationFrame","animationLoop","Example","render","pageContext","exampleConfig","AnimationLoop","React","Component"],"mappings":"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","file":"component---templates-getting-started-example-shader-modules-low-jsx-6447d35447b8f168aa0f.js","sourcesContent":["/* global window, document */\n\n// Light class implementing the AnimationLoop interface\n// use by examples w/o creating a gl context\nexport class MiniAnimationLoop {\n  static getInfo() {\n    return '';\n  }\n\n  start() {}\n\n  stop() {}\n\n  delete() {}\n\n  onFinalize() {}\n\n  waitForRender() {\n    return Promise.resolve();\n  }\n\n  _setDisplay() {}\n\n  _getCanvas(props = {}) {\n    let canvas;\n    if (props.canvas) {\n      canvas = document.getElementById(props.canvas);\n      const dpr = window.devicePixelRatio || 1;\n      canvas.height = canvas.clientHeight * dpr;\n      canvas.width = canvas.clientWidth * dpr;\n    } else {\n      canvas = document.createElement('canvas');\n      canvas.width = 800;\n      canvas.height = 600;\n      document.body.appendChild(canvas);\n    }\n\n    return canvas;\n  }\n\n  _getContainer(props = {}) {\n    if (this.container) {\n      return this.container;\n    }\n\n    let width;\n    let height;\n\n    this.container = document.createElement('div');\n\n    if (props.canvas) {\n      const canvas = document.getElementById(props.canvas);\n      this.parent = canvas.parentElement;\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n      this.container.style.position = 'relative';\n      this.container.style.top = `-${height}px`;\n    } else {\n      this.parent = document.body;\n      width = 800;\n      height = 800;\n    }\n\n    this.container.style.width = `${width}px`;\n    this.container.style.height = `${height}px`;\n    this.parent.appendChild(this.container);\n\n    return this.container;\n  }\n\n  _removeContainer(props = {}) {\n    this.parent.removeChild(this.container);\n  }\n}\n\n// Create a deterministic pseudorandom number generator\nexport function getRandom() {\n  let s = 1;\n  let c = 1;\n  return () => {\n    s = Math.sin(c * 17.23);\n    c = Math.cos(s * 27.92);\n    return fract(Math.abs(s * c) * 1432.71);\n  };\n}\n\nfunction fract(n) {\n  return n - Math.floor(n);\n}\n","/* global window, requestAnimationFrame, cancelAnimationFrame */\nimport 'core-js';\nimport {assembleShaders} from '@luma.gl/shadertools';\nimport {MiniAnimationLoop} from '../../utils';\n\nconst INFO_HTML = `\nShader Modules using luma.gl's low-level API\n`;\n\n// Base vertex and fragment shader code\nconst vs = `\n  attribute vec2 position;\n  void main() {\n    gl_Position = vec4(position, 0.0, 1.0);\n    OFFSET_POSITION(gl_Position);\n  }\n`;\n\nconst fs = `\n  uniform vec3 color;\n  void main() {\n    gl_FragColor = vec4(color, 1.0);\n  }\n`;\n\nconst offsetLeftModule = {\n  name: 'offsetLeft',\n  inject: {\n    'vs:OFFSET_POSITION': 'position.x -= 0.5;'\n  }\n};\n\nconst offsetRightModule = {\n  name: 'offsetRight',\n  inject: {\n    'vs:OFFSET_POSITION': 'position.x += 0.5;'\n  }\n};\n\nexport default class AppAnimationLoop extends MiniAnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n\n  start(props) {\n    const canvas = this._getCanvas(props);\n    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    gl.clearColor(0, 0, 0, 1);\n\n    // Program 1\n\n    const assembled1 = assembleShaders(gl, {\n      vs,\n      fs,\n      modules: [offsetLeftModule],\n      hookFunctions: ['vs:OFFSET_POSITION(inout vec4 position)']\n    });\n\n    const vShader1 = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vShader1, assembled1.vs);\n    gl.compileShader(vShader1);\n\n    const fShader1 = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fShader1, assembled1.fs);\n    gl.compileShader(fShader1);\n\n    const program1 = gl.createProgram();\n    gl.attachShader(program1, vShader1);\n    gl.attachShader(program1, fShader1);\n    gl.linkProgram(program1);\n    gl.useProgram(program1);\n    const colorLocation1 = gl.getUniformLocation(program1, 'color');\n    gl.uniform3fv(colorLocation1, new Float32Array([1.0, 0.0, 0.0]));\n\n    // Program 2\n\n    const assembled2 = assembleShaders(gl, {\n      vs,\n      fs,\n      modules: [offsetRightModule],\n      hookFunctions: ['vs:OFFSET_POSITION(inout vec4 position)']\n    });\n\n    const vShader2 = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vShader2, assembled2.vs);\n    gl.compileShader(vShader2);\n\n    const fShader2 = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fShader2, assembled2.fs);\n    gl.compileShader(fShader2);\n\n    const program2 = gl.createProgram();\n    gl.attachShader(program2, vShader2);\n    gl.attachShader(program2, fShader2);\n    gl.linkProgram(program2);\n    gl.useProgram(program2);\n    const colorLocation2 = gl.getUniformLocation(program2, 'color');\n    gl.uniform3fv(colorLocation2, new Float32Array([0.0, 0.0, 1.0]));\n\n    const positionBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n    gl.bufferData(\n      gl.ARRAY_BUFFER,\n      new Float32Array([-0.3, -0.5, 0.3, -0.5, 0.0, 0.5]),\n      gl.STATIC_DRAW\n    );\n\n    const positionLocation1 = gl.getAttribLocation(program1, 'position');\n    gl.vertexAttribPointer(positionLocation1, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(positionLocation1);\n\n    const positionLocation2 = gl.getAttribLocation(program2, 'position');\n    gl.vertexAttribPointer(positionLocation2, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(positionLocation2);\n\n    const resources = {\n      gl,\n      positionBuffer,\n      program1,\n      program2\n    };\n\n    resources.rafHandle = requestAnimationFrame(function draw() {\n      resources.rafHandle = requestAnimationFrame(draw);\n\n      gl.clear(gl.COLOR_BUFFER_BIT);\n      gl.useProgram(program1);\n      gl.drawArrays(gl.TRIANGLES, 0, 3);\n      gl.useProgram(program2);\n      gl.drawArrays(gl.TRIANGLES, 0, 3);\n    });\n\n    gl.deleteShader(vShader1);\n    gl.deleteShader(fShader1);\n    gl.deleteShader(vShader2);\n    gl.deleteShader(fShader2);\n\n    this.resources = resources;\n  }\n\n  stop() {\n    cancelAnimationFrame(this.resources.rafHandle);\n  }\n\n  delete() {\n    const {gl, positionBuffer, program1, program2} = this.resources;\n    gl.deleteBuffer(positionBuffer);\n    gl.deleteProgram(program1);\n    gl.deleteProgram(program2);\n  }\n}\n\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/getting-started/shader-modules-low/app';\n\nexport default class Example extends React.Component {\n  render() {\n    const { pageContext } = this.props;\n    const exampleConfig = (pageContext && pageContext.exampleConfig) || {};\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={exampleConfig} />\n    );\n  }\n}\n"],"sourceRoot":""}