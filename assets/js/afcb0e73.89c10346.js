/*! For license information please see afcb0e73.89c10346.js.LICENSE.txt */
"use strict";(self.webpackChunkwebsite_docusaurus=self.webpackChunkwebsite_docusaurus||[]).push([[8174],{920:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var i=o(4848),t=o(8453);const a={},r="AnimationLoopTemplate",s={id:"api-reference/engine/animation-loop-template",title:"AnimationLoopTemplate",description:"AnimationLoopTemplate is a helper class that creates and manages the application's render loop.",source:"@site/../docs/api-reference/engine/animation-loop-template.md",sourceDirName:"api-reference/engine",slug:"/api-reference/engine/animation-loop-template",permalink:"/docs/api-reference/engine/animation-loop-template",draft:!1,unlisted:!1,editUrl:"https://github.com/visgl/luma.gl/tree/main/docs/../docs/api-reference/engine/animation-loop-template.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"AnimationLoop",permalink:"/docs/api-reference/engine/animation-loop"},next:{title:"AsyncTexture",permalink:"/docs/api-reference/engine/async-texture"}},c={},l=[{value:"Usage",id:"usage",level:2},{value:"Types",id:"types",level:2},{value:"Global Functions",id:"global-functions",level:2},{value:"makeAnimationLoop",id:"makeanimationloop",level:3},{value:"Methods",id:"methods",level:2},{value:"constructor",id:"constructor",level:3},{value:"onFinalize",id:"onfinalize",level:3},{value:"onRender",id:"onrender",level:3}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"animationlooptemplate",children:"AnimationLoopTemplate"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AnimationLoopTemplate"})," is a helper class that creates and manages the application's render loop."]}),"\n",(0,i.jsxs)(n.p,{children:["The motivation for this class (compared to directly using ",(0,i.jsx)(n.a,{href:"./animation-loop",children:(0,i.jsx)(n.code,{children:"AnimationLoop"})})," class)\nis that the application can create GPU resources in the constructor\nso that resources can be unconditionally typed in the subclass. This can remove some code clutter in applications"]}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import {AnimationLoopTemplate, makeAnimationLoop} from `@luma.gl/engine`;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Autocreates a canvas/context"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import {AnimationLoopTemplate, ClipSpace} from '@luma.gl/engine';\n\nclass AppAnimationLoopTemplate extends AnimationLoopTemplate {\n  // This resource is always a valid instance since it is initialized in constructor\n  // i.e. no need to type it as `clipSpaceQuad: ClipSpace | null = null;``\n  clipSpaceQuad: ClipSpace;\n\n  constructor({device}) {\n    // Keys in the object returned here will be available in onRender\n    this.clipSpaceQuad = new ClipSpace({gl, fs: FRAGMENT_SHADER});\n  }\n\n  onFinalize() {\n    this.clipSpaceQuad.destroy();\n  }\n\n  onRender({tick}) {\n    // Tick is auto updated by AnimationLoopTemplate\n    this.clipSpaceQuad.setUniforms({uTime: tick * 0.01});\n    this.clipSpaceQuad.draw();\n  }\n};\n\nconst animationLoop = makeAnimationLoop(AppAnimationLoopTemplate).start();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"types",children:"Types"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"AnimationLoopTemplate"})," class uses the ",(0,i.jsx)(n.code,{children:"AnimationLoopProps"})," and ",(0,i.jsx)(n.code,{children:"AnimationProps"})," type docunented in the ",(0,i.jsx)(n.a,{href:"./animation-loop",children:(0,i.jsx)(n.code,{children:"AnimationLoop"})})," page."]}),"\n",(0,i.jsx)(n.h2,{id:"global-functions",children:"Global Functions"}),"\n",(0,i.jsx)(n.h3,{id:"makeanimationloop",children:"makeAnimationLoop"}),"\n",(0,i.jsxs)(n.p,{children:["Use to instantiate an ",(0,i.jsx)(n.code,{children:"AnimateionLoopTemplate"})," subclass"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"makeAnimationLoop(AnimationLoopTemplateCtor: typeof AnimationLoopTemplate, props?: MakeAnimationLoopProps) : AnimationLoop\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"props"})," - forwarded to the ",(0,i.jsx)(n.code,{children:"AnimationLoop"})," constructor.  If no ",(0,i.jsx)(n.code,{children:"device"})," is passed, ",(0,i.jsx)(n.code,{children:"makeAimationLoop()"})," will create one using ",(0,i.jsx)(n.code,{children:"type: 'best-availble'"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.h3,{id:"constructor",children:"constructor"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"AnimationLoopTemplate"})," class should not be constructed directly. Use the ",(0,i.jsx)(n.code,{children:"makeAnimationLoop()"})," function to create an\n",(0,i.jsx)(n.code,{children:"AnimationLoop"})," from an ",(0,i.jsx)(n.code,{children:"AnimationLoop"})," template"]}),"\n",(0,i.jsx)(n.h3,{id:"onfinalize",children:"onFinalize"}),"\n",(0,i.jsxs)(n.p,{children:["The application overrides the ",(0,i.jsx)(n.code,{children:"onFinalize`` method to destroy any (GPU) resources created in he constructor. Parameters are identical to "}),"AnimationLoopProp.onFinalize`."]}),"\n",(0,i.jsx)(n.h3,{id:"onrender",children:"onRender"}),"\n",(0,i.jsxs)(n.p,{children:["The application overrides the ",(0,i.jsx)(n.code,{children:"onFinalize`` method to render each frame. Parameters are identical to "}),"AnimationLoopProp.onRender`."]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},1020:(e,n,o)=>{var i=o(6540),t=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,o){var i,a={},l=null,p=null;for(i in void 0!==o&&(l=""+o),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(p=n.ref),n)r.call(n,i)&&!c.hasOwnProperty(i)&&(a[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps)void 0===a[i]&&(a[i]=n[i]);return{$$typeof:t,type:e,key:l,ref:p,props:a,_owner:s.current}}n.Fragment=a,n.jsx=l,n.jsxs=l},4848:(e,n,o)=>{e.exports=o(1020)},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>s});var i=o(6540);const t={},a=i.createContext(t);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);