"use strict";(self.webpackChunkwebsite_docusaurus=self.webpackChunkwebsite_docusaurus||[]).push([[3187],{1075:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>a});var s=n(4848),i=n(8453);const t={},c="Device",d={id:"api-reference/core/device",title:"Device",description:"The Device class manages the application's connection with the GPU,",source:"@site/../docs/api-reference/core/device.md",sourceDirName:"api-reference/core",slug:"/api-reference/core/device",permalink:"/docs/api-reference/core/device",draft:!1,unlisted:!1,editUrl:"https://github.com/visgl/luma.gl/tree/master/docs/../docs/api-reference/core/device.md",tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Adapter",permalink:"/docs/api-reference/core/adapter"},next:{title:"DeviceInfo",permalink:"/docs/api-reference/core/device-info"}},l={},a=[{value:"Usage",id:"usage",level:2},{value:"Types",id:"types",level:2},{value:"<code>DeviceProps</code>",id:"deviceprops",level:3},{value:"WebGLContextAttributes",id:"webglcontextattributes",level:4},{value:"Fields",id:"fields",level:2},{value:"id",id:"id",level:3},{value:"statsManager",id:"statsmanager",level:3},{value:"props",id:"props",level:3},{value:"userData",id:"userdata",level:3},{value:"info",id:"info",level:3},{value:"features",id:"features",level:3},{value:"limits",id:"limits",level:3},{value:"isTextureFormatSupported",id:"istextureformatsupported",level:3},{value:"isTextureFormatFilterable",id:"istextureformatfilterable",level:3},{value:"isTextureFormatRenderable",id:"istextureformatrenderable",level:3},{value:"isLost",id:"islost",level:3},{value:"lost",id:"lost",level:3},{value:"canvasContext",id:"canvascontext",level:3},{value:"Methods",id:"methods",level:2},{value:"constructor",id:"constructor",level:3},{value:"destroy()",id:"destroy",level:3},{value:"createCanvasContext()",id:"createcanvascontext",level:3},{value:"getDefaultCanvasContext()",id:"getdefaultcanvascontext",level:3},{value:"submit",id:"submit",level:3},{value:"createBuffer",id:"createbuffer",level:3},{value:"createTexture",id:"createtexture",level:3},{value:"createSampler",id:"createsampler",level:3},{value:"createFramebuffer",id:"createframebuffer",level:3},{value:"createShader",id:"createshader",level:3},{value:"createRenderPipeline",id:"createrenderpipeline",level:3},{value:"createComputePipeline",id:"createcomputepipeline",level:3},{value:"beginRenderPass",id:"beginrenderpass",level:3},{value:"beginComputePass",id:"begincomputepass",level:3},{value:"loseDevice",id:"losedevice",level:3}];function o(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"device",children:"Device"})}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"Device"})," class manages the application's connection with the GPU,\nproviding methods to:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"create GPU resources"}),"\n",(0,s.jsx)(r.li,{children:"query the capabilities of the GPU"}),"\n",(0,s.jsx)(r.li,{children:"detect GPU error conditions."}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["A ",(0,s.jsx)(r.code,{children:"Device"})," instance is created through the ",(0,s.jsx)(r.code,{children:"luma.createDevice(...)"})," method.\nNote that the actual ",(0,s.jsx)(r.code,{children:"Device"})," returned by ",(0,s.jsx)(r.code,{children:"luma.createDevice()"})," will be either\na ",(0,s.jsx)(r.code,{children:"WebGLDevice"})," wrapping a WebGL context or a ",(0,s.jsx)(r.code,{children:"WebGPUDevice"})," wrapping a WebGPU device\nbased on what the run-time environment supports."]}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"Device"})," API is intentionally designed to be similar to the\nWebGPU ",(0,s.jsx)(r.a,{href:"https://www.w3.org/TR/webgpu/#gpu-device",children:(0,s.jsx)(r.code,{children:"GPUDevice"})})," class API\nwith changes to enable a WebGL2 implementation."]}),"\n",(0,s.jsx)(r.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsxs)(r.p,{children:["Create a new ",(0,s.jsx)(r.code,{children:"Device"}),", auto creating a canvas and a new WebGL 2 context. See ",(0,s.jsx)(r.a,{href:"/docs/api-reference/core/luma#lumacreatedevice",children:(0,s.jsx)(r.code,{children:"luma.createDevice()"})}),"."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import {Device} from '@luma.gl/core';\nconst device = new luma.createDevice({type: 'webgl2', ...}); \n"})}),"\n",(0,s.jsxs)(r.p,{children:["Attaching a ",(0,s.jsx)(r.code,{children:"Device"})," to an externally created ",(0,s.jsx)(r.code,{children:"WebGL2RenderingContext"}),"."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import {Device} from '@luma.gl/core';\nimport {Model} from '@luma.gl/engine';\n\nconst gl = canvas.getContext('webgl2', ...);\nconst device = Device.attach(gl);\n\nconst model = new Model(device, options);\n"})}),"\n",(0,s.jsx)(r.p,{children:"Handle GPU disconnections:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"if (!device.isLost) {\n  console.error('Device lost');\n}\n\nconst {message} = await device.lost;\nconsole.error(message);\n"})}),"\n",(0,s.jsx)(r.h2,{id:"types",children:"Types"}),"\n",(0,s.jsx)(r.h3,{id:"deviceprops",children:(0,s.jsx)(r.code,{children:"DeviceProps"})}),"\n",(0,s.jsx)(r.admonition,{type:"tip",children:(0,s.jsxs)(r.p,{children:["This object can also include all ",(0,s.jsx)(r.a,{href:"/docs/api-reference/core/canvas-context#canvascontextprops",children:(0,s.jsx)(r.code,{children:"CanvasContextProps"})})," properties to configure how a new canvas is created. If a canvas is provided, these are ignored."]})}),"\n",(0,s.jsx)(r.p,{children:"Specifies props to use when luma creates the device."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Property"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"id?: string"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"null"})}),(0,s.jsx)(r.td,{children:"Optional string id, mainly intended for debugging."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"createCanvasContext?: CanvasContextProps"})," | ",(0,s.jsx)(r.code,{children:"true"})]}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"/docs/api-reference/core/canvas-context#canvascontextprops",children:"CanvasContexProps"})}),(0,s.jsxs)(r.td,{children:["Create a default ",(0,s.jsx)(r.code,{children:"CanvasContext"})," for the new ",(0,s.jsx)(r.code,{children:"Device"}),". ",(0,s.jsx)(r.code,{children:"true"})," creates a context with default props."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"powerPreference?: string"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"'high-performance'"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"'default' | 'high-performance' | 'low-power'"})," (WebGL)."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"webgl?: WebGLContextAttributes"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext#contextattributes",children:(0,s.jsx)(r.code,{children:"WebGLContextAttributes"})})}),(0,s.jsxs)(r.td,{children:["Attributes passed on to WebGL (",(0,s.jsx)(r.code,{children:"canvas.getContext('webgl2', props.webgl)"})]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"onError?: (error: Error) => unknown"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"log.error()"})}),(0,s.jsx)(r.td,{children:"Called if an unhandled error is generated by luma.gl."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"onResize?: (ctx: CanvasContext)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"log.info(1)"})}),(0,s.jsx)(r.td,{children:'Called if the size of the "device pixel content box" changes.'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"onVisibilityChange?: (ctx: CanvasContext)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"log.info(1)"})}),(0,s.jsx)(r.td,{children:"Called if the visibility of the canvas changes (window is closed or occluded)."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"onDevicePixelRatioChange?: (ctx: CanvasContext)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"log.info(1)"})}),(0,s.jsx)(r.td,{children:"Called if the DPR changes (perhaps by moving the window to another screen"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"debug?"}),": ",(0,s.jsx)(r.code,{children:"boolean"})]}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"false"})}),(0,s.jsx)(r.td,{children:"Extra checks (wait for shader compilation, framebuffer completion, WebGL API errors will throw exceptions)."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"debugShaders?"}),": ",(0,s.jsx)(r.code,{children:"'errors' 'warnings' 'always' 'never'"})]}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"'error'"})}),(0,s.jsx)(r.td,{children:"Display shader source code with inline errors in the canvas."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"debugFramebuffers?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"false"})}),(0,s.jsx)(r.td,{children:"Show small copy of the contents of updated Framebuffers in the canvas."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"debugWebGL?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"false"})}),(0,s.jsx)(r.td,{children:"traces WebGL API calls to the console (via Khronos WebGLDeveloperTools)."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"debugSpectorJS?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"false"})}),(0,s.jsx)(r.td,{children:"Initialize the SpectorJS WebGL debugger."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"debugSpectorJSUrl?: string"})}),(0,s.jsx)(r.td,{children:"CDN url"}),(0,s.jsx)(r.td,{children:"SpectorJS URL. Override if different SpectorJS version is desired (or if CDN is down)."})]})]})]}),"\n",(0,s.jsx)(r.admonition,{type:"tip",children:(0,s.jsxs)(r.p,{children:["Learn more GPU debugging in our ",(0,s.jsx)(r.a,{href:"/docs/developer-guide/debugging",children:"Debugging"})," guide."]})}),"\n",(0,s.jsx)(r.h4,{id:"webglcontextattributes",children:"WebGLContextAttributes"}),"\n",(0,s.jsxs)(r.p,{children:["For detailed control over WebGL context can specify what ",(0,s.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext#contextattributes",children:(0,s.jsx)(r.code,{children:"WebGLContextAttributes"})})," to use if luma creates the WebGL context."]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:(0,s.jsx)(r.code,{children:"WebGLContextAttributes"})}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"webgl.preserveDrawingBuffers?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"true"})}),(0,s.jsx)(r.td,{children:"Default render target buffers will preserve their values until overwritten. Useful for screen capture."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"webgl.alpha?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"true"})}),(0,s.jsx)(r.td,{children:"Default render target has an alpha buffer."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"webgl.antialias?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"true"})}),(0,s.jsx)(r.td,{children:"Boolean that indicates whether or not to perform anti-aliasing."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"webgl.depth?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"true"})}),(0,s.jsxs)(r.td,{children:["Default render target has a depth buffer of at least ",(0,s.jsx)(r.code,{children:"16"})," bits."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"webgl.premultipliedAlpha?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"true"})}),(0,s.jsx)(r.td,{children:"The page compositor will assume the drawing buffer contains colors with pre-multiplied alpha."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"webgl.stencil?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"false"})}),(0,s.jsxs)(r.td,{children:["Default render target has a stencil buffer of at least ",(0,s.jsx)(r.code,{children:"8"})," bits."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"webgl.desynchronized?: boolean"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"false"})}),(0,s.jsx)(r.td,{children:"Hint to reduce latency by desynchronizing the canvas paint cycle from the event loop (WebGL)."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"webgl.failIfMajorPerformanceCaveat?"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"false"})}),(0,s.jsx)(r.td,{children:"Do not create a Device if the system performance is low (WebGL)."})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:["Note that luma.gl v9.1 and onwards set ",(0,s.jsx)(r.code,{children:"webgl.preserveDrawingBuffers"})," to ",(0,s.jsx)(r.code,{children:"true"})," by default. This can be disabled for some memory savings and a minor performance boost on resource limited devices, such as mobile phones, at the cost of not being able to take screenshots or render to screen without clearing."]}),"\n",(0,s.jsx)(r.h2,{id:"fields",children:"Fields"}),"\n",(0,s.jsx)(r.h3,{id:"id",children:"id"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"readonly id: string\n"})}),"\n",(0,s.jsx)(r.p,{children:"A string identifier, for debug purposes."}),"\n",(0,s.jsx)(r.h3,{id:"statsmanager",children:"statsManager"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"statsManager: StatsManager\n"})}),"\n",(0,s.jsx)(r.p,{children:"Provides access to bags of stats containing information about resource usage and performance of the device."}),"\n",(0,s.jsx)(r.h3,{id:"props",children:"props"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"props: Required<DeviceProps>\n"})}),"\n",(0,s.jsx)(r.p,{children:"A readonly copy of the props that were used to create this device."}),"\n",(0,s.jsx)(r.h3,{id:"userdata",children:"userData"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"userData: Record<string, any>\n"})}),"\n",(0,s.jsx)(r.p,{children:"Reserved for the application."}),"\n",(0,s.jsx)(r.h3,{id:"info",children:"info"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"info: DeviceInfo\n"})}),"\n",(0,s.jsx)(r.p,{children:"Information about the device (vendor, versions etc)."}),"\n",(0,s.jsx)(r.p,{children:"Get debug information about the device:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Field"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vendor"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"GPU vendor (unmasked if possible)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"renderer"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"Renderer (unmasked if possible)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"version"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"WebGL version"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"gpu"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"GPU name"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"gpuBackend?"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"'angle' | 'metal' | 'unknown'"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"shadingLanguage"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsxs)(r.td,{children:["shading language (",(0,s.jsx)(r.code,{children:"'glsl' | 'wgsl'"}),")"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"shadingLanguageVersion"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"number"})}),(0,s.jsx)(r.td,{children:"shading language version"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:"Remarks:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Shading language version is the highest supported version of the device's shading language."}),"\n",(0,s.jsxs)(r.li,{children:["Version numbers are calculated as:  ",(0,s.jsx)(r.code,{children:"<major version> * 100 + <minor version> * 10 + <patch version>"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["The WGSL version is always ",(0,s.jsx)(r.code,{children:"100"})]}),"\n",(0,s.jsxs)(r.li,{children:["The GLSL version is always ",(0,s.jsx)(r.code,{children:"300"})," (WebGL2)."]}),"\n",(0,s.jsx)(r.li,{children:"Sometimes a vendor provides multiple backends (e.g. Apple ANGLE vs Apple Metal)"}),"\n",(0,s.jsx)(r.li,{children:"WebGPU Devices currently do not provide much information due to limitations in the WebGPU API."}),"\n",(0,s.jsxs)(r.li,{children:["WebGL Devices can usually provide rich information (through the ",(0,s.jsx)(r.code,{children:"WEBGL_debug_renderer_info"})," extension)."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"features",children:"features"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"features: Set<DeviceFeature>\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Applications can determine whether the device implements an optional features by checking ",(0,s.jsx)(r.code,{children:"device.features.has(...)"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"limits",children:"limits"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"limits: DeviceLimits\n"})}),"\n",(0,s.jsx)(r.p,{children:"An object with various device limits. WebGPU style."}),"\n",(0,s.jsx)(r.h3,{id:"istextureformatsupported",children:"isTextureFormatSupported"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"isTextureFormatSupported(format: TextureFormat): boolean\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Check if device supports a specific texture format (creation and ",(0,s.jsx)(r.code,{children:"nearest"})," sampling)."]}),"\n",(0,s.jsx)(r.h3,{id:"istextureformatfilterable",children:"isTextureFormatFilterable"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"isTextureFormatFilterable(format: TextureFormat): boolean\n"})}),"\n",(0,s.jsx)(r.p,{children:"Check if linear filtering (sampler interpolation) is supported for a specific texture format."}),"\n",(0,s.jsx)(r.h3,{id:"istextureformatrenderable",children:"isTextureFormatRenderable"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"isTextureFormatRenderable(format: TextureFormat): boolean\n"})}),"\n",(0,s.jsx)(r.p,{children:"Check if device supports rendering to a specific texture format."}),"\n",(0,s.jsx)(r.h3,{id:"islost",children:"isLost"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"isLost: boolean\n"})}),"\n",(0,s.jsx)(r.p,{children:"True if the device is already lost (GPU is disconnected)."}),"\n",(0,s.jsx)(r.h3,{id:"lost",children:"lost"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"lost: Promise<{reason: 'destroyed', message: string}>\n"})}),"\n",(0,s.jsx)(r.p,{children:"Promise that resolves with an error message if the device is lost (GPU is disconnected)."}),"\n",(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsxs)(r.p,{children:["GPU disconnections normally happen when the computer goes to sleep but it can also happen\nwhen too many applications use the GPU, too many ",(0,s.jsx)(r.code,{children:"Device"})," instances are created etc."]})}),"\n",(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsx)(r.p,{children:"Recovering from a lost GPU device is typically challenging as all GPU resources need to be\nrecreated. For applications that auto-save state, it may be better to simply reload the page\nor ask the user to reload the page."})}),"\n",(0,s.jsx)(r.h3,{id:"canvascontext",children:"canvasContext"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"canvasContext?: CanvasContext\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Returns the default ",(0,s.jsx)(r.a,{href:"./canvas-context",children:(0,s.jsx)(r.code,{children:"CanvasContext"})}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["Note that a WebGPU ",(0,s.jsx)(r.code,{children:"Device"})," may not have a canvas context."]}),"\n",(0,s.jsx)(r.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(r.h3,{id:"constructor",children:"constructor"}),"\n",(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"Device"})," is an abstract class and the constructor should not be called directly.\nUse the static ",(0,s.jsx)(r.code,{children:"Device.create()"})," method to create classes."]})}),"\n",(0,s.jsx)(r.h3,{id:"destroy",children:"destroy()"}),"\n",(0,s.jsxs)(r.p,{children:["Releases resources associated with this ",(0,s.jsx)(r.code,{children:"Device"}),"."]}),"\n",(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsxs)(r.p,{children:["WebGPU only. Calling ",(0,s.jsx)(r.code,{children:"device.destroy()"})," on a WebGL ",(0,s.jsx)(r.code,{children:"Device"})," will not immediately release GPU resources.\nThe WebGL API does not provide a context destroy function,\ninstead relying on garbage collection to eventually release the resources."]})}),"\n",(0,s.jsx)(r.admonition,{type:"caution",children:(0,s.jsxs)(r.p,{children:["Interaction between ",(0,s.jsx)(r.code,{children:"Device.destroy()"}),", ",(0,s.jsx)(r.code,{children:"Device.lost"})," and ",(0,s.jsx)(r.code,{children:"Device.isLost"})," is implementation-dependent.\nThe application should not assume that destroying a device triggers a device loss,\nor that the ",(0,s.jsx)(r.code,{children:"lost"})," promise is resolved before any API errors are triggered by access to the destroyed device."]})}),"\n",(0,s.jsx)(r.h3,{id:"createcanvascontext",children:"createCanvasContext()"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createCanvasContext(props?: CanvasContextProps): CanvasContext\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a new ",(0,s.jsx)(r.a,{href:"./canvas-context",children:(0,s.jsx)(r.code,{children:"CanvasContext"})}),"."]}),"\n",(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsx)(r.p,{children:"WebGPU only. WebGL devices can only render into the canvas they were created with."})}),"\n",(0,s.jsx)(r.h3,{id:"getdefaultcanvascontext",children:"getDefaultCanvasContext()"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"getDefaultCanvasContext(): CanvasContext\n"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Returns the primary / default canvas context of a device."}),"\n",(0,s.jsx)(r.li,{children:"Throws an error if no canvas context is available (a WebGPU compute device)."}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["In TypeScript applications this helps applications avoid having to repeatedly check if ",(0,s.jsx)(r.code,{children:"device.canvasContext"})," is null, otherwise the two are equivalent."]}),"\n",(0,s.jsx)(r.h3,{id:"submit",children:"submit"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"submit(): void\n"})}),"\n",(0,s.jsxs)(r.p,{children:["The application should call ",(0,s.jsx)(r.code,{children:"device.submit()"})," after rendering of a frame is complete\nto ensure that the generated command queue is submitted to the GPU."]}),"\n",(0,s.jsx)(r.h3,{id:"createbuffer",children:"createBuffer"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createBuffer(props: BufferProps): Buffer\ncreateBuffer(data: ArrayBuffer | ArrayBufferView): Buffer\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.a,{href:"./resources/buffer",children:(0,s.jsx)(r.code,{children:"Buffer"})})," used to manage memory on the GPU."]}),"\n",(0,s.jsxs)(r.p,{children:["Deduces ",(0,s.jsx)(r.code,{children:"indexType"})," if usage."]}),"\n",(0,s.jsx)(r.h3,{id:"createtexture",children:"createTexture"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createTexture(props: TextureProps): Texture\ncreateTexture(data: Promise<TextureData>): Texture\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.a,{href:"./resources/texture",children:(0,s.jsx)(r.code,{children:"Texture"})}),", used to manage image data memory on the GPU."]}),"\n",(0,s.jsx)(r.h3,{id:"createsampler",children:"createSampler"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createSampler(props: SamplerProps): Sampler\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.a,{href:"./resources/sampler",children:(0,s.jsx)(r.code,{children:"Sampler"})}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"createframebuffer",children:"createFramebuffer"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createFramebuffer(props: FramebufferProps): Framebuffer\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.a,{href:"./resources/framebuffer",children:(0,s.jsx)(r.code,{children:"Framebuffer"})}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"createshader",children:"createShader"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createShader(props: ShaderProps): Shader\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.a,{href:"./resources/shader",children:(0,s.jsx)(r.code,{children:"Shader"})}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"createrenderpipeline",children:"createRenderPipeline"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createRenderPipeline(props: RenderPipelineProps): RenderPipeline\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.a,{href:"./resources/render-pipeline",children:(0,s.jsx)(r.code,{children:"RenderPipeline"})})," (aka program)"]}),"\n",(0,s.jsx)(r.h3,{id:"createcomputepipeline",children:"createComputePipeline"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"createComputePipeline(props: ComputePipelineProps): ComputePipeline\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.a,{href:"./resources/compute-pipeline",children:(0,s.jsx)(r.code,{children:"ComputePipeline"})})," (aka program)"]}),"\n",(0,s.jsx)(r.h3,{id:"beginrenderpass",children:"beginRenderPass"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"beginRenderPass(props: RenderPassProps): RenderPass\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.a,{href:"./resources/render-pass",children:(0,s.jsx)(r.code,{children:"RenderPass"})}),"."]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"props.framebuffer"})," If omitted, renders into the default canvas context's default framebuffer."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"begincomputepass",children:"beginComputePass"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"beginComputePass(props?: ComputePassProps): ComputePass\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.a,{href:"./resources/compute-pass",children:(0,s.jsx)(r.code,{children:"ComputePass"})})," which can be used to bind data and run compute operations using compute pipelines."]}),"\n",(0,s.jsx)(r.h3,{id:"losedevice",children:"loseDevice"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"loseDevice(): boolean\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Triggers device loss (see below). After this call, the ",(0,s.jsx)(r.code,{children:"Device.lost"})," promise will be resolved with an error message and ",(0,s.jsx)(r.code,{children:"Device.isLost"})," will be set to true."]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Returns ",(0,s.jsx)(r.code,{children:"true"})," if an actual or emulated device loss was triggered, ",(0,s.jsx)(r.code,{children:"false"})," otherwise. Note that even if device loss emulation is not supported by the platform this function will still update the ",(0,s.jsx)(r.code,{children:"Device"})," instance to indicate that the device was lost, however the device can still be used."]}),"\n"]}),"\n",(0,s.jsx)(r.admonition,{type:"note",children:(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"loseDevice()"})," method is primarily intended for debugging of device loss handling and should not be relied upon for production code.\n",(0,s.jsx)(r.code,{children:"loseDevice()"})," can currently only emulate context loss on WebGL devices on platform's where WebGL API provides the required ",(0,s.jsx)(r.code,{children:"WEBGL_lose_context"})," WebGL debug extension."]})})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>c,x:()=>d});var s=n(6540);const i={},t=s.createContext(i);function c(e){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);