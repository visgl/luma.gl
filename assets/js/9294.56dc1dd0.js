"use strict";(self.webpackChunkwebsite_docusaurus=self.webpackChunkwebsite_docusaurus||[]).push([[9294],{2973:(t,e,s)=>{s.d(e,{$X:()=>Mt});class r{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class n{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(t){throw new Error("Cannot evaluate node")}evaluateString(t){return this.evaluate(t).toString()}search(t){}searchBlock(t,e){if(t){e(i.instance);for(const s of t)s instanceof Array?this.searchBlock(s,e):s.search(e);e(o.instance)}}}class i extends n{}i.instance=new i;class o extends n{}o.instance=new o;class a extends n{constructor(){super()}}class c extends a{constructor(t,e,s,r,n,i){super(),this.calls=new Set,this.name=t,this.args=e,this.returnType=s,this.body=r,this.startLine=n,this.endLine=i}get astNodeType(){return"function"}search(t){this.searchBlock(this.body,t)}}class u extends a{constructor(t){super(),this.expression=t}get astNodeType(){return"staticAssert"}search(t){this.expression.search(t)}}class h extends a{constructor(t,e){super(),this.condition=t,this.body=e}get astNodeType(){return"while"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class l extends a{constructor(t){super(),this.body=t}get astNodeType(){return"continuing"}search(t){this.searchBlock(this.body,t)}}class f extends a{constructor(t,e,s,r){super(),this.init=t,this.condition=e,this.increment=s,this.body=r}get astNodeType(){return"for"}search(t){var e,s,r;null===(e=this.init)||void 0===e||e.search(t),null===(s=this.condition)||void 0===s||s.search(t),null===(r=this.increment)||void 0===r||r.search(t),this.searchBlock(this.body,t)}}class d extends a{constructor(t,e,s,r,n){super(),this.name=t,this.type=e,this.storage=s,this.access=r,this.value=n}get astNodeType(){return"var"}search(t){var e;t(this),null===(e=this.value)||void 0===e||e.search(t)}}class A extends a{constructor(t,e,s){super(),this.name=t,this.type=e,this.value=s}get astNodeType(){return"override"}search(t){var e;null===(e=this.value)||void 0===e||e.search(t)}}class m extends a{constructor(t,e,s,r,n){super(),this.name=t,this.type=e,this.storage=s,this.access=r,this.value=n}get astNodeType(){return"let"}search(t){var e;t(this),null===(e=this.value)||void 0===e||e.search(t)}}class B extends a{constructor(t,e,s,r,n){super(),this.name=t,this.type=e,this.storage=s,this.access=r,this.value=n}get astNodeType(){return"const"}evaluate(t){return this.value.evaluate(t)}search(t){var e;t(this),null===(e=this.value)||void 0===e||e.search(t)}}var g,_,p,y,b;!function(t){t.increment="++",t.decrement="--"}(g||(g={})),function(t){t.parse=function(e){const s=e;if("parse"==s)throw new Error("Invalid value for IncrementOperator");return t[s]}}(g||(g={}));class C extends a{constructor(t,e){super(),this.operator=t,this.variable=e}get astNodeType(){return"increment"}search(t){this.variable.search(t)}}!function(t){t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="}(_||(_={})),function(t){t.parse=function(t){const e=t;if("parse"==e)throw new Error("Invalid value for AssignOperator");return e}}(_||(_={}));class w extends a{constructor(t,e,s){super(),this.operator=t,this.variable=e,this.value=s}get astNodeType(){return"assign"}search(t){this.variable.search(t),this.value.search(t)}}class k extends a{constructor(t,e){super(),this.name=t,this.args=e}get astNodeType(){return"call"}search(t){for(const e of this.args)e.search(t);t(this)}}class E extends a{constructor(t,e){super(),this.body=t,this.continuing=e}get astNodeType(){return"loop"}}class x extends a{constructor(t,e){super(),this.condition=t,this.body=e}get astNodeType(){return"body"}}class F extends a{constructor(t,e,s,r){super(),this.condition=t,this.body=e,this.elseif=s,this.else=r}get astNodeType(){return"if"}search(t){this.condition.search(t),this.searchBlock(this.body,t),this.searchBlock(this.elseif,t),this.searchBlock(this.else,t)}}class M extends a{constructor(t){super(),this.value=t}get astNodeType(){return"return"}search(t){var e;null===(e=this.value)||void 0===e||e.search(t)}}class v extends a{constructor(t){super(),this.name=t}get astNodeType(){return"enable"}}class I extends a{constructor(t){super(),this.extensions=t}get astNodeType(){return"requires"}}class G extends a{constructor(t,e){super(),this.severity=t,this.rule=e}get astNodeType(){return"diagnostic"}}class D extends a{constructor(t,e){super(),this.name=t,this.type=e}get astNodeType(){return"alias"}}class T extends a{constructor(){super()}get astNodeType(){return"discard"}}class O extends a{constructor(){super()}get astNodeType(){return"break"}}class R extends a{constructor(){super()}get astNodeType(){return"continue"}}class J extends a{constructor(t){super(),this.name=t}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class S extends J{constructor(t,e,s,r){super(t),this.members=e,this.startLine=s,this.endLine=r}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(t){for(let e=0;e<this.members.length;e++)if(this.members[e].name==t)return e;return-1}}class U extends J{constructor(t,e,s){super(t),this.format=e,this.access=s}get astNodeType(){return"template"}}class L extends J{constructor(t,e,s,r){super(t),this.storage=e,this.type=s,this.access=r}get astNodeType(){return"pointer"}}class H extends J{constructor(t,e,s,r){super(t),this.attributes=e,this.format=s,this.count=r}get astNodeType(){return"array"}get isArray(){return!0}}class N extends J{constructor(t,e,s){super(t),this.format=e,this.access=s}get astNodeType(){return"sampler"}}class j extends n{constructor(){super()}}class K extends j{constructor(t){super(),this.value=t}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class Q extends j{constructor(t,e){super(),this.type=t,this.args=e}get astNodeType(){return"createExpr"}search(t){t(this);for(const e of this.args)e.search(t)}}class P extends j{constructor(t,e){super(),this.name=t,this.args=e}get astNodeType(){return"callExpr"}evaluate(t){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(t));case"acos":return Math.acos(this.args[0].evaluate(t));case"acosh":return Math.acosh(this.args[0].evaluate(t));case"asin":return Math.asin(this.args[0].evaluate(t));case"asinh":return Math.asinh(this.args[0].evaluate(t));case"atan":return Math.atan(this.args[0].evaluate(t));case"atan2":return Math.atan2(this.args[0].evaluate(t),this.args[1].evaluate(t));case"atanh":return Math.atanh(this.args[0].evaluate(t));case"ceil":return Math.ceil(this.args[0].evaluate(t));case"clamp":return Math.min(Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t)),this.args[2].evaluate(t));case"cos":return Math.cos(this.args[0].evaluate(t));case"degrees":return 180*this.args[0].evaluate(t)/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(t)-this.args[1].evaluate(t),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(t));case"exp2":return Math.pow(2,this.args[0].evaluate(t));case"floor":return Math.floor(this.args[0].evaluate(t));case"fma":return this.args[0].evaluate(t)*this.args[1].evaluate(t)+this.args[2].evaluate(t);case"fract":case"modf":return this.args[0].evaluate(t)-Math.floor(this.args[0].evaluate(t));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(t));case"log":return Math.log(this.args[0].evaluate(t));case"log2":return Math.log2(this.args[0].evaluate(t));case"max":return Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t));case"min":return Math.min(this.args[0].evaluate(t),this.args[1].evaluate(t));case"mix":return this.args[0].evaluate(t)*(1-this.args[2].evaluate(t))+this.args[1].evaluate(t)*this.args[2].evaluate(t);case"pow":return Math.pow(this.args[0].evaluate(t),this.args[1].evaluate(t));case"radians":return this.args[0].evaluate(t)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(t));case"sign":return Math.sign(this.args[0].evaluate(t));case"sin":return Math.sin(this.args[0].evaluate(t));case"sinh":return Math.sinh(this.args[0].evaluate(t));case"saturate":return Math.min(Math.max(this.args[0].evaluate(t),0),1);case"smoothstep":return this.args[0].evaluate(t)*this.args[0].evaluate(t)*(3-2*this.args[0].evaluate(t));case"sqrt":return Math.sqrt(this.args[0].evaluate(t));case"step":return this.args[0].evaluate(t)<this.args[1].evaluate(t)?0:1;case"tan":return Math.tan(this.args[0].evaluate(t));case"tanh":return Math.tanh(this.args[0].evaluate(t));case"trunc":return Math.trunc(this.args[0].evaluate(t));default:throw new Error("Non const function: "+this.name)}}search(t){for(const e of this.args)e.search(t);t(this)}}class W extends j{constructor(t){super(),this.name=t}get astNodeType(){return"varExpr"}search(t){t(this),this.postfix&&this.postfix.search(t)}evaluate(t){const e=t.constants.get(this.name);if(!e)throw new Error("Cannot evaluate node");return e.evaluate(t)}}class X extends j{constructor(t,e){super(),this.name=t,this.initializer=e}get astNodeType(){return"constExpr"}evaluate(t){var e,s;if(this.initializer instanceof Q){const r=null===(e=this.postfix)||void 0===e?void 0:e.evaluateString(t),n=null===(s=this.initializer.type)||void 0===s?void 0:s.name,i=t.structs.get(n),o=null==i?void 0:i.getMemberIndex(r);if(-1!=o){return this.initializer.args[o].evaluate(t)}console.log(o)}return this.initializer.evaluate(t)}search(t){this.initializer.search(t)}}class q extends j{constructor(t){super(),this.value=t}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class Y extends j{constructor(t,e){super(),this.type=t,this.value=e}get astNodeType(){return"bitcastExpr"}search(t){this.value.search(t)}}class V extends j{constructor(t,e){super(),this.type=t,this.args=e}get astNodeType(){return"typecastExpr"}evaluate(t){return this.args[0].evaluate(t)}search(t){this.searchBlock(this.args,t)}}class Z extends j{constructor(t){super(),this.contents=t}get astNodeType(){return"groupExpr"}evaluate(t){return this.contents[0].evaluate(t)}search(t){this.searchBlock(this.contents,t)}}class z extends j{constructor(t){super(),this.index=t}search(t){this.index.search(t)}}class $ extends j{constructor(){super()}}class tt extends ${constructor(t,e){super(),this.operator=t,this.right=e}get astNodeType(){return"unaryOp"}evaluate(t){switch(this.operator){case"+":return this.right.evaluate(t);case"-":return-this.right.evaluate(t);case"!":return this.right.evaluate(t)?0:1;case"~":return~this.right.evaluate(t);default:throw new Error("Unknown unary operator: "+this.operator)}}search(t){this.right.search(t)}}class et extends ${constructor(t,e,s){super(),this.operator=t,this.left=e,this.right=s}get astNodeType(){return"binaryOp"}evaluate(t){switch(this.operator){case"+":return this.left.evaluate(t)+this.right.evaluate(t);case"-":return this.left.evaluate(t)-this.right.evaluate(t);case"*":return this.left.evaluate(t)*this.right.evaluate(t);case"/":return this.left.evaluate(t)/this.right.evaluate(t);case"%":return this.left.evaluate(t)%this.right.evaluate(t);case"==":return this.left.evaluate(t)==this.right.evaluate(t)?1:0;case"!=":return this.left.evaluate(t)!=this.right.evaluate(t)?1:0;case"<":return this.left.evaluate(t)<this.right.evaluate(t)?1:0;case">":return this.left.evaluate(t)>this.right.evaluate(t)?1:0;case"<=":return this.left.evaluate(t)<=this.right.evaluate(t)?1:0;case">=":return this.left.evaluate(t)>=this.right.evaluate(t)?1:0;case"&&":return this.left.evaluate(t)&&this.right.evaluate(t)?1:0;case"||":return this.left.evaluate(t)||this.right.evaluate(t)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(t){this.left.search(t),this.right.search(t)}}class st extends n{constructor(){super()}}class rt extends st{constructor(t,e){super(),this.selector=t,this.body=e}get astNodeType(){return"case"}search(t){this.searchBlock(this.body,t)}}class nt extends st{constructor(t){super(),this.body=t}get astNodeType(){return"default"}search(t){this.searchBlock(this.body,t)}}class it extends n{constructor(t,e,s){super(),this.name=t,this.type=e,this.attributes=s}get astNodeType(){return"argument"}}class ot extends n{constructor(t,e){super(),this.condition=t,this.body=e}get astNodeType(){return"elseif"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class at extends n{constructor(t,e,s){super(),this.name=t,this.type=e,this.attributes=s}get astNodeType(){return"member"}}class ct extends n{constructor(t,e){super(),this.name=t,this.value=e}get astNodeType(){return"attribute"}}!function(t){t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"}(y||(y={}));class ut{constructor(t,e,s){this.name=t,this.type=e,this.rule=s}toString(){return this.name}}class ht{}p=ht,ht.none=new ut("",y.reserved,""),ht.eof=new ut("EOF",y.token,""),ht.reserved={asm:new ut("asm",y.reserved,"asm"),bf16:new ut("bf16",y.reserved,"bf16"),do:new ut("do",y.reserved,"do"),enum:new ut("enum",y.reserved,"enum"),f16:new ut("f16",y.reserved,"f16"),f64:new ut("f64",y.reserved,"f64"),handle:new ut("handle",y.reserved,"handle"),i8:new ut("i8",y.reserved,"i8"),i16:new ut("i16",y.reserved,"i16"),i64:new ut("i64",y.reserved,"i64"),mat:new ut("mat",y.reserved,"mat"),premerge:new ut("premerge",y.reserved,"premerge"),regardless:new ut("regardless",y.reserved,"regardless"),typedef:new ut("typedef",y.reserved,"typedef"),u8:new ut("u8",y.reserved,"u8"),u16:new ut("u16",y.reserved,"u16"),u64:new ut("u64",y.reserved,"u64"),unless:new ut("unless",y.reserved,"unless"),using:new ut("using",y.reserved,"using"),vec:new ut("vec",y.reserved,"vec"),void:new ut("void",y.reserved,"void")},ht.keywords={array:new ut("array",y.keyword,"array"),atomic:new ut("atomic",y.keyword,"atomic"),bool:new ut("bool",y.keyword,"bool"),f32:new ut("f32",y.keyword,"f32"),i32:new ut("i32",y.keyword,"i32"),mat2x2:new ut("mat2x2",y.keyword,"mat2x2"),mat2x3:new ut("mat2x3",y.keyword,"mat2x3"),mat2x4:new ut("mat2x4",y.keyword,"mat2x4"),mat3x2:new ut("mat3x2",y.keyword,"mat3x2"),mat3x3:new ut("mat3x3",y.keyword,"mat3x3"),mat3x4:new ut("mat3x4",y.keyword,"mat3x4"),mat4x2:new ut("mat4x2",y.keyword,"mat4x2"),mat4x3:new ut("mat4x3",y.keyword,"mat4x3"),mat4x4:new ut("mat4x4",y.keyword,"mat4x4"),ptr:new ut("ptr",y.keyword,"ptr"),sampler:new ut("sampler",y.keyword,"sampler"),sampler_comparison:new ut("sampler_comparison",y.keyword,"sampler_comparison"),struct:new ut("struct",y.keyword,"struct"),texture_1d:new ut("texture_1d",y.keyword,"texture_1d"),texture_2d:new ut("texture_2d",y.keyword,"texture_2d"),texture_2d_array:new ut("texture_2d_array",y.keyword,"texture_2d_array"),texture_3d:new ut("texture_3d",y.keyword,"texture_3d"),texture_cube:new ut("texture_cube",y.keyword,"texture_cube"),texture_cube_array:new ut("texture_cube_array",y.keyword,"texture_cube_array"),texture_multisampled_2d:new ut("texture_multisampled_2d",y.keyword,"texture_multisampled_2d"),texture_storage_1d:new ut("texture_storage_1d",y.keyword,"texture_storage_1d"),texture_storage_2d:new ut("texture_storage_2d",y.keyword,"texture_storage_2d"),texture_storage_2d_array:new ut("texture_storage_2d_array",y.keyword,"texture_storage_2d_array"),texture_storage_3d:new ut("texture_storage_3d",y.keyword,"texture_storage_3d"),texture_depth_2d:new ut("texture_depth_2d",y.keyword,"texture_depth_2d"),texture_depth_2d_array:new ut("texture_depth_2d_array",y.keyword,"texture_depth_2d_array"),texture_depth_cube:new ut("texture_depth_cube",y.keyword,"texture_depth_cube"),texture_depth_cube_array:new ut("texture_depth_cube_array",y.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new ut("texture_depth_multisampled_2d",y.keyword,"texture_depth_multisampled_2d"),texture_external:new ut("texture_external",y.keyword,"texture_external"),u32:new ut("u32",y.keyword,"u32"),vec2:new ut("vec2",y.keyword,"vec2"),vec3:new ut("vec3",y.keyword,"vec3"),vec4:new ut("vec4",y.keyword,"vec4"),bitcast:new ut("bitcast",y.keyword,"bitcast"),block:new ut("block",y.keyword,"block"),break:new ut("break",y.keyword,"break"),case:new ut("case",y.keyword,"case"),continue:new ut("continue",y.keyword,"continue"),continuing:new ut("continuing",y.keyword,"continuing"),default:new ut("default",y.keyword,"default"),diagnostic:new ut("diagnostic",y.keyword,"diagnostic"),discard:new ut("discard",y.keyword,"discard"),else:new ut("else",y.keyword,"else"),enable:new ut("enable",y.keyword,"enable"),fallthrough:new ut("fallthrough",y.keyword,"fallthrough"),false:new ut("false",y.keyword,"false"),fn:new ut("fn",y.keyword,"fn"),for:new ut("for",y.keyword,"for"),function:new ut("function",y.keyword,"function"),if:new ut("if",y.keyword,"if"),let:new ut("let",y.keyword,"let"),const:new ut("const",y.keyword,"const"),loop:new ut("loop",y.keyword,"loop"),while:new ut("while",y.keyword,"while"),private:new ut("private",y.keyword,"private"),read:new ut("read",y.keyword,"read"),read_write:new ut("read_write",y.keyword,"read_write"),return:new ut("return",y.keyword,"return"),requires:new ut("requires",y.keyword,"requires"),storage:new ut("storage",y.keyword,"storage"),switch:new ut("switch",y.keyword,"switch"),true:new ut("true",y.keyword,"true"),alias:new ut("alias",y.keyword,"alias"),type:new ut("type",y.keyword,"type"),uniform:new ut("uniform",y.keyword,"uniform"),var:new ut("var",y.keyword,"var"),override:new ut("override",y.keyword,"override"),workgroup:new ut("workgroup",y.keyword,"workgroup"),write:new ut("write",y.keyword,"write"),r8unorm:new ut("r8unorm",y.keyword,"r8unorm"),r8snorm:new ut("r8snorm",y.keyword,"r8snorm"),r8uint:new ut("r8uint",y.keyword,"r8uint"),r8sint:new ut("r8sint",y.keyword,"r8sint"),r16uint:new ut("r16uint",y.keyword,"r16uint"),r16sint:new ut("r16sint",y.keyword,"r16sint"),r16float:new ut("r16float",y.keyword,"r16float"),rg8unorm:new ut("rg8unorm",y.keyword,"rg8unorm"),rg8snorm:new ut("rg8snorm",y.keyword,"rg8snorm"),rg8uint:new ut("rg8uint",y.keyword,"rg8uint"),rg8sint:new ut("rg8sint",y.keyword,"rg8sint"),r32uint:new ut("r32uint",y.keyword,"r32uint"),r32sint:new ut("r32sint",y.keyword,"r32sint"),r32float:new ut("r32float",y.keyword,"r32float"),rg16uint:new ut("rg16uint",y.keyword,"rg16uint"),rg16sint:new ut("rg16sint",y.keyword,"rg16sint"),rg16float:new ut("rg16float",y.keyword,"rg16float"),rgba8unorm:new ut("rgba8unorm",y.keyword,"rgba8unorm"),rgba8unorm_srgb:new ut("rgba8unorm_srgb",y.keyword,"rgba8unorm_srgb"),rgba8snorm:new ut("rgba8snorm",y.keyword,"rgba8snorm"),rgba8uint:new ut("rgba8uint",y.keyword,"rgba8uint"),rgba8sint:new ut("rgba8sint",y.keyword,"rgba8sint"),bgra8unorm:new ut("bgra8unorm",y.keyword,"bgra8unorm"),bgra8unorm_srgb:new ut("bgra8unorm_srgb",y.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new ut("rgb10a2unorm",y.keyword,"rgb10a2unorm"),rg11b10float:new ut("rg11b10float",y.keyword,"rg11b10float"),rg32uint:new ut("rg32uint",y.keyword,"rg32uint"),rg32sint:new ut("rg32sint",y.keyword,"rg32sint"),rg32float:new ut("rg32float",y.keyword,"rg32float"),rgba16uint:new ut("rgba16uint",y.keyword,"rgba16uint"),rgba16sint:new ut("rgba16sint",y.keyword,"rgba16sint"),rgba16float:new ut("rgba16float",y.keyword,"rgba16float"),rgba32uint:new ut("rgba32uint",y.keyword,"rgba32uint"),rgba32sint:new ut("rgba32sint",y.keyword,"rgba32sint"),rgba32float:new ut("rgba32float",y.keyword,"rgba32float"),static_assert:new ut("static_assert",y.keyword,"static_assert")},ht.tokens={decimal_float_literal:new ut("decimal_float_literal",y.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new ut("hex_float_literal",y.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new ut("int_literal",y.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new ut("uint_literal",y.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new ut("ident",y.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new ut("and",y.token,"&"),and_and:new ut("and_and",y.token,"&&"),arrow:new ut("arrow ",y.token,"->"),attr:new ut("attr",y.token,"@"),forward_slash:new ut("forward_slash",y.token,"/"),bang:new ut("bang",y.token,"!"),bracket_left:new ut("bracket_left",y.token,"["),bracket_right:new ut("bracket_right",y.token,"]"),brace_left:new ut("brace_left",y.token,"{"),brace_right:new ut("brace_right",y.token,"}"),colon:new ut("colon",y.token,":"),comma:new ut("comma",y.token,","),equal:new ut("equal",y.token,"="),equal_equal:new ut("equal_equal",y.token,"=="),not_equal:new ut("not_equal",y.token,"!="),greater_than:new ut("greater_than",y.token,">"),greater_than_equal:new ut("greater_than_equal",y.token,">="),shift_right:new ut("shift_right",y.token,">>"),less_than:new ut("less_than",y.token,"<"),less_than_equal:new ut("less_than_equal",y.token,"<="),shift_left:new ut("shift_left",y.token,"<<"),modulo:new ut("modulo",y.token,"%"),minus:new ut("minus",y.token,"-"),minus_minus:new ut("minus_minus",y.token,"--"),period:new ut("period",y.token,"."),plus:new ut("plus",y.token,"+"),plus_plus:new ut("plus_plus",y.token,"++"),or:new ut("or",y.token,"|"),or_or:new ut("or_or",y.token,"||"),paren_left:new ut("paren_left",y.token,"("),paren_right:new ut("paren_right",y.token,")"),semicolon:new ut("semicolon",y.token,";"),star:new ut("star",y.token,"*"),tilde:new ut("tilde",y.token,"~"),underscore:new ut("underscore",y.token,"_"),xor:new ut("xor",y.token,"^"),plus_equal:new ut("plus_equal",y.token,"+="),minus_equal:new ut("minus_equal",y.token,"-="),times_equal:new ut("times_equal",y.token,"*="),division_equal:new ut("division_equal",y.token,"/="),modulo_equal:new ut("modulo_equal",y.token,"%="),and_equal:new ut("and_equal",y.token,"&="),or_equal:new ut("or_equal",y.token,"|="),xor_equal:new ut("xor_equal",y.token,"^="),shift_right_equal:new ut("shift_right_equal",y.token,">>="),shift_left_equal:new ut("shift_left_equal",y.token,"<<=")},ht.simpleTokens={"@":p.tokens.attr,"{":p.tokens.brace_left,"}":p.tokens.brace_right,":":p.tokens.colon,",":p.tokens.comma,"(":p.tokens.paren_left,")":p.tokens.paren_right,";":p.tokens.semicolon},ht.literalTokens={"&":p.tokens.and,"&&":p.tokens.and_and,"->":p.tokens.arrow,"/":p.tokens.forward_slash,"!":p.tokens.bang,"[":p.tokens.bracket_left,"]":p.tokens.bracket_right,"=":p.tokens.equal,"==":p.tokens.equal_equal,"!=":p.tokens.not_equal,">":p.tokens.greater_than,">=":p.tokens.greater_than_equal,">>":p.tokens.shift_right,"<":p.tokens.less_than,"<=":p.tokens.less_than_equal,"<<":p.tokens.shift_left,"%":p.tokens.modulo,"-":p.tokens.minus,"--":p.tokens.minus_minus,".":p.tokens.period,"+":p.tokens.plus,"++":p.tokens.plus_plus,"|":p.tokens.or,"||":p.tokens.or_or,"*":p.tokens.star,"~":p.tokens.tilde,_:p.tokens.underscore,"^":p.tokens.xor,"+=":p.tokens.plus_equal,"-=":p.tokens.minus_equal,"*=":p.tokens.times_equal,"/=":p.tokens.division_equal,"%=":p.tokens.modulo_equal,"&=":p.tokens.and_equal,"|=":p.tokens.or_equal,"^=":p.tokens.xor_equal,">>=":p.tokens.shift_right_equal,"<<=":p.tokens.shift_left_equal},ht.regexTokens={decimal_float_literal:p.tokens.decimal_float_literal,hex_float_literal:p.tokens.hex_float_literal,int_literal:p.tokens.int_literal,uint_literal:p.tokens.uint_literal,ident:p.tokens.ident},ht.storage_class=[p.keywords.function,p.keywords.private,p.keywords.workgroup,p.keywords.uniform,p.keywords.storage],ht.access_mode=[p.keywords.read,p.keywords.write,p.keywords.read_write],ht.sampler_type=[p.keywords.sampler,p.keywords.sampler_comparison],ht.sampled_texture_type=[p.keywords.texture_1d,p.keywords.texture_2d,p.keywords.texture_2d_array,p.keywords.texture_3d,p.keywords.texture_cube,p.keywords.texture_cube_array],ht.multisampled_texture_type=[p.keywords.texture_multisampled_2d],ht.storage_texture_type=[p.keywords.texture_storage_1d,p.keywords.texture_storage_2d,p.keywords.texture_storage_2d_array,p.keywords.texture_storage_3d],ht.depth_texture_type=[p.keywords.texture_depth_2d,p.keywords.texture_depth_2d_array,p.keywords.texture_depth_cube,p.keywords.texture_depth_cube_array,p.keywords.texture_depth_multisampled_2d],ht.texture_external_type=[p.keywords.texture_external],ht.any_texture_type=[...p.sampled_texture_type,...p.multisampled_texture_type,...p.storage_texture_type,...p.depth_texture_type,...p.texture_external_type],ht.texel_format=[p.keywords.r8unorm,p.keywords.r8snorm,p.keywords.r8uint,p.keywords.r8sint,p.keywords.r16uint,p.keywords.r16sint,p.keywords.r16float,p.keywords.rg8unorm,p.keywords.rg8snorm,p.keywords.rg8uint,p.keywords.rg8sint,p.keywords.r32uint,p.keywords.r32sint,p.keywords.r32float,p.keywords.rg16uint,p.keywords.rg16sint,p.keywords.rg16float,p.keywords.rgba8unorm,p.keywords.rgba8unorm_srgb,p.keywords.rgba8snorm,p.keywords.rgba8uint,p.keywords.rgba8sint,p.keywords.bgra8unorm,p.keywords.bgra8unorm_srgb,p.keywords.rgb10a2unorm,p.keywords.rg11b10float,p.keywords.rg32uint,p.keywords.rg32sint,p.keywords.rg32float,p.keywords.rgba16uint,p.keywords.rgba16sint,p.keywords.rgba16float,p.keywords.rgba32uint,p.keywords.rgba32sint,p.keywords.rgba32float],ht.const_literal=[p.tokens.int_literal,p.tokens.uint_literal,p.tokens.decimal_float_literal,p.tokens.hex_float_literal,p.keywords.true,p.keywords.false],ht.literal_or_ident=[p.tokens.ident,p.tokens.int_literal,p.tokens.uint_literal,p.tokens.decimal_float_literal,p.tokens.hex_float_literal],ht.element_count_expression=[p.tokens.int_literal,p.tokens.uint_literal,p.tokens.ident],ht.template_types=[p.keywords.vec2,p.keywords.vec3,p.keywords.vec4,p.keywords.mat2x2,p.keywords.mat2x3,p.keywords.mat2x4,p.keywords.mat3x2,p.keywords.mat3x3,p.keywords.mat3x4,p.keywords.mat4x2,p.keywords.mat4x3,p.keywords.mat4x4,p.keywords.atomic,p.keywords.bitcast,...p.any_texture_type],ht.attribute_name=[p.tokens.ident,p.keywords.block,p.keywords.diagnostic],ht.assignment_operators=[p.tokens.equal,p.tokens.plus_equal,p.tokens.minus_equal,p.tokens.times_equal,p.tokens.division_equal,p.tokens.modulo_equal,p.tokens.and_equal,p.tokens.or_equal,p.tokens.xor_equal,p.tokens.shift_right_equal,p.tokens.shift_left_equal],ht.increment_operators=[p.tokens.plus_plus,p.tokens.minus_minus];class lt{constructor(t,e,s){this.type=t,this.lexeme=e,this.line=s}toString(){return this.lexeme}isTemplateType(){return-1!=ht.template_types.indexOf(this.type)}isArrayType(){return this.type==ht.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class ft{constructor(t){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=null!=t?t:""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new lt(ht.eof,"",this._line)),this._tokens}scanToken(){let t=this._advance();if("\n"==t)return this._line++,!0;if(this._isWhitespace(t))return!0;if("/"==t){if("/"==this._peekAhead()){for(;"\n"!=t;){if(this._isAtEnd())return!0;t=this._advance()}return this._line++,!0}if("*"==this._peekAhead()){this._advance();let e=1;for(;e>0;){if(this._isAtEnd())return!0;if(t=this._advance(),"\n"==t)this._line++;else if("*"==t){if("/"==this._peekAhead()&&(this._advance(),e--,0==e))return!0}else"/"==t&&"*"==this._peekAhead()&&(this._advance(),e++)}return!0}}const e=ht.simpleTokens[t];if(e)return this._addToken(e),!0;let s=ht.none;const r=this._isAlpha(t),n="_"===t;if(this._isAlphaNumeric(t)){let e=this._peekAhead();for(;this._isAlphaNumeric(e);)t+=this._advance(),e=this._peekAhead()}if(r){const e=ht.keywords[t];if(e)return this._addToken(e),!0}if(r||n)return this._addToken(ht.tokens.ident),!0;for(;;){let e=this._findType(t);const r=this._peekAhead();if("-"==t&&this._tokens.length>0){if("="==r)return this._current++,t+=r,this._addToken(ht.tokens.minus_equal),!0;if("-"==r)return this._current++,t+=r,this._addToken(ht.tokens.minus_minus),!0;const s=this._tokens.length-1;if((-1!=ht.literal_or_ident.indexOf(this._tokens[s].type)||this._tokens[s].type==ht.tokens.paren_right)&&">"!=r)return this._addToken(e),!0}if(">"==t&&(">"==r||"="==r)){let t=!1,s=this._tokens.length-1;for(let e=0;e<5&&s>=0&&-1===ht.assignment_operators.indexOf(this._tokens[s].type);++e,--s)if(this._tokens[s].type===ht.tokens.less_than){s>0&&this._tokens[s-1].isArrayOrTemplateType()&&(t=!0);break}if(t)return this._addToken(e),!0}if(e===ht.none){let r=t,n=0;const i=2;for(let t=0;t<i;++t)if(r+=this._peekAhead(t),e=this._findType(r),e!==ht.none){n=t;break}if(e===ht.none)return s!==ht.none&&(this._current--,this._addToken(s),!0);t=r,this._current+=n+1}if(s=e,this._isAtEnd())break;t+=this._advance()}return s!==ht.none&&(this._addToken(s),!0)}_findType(t){for(const s in ht.regexTokens){const e=ht.regexTokens[s];if(this._match(t,e.rule))return e}const e=ht.literalTokens[t];return e||ht.none}_match(t,e){const s=e.exec(t);return s&&0==s.index&&s[0]==t}_isAtEnd(){return this._current>=this._source.length}_isAlpha(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}_isAlphaNumeric(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"_"==t||t>="0"&&t<="9"}_isWhitespace(t){return" "==t||"\t"==t||"\r"==t}_advance(t=0){let e=this._source[this._current];return t=t||0,t++,this._current+=t,e}_peekAhead(t=0){return t=t||0,this._current+t>=this._source.length?"\0":this._source[this._current+t]}_addToken(t){const e=this._source.substring(this._start,this._current);this._tokens.push(new lt(t,e,this._line))}}class dt{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new r,this._deferArrayCountEval=[]}parse(t){this._initialize(t),this._deferArrayCountEval.length=0;const e=[];for(;!this._isAtEnd();){const t=this._global_decl_or_directive();if(!t)break;e.push(t)}if(this._deferArrayCountEval.length>0){for(const t of this._deferArrayCountEval){const e=t.arrayType,r=t.countNode;if(r instanceof W){const t=r.name,n=this._context.constants.get(t);if(n)try{const t=n.evaluate(this._context);e.count=t}catch(s){}}}this._deferArrayCountEval.length=0}return e}_initialize(t){if(t)if("string"==typeof t){const e=new ft(t);this._tokens=e.scanTokens()}else this._tokens=t;else this._tokens=[];this._current=0}_error(t,e){return{token:t,message:e,toString:function(){return`${e}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==ht.eof}_match(t){if(t instanceof ut)return!!this._check(t)&&(this._advance(),!0);for(let e=0,s=t.length;e<s;++e){const s=t[e];if(this._check(s))return this._advance(),!0}return!1}_consume(t,e){if(this._check(t))return this._advance();throw this._error(this._peek(),e)}_check(t){if(this._isAtEnd())return!1;const e=this._peek();if(t instanceof Array){const s=e.type;return-1!=t.indexOf(s)}return e.type==t}_advance(){var t,e;return this._currentLine=null!==(e=null===(t=this._peek())||void 0===t?void 0:t.line)&&void 0!==e?e:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(ht.tokens.semicolon)&&!this._isAtEnd(););if(this._match(ht.keywords.alias)){const t=this._type_alias();return this._consume(ht.tokens.semicolon,"Expected ';'"),t}if(this._match(ht.keywords.diagnostic)){const t=this._diagnostic();return this._consume(ht.tokens.semicolon,"Expected ';'"),t}if(this._match(ht.keywords.requires)){const t=this._requires_directive();return this._consume(ht.tokens.semicolon,"Expected ';'"),t}if(this._match(ht.keywords.enable)){const t=this._enable_directive();return this._consume(ht.tokens.semicolon,"Expected ';'"),t}const t=this._attribute();if(this._check(ht.keywords.var)){const e=this._global_variable_decl();return null!=e&&(e.attributes=t),this._consume(ht.tokens.semicolon,"Expected ';'."),e}if(this._check(ht.keywords.override)){const e=this._override_variable_decl();return null!=e&&(e.attributes=t),this._consume(ht.tokens.semicolon,"Expected ';'."),e}if(this._check(ht.keywords.let)){const e=this._global_let_decl();return null!=e&&(e.attributes=t),this._consume(ht.tokens.semicolon,"Expected ';'."),e}if(this._check(ht.keywords.const)){const e=this._global_const_decl();return null!=e&&(e.attributes=t),this._consume(ht.tokens.semicolon,"Expected ';'."),e}if(this._check(ht.keywords.struct)){const e=this._struct_decl();return null!=e&&(e.attributes=t),e}if(this._check(ht.keywords.fn)){const e=this._function_decl();return null!=e&&(e.attributes=t),e}return null}_function_decl(){if(!this._match(ht.keywords.fn))return null;const t=this._currentLine,e=this._consume(ht.tokens.ident,"Expected function name.").toString();this._consume(ht.tokens.paren_left,"Expected '(' for function arguments.");const s=[];if(!this._check(ht.tokens.paren_right))do{if(this._check(ht.tokens.paren_right))break;const t=this._attribute(),e=this._consume(ht.tokens.ident,"Expected argument name.").toString();this._consume(ht.tokens.colon,"Expected ':' for argument type.");const r=this._attribute(),n=this._type_decl();null!=n&&(n.attributes=r,s.push(new it(e,n,t)))}while(this._match(ht.tokens.comma));this._consume(ht.tokens.paren_right,"Expected ')' after function arguments.");let r=null;if(this._match(ht.tokens.arrow)){const t=this._attribute();r=this._type_decl(),null!=r&&(r.attributes=t)}const n=this._compound_statement(),i=this._currentLine;return new c(e,s,r,n,t,i)}_compound_statement(){const t=[];for(this._consume(ht.tokens.brace_left,"Expected '{' for block.");!this._check(ht.tokens.brace_right);){const e=this._statement();null!==e&&t.push(e)}return this._consume(ht.tokens.brace_right,"Expected '}' for block."),t}_statement(){for(;this._match(ht.tokens.semicolon)&&!this._isAtEnd(););if(this._check(ht.tokens.attr)&&this._attribute(),this._check(ht.keywords.if))return this._if_statement();if(this._check(ht.keywords.switch))return this._switch_statement();if(this._check(ht.keywords.loop))return this._loop_statement();if(this._check(ht.keywords.for))return this._for_statement();if(this._check(ht.keywords.while))return this._while_statement();if(this._check(ht.keywords.continuing))return this._continuing_statement();if(this._check(ht.keywords.static_assert))return this._static_assert_statement();if(this._check(ht.tokens.brace_left))return this._compound_statement();let t=null;return t=this._check(ht.keywords.return)?this._return_statement():this._check([ht.keywords.var,ht.keywords.let,ht.keywords.const])?this._variable_statement():this._match(ht.keywords.discard)?new T:this._match(ht.keywords.break)?new O:this._match(ht.keywords.continue)?new R:this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),null!=t&&this._consume(ht.tokens.semicolon,"Expected ';' after statement."),t}_static_assert_statement(){if(!this._match(ht.keywords.static_assert))return null;const t=this._optional_paren_expression();return new u(t)}_while_statement(){if(!this._match(ht.keywords.while))return null;const t=this._optional_paren_expression();this._check(ht.tokens.attr)&&this._attribute();const e=this._compound_statement();return new h(t,e)}_continuing_statement(){if(!this._match(ht.keywords.continuing))return null;const t=this._compound_statement();return new l(t)}_for_statement(){if(!this._match(ht.keywords.for))return null;this._consume(ht.tokens.paren_left,"Expected '('.");const t=this._check(ht.tokens.semicolon)?null:this._for_init();this._consume(ht.tokens.semicolon,"Expected ';'.");const e=this._check(ht.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(ht.tokens.semicolon,"Expected ';'.");const s=this._check(ht.tokens.paren_right)?null:this._for_increment();this._consume(ht.tokens.paren_right,"Expected ')'."),this._check(ht.tokens.attr)&&this._attribute();const r=this._compound_statement();return new f(t,e,s,r)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(ht.keywords.var)){const t=this._variable_decl();if(null===t)throw this._error(this._peek(),"Variable declaration expected.");let e=null;return this._match(ht.tokens.equal)&&(e=this._short_circuit_or_expression()),new d(t.name,t.type,t.storage,t.access,e)}if(this._match(ht.keywords.let)){const t=this._consume(ht.tokens.ident,"Expected name for let.").toString();let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}this._consume(ht.tokens.equal,"Expected '=' for let.");const s=this._short_circuit_or_expression();return new m(t,e,null,null,s)}if(this._match(ht.keywords.const)){const t=this._consume(ht.tokens.ident,"Expected name for const.").toString();let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}this._consume(ht.tokens.equal,"Expected '=' for const.");const s=this._short_circuit_or_expression();return new B(t,e,null,null,s)}return null}_increment_decrement_statement(){const t=this._current,e=this._unary_expression();if(null==e)return null;if(!this._check(ht.increment_operators))return this._current=t,null;const s=this._consume(ht.increment_operators,"Expected increment operator");return new C(s.type===ht.tokens.plus_plus?g.increment:g.decrement,e)}_assignment_statement(){let t=null;if(this._check(ht.tokens.brace_right))return null;let e=this._match(ht.tokens.underscore);if(e||(t=this._unary_expression()),!e&&null==t)return null;const s=this._consume(ht.assignment_operators,"Expected assignment operator."),r=this._short_circuit_or_expression();return new w(_.parse(s.lexeme),t,r)}_func_call_statement(){if(!this._check(ht.tokens.ident))return null;const t=this._current,e=this._consume(ht.tokens.ident,"Expected function name."),s=this._argument_expression_list();return null===s?(this._current=t,null):new k(e.lexeme,s)}_loop_statement(){if(!this._match(ht.keywords.loop))return null;this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Expected '{' for loop.");const t=[];let e=this._statement();for(;null!==e;){if(Array.isArray(e))for(let s of e)t.push(s);else t.push(e);e=this._statement()}let s=null;return this._match(ht.keywords.continuing)&&(s=this._compound_statement()),this._consume(ht.tokens.brace_right,"Expected '}' for loop."),new E(t,s)}_switch_statement(){if(!this._match(ht.keywords.switch))return null;const t=this._optional_paren_expression();this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Expected '{' for switch.");const e=this._switch_body();if(null==e||0==e.length)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(ht.tokens.brace_right,"Expected '}' for switch."),new x(t,e)}_switch_body(){const t=[];if(this._match(ht.keywords.case)){const e=this._case_selectors();this._match(ht.tokens.colon),this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Exected '{' for switch case.");const s=this._case_body();this._consume(ht.tokens.brace_right,"Exected '}' for switch case."),t.push(new rt(e,s))}if(this._match(ht.keywords.default)){this._match(ht.tokens.colon),this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Exected '{' for switch default.");const e=this._case_body();this._consume(ht.tokens.brace_right,"Exected '}' for switch default."),t.push(new nt(e))}if(this._check([ht.keywords.default,ht.keywords.case])){const e=this._switch_body();t.push(e[0])}return t}_case_selectors(){const t=[this._shift_expression()];for(;this._match(ht.tokens.comma);)t.push(this._shift_expression());return t}_case_body(){if(this._match(ht.keywords.fallthrough))return this._consume(ht.tokens.semicolon,"Expected ';'"),[];let t=this._statement();if(null==t)return[];t instanceof Array||(t=[t]);const e=this._case_body();return 0==e.length?t:[...t,e[0]]}_if_statement(){if(!this._match(ht.keywords.if))return null;const t=this._optional_paren_expression();this._check(ht.tokens.attr)&&this._attribute();const e=this._compound_statement();let s=[];this._match_elseif()&&(this._check(ht.tokens.attr)&&this._attribute(),s=this._elseif_statement(s));let r=null;return this._match(ht.keywords.else)&&(this._check(ht.tokens.attr)&&this._attribute(),r=this._compound_statement()),new F(t,e,s,r)}_match_elseif(){return this._tokens[this._current].type===ht.keywords.else&&this._tokens[this._current+1].type===ht.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(t=[]){const e=this._optional_paren_expression(),s=this._compound_statement();return t.push(new ot(e,s)),this._match_elseif()&&(this._check(ht.tokens.attr)&&this._attribute(),this._elseif_statement(t)),t}_return_statement(){if(!this._match(ht.keywords.return))return null;const t=this._short_circuit_or_expression();return new M(t)}_short_circuit_or_expression(){let t=this._short_circuit_and_expr();for(;this._match(ht.tokens.or_or);)t=new et(this._previous().toString(),t,this._short_circuit_and_expr());return t}_short_circuit_and_expr(){let t=this._inclusive_or_expression();for(;this._match(ht.tokens.and_and);)t=new et(this._previous().toString(),t,this._inclusive_or_expression());return t}_inclusive_or_expression(){let t=this._exclusive_or_expression();for(;this._match(ht.tokens.or);)t=new et(this._previous().toString(),t,this._exclusive_or_expression());return t}_exclusive_or_expression(){let t=this._and_expression();for(;this._match(ht.tokens.xor);)t=new et(this._previous().toString(),t,this._and_expression());return t}_and_expression(){let t=this._equality_expression();for(;this._match(ht.tokens.and);)t=new et(this._previous().toString(),t,this._equality_expression());return t}_equality_expression(){const t=this._relational_expression();return this._match([ht.tokens.equal_equal,ht.tokens.not_equal])?new et(this._previous().toString(),t,this._relational_expression()):t}_relational_expression(){let t=this._shift_expression();for(;this._match([ht.tokens.less_than,ht.tokens.greater_than,ht.tokens.less_than_equal,ht.tokens.greater_than_equal]);)t=new et(this._previous().toString(),t,this._shift_expression());return t}_shift_expression(){let t=this._additive_expression();for(;this._match([ht.tokens.shift_left,ht.tokens.shift_right]);)t=new et(this._previous().toString(),t,this._additive_expression());return t}_additive_expression(){let t=this._multiplicative_expression();for(;this._match([ht.tokens.plus,ht.tokens.minus]);)t=new et(this._previous().toString(),t,this._multiplicative_expression());return t}_multiplicative_expression(){let t=this._unary_expression();for(;this._match([ht.tokens.star,ht.tokens.forward_slash,ht.tokens.modulo]);)t=new et(this._previous().toString(),t,this._unary_expression());return t}_unary_expression(){return this._match([ht.tokens.minus,ht.tokens.bang,ht.tokens.tilde,ht.tokens.star,ht.tokens.and])?new tt(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const t=this._primary_expression(),e=this._postfix_expression();return e&&(t.postfix=e),t}_postfix_expression(){if(this._match(ht.tokens.bracket_left)){const t=this._short_circuit_or_expression();this._consume(ht.tokens.bracket_right,"Expected ']'.");const e=new z(t),s=this._postfix_expression();return s&&(e.postfix=s),e}if(this._match(ht.tokens.period)){const t=this._consume(ht.tokens.ident,"Expected member name."),e=this._postfix_expression(),s=new K(t.lexeme);return e&&(s.postfix=e),s}return null}_getStruct(t){if(this._context.aliases.has(t)){return this._context.aliases.get(t).type}if(this._context.structs.has(t)){return this._context.structs.get(t)}return null}_primary_expression(){if(this._match(ht.tokens.ident)){const t=this._previous().toString();if(this._check(ht.tokens.paren_left)){const e=this._argument_expression_list(),s=this._getStruct(t);return null!=s?new Q(s,e):new P(t,e)}if(this._context.constants.has(t)){const e=this._context.constants.get(t);return new X(t,e.value)}return new W(t)}if(this._match(ht.const_literal))return new q(parseFloat(this._previous().toString()));if(this._check(ht.tokens.paren_left))return this._paren_expression();if(this._match(ht.keywords.bitcast)){this._consume(ht.tokens.less_than,"Expected '<'.");const t=this._type_decl();this._consume(ht.tokens.greater_than,"Expected '>'.");const e=this._paren_expression();return new Y(t,e)}const t=this._type_decl(),e=this._argument_expression_list();return new V(t,e)}_argument_expression_list(){if(!this._match(ht.tokens.paren_left))return null;const t=[];do{if(this._check(ht.tokens.paren_right))break;const e=this._short_circuit_or_expression();t.push(e)}while(this._match(ht.tokens.comma));return this._consume(ht.tokens.paren_right,"Expected ')' for agument list"),t}_optional_paren_expression(){this._match(ht.tokens.paren_left);const t=this._short_circuit_or_expression();return this._match(ht.tokens.paren_right),new Z([t])}_paren_expression(){this._consume(ht.tokens.paren_left,"Expected '('.");const t=this._short_circuit_or_expression();return this._consume(ht.tokens.paren_right,"Expected ')'."),new Z([t])}_struct_decl(){if(!this._match(ht.keywords.struct))return null;const t=this._currentLine,e=this._consume(ht.tokens.ident,"Expected name for struct.").toString();this._consume(ht.tokens.brace_left,"Expected '{' for struct body.");const s=[];for(;!this._check(ht.tokens.brace_right);){const t=this._attribute(),e=this._consume(ht.tokens.ident,"Expected variable name.").toString();this._consume(ht.tokens.colon,"Expected ':' for struct member type.");const r=this._attribute(),n=this._type_decl();null!=n&&(n.attributes=r),this._check(ht.tokens.brace_right)?this._match(ht.tokens.comma):this._consume(ht.tokens.comma,"Expected ',' for struct member."),s.push(new at(e,n,t))}this._consume(ht.tokens.brace_right,"Expected '}' after struct body.");const r=this._currentLine,n=new S(e,s,t,r);return this._context.structs.set(e,n),n}_global_variable_decl(){const t=this._variable_decl();return t&&this._match(ht.tokens.equal)&&(t.value=this._const_expression()),t}_override_variable_decl(){const t=this._override_decl();return t&&this._match(ht.tokens.equal)&&(t.value=this._const_expression()),t}_global_const_decl(){if(!this._match(ht.keywords.const))return null;const t=this._consume(ht.tokens.ident,"Expected variable name");let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}let s=null;if(this._match(ht.tokens.equal)){const t=this._short_circuit_or_expression();if(t instanceof Q)s=t;else if(t instanceof X&&t.initializer instanceof Q)s=t.initializer;else try{const e=t.evaluate(this._context);s=new q(e)}catch(p){s=t}}const r=new B(t.toString(),e,"","",s);return this._context.constants.set(r.name,r),r}_global_let_decl(){if(!this._match(ht.keywords.let))return null;const t=this._consume(ht.tokens.ident,"Expected variable name");let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}let s=null;return this._match(ht.tokens.equal)&&(s=this._const_expression()),new m(t.toString(),e,"","",s)}_const_expression(){if(this._match(ht.const_literal))return new K(this._previous().toString());const t=this._type_decl();this._consume(ht.tokens.paren_left,"Expected '('.");let e=[];for(;!this._check(ht.tokens.paren_right)&&(e.push(this._const_expression()),this._check(ht.tokens.comma));)this._advance();return this._consume(ht.tokens.paren_right,"Expected ')'."),new Q(t,e)}_variable_decl(){if(!this._match(ht.keywords.var))return null;let t="",e="";this._match(ht.tokens.less_than)&&(t=this._consume(ht.storage_class,"Expected storage_class.").toString(),this._match(ht.tokens.comma)&&(e=this._consume(ht.access_mode,"Expected access_mode.").toString()),this._consume(ht.tokens.greater_than,"Expected '>'."));const s=this._consume(ht.tokens.ident,"Expected variable name");let r=null;if(this._match(ht.tokens.colon)){const t=this._attribute();r=this._type_decl(),null!=r&&(r.attributes=t)}return new d(s.toString(),r,t,e,null)}_override_decl(){if(!this._match(ht.keywords.override))return null;const t=this._consume(ht.tokens.ident,"Expected variable name");let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}return new A(t.toString(),e,null)}_diagnostic(){this._consume(ht.tokens.paren_left,"Expected '('");const t=this._consume(ht.tokens.ident,"Expected severity control name.");this._consume(ht.tokens.comma,"Expected ','");const e=this._consume(ht.tokens.ident,"Expected diagnostic rule name.");return this._consume(ht.tokens.paren_right,"Expected ')'"),new G(t.toString(),e.toString())}_enable_directive(){const t=this._consume(ht.tokens.ident,"identity expected.");return new v(t.toString())}_requires_directive(){const t=[this._consume(ht.tokens.ident,"identity expected.").toString()];for(;this._match(ht.tokens.comma);){const e=this._consume(ht.tokens.ident,"identity expected.");t.push(e.toString())}return new I(t)}_type_alias(){const t=this._consume(ht.tokens.ident,"identity expected.");this._consume(ht.tokens.equal,"Expected '=' for type alias.");let e=this._type_decl();if(null===e)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(e.name)&&(e=this._context.aliases.get(e.name).type);const s=new D(t.toString(),e);return this._context.aliases.set(s.name,s),s}_type_decl(){if(this._check([ht.tokens.ident,...ht.texel_format,ht.keywords.bool,ht.keywords.f32,ht.keywords.i32,ht.keywords.u32])){const t=this._advance(),e=t.toString();return this._context.structs.has(e)?this._context.structs.get(e):this._context.aliases.has(e)?this._context.aliases.get(e).type:new J(t.toString())}let t=this._texture_sampler_types();if(t)return t;if(this._check(ht.template_types)){let t=this._advance().toString(),e=null,s=null;return this._match(ht.tokens.less_than)&&(e=this._type_decl(),s=null,this._match(ht.tokens.comma)&&(s=this._consume(ht.access_mode,"Expected access_mode for pointer").toString()),this._consume(ht.tokens.greater_than,"Expected '>' for type.")),new U(t,e,s)}if(this._match(ht.keywords.ptr)){let t=this._previous().toString();this._consume(ht.tokens.less_than,"Expected '<' for pointer.");const e=this._consume(ht.storage_class,"Expected storage_class for pointer");this._consume(ht.tokens.comma,"Expected ',' for pointer.");const s=this._type_decl();let r=null;return this._match(ht.tokens.comma)&&(r=this._consume(ht.access_mode,"Expected access_mode for pointer").toString()),this._consume(ht.tokens.greater_than,"Expected '>' for pointer."),new L(t,e.toString(),s,r)}const e=this._attribute();if(this._match(ht.keywords.array)){let t=null,r=-1;const n=this._previous();let i=null;if(this._match(ht.tokens.less_than)){t=this._type_decl(),this._context.aliases.has(t.name)&&(t=this._context.aliases.get(t.name).type);let e="";if(this._match(ht.tokens.comma)){i=this._shift_expression();try{e=i.evaluate(this._context).toString(),i=null}catch(s){e="1"}}this._consume(ht.tokens.greater_than,"Expected '>' for array."),r=e?parseInt(e):0}const o=new H(n.toString(),e,t,r);return i&&this._deferArrayCountEval.push({arrayType:o,countNode:i}),o}return null}_texture_sampler_types(){if(this._match(ht.sampler_type))return new N(this._previous().toString(),null,null);if(this._match(ht.depth_texture_type))return new N(this._previous().toString(),null,null);if(this._match(ht.sampled_texture_type)||this._match(ht.multisampled_texture_type)){const t=this._previous();this._consume(ht.tokens.less_than,"Expected '<' for sampler type.");const e=this._type_decl();return this._consume(ht.tokens.greater_than,"Expected '>' for sampler type."),new N(t.toString(),e,null)}if(this._match(ht.storage_texture_type)){const t=this._previous();this._consume(ht.tokens.less_than,"Expected '<' for sampler type.");const e=this._consume(ht.texel_format,"Invalid texel format.").toString();this._consume(ht.tokens.comma,"Expected ',' after texel format.");const s=this._consume(ht.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(ht.tokens.greater_than,"Expected '>' for sampler type."),new N(t.toString(),e,s)}return null}_attribute(){let t=[];for(;this._match(ht.tokens.attr);){const e=this._consume(ht.attribute_name,"Expected attribute name"),s=new ct(e.toString(),null);if(this._match(ht.tokens.paren_left)){if(s.value=this._consume(ht.literal_or_ident,"Expected attribute value").toString(),this._check(ht.tokens.comma)){this._advance();do{const t=this._consume(ht.literal_or_ident,"Expected attribute value").toString();s.value instanceof Array||(s.value=[s.value]),s.value.push(t)}while(this._match(ht.tokens.comma))}this._consume(ht.tokens.paren_right,"Expected ')'")}t.push(s)}return 0==t.length?null:t}}class At{constructor(t,e){this.name=t,this.attributes=e,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class mt{constructor(t,e,s){this.name=t,this.type=e,this.attributes=s,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Bt extends At{constructor(t,e){super(t,e),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class gt extends At{constructor(t,e){super(t,e),this.count=0,this.stride=0}get isArray(){return!0}}class _t extends At{constructor(t,e,s,r){super(t,s),this.format=e,this.access=r}get isTemplate(){return!0}}!function(t){t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"}(b||(b={}));class pt{constructor(t,e,s,r,n,i,o){this.name=t,this.type=e,this.group=s,this.binding=r,this.attributes=n,this.resourceType=i,this.access=o}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class yt{constructor(t,e){this.name=t,this.type=e}}class bt{constructor(t,e){this.align=t,this.size=e}}class Ct{constructor(t,e,s,r){this.name=t,this.type=e,this.locationType=s,this.location=r,this.interpolation=null}}class wt{constructor(t,e,s,r){this.name=t,this.type=e,this.locationType=s,this.location=r}}class kt{constructor(t,e=null){this.stage=null,this.inputs=[],this.outputs=[],this.resources=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=t,this.stage=e}}class Et{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class xt{constructor(t,e,s,r){this.name=t,this.type=e,this.attributes=s,this.id=r}}class Ft{constructor(t){this.resources=null,this.inUse=!1,this.info=null,this.node=t}}class Mt{constructor(t){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new Et,this.functions=[],this._types=new Map,this._functions=new Map,t&&this.update(t)}_isStorageTexture(t){return"texture_storage_1d"==t.name||"texture_storage_2d"==t.name||"texture_storage_2d_array"==t.name||"texture_storage_3d"==t.name}update(t){const e=(new dt).parse(t);for(const s of e)s instanceof c&&this._functions.set(s.name,new Ft(s));for(const s of e)if(s instanceof S){const t=this._getTypeInfo(s,null);t instanceof Bt&&this.structs.push(t)}for(const s of e)if(s instanceof D)this.aliases.push(this._getAliasInfo(s));else if(s instanceof A){const t=s,e=this._getAttributeNum(t.attributes,"id",0),r=null!=t.type?this._getTypeInfo(t.type,t.attributes):null;this.overrides.push(new xt(t.name,r,t.attributes,e))}else if(this._isUniformVar(s)){const t=s,e=this._getAttributeNum(t.attributes,"group",0),r=this._getAttributeNum(t.attributes,"binding",0),n=this._getTypeInfo(t.type,t.attributes),i=new pt(t.name,n,e,r,t.attributes,b.Uniform,t.access);this.uniforms.push(i)}else if(this._isStorageVar(s)){const t=s,e=this._getAttributeNum(t.attributes,"group",0),r=this._getAttributeNum(t.attributes,"binding",0),n=this._getTypeInfo(t.type,t.attributes),i=this._isStorageTexture(n),o=new pt(t.name,n,e,r,t.attributes,i?b.StorageTexture:b.Storage,t.access);this.storage.push(o)}else if(this._isTextureVar(s)){const t=s,e=this._getAttributeNum(t.attributes,"group",0),r=this._getAttributeNum(t.attributes,"binding",0),n=this._getTypeInfo(t.type,t.attributes),i=this._isStorageTexture(n),o=new pt(t.name,n,e,r,t.attributes,i?b.StorageTexture:b.Texture,t.access);i?this.storage.push(o):this.textures.push(o)}else if(this._isSamplerVar(s)){const t=s,e=this._getAttributeNum(t.attributes,"group",0),r=this._getAttributeNum(t.attributes,"binding",0),n=this._getTypeInfo(t.type,t.attributes),i=new pt(t.name,n,e,r,t.attributes,b.Sampler,t.access);this.samplers.push(i)}else if(s instanceof c){const t=this._getAttribute(s,"vertex"),e=this._getAttribute(s,"fragment"),r=this._getAttribute(s,"compute"),n=t||e||r,i=new kt(s.name,null==n?void 0:n.name);i.startLine=s.startLine,i.endLine=s.endLine,this.functions.push(i),this._functions.get(s.name).info=i,n&&(this._functions.get(s.name).inUse=!0,i.inUse=!0,i.resources=this._findResources(s,!!n),i.inputs=this._getInputs(s.args),i.outputs=this._getOutputs(s.returnType),this.entry[n.name].push(i))}else;for(const s of this._functions.values())s.info&&(s.info.inUse=s.inUse,this._addCalls(s.node,s.info.calls));for(const s of this.uniforms)this._markStructsInUse(s.type);for(const s of this.storage)this._markStructsInUse(s.type)}_markStructsInUse(t){if(t.isStruct){t.inUse=!0;for(const e of t.members)this._markStructsInUse(e.type)}else if(t.isArray)this._markStructsInUse(t.format);else if(t.isTemplate)this._markStructsInUse(t.format);else{const e=this._getAlias(t.name);e&&this._markStructsInUse(e)}}_addCalls(t,e){var s;for(const r of t.calls){const t=null===(s=this._functions.get(r.name))||void 0===s?void 0:s.info;t&&e.add(t)}}findResource(t,e){for(const s of this.uniforms)if(s.group==t&&s.binding==e)return s;for(const s of this.storage)if(s.group==t&&s.binding==e)return s;for(const s of this.textures)if(s.group==t&&s.binding==e)return s;for(const s of this.samplers)if(s.group==t&&s.binding==e)return s;return null}_findResource(t){for(const e of this.uniforms)if(e.name==t)return e;for(const e of this.storage)if(e.name==t)return e;for(const e of this.textures)if(e.name==t)return e;for(const e of this.samplers)if(e.name==t)return e;return null}_markStructsFromAST(t){const e=this._getTypeInfo(t,null);this._markStructsInUse(e)}_findResources(t,e){const s=[],r=this,n=[];return t.search((a=>{if(a instanceof i)n.push({});else if(a instanceof o)n.pop();else if(a instanceof d){const t=a;e&&null!==t.type&&this._markStructsFromAST(t.type),n.length>0&&(n[n.length-1][t.name]=t)}else if(a instanceof Q){const t=a;e&&null!==t.type&&this._markStructsFromAST(t.type)}else if(a instanceof m){const t=a;e&&null!==t.type&&this._markStructsFromAST(t.type),n.length>0&&(n[n.length-1][t.name]=t)}else if(a instanceof W){const t=a;if(n.length>0){if(n[n.length-1][t.name])return}const e=r._findResource(t.name);e&&s.push(e)}else if(a instanceof P){const n=a,i=r._functions.get(n.name);i&&(e&&(i.inUse=!0),t.calls.add(i.node),null===i.resources&&(i.resources=r._findResources(i.node,e)),s.push(...i.resources))}else if(a instanceof k){const n=a,i=r._functions.get(n.name);i&&(e&&(i.inUse=!0),t.calls.add(i.node),null===i.resources&&(i.resources=r._findResources(i.node,e)),s.push(...i.resources))}})),[...new Map(s.map((t=>[t.name,t]))).values()]}getBindGroups(){const t=[];function e(e,s){e>=t.length&&(t.length=e+1),void 0===t[e]&&(t[e]=[]),s>=t[e].length&&(t[e].length=s+1)}for(const s of this.uniforms){e(s.group,s.binding);t[s.group][s.binding]=s}for(const s of this.storage){e(s.group,s.binding);t[s.group][s.binding]=s}for(const s of this.textures){e(s.group,s.binding);t[s.group][s.binding]=s}for(const s of this.samplers){e(s.group,s.binding);t[s.group][s.binding]=s}return t}_getOutputs(t,e=void 0){if(void 0===e&&(e=[]),t instanceof S)this._getStructOutputs(t,e);else{const s=this._getOutputInfo(t);null!==s&&e.push(s)}return e}_getStructOutputs(t,e){for(const s of t.members)if(s.type instanceof S)this._getStructOutputs(s.type,e);else{const t=this._getAttribute(s,"location")||this._getAttribute(s,"builtin");if(null!==t){const r=this._getTypeInfo(s.type,s.type.attributes),n=this._parseInt(t.value),i=new wt(s.name,r,t.name,n);e.push(i)}}}_getOutputInfo(t){const e=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(null!==e){const s=this._getTypeInfo(t,t.attributes),r=this._parseInt(e.value);return new wt("",s,e.name,r)}return null}_getInputs(t,e=void 0){void 0===e&&(e=[]);for(const s of t)if(s.type instanceof S)this._getStructInputs(s.type,e);else{const t=this._getInputInfo(s);null!==t&&e.push(t)}return e}_getStructInputs(t,e){for(const s of t.members)if(s.type instanceof S)this._getStructInputs(s.type,e);else{const t=this._getInputInfo(s);null!==t&&e.push(t)}}_getInputInfo(t){const e=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(null!==e){const s=this._getAttribute(t,"interpolation"),r=this._getTypeInfo(t.type,t.attributes),n=this._parseInt(e.value),i=new Ct(t.name,r,e.name,n);return null!==s&&(i.interpolation=this._parseString(s.value)),i}return null}_parseString(t){return t instanceof Array&&(t=t[0]),t}_parseInt(t){t instanceof Array&&(t=t[0]);const e=parseInt(t);return isNaN(e)?t:e}_getAlias(t){for(const e of this.aliases)if(e.name==t)return e.type;return null}_getAliasInfo(t){return new yt(t.name,this._getTypeInfo(t.type,null))}_getTypeInfo(t,e){if(this._types.has(t))return this._types.get(t);if(t instanceof H){const s=t,r=this._getTypeInfo(s.format,s.attributes),n=new gt(s.name,e);return n.format=r,n.count=s.count,this._types.set(t,n),this._updateTypeInfo(n),n}if(t instanceof S){const s=t,r=new Bt(s.name,e);r.startLine=s.startLine,r.endLine=s.endLine;for(const t of s.members){const e=this._getTypeInfo(t.type,t.attributes);r.members.push(new mt(t.name,e,t.attributes))}return this._types.set(t,r),this._updateTypeInfo(r),r}if(t instanceof N){const s=t,r=s.format instanceof J,n=s.format?r?this._getTypeInfo(s.format,null):new At(s.format,null):null,i=new _t(s.name,n,e,s.access);return this._types.set(t,i),this._updateTypeInfo(i),i}if(t instanceof U){const s=t,r=s.format?this._getTypeInfo(s.format,null):null,n=new _t(s.name,r,e,s.access);return this._types.set(t,n),this._updateTypeInfo(n),n}const s=new At(t.name,e);return this._types.set(t,s),this._updateTypeInfo(s),s}_updateTypeInfo(t){var e,s;const r=this._getTypeSize(t);if(t.size=null!==(e=null==r?void 0:r.size)&&void 0!==e?e:0,t instanceof gt){const e=this._getTypeSize(t.format);t.stride=null!==(s=null==e?void 0:e.size)&&void 0!==s?s:0,this._updateTypeInfo(t.format)}t instanceof Bt&&this._updateStructInfo(t)}_updateStructInfo(t){var e;let s=0,r=0,n=0,i=0;for(let o=0,a=t.members.length;o<a;++o){const a=t.members[o],c=this._getTypeSize(a);if(!c)continue;null!==(e=this._getAlias(a.type.name))&&void 0!==e||a.type;const u=c.align,h=c.size;s=this._roundUp(u,s+r),r=h,n=s,i=Math.max(i,u),a.offset=s,a.size=h,this._updateTypeInfo(a.type)}t.size=this._roundUp(i,n+r),t.align=i}_getTypeSize(t){var e,s;if(null==t)return null;const r=this._getAttributeNum(t.attributes,"size",0),n=this._getAttributeNum(t.attributes,"align",0);if(t instanceof mt&&(t=t.type),t instanceof At){const e=this._getAlias(t.name);null!==e&&(t=e)}{const s=Mt._typeInfo[t.name];if(void 0!==s){const i="f16"===(null===(e=t.format)||void 0===e?void 0:e.name)?2:1;return new bt(Math.max(n,s.align/i),Math.max(r,s.size/i))}}{const e=Mt._typeInfo[t.name.substring(0,t.name.length-1)];if(e){const s="h"===t.name[t.name.length-1]?2:1;return new bt(Math.max(n,e.align/s),Math.max(r,e.size/s))}}if(t instanceof gt){let e=t,i=8,o=8;const a=this._getTypeSize(e.format);null!==a&&(o=a.size,i=a.align);return o=e.count*this._getAttributeNum(null!==(s=null==t?void 0:t.attributes)&&void 0!==s?s:null,"stride",this._roundUp(i,o)),r&&(o=r),new bt(Math.max(n,i),Math.max(r,o))}if(t instanceof Bt){let e=0,s=0,i=0,o=0,a=0;for(const r of t.members){const t=this._getTypeSize(r.type);null!==t&&(e=Math.max(t.align,e),i=this._roundUp(t.align,i+o),o=t.size,a=i)}return s=this._roundUp(e,a+o),new bt(Math.max(n,e),Math.max(r,s))}return null}_isUniformVar(t){return t instanceof d&&"uniform"==t.storage}_isStorageVar(t){return t instanceof d&&"storage"==t.storage}_isTextureVar(t){return t instanceof d&&null!==t.type&&-1!=Mt._textureTypes.indexOf(t.type.name)}_isSamplerVar(t){return t instanceof d&&null!==t.type&&-1!=Mt._samplerTypes.indexOf(t.type.name)}_getAttribute(t,e){const s=t;if(!s||!s.attributes)return null;const r=s.attributes;for(let n of r)if(n.name==e)return n;return null}_getAttributeNum(t,e,s){if(null===t)return s;for(let r of t)if(r.name==e){let t=null!==r&&null!==r.value?r.value:s;return t instanceof Array&&(t=t[0]),"number"==typeof t?t:"string"==typeof t?parseInt(t):s}return s}_roundUp(t,e){return Math.ceil(e/t)*t}}Mt._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},Mt._textureTypes=ht.any_texture_type.map((t=>t.name)),Mt._samplerTypes=ht.sampler_type.map((t=>t.name))},9877:(t,e,s)=>{s.d(e,{H:()=>Dt});const r=t=>"boolean"==typeof t,n=t=>"function"==typeof t,i=t=>null!==t&&"object"==typeof t,o=t=>i(t)&&t.constructor==={}.constructor,a=t=>Boolean(t)&&"function"==typeof t[Symbol.iterator],c=t=>t&&"function"==typeof t[Symbol.asyncIterator],u=t=>"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,h=t=>"undefined"!=typeof Blob&&t instanceof Blob,l=t=>t&&"object"==typeof t&&t.isBuffer,f=t=>(t=>"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||i(t)&&n(t.tee)&&n(t.cancel)&&n(t.getReader))(t)||(t=>i(t)&&n(t.read)&&n(t.pipe)&&r(t.readable))(t);var d=s(2595);function A(t){if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(t?.extensions)}function m(t){let e;return(0,d.v)(t,"null loader"),(0,d.v)(A(t),"invalid loader"),Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t?.parseTextSync||t?.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let B="";const g={};class _ extends Error{constructor(t,e){super(t),this.reason=e.reason,this.url=e.url,this.response=e.response}reason;url;response}const p=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,y=/^([-\w.]+\/[-\w.+]+)/;function b(t,e){return t.toLowerCase()===e.toLowerCase()}function C(t){const e=p.exec(t);return e?e[1]:""}const w=/\?.*/;function k(t){return t.replace(w,"")}function E(t){if(u(t)){return t.url}if(h(t)){return t.name||""}return"string"==typeof t?t:""}function x(t){if(u(t)){const e=t,s=e.headers.get("content-type")||"",r=k(e.url);return function(t){const e=y.exec(t);return e?e[1]:t}(s)||C(r)}if(h(t)){return t.type||""}return"string"==typeof t?C(t):""}async function F(t){if(u(t))return t;const e={},s=function(t){if(u(t))return t.headers["content-length"]||-1;if(h(t))return t.size;return"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);s>=0&&(e["content-length"]=String(s));const r=E(t),n=x(t);n&&(e["content-type"]=n);const i=await async function(t){const e=5;if("string"==typeof t)return`data:,${t.slice(0,e)}`;if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const s=new FileReader;s.onload=e=>t(e?.target?.result),s.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){return`data:base64,${function(t){let e="";const s=new Uint8Array(t);for(let r=0;r<s.byteLength;r++)e+=String.fromCharCode(s[r]);return btoa(e)}(t.slice(0,e))}`}return null}(t);i&&(e["x-first-bytes"]=i),"string"==typeof t&&(t=(new TextEncoder).encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function M(t){if(!t.ok){const e=await async function(t){const s=function(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}(t.url);let r=`Failed to fetch resource (${t.status}) ${t.statusText}: ${s}`;r=r.length>100?`${r.slice(0,100)}...`:r;const n={reason:t.statusText,url:t.url,response:t};try{const e=t.headers.get("Content-Type");n.reason=e?.includes("application/json")?await t.json():t.text()}catch(e){}return new _(r,n)}(t);throw e}}async function v(t,e){if("string"==typeof t){const s=function(t){for(const e in g)if(t.startsWith(e)){const s=g[e];t=t.replace(e,s)}return t.startsWith("http://")||t.startsWith("https://")||(t=`${B}${t}`),t}(t);return function(t){return!function(t){return t.startsWith("http:")||t.startsWith("https:")}(t)&&!function(t){return t.startsWith("data:")}(t)}(s)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(s,e):await fetch(s,e)}return await F(t)}var I=s(5593);const G=new I.t({id:"loaders.gl"});class D{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var T=s(7612);const O={fetch:null,mimeType:void 0,nothrow:!1,log:new class{console;constructor(){this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:T.Bd,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},R={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function J(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function S(){const t=J();return t.globalOptions=t.globalOptions||{...O},t.globalOptions}function U(t,e,s,r){return s=s||[],function(t,e){L(t,null,O,R,e);for(const s of e){const r=t&&t[s.id]||{},n=s.options&&s.options[s.id]||{},i=s.deprecatedOptions&&s.deprecatedOptions[s.id]||{};L(r,s.id,n,i,e)}}(t,s=Array.isArray(s)?s:[s]),N(e,t,r)}function L(t,e,s,r,n){const o=e||"Top level",a=e?`${e}.`:"";for(const c in t){const u=!e&&i(t[c]);if(!(c in s)&&!("baseUri"===c&&!e)&&!("workerUrl"===c&&e))if(c in r)G.warn(`${o} loader option '${a}${c}' no longer supported, use '${r[c]}'`)();else if(!u){const t=H(c,n);G.warn(`${o} loader option '${a}${c}' not recognized. ${t}`)()}}}function H(t,e){const s=t.toLowerCase();let r="";for(const n of e)for(const e in n.options){if(t===e)return`Did you mean '${n.id}.${e}'?`;const i=e.toLowerCase();(s.startsWith(i)||i.startsWith(s))&&(r=r||`Did you mean '${n.id}.${e}'?`)}return r}function N(t,e,s){const r={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,s),null===r.log&&(r.log=new D),j(r,S()),j(r,e),r}function j(t,e){for(const s in e)if(s in e){const r=e[s];o(r)&&o(t[s])?t[s]={...t[s],...e[s]}:t[s]=e[s]}}function K(t,e){const s=S(),r=t||s;return"function"==typeof r.fetch?r.fetch:i(r.fetch)?t=>v(t,r.fetch):e?.fetch?e?.fetch:v}var Q=s(8503);class P{terminate(){}}var W=s(5993);const X=new Map;function q(t){(0,W.v)(t.source&&!t.url||!t.source&&t.url);let e=X.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Y((e=t,`try {\n  importScripts('${e}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`));var e}(t.url),X.set(t.url,e)),t.source&&(e=Y(t.source),X.set(t.source,e))),(0,W.v)(e),e}function Y(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function V(t,e=!0,s){const r=s||new Set;if(t){if(Z(t))r.add(t);else if(Z(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(const n in t)V(t[n],e,r)}else;return void 0===s?Array.from(r):[]}function Z(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const z=()=>{};class ${name;source;url;terminated=!1;worker;onMessage;onError;_loadableURL="";static isSupported(){return"undefined"!=typeof Worker&&Q.Bd||void 0!==P&&!Q.Bd}constructor(t){const{name:e,source:s,url:r}=t;(0,W.v)(s||r),this.name=e,this.source=s,this.url=r,this.onMessage=z,this.onError=t=>console.log(t),this.worker=Q.Bd?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=z,this.onError=z,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||V(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+=`worker ${this.name} from ${this.url}. `,t.message&&(e+=`${t.message} in `),t.lineno&&(e+=`:${t.lineno}:${t.colno}`),new Error(e)}_createBrowserWorker(){this._loadableURL=q({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new P(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new P(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class tt{name;workerThread;isRunning=!0;result;_resolve=()=>{};_reject=()=>{};constructor(t,e){this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){(0,W.v)(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){(0,W.v)(this.isRunning),this.isRunning=!1,this._reject(t)}}class et{name="unnamed";source;url;maxConcurrency=1;maxMobileConcurrency=1;onDebug=()=>{};reuseWorkers=!0;props={};jobQueue=[];idleQueue=[];count=0;isDestroyed=!1;static isSupported(){return $.isSupported()}constructor(t){this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t,e=((t,e,s)=>t.done(s)),s=((t,e)=>t.error(e))){const r=new Promise((r=>(this.jobQueue.push({name:t,onMessage:e,onError:s,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const r=new tt(e.name,t);t.onMessage=t=>e.onMessage(r,t.type,t.payload),t.onError=t=>e.onError(r,t),e.onStart(r);try{await r.result}catch(s){console.error(`Worker exception: ${s}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!Q.Bd||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new $({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Q.Fr?this.maxMobileConcurrency:this.maxConcurrency}}const st={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class rt{props;workerPools=new Map;static _workerFarm;static isSupported(){return $.isSupported()}static getWorkerFarm(t={}){return rt._workerFarm=rt._workerFarm||new rt({}),rt._workerFarm.setProps(t),rt._workerFarm}constructor(t){this.props={...st},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:s,url:r}=t;let n=this.workerPools.get(e);return n||(n=new et({name:e,source:s,url:r}),n.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,n)),n}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}var nt=s(5607);async function it(t,e,s,r,n){const i=t.id,o=function(t,e={}){const s=e[t.id]||{},r=Q.Bd?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let n=s.workerUrl;if(n||"compression"!==t.id||(n=e.workerUrl),"test"===e._workerType&&(n=Q.Bd?`modules/${t.module}/dist/${r}`:`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!n){let e=t.version;"latest"===e&&(e=nt.x);const s=e?`@${e}`:"";n=`https://unpkg.com/@loaders.gl/${t.module}${s}/dist/${r}`}return(0,W.v)(n),n}(t,s),a=rt.getWorkerFarm(s).getWorkerPool({name:i,url:o});s=JSON.parse(JSON.stringify(s)),r=JSON.parse(JSON.stringify(r||{}));const c=await a.startJob("process-on-worker",ot.bind(null,n));c.postMessage("process",{input:e,options:s,context:r});const u=await c.result;return await u.result}async function ot(t,e,s,r){switch(s){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:o,options:a}=r;try{const s=await t(o,a);e.postMessage("done",{id:i,result:s})}catch(n){const t=n instanceof Error?n.message:"unknown error";e.postMessage("error",{id:i,error:t})}break;default:console.warn(`parse-with-worker unknown message ${s}`)}}function at(t,e){return ct(t||{},e)}function ct(t,e,s=0){if(s>3)return e;const r={...t};for(const[n,i]of Object.entries(e))i&&"object"==typeof i&&!Array.isArray(i)?r[n]=ct(r[n]||{},e[n],s+1):r[n]=e[n];return r}var ut=s(48);const ht=262144;const lt=262144;const ft=1048576;function dt(t){if((e=t)&&"object"==typeof e&&e.isBuffer)return t;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function At(t,e){return T.Bd?async function*(t,e){const s=t.getReader();let r;try{for(;;){const t=r||s.read();e?._streamReadAhead&&(r=s.read());const{done:n,value:i}=await t;if(n)return;yield dt(i)}}catch(n){s.releaseLock()}}(t,e):async function*(t,e){for await(const s of t)yield dt(s)}(t)}function mt(t,e){if("string"==typeof t)return function*(t,e){const s=e?.chunkSize||ht;let r=0;const n=new TextEncoder;for(;r<t.length;){const e=Math.min(t.length-r,s),i=t.slice(r,r+e);r+=e,yield n.encode(i)}}(t,e);if(t instanceof ArrayBuffer)return function*(t,e={}){const{chunkSize:s=lt}=e;let r=0;for(;r<t.byteLength;){const e=Math.min(t.byteLength-r,s),n=new ArrayBuffer(e),i=new Uint8Array(t,r,e);new Uint8Array(n).set(i),r+=e,yield n}}(t,e);if(h(t))return async function*(t,e){const s=e?.chunkSize||ft;let r=0;for(;r<t.size;){const e=r+s,n=await t.slice(r,e).arrayBuffer();r=e,yield n}}(t,e);if(f(t))return At(t,e);if(u(t)){return At(t.body,e)}throw new Error("makeIterator")}const Bt="Cannot convert supplied data type";async function gt(t,e,s){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||r)return function(t,e,s){if(e.text&&"string"==typeof t)return t;if(l(t)&&(t=t.buffer),t instanceof ArrayBuffer){const s=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(s):s}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let s=t.buffer;const r=t.byteLength||t.length;return 0===t.byteOffset&&r===s.byteLength||(s=s.slice(t.byteOffset,t.byteOffset+r)),s}throw new Error(Bt)}(t,e);if(h(t)&&(t=await F(t)),u(t)){const s=t;return await M(s),e.binary?await s.arrayBuffer():await s.text()}if(f(t)&&(t=mt(t,s)),a(t)||c(t))return async function(t){const e=[];for await(const s of t)e.push(s);return(0,ut.AQ)(...e)}(t);throw new Error(Bt)}function _t(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function pt(t,e,s){if(s)return s;const r={fetch:K(e,t),...t};if(r.url){const t=k(r.url);r.baseUrl=t,r.queryString=function(t){const e=t.match(w);return e&&e[0]}(r.url),r.filename=_t(t),r.baseUrl=function(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(t)}return Array.isArray(r.loaders)||(r.loaders=null),r}const yt=new I.t({id:"loaders.gl"}),bt=()=>{const t=J();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};const Ct=/\.([^.]+)$/;function wt(t,e=[],s,r){if(!kt(t))return null;if(e&&!Array.isArray(e))return m(e);let n=[];e&&(n=n.concat(e)),s?.ignoreRegisteredLoaders||n.push(...bt()),function(t){for(const e of t)m(e)}(n);const i=function(t,e,s,r){const n=E(t),i=x(t),o=k(n)||r?.url;let a=null,c="";s?.mimeType&&(a=xt(e,s?.mimeType),c=`match forced by supplied MIME type ${s?.mimeType}`);a=a||function(t,e){const s=e&&Ct.exec(e),r=s&&s[1];return r?function(t,e){e=e.toLowerCase();for(const s of t)for(const t of s.extensions)if(t.toLowerCase()===e)return s;return null}(t,r):null}(e,o),c=c||(a?`matched url ${o}`:""),a=a||xt(e,i),c=c||(a?`matched MIME type ${i}`:""),a=a||function(t,e){if(!e)return null;for(const s of t)if("string"==typeof e){if(Ft(e,s))return s}else if(ArrayBuffer.isView(e)){if(Mt(e.buffer,e.byteOffset,s))return s}else if(e instanceof ArrayBuffer){if(Mt(e,0,s))return s}return null}(e,t),c=c||(a?`matched initial data ${vt(t)}`:""),s?.fallbackMimeType&&(a=a||xt(e,s?.fallbackMimeType),c=c||(a?`matched fallback MIME type ${i}`:""));c&&yt.log(1,`selectLoader selected ${a?.name}: ${c}.`);return a}(t,n,s,r);if(!i&&!s?.nothrow)throw new Error(Et(t));return i}function kt(t){return!(t instanceof Response&&204===t.status)}function Et(t){const e=E(t),s=x(t);let r="No valid loader found (";r+=e?`${_t(e)}, `:"no url provided, ",r+=`MIME type: ${s?`"${s}"`:"not provided"}, `;const n=t?vt(t):"";return r+=n?` first bytes: "${n}"`:"first bytes: not available",r+=")",r}function xt(t,e){for(const s of t){if(s.mimeTypes?.some((t=>b(e,t))))return s;if(b(e,`application/x.${s.id}`))return s}return null}function Ft(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function Mt(t,e,s){return(Array.isArray(s.tests)?s.tests:[s.tests]).some((s=>function(t,e,s,r){if(r instanceof ArrayBuffer)return(0,ut.YV)(r,t,r.byteLength);switch(typeof r){case"function":return r(t);case"string":return r===It(t,e,r.length);default:return!1}}(t,e,0,s)))}function vt(t,e=5){if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return It(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return It(t,0,e)}return""}function It(t,e,s){if(t.byteLength<e+s)return"";const r=new DataView(t);let n="";for(let i=0;i<s;i++)n+=String.fromCharCode(r.getUint8(e+i));return n}async function Gt(t,e,s,r){!e||Array.isArray(e)||A(e)||(r=void 0,s=e,e=void 0),s=s||{};const n=E(t=await t),i=function(t,e){if(t&&!Array.isArray(t))return t;let s;if(t&&(s=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];s=s?[...s,...t]:t}return s&&s.length?s:void 0}(e,r),o=await async function(t,e=[],s,r){if(!kt(t))return null;let n=wt(t,e,{...s,nothrow:!0},r);if(n)return n;if(h(t)&&(n=wt(t=await t.slice(0,10).arrayBuffer(),e,s,r)),!n&&!s?.nothrow)throw new Error(Et(t));return n}(t,i,s);return o?(r=pt({url:n,_parse:Gt,loaders:i},s=U(s,o,i,n),r||null),await async function(t,e,s,r){if(function(t,e=nt.Q){(0,W.v)(t,"no worker provided");const s=t.version}(t),s=at(t.options,s),u(e)){const t=e,{ok:s,redirected:n,status:i,statusText:o,type:a,url:c}=t,u=Object.fromEntries(t.headers.entries());r.response={headers:u,ok:s,redirected:n,status:i,statusText:o,type:a,url:c}}e=await gt(e,t,s);const n=t;if(n.parseTextSync&&"string"==typeof e)return n.parseTextSync(e,s,r);if(function(t,e){return!!rt.isSupported()&&!(!Q.Bd&&!e?._nodeWorkers)&&t.worker&&e?.worker}(t,s))return await it(t,e,s,r,Gt);if(n.parseText&&"string"==typeof e)return await n.parseText(e,s,r);if(n.parse)return await n.parse(e,s,r);throw(0,W.v)(!n.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}(o,t,s,r)):null}async function Dt(t,e,s,r){let n,i;Array.isArray(e)||A(e)?(n=e,i=s):(n=[],i=e);const o=K(i);let a=t;return"string"==typeof t&&(a=await o(t)),h(t)&&(a=await o(t)),Array.isArray(n),await Gt(a,n,i)}},6547:(t,e,s)=>{s.d(e,{B:()=>cr});var r={};s.r(r),s.d(r,{decode:()=>ie,name:()=>ne});var n={};s.r(n),s.d(n,{decode:()=>ue,name:()=>ce});var i={};s.r(i),s.d(i,{decode:()=>Me,name:()=>Fe});var o={};s.r(o),s.d(o,{name:()=>Oe,preprocess:()=>Re});var a={};s.r(a),s.d(a,{name:()=>Se,preprocess:()=>Ue});var c={};s.r(c),s.d(c,{decode:()=>ns,encode:()=>is,name:()=>ss,preprocess:()=>rs});var u={};s.r(u),s.d(u,{decode:()=>Fs,name:()=>ws});var h={};s.r(h),s.d(h,{decode:()=>Ts,encode:()=>Os,name:()=>Ds});var l={};s.r(l),s.d(l,{decode:()=>Ss,encode:()=>Us,name:()=>Js});var f={};s.r(f),s.d(f,{decode:()=>Ns,encode:()=>js,name:()=>Hs});var d={};s.r(d),s.d(d,{decode:()=>Ws,name:()=>Ps});function A(t,e,s){if(t.byteLength<=e+s)return"";const r=new DataView(t);let n="";for(let i=0;i<s;i++)n+=String.fromCharCode(r.getUint8(e+i));return n}function m(t){try{return JSON.parse(t)}catch(e){throw new Error(`Failed to parse JSON from data starting with "${function(t,e=5){if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return A(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer)return A(t,0,e);return""}(t)}"`)}}var B=s(48);async function g(t,e,s,r){return r._parse(t,e,s,r)}var _=s(2595),p=s(7612);const y=globalThis.loaders?.parseImageNode,b="undefined"!=typeof Image,C="undefined"!=typeof ImageBitmap,w=Boolean(y),k=!!p.Bd||w;function E(t){const e=F(t);if(!e)throw new Error("Not an image");return e}function x(t){switch(E(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),s=e.getContext("2d");if(!s)throw new Error("getImageData");return e.width=t.width,e.height=t.height,s.drawImage(t,0,0),s.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function F(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}const M=/^data:image\/svg\+xml/,v=/\.svg((\?|#).*)?$/;function I(t){return t&&(M.test(t)||v.test(t))}function G(t,e){if(I(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function D(t,e,s){const r=function(t,e){if(I(e)){let e=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(e)}`}return G(t,e)}(t,s),n=self.URL||self.webkitURL,i="string"!=typeof r&&n.createObjectURL(r);try{return await async function(t,e){const s=new Image;if(s.src=t,e.image&&e.image.decode&&s.decode)return await s.decode(),s;return await new Promise(((t,e)=>{try{s.onload=()=>t(s),s.onerror=t=>{const s=t instanceof Error?t.message:"error";e(new Error(s))}}catch(r){e(r)}}))}(i||r,e)}finally{i&&n.revokeObjectURL(i)}}const T={};let O=!0;async function R(t,e,s){let r;if(I(s)){r=await D(t,e,s)}else r=G(t,s);const n=e&&e.imagebitmap;return await async function(t,e=null){!function(t){for(const e in t||T)return!1;return!0}(e)&&O||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(s){console.warn(s),O=!1}return await createImageBitmap(t)}(r,n)}function J(t){return function(t,e,s=0){const r=(n=e,[...n].map((t=>t.charCodeAt(0))));var n;for(let i=0;i<r.length;++i)if(r[i]!==t[i+s])return!1;return!0}(t,"ftyp",4)?0==(96&t[8])?null:function(t){switch((e=t,s=8,r=12,String.fromCharCode(...e.slice(s,r))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var e,s,r}(t):null}const S=!1,U=!0;function L(t){const e=H(t);return function(t){const e=H(t),s=e.byteLength>=24&&2303741511===e.getUint32(0,S);if(!s)return null;return{mimeType:"image/png",width:e.getUint32(16,S),height:e.getUint32(20,S)}}(e)||function(t){const e=H(t),s=e.byteLength>=3&&65496===e.getUint16(0,S)&&255===e.getUint8(2);if(!s)return null;const{tableMarkers:r,sofMarkers:n}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let s=65504;s<65520;++s)t.add(s);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let i=2;for(;i+9<e.byteLength;){const t=e.getUint16(i,S);if(n.has(t))return{mimeType:"image/jpeg",height:e.getUint16(i+5,S),width:e.getUint16(i+7,S)};if(!r.has(t))return null;i+=2,i+=e.getUint16(i,S)}return null}(e)||function(t){const e=H(t),s=e.byteLength>=10&&1195984440===e.getUint32(0,S);if(!s)return null;return{mimeType:"image/gif",width:e.getUint16(6,U),height:e.getUint16(8,U)}}(e)||function(t){const e=H(t),s=e.byteLength>=14&&16973===e.getUint16(0,S)&&e.getUint32(2,U)===e.byteLength;if(!s)return null;return{mimeType:"image/bmp",width:e.getUint32(18,U),height:e.getUint32(22,U)}}(e)||function(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),s=J(e);if(!s)return null;return{mimeType:s.mimeType,width:0,height:0}}(e)}function H(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const N={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:"4.2.3",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,s){const r=((e=e||{}).image||{}).type||"auto",{url:n}=s||{};let i;switch(function(t){switch(t){case"auto":case"data":return function(){if(C)return"imagebitmap";if(b)return"image";if(k)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return C||b||k;case"imagebitmap":return C;case"image":return b;case"data":return k;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}(t),t}}(r)){case"imagebitmap":i=await R(t,e,n);break;case"image":i=await D(t,e,n);break;case"data":i=await async function(t,e){const{mimeType:s}=L(t)||{},r=globalThis.loaders?.parseImageNode;return(0,_.v)(r),await r(t,s)}(t);break;default:(0,_.v)(!1)}return"data"===r&&(i=x(i)),i},tests:[t=>Boolean(L(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};var j=s(8503),K=s(5993),Q=s(5607);const P={};async function W(t,e=null,s={},r=null){return e&&(t=function(t,e,s={},r=null){if(!s.useLocalLibraries&&t.startsWith("http"))return t;r=r||t;const n=s.modules||{};if(n[r])return n[r];if(!j.Bd)return`modules/${e}/dist/libs/${r}`;if(s.CDN)return(0,K.v)(s.CDN.startsWith("http")),`${s.CDN}/${e}@${Q.Q}/dist/libs/${r}`;if(j.xD)return`../src/libs/${r}`;return`modules/${e}/src/libs/${r}`}(t,e,s,r)),P[t]=P[t]||async function(t){if(t.endsWith("wasm"))return await async function(t){const{readFileAsArrayBuffer:e}=globalThis.loaders||{};if(j.Bd||!e||t.startsWith("http")){const e=await fetch(t);return await e.arrayBuffer()}return await e(t)}(t);if(!j.Bd)try{const{requireFromFile:e}=globalThis.loaders||{};return await(e?.(t))}catch(s){return console.error(s),null}if(j.xD)return importScripts(t);const e=await async function(t){const{readFileAsText:e}=globalThis.loaders||{};if(j.Bd||!e||t.startsWith("http")){const e=await fetch(t);return await e.text()}return await e(t)}(t);return function(t,e){if(!j.Bd){const{requireFromString:s}=globalThis.loaders||{};return s?.(t,e)}if(j.xD)return eval.call(globalThis,t),null;const s=document.createElement("script");s.id=e;try{s.appendChild(document.createTextNode(t))}catch(r){s.text=t}return document.body.appendChild(s),null}(e,t)}(t),await P[t]}const X={TRANSCODER:"basis_transcoder.js",TRANSCODER_WASM:"basis_transcoder.wasm",ENCODER:"basis_encoder.js",ENCODER_WASM:"basis_encoder.wasm"};let q,Y;async function V(t){var e;e=t.modules,globalThis.loaders||={},globalThis.loaders.modules||={},Object.assign(globalThis.loaders.modules,e);const s=function(t){const e=globalThis.loaders?.modules?.[t];return e||null}("basis");return s||(q||=async function(t){let e=null,s=null;return[e,s]=await Promise.all([await W(X.TRANSCODER,"textures",t),await W(X.TRANSCODER_WASM,"textures",t)]),e=e||globalThis.BASIS,await function(t,e){const s={};e&&(s.wasmBinary=e);return new Promise((e=>{t(s).then((t=>{const{BasisFile:s,initializeBasis:r}=t;r(),e({BasisFile:s})}))}))}(e,s)}(t),await q)}async function Z(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(Y=Y||async function(t){let e=null,s=null;return[e,s]=await Promise.all([await W(X.ENCODER,"textures",t),await W(X.ENCODER_WASM,"textures",t)]),e=e||globalThis.BASIS,await function(t,e){const s={};e&&(s.wasmBinary=e);return new Promise((e=>{t(s).then((t=>{const{BasisFile:s,KTX2File:r,initializeBasis:n,BasisEncoder:i}=t;n(),e({BasisFile:s,KTX2File:r,BasisEncoder:i})}))}))}(e,s)}(t),await Y)}const z=33776,$=33779,tt=35840,et=35842,st=36196,rt=37808,nt=["","WEBKIT_","MOZ_"],it={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let ot=null;function at(t){if(!ot){t=t||function(){try{return document.createElement("canvas").getContext("webgl")}catch(t){return null}}()||void 0,ot=new Set;for(const e of nt)for(const s in it)if(t&&t.getExtension(`${e}${s}`)){const t=it[s];ot.add(t)}}return ot}new Uint8Array([0]);var ct,ut,ht,lt,ft,dt,At,mt;!function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(ct||(ct={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(ut||(ut={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(ht||(ht={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(lt||(lt={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(ft||(ft={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(dt||(dt={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(At||(At={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(mt||(mt={}));const Bt=[171,75,84,88,32,50,48,187,13,10,26,10];const gt={etc1:{basisFormat:0,compressed:!0,format:st},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:z},bc3:{basisFormat:3,compressed:!0,format:$},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:tt},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:et},"astc-4x4":{basisFormat:10,compressed:!0,format:rt},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function _t(t,e,s){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("Failed to start basis transcoding");const t=r.getNumImages(),e=[];for(let n=0;n<t;n++){const t=r.getNumLevels(n),i=[];for(let e=0;e<t;e++)i.push(pt(r,n,e,s));e.push(i)}return e}finally{r.close(),r.delete()}}function pt(t,e,s,r){const n=t.getImageWidth(e,s),i=t.getImageHeight(e,s),o=t.getHasAlpha(),{compressed:a,format:c,basisFormat:u}=Ct(r,o),h=t.getImageTranscodedSizeInBytes(e,s,u),l=new Uint8Array(h);if(!t.transcodeImage(l,e,s,u,0,0))throw new Error("failed to start Basis transcoding");return{width:n,height:i,data:l,compressed:a,format:c,hasAlpha:o}}function yt(t,e,s){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("failed to start KTX2 transcoding");const t=r.getLevels(),e=[];for(let n=0;n<t;n++){e.push(bt(r,n,s));break}return[e]}finally{r.close(),r.delete()}}function bt(t,e,s){const{alphaFlag:r,height:n,width:i}=t.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=Ct(s,r),u=t.getImageTranscodedSizeInBytes(e,0,0,c),h=new Uint8Array(u);if(!t.transcodeImage(h,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:i,height:n,data:h,compressed:o,levelSize:u,hasAlpha:r,format:a}}function Ct(t,e){let s=t&&t.basis&&t.basis.format;return"auto"===s&&(s=wt()),"object"==typeof s&&(s=e?s.alpha:s.noAlpha),s=s.toLowerCase(),gt[s]}function wt(){const t=at();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const kt={...{dataType:null,batchType:null,name:"Basis",id:"basis",module:"textures",version:"4.2.3",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},parse:async function(t,e){if("auto"===e.basis.containerFormat){if(function(t){const e=new Uint8Array(t);return!(e.byteLength<Bt.length||e[0]!==Bt[0]||e[1]!==Bt[1]||e[2]!==Bt[2]||e[3]!==Bt[3]||e[4]!==Bt[4]||e[5]!==Bt[5]||e[6]!==Bt[6]||e[7]!==Bt[7]||e[8]!==Bt[8]||e[9]!==Bt[9]||e[10]!==Bt[10]||e[11]!==Bt[11])}(t)){return yt((await Z(e)).KTX2File,t,e)}const{BasisFile:s}=await V(e);return _t(s,t,e)}if("encoder"===e.basis.module){const s=await Z(e);return"ktx2"===e.basis.containerFormat?yt(s.KTX2File,t,e):_t(s.BasisFile,t,e)}{const{BasisFile:s}=await V(e);return _t(s,t,e)}}};var Et=s(2840);function xt(t,e){return(0,_.v)(t>=0),(0,_.v)(e>0),t+(e-1)&~(e-1)}function Ft(t,e,s){let r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{const e=t.byteOffset,s=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,e,s)}return e.set(r,s),s+xt(r.byteLength,4)}const Mt=!0,vt=1735152710,It=12,Gt=8,Dt=1313821514,Tt=5130562,Ot=0,Rt=0,Jt=1;function St(t,e,s=0,r={}){const n=new DataView(e),i=function(t,e=0){return`${String.fromCharCode(t.getUint8(e+0))}${String.fromCharCode(t.getUint8(e+1))}${String.fromCharCode(t.getUint8(e+2))}${String.fromCharCode(t.getUint8(e+3))}`}(n,s+0),o=n.getUint32(s+4,Mt),a=n.getUint32(s+8,Mt);switch(Object.assign(t,{header:{byteOffset:s,byteLength:a,hasBinChunk:!1},type:i,version:o,json:{},binChunks:[]}),s+=It,t.version){case 1:return function(t,e,s){(0,_.v)(t.header.byteLength>It+Gt);const r=e.getUint32(s+0,Mt),n=e.getUint32(s+4,Mt);return s+=Gt,(0,_.v)(n===Ot),Ut(t,e,s,r),s+=r,s+=Lt(t,e,s,t.header.byteLength),s}(t,n,s);case 2:return function(t,e,s,r){return(0,_.v)(t.header.byteLength>It+Gt),function(t,e,s,r){for(;s+8<=t.header.byteLength;){const n=e.getUint32(s+0,Mt),i=e.getUint32(s+4,Mt);switch(s+=Gt,i){case Dt:Ut(t,e,s,n);break;case Tt:Lt(t,e,s,n);break;case Rt:r.strict||Ut(t,e,s,n);break;case Jt:r.strict||Lt(t,e,s,n)}s+=xt(n,4)}}(t,e,s,r),s+t.header.byteLength}(t,n,s,{});default:throw new Error(`Invalid GLB version ${t.version}. Only supports version 1 and 2.`)}}function Ut(t,e,s,r){const n=new Uint8Array(e.buffer,s,r),i=new TextDecoder("utf8").decode(n);return t.json=JSON.parse(i),xt(r,4)}function Lt(t,e,s,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:s,byteLength:r,arrayBuffer:e.buffer}),xt(r,4)}function Ht(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const s=e.baseUri||e.uri;if(!s)throw new Error(`'baseUri' must be provided to resolve relative url ${t}`);return s.substr(0,s.lastIndexOf("/")+1)+t}var Nt=s(7885);function jt(t,e,s){const r=t.bufferViews[s];(0,Et.v)(r);const n=e[r.buffer];(0,Et.v)(n);const i=(r.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,i,r.byteLength)}class Kt{gltf;sourceBuffers;byteLength;constructor(t){this.gltf={json:t?.json||{asset:{version:"2.0",generator:"loaders.gl"},buffers:[],extensions:{},extensionsRequired:[],extensionsUsed:[]},buffers:t?.buffers||[],images:t?.images||[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(t){return this.json[t]}getExtraData(t){return(this.json.extras||{})[t]}hasExtension(t){const e=this.getUsedExtensions().find((e=>e===t)),s=this.getRequiredExtensions().find((e=>e===t));return"string"==typeof e||"string"==typeof s}getExtension(t){const e=this.getUsedExtensions().find((e=>e===t)),s=this.json.extensions||{};return e?s[t]:null}getRequiredExtension(t){return this.getRequiredExtensions().find((e=>e===t))?this.getExtension(t):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(t,e){return(t.extensions||{})[e]}getScene(t){return this.getObject("scenes",t)}getNode(t){return this.getObject("nodes",t)}getSkin(t){return this.getObject("skins",t)}getMesh(t){return this.getObject("meshes",t)}getMaterial(t){return this.getObject("materials",t)}getAccessor(t){return this.getObject("accessors",t)}getTexture(t){return this.getObject("textures",t)}getSampler(t){return this.getObject("samplers",t)}getImage(t){return this.getObject("images",t)}getBufferView(t){return this.getObject("bufferViews",t)}getBuffer(t){return this.getObject("buffers",t)}getObject(t,e){if("object"==typeof e)return e;const s=this.json[t]&&this.json[t][e];if(!s)throw new Error(`glTF file error: Could not find ${t}[${e}]`);return s}getTypedArrayForBufferView(t){const e=(t=this.getBufferView(t)).buffer,s=this.gltf.buffers[e];(0,Et.v)(s);const r=(t.byteOffset||0)+s.byteOffset;return new Uint8Array(s.arrayBuffer,r,t.byteLength)}getTypedArrayForAccessor(t){const e=this.getAccessor(t);return function(t,e,s){const r="number"==typeof s?t.accessors?.[s]:s;if(!r)throw new Error(`No gltf accessor ${JSON.stringify(s)}`);const n=t.bufferViews?.[r.bufferView||0];if(!n)throw new Error(`No gltf buffer view for accessor ${n}`);const{arrayBuffer:i,byteOffset:o}=e[n.buffer],a=(o||0)+(r.byteOffset||0)+(n.byteOffset||0),{ArrayType:c,length:u,componentByteSize:h,numberOfComponentsInElement:l}=(0,Nt.aF)(r,n),f=h*l,d=n.byteStride||f;if(void 0===n.byteStride||n.byteStride===f)return new c(i,a,u);const A=new c(u);for(let m=0;m<r.count;m++){const t=new c(i,a+m*d,l);A.set(t,m*l)}return A}(this.gltf.json,this.gltf.buffers,e)}getTypedArrayForImageData(t){t=this.getAccessor(t);const e=this.getBufferView(t.bufferView),s=this.getBuffer(e.buffer).data,r=e.byteOffset||0;return new Uint8Array(s,r,e.byteLength)}addApplicationData(t,e){return this.json[t]=e,this}addExtraData(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this}addObjectExtension(t,e,s){return t.extensions=t.extensions||{},t.extensions[e]=s,this.registerUsedExtension(e),this}setObjectExtension(t,e,s){(t.extensions||{})[e]=s}removeObjectExtension(t,e){const s=t?.extensions||{};if(s[e]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const t=this.json.extensionsRemoved;t.includes(e)||t.push(e)}delete s[e]}addExtension(t,e={}){return(0,Et.v)(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e}addRequiredExtension(t,e={}){return(0,Et.v)(e),this.addExtension(t,e),this.registerRequiredExtension(t),e}registerUsedExtension(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((e=>e===t))||this.json.extensionsUsed.push(t)}registerRequiredExtension(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((e=>e===t))||this.json.extensionsRequired.push(t)}removeExtension(t){if(this.json.extensions?.[t]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const e=this.json.extensionsRemoved;e.includes(t)||e.push(t)}this.json.extensions&&delete this.json.extensions[t],this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t)}setDefaultScene(t){this.json.scene=t}addScene(t){const{nodeIndices:e}=t;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:e}),this.json.scenes.length-1}addNode(t){const{meshIndex:e,matrix:s}=t;this.json.nodes=this.json.nodes||[];const r={mesh:e};return s&&(r.matrix=s),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(t){const{attributes:e,indices:s,material:r,mode:n=4}=t,i={primitives:[{attributes:this._addAttributes(e),mode:n}]};if(s){const t=this._addIndices(s);i.primitives[0].indices=t}return Number.isFinite(r)&&(i.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addPointCloud(t){const e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1}addImage(t,e){const s=L(t),r=e||s?.mimeType,n={bufferView:this.addBufferView(t),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(n),this.json.images.length-1}addBufferView(t,e=0,s=this.byteLength){const r=t.byteLength;(0,Et.v)(Number.isFinite(r)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);const n={buffer:e,byteOffset:s,byteLength:r};return this.byteLength+=xt(r,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1}addAccessor(t,e){const s={bufferView:t,type:(0,Nt.v7)(e.size),componentType:e.componentType,count:e.count,max:e.max,min:e.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(s),this.json.accessors.length-1}addBinaryBuffer(t,e={size:3}){const s=this.addBufferView(t);let r={min:e.min,max:e.max};r.min&&r.max||(r=this._getAccessorMinMax(t,e.size));const n={size:e.size,componentType:(0,Nt.rA)(t),count:Math.round(t.length/e.size),min:r.min,max:r.max};return this.addAccessor(s,Object.assign(n,e))}addTexture(t){const{imageIndex:e}=t,s={source:e};return this.json.textures=this.json.textures||[],this.json.textures.push(s),this.json.textures.length-1}addMaterial(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}createBinaryChunk(){this.gltf.buffers=[];const t=this.byteLength,e=new ArrayBuffer(t),s=new Uint8Array(e);let r=0;for(const n of this.sourceBuffers||[])r=Ft(n,s,r);this.json?.buffers?.[0]?this.json.buffers[0].byteLength=t:this.json.buffers=[{byteLength:t}],this.gltf.binary=e,this.sourceBuffers=[e]}_removeStringFromArray(t,e){let s=!0;for(;s;){const r=t.indexOf(e);r>-1?t.splice(r,1):s=!1}}_addAttributes(t={}){const e={};for(const s in t){const r=t[s],n=this._getGltfAttributeName(s),i=this.addBinaryBuffer(r.value,r);e[n]=i}return e}_addIndices(t){return this.addBinaryBuffer(t,{size:1})}_getGltfAttributeName(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}_getAccessorMinMax(t,e){const s={min:null,max:null};if(t.length<e)return s;s.min=[],s.max=[];const r=t.subarray(0,e);for(const n of r)s.min.push(n),s.max.push(n);for(let n=e;n<t.length;n+=e)for(let r=0;r<e;r++)s.min[0+r]=Math.min(s.min[0+r],t[n+r]),s.max[0+r]=Math.max(s.max[0+r],t[n+r]);return s}}function Qt(t){return(t%1+1)%1}const Pt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16,BOOLEAN:1,STRING:1,ENUM:1},Wt={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:BigInt64Array,UINT64:BigUint64Array,FLOAT32:Float32Array,FLOAT64:Float64Array},Xt={INT8:1,UINT8:1,INT16:2,UINT16:2,INT32:4,UINT32:4,INT64:8,UINT64:8,FLOAT32:4,FLOAT64:8};function qt(t,e){return Xt[e]*Pt[t]}function Yt(t,e,s,r){if("UINT8"!==s&&"UINT16"!==s&&"UINT32"!==s&&"UINT64"!==s)return null;const n=Vt(t.getTypedArrayForBufferView(e),"SCALAR",s,r+1);return n instanceof BigInt64Array||n instanceof BigUint64Array?null:n}function Vt(t,e,s,r=1){const n=Pt[e],i=Wt[s],o=Xt[s],a=r*n,c=a*o;let u=t.buffer,h=t.byteOffset;if(h%o!=0){u=new Uint8Array(u).slice(h,h+c).buffer,h=0}return new i(u,h,a)}function Zt(t,e,s){const r=`TEXCOORD_${e.texCoord||0}`,n=s.attributes[r],i=t.getTypedArrayForAccessor(n),o=t.gltf.json,a=e.index,c=o.textures?.[a]?.source;if(void 0!==c){const s=o.images?.[c]?.mimeType,r=t.gltf.images?.[c];if(r&&void 0!==r.width){const t=[];for(let n=0;n<i.length;n+=2){const o=$t(r,s,i,n,e.channels);t.push(o)}return t}}return[]}function zt(t,e,s,r,n){if(!s?.length)return;const i=[];for(const h of s){let t=r.findIndex((t=>t===h));-1===t&&(t=r.push(h)-1),i.push(t)}const o=new Uint32Array(i),a=t.gltf.buffers.push({arrayBuffer:o.buffer,byteOffset:o.byteOffset,byteLength:o.byteLength})-1,c=t.addBufferView(o,a,0),u=t.addAccessor(c,{size:1,componentType:(0,Nt.rA)(o),count:o.length});n.attributes[e]=u}function $t(t,e,s,r,n=[0]){const i={r:{offset:0,shift:0},g:{offset:1,shift:8},b:{offset:2,shift:16},a:{offset:3,shift:24}},o=s[r],a=s[r+1];let c=1;!e||-1===e.indexOf("image/jpeg")&&-1===e.indexOf("image/png")||(c=4);const u=function(t,e,s,r=1){const n=s.width,i=Qt(t)*(n-1),o=Math.round(i),a=s.height,c=Qt(e)*(a-1),u=Math.round(c),h=s.components?s.components:r,l=(u*n+o)*h;return l}(o,a,t,c);let h=0;for(const l of n){const e="number"==typeof l?Object.values(i)[l]:i[l],s=u+e.offset,r=x(t);if(r.data.length<=s)throw new Error(`${r.data.length} <= ${s}`);h|=r.data[s]<<e.shift}return h}function te(t,e,s,r,n){const i=[];for(let o=0;o<e;o++){const e=s[o],a=s[o+1]-s[o];if(a+e>r)break;const c=e/n,u=a/n;i.push(t.slice(c,c+u))}return i}function ee(t,e,s){const r=[];for(let n=0;n<e;n++){const e=n*s;r.push(t.slice(e,e+s))}return r}function se(t,e,s,r){if(s)throw new Error("Not implemented - arrayOffsets for strings is specified");if(r){const s=[],n=new TextDecoder("utf8");let i=0;for(let o=0;o<t;o++){const t=r[o+1]-r[o];if(t+i<=e.length){const r=e.subarray(i,t+i),o=n.decode(r);s.push(o),i+=t}}return s}return[]}const re="EXT_mesh_features",ne=re;async function ie(t,e){!function(t,e){const s=t.gltf.json;if(!s.meshes)return;for(const r of s.meshes)for(const s of r.primitives)oe(t,s,e)}(new Kt(t),e)}function oe(t,e,s){if(!s?.gltf?.loadBuffers)return;const r=e.extensions?.[re],n=r?.featureIds;if(n)for(const i of n){let r;if(void 0!==i.attribute){const s=`_FEATURE_ID_${i.attribute}`,n=e.attributes[s];r=t.getTypedArrayForAccessor(n)}else r=void 0!==i.texture&&s?.gltf?.loadImages?Zt(t,i.texture,e):[];i.data=r}}const ae="EXT_structural_metadata",ce=ae;async function ue(t,e){!function(t,e){if(!e.gltf?.loadBuffers)return;const s=t.getExtension(ae);if(!s)return;e.gltf?.loadImages&&function(t,e){const s=e.propertyTextures,r=t.gltf.json;if(s&&r.meshes)for(const n of r.meshes)for(const r of n.primitives)le(t,s,r,e)}(t,s);!function(t,e){const s=e.schema;if(!s)return;const r=s.classes,n=e.propertyTables;if(r&&n)for(const i in r){const e=he(n,i);e&&de(t,s,e)}}(t,s)}(new Kt(t),e)}function he(t,e){for(const s of t)if(s.class===e)return s;return null}function le(t,e,s,r){if(!e)return;const n=s.extensions?.[ae],i=n?.propertyTextures;if(i)for(const o of i){fe(t,e[o],s,r)}}function fe(t,e,s,r){if(!e.properties)return;r.dataAttributeNames||(r.dataAttributeNames=[]);const n=e.class;for(const i in e.properties){const o=`${n}_${i}`,a=e.properties?.[i];if(!a)continue;a.data||(a.data=[]);const c=a.data,u=Zt(t,a,s);null!==u&&(zt(t,o,u,c,s),a.data=c,r.dataAttributeNames.push(o))}}function de(t,e,s){const r=e.classes?.[s.class];if(!r)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${s.class}`);const n=s.count;for(const i in r.properties){const o=r.properties[i],a=s.properties?.[i];if(a){const s=Ae(t,e,o,n,a);a.data=s}}}function Ae(t,e,s,r,n){let i=[];const o=n.values,a=t.getTypedArrayForBufferView(o),c=function(t,e,s,r){if(e.array&&void 0===e.count&&void 0!==s.arrayOffsets)return Yt(t,s.arrayOffsets,s.arrayOffsetType||"UINT32",r);return null}(t,s,n,r),u=function(t,e,s){if(void 0!==e.stringOffsets)return Yt(t,e.stringOffsets,e.stringOffsetType||"UINT32",s);return null}(t,n,r);switch(s.type){case"SCALAR":case"VEC2":case"VEC3":case"VEC4":case"MAT2":case"MAT3":case"MAT4":i=function(t,e,s,r){const n=t.array,i=t.count,o=qt(t.type,t.componentType),a=s.byteLength/o;let c;c=t.componentType?Vt(s,t.type,t.componentType,a):s;if(n)return r?te(c,e,r,s.length,o):i?ee(c,e,i):[];return c}(s,r,a,c);break;case"BOOLEAN":throw new Error(`Not implemented - classProperty.type=${s.type}`);case"STRING":i=se(r,a,c,u);break;case"ENUM":i=function(t,e,s,r,n){const i=e.enumType;if(!i)throw new Error("Incorrect data in the EXT_structural_metadata extension: classProperty.enumType is not set for type ENUM");const o=t.enums?.[i];if(!o)throw new Error(`Incorrect data in the EXT_structural_metadata extension: schema.enums does't contain ${i}`);const a=o.valueType||"UINT16",c=qt(e.type,a),u=r.byteLength/c;let h=Vt(r,e.type,a,u);h||(h=r);if(e.array){if(n)return function(t){const{valuesData:e,numberOfElements:s,arrayOffsets:r,valuesDataBytesLength:n,elementSize:i,enumEntry:o}=t,a=[];for(let c=0;c<s;c++){const t=r[c],s=r[c+1]-r[c];if(s+t>n)break;const u=me(e,t/i,s/i,o);a.push(u)}return a}({valuesData:h,numberOfElements:s,arrayOffsets:n,valuesDataBytesLength:r.length,elementSize:c,enumEntry:o});const t=e.count;return t?function(t,e,s,r){const n=[];for(let i=0;i<e;i++){const e=me(t,s*i,s,r);n.push(e)}return n}(h,s,t,o):[]}return me(h,0,s,o)}(e,s,r,a,c);break;default:throw new Error(`Unknown classProperty type ${s.type}`)}return i}function me(t,e,s,r){const n=[];for(let i=0;i<s;i++)if(t instanceof BigInt64Array||t instanceof BigUint64Array)n.push("");else{const s=Be(r,t[e+i]);s?n.push(s.name):n.push("")}return n}function Be(t,e){for(const s of t.values)if(s.value===e)return s;return null}const ge="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",_e="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",pe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),ye=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),be={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Ce={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};let we;async function ke(){return we||(we=async function(){let t=ge;WebAssembly.validate(pe)&&(t=_e,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=await WebAssembly.instantiate(function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r){const s=t.charCodeAt(r);e[r]=s>96?s-71:s>64?s-65:s>47?s+4:s>46?63:62}let s=0;for(let r=0;r<t.length;++r)e[s++]=e[r]<60?ye[e[r]]:64*(e[r]-60)+e[++r];return e.buffer.slice(0,s)}(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}()),we}function Ee(t,e,s,r,n,i,o){const a=t.exports.sbrk,c=r+3&-4,u=a(c*n),h=a(i.length),l=new Uint8Array(t.exports.memory.buffer);l.set(i,h);const f=e(u,r,n,h,i.length);if(0===f&&o&&o(u,c,n),s.set(l.subarray(u,u+r*n)),a(u-a(0)),0!==f)throw new Error(`Malformed buffer data: ${f}`)}const xe="EXT_meshopt_compression",Fe=xe;async function Me(t,e){const s=new Kt(t);if(!e?.gltf?.decompressMeshes||!e.gltf?.loadBuffers)return;const r=[];for(const n of t.json.bufferViews||[])r.push(ve(s,n));await Promise.all(r),s.removeExtension(xe)}async function ve(t,e){const s=t.getObjectExtension(e,xe);if(s){const{byteOffset:r=0,byteLength:n=0,byteStride:i,count:o,mode:a,filter:c="NONE",buffer:u}=s,h=t.gltf.buffers[u],l=new Uint8Array(h.arrayBuffer,h.byteOffset+r,n),f=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);await async function(t,e,s,r,n,i="NONE"){const o=await ke();Ee(o,o.exports[Ce[n]],t,e,s,r,o.exports[be[i||"NONE"]])}(f,o,i,l,a,c),t.removeObjectExtension(e,xe)}}const Ie={};function Ge(t){if(void 0===Ie[t]){const e=p.Bd?function(t){switch(t){case"image/avif":case"image/webp":return function(t){try{const e=document.createElement("canvas");return 0===e.toDataURL(t).indexOf(`data:${t}`)}catch{return!1}}(t);default:return!0}}(t):De(t);Ie[t]=e}return Ie[t]}function De(t){const e=globalThis.loaders?.imageFormatsNode||["image/png","image/jpeg","image/gif"],s=globalThis.loaders?.parseImageNode;return Boolean(s)&&e.includes(t)}const Te="EXT_texture_webp",Oe=Te;function Re(t,e){const s=new Kt(t);if(!Ge("image/webp")){if(s.getRequiredExtensions().includes(Te))throw new Error(`gltf: Required extension ${Te} not supported by browser`);return}const{json:r}=s;for(const n of r.textures||[]){const t=s.getObjectExtension(n,Te);t&&(n.source=t.source),s.removeObjectExtension(n,Te)}s.removeExtension(Te)}const Je="KHR_texture_basisu",Se=Je;function Ue(t,e){const s=new Kt(t),{json:r}=s;for(const n of r.textures||[]){const t=s.getObjectExtension(n,Je);t&&(n.source=t.source,s.removeObjectExtension(n,Je))}s.removeExtension(Je)}const Le="4.2.3",He={dataType:null,batchType:null,name:"Draco",id:"draco",module:"draco",version:Le,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};function Ne(t){switch(t.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}function je(t,e,s){const r=Ne(e.value),n=s||function(t){const e={};"byteOffset"in t&&(e.byteOffset=t.byteOffset.toString(10));"byteStride"in t&&(e.byteStride=t.byteStride.toString(10));"normalized"in t&&(e.normalized=t.normalized.toString());return e}(e);return{name:t,type:{type:"fixed-size-list",listSize:e.size,children:[{name:"value",type:r}]},nullable:!1,metadata:n}}function Ke(t,e,s){return je(t,e,s?Qe(s.metadata):void 0)}function Qe(t){Object.entries(t);const e={};for(const s in t)e[`${s}.string`]=JSON.stringify(t[s]);return e}const Pe={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},We={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Xe{draco;decoder;metadataQuerier;constructor(t){this.draco=t,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(t,e={}){const s=new this.draco.DecoderBuffer;s.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);const r=this.decoder.GetEncodedGeometryType(s),n=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let t;switch(r){case this.draco.TRIANGULAR_MESH:t=this.decoder.DecodeBufferToMesh(s,n);break;case this.draco.POINT_CLOUD:t=this.decoder.DecodeBufferToPointCloud(s,n);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!t.ok()||!n.ptr){const e=`DRACO decompression failed: ${t.error_msg()}`;throw new Error(e)}const i=this._getDracoLoaderData(n,r,e),o=this._getMeshData(n,i,e),a=function(t){let e=1/0,s=1/0,r=1/0,n=-1/0,i=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let u=0;u<c;u+=3){const t=a[u],c=a[u+1],h=a[u+2];e=t<e?t:e,s=c<s?c:s,r=h<r?h:r,n=t>n?t:n,i=c>i?c:i,o=h>o?h:o}return[[e,s,r],[n,i,o]]}(o.attributes),c=function(t,e,s){const r=Qe(e.metadata),n=[],i=function(t){const e={};for(const s in t){const r=t[s];e[r.name||"undefined"]=r}return e}(e.attributes);for(const o in t){const e=Ke(o,t[o],i[o]);n.push(e)}if(s){const t=Ke("indices",s);n.push(t)}return{fields:n,metadata:r}}(o.attributes,i,o.indices);return{loader:"draco",loaderData:i,header:{vertexCount:n.num_points(),boundingBox:a},...o,schema:c}}finally{this.draco.destroy(s),n&&this.draco.destroy(n)}}_getDracoLoaderData(t,e,s){const r=this._getTopLevelMetadata(t),n=this._getDracoAttributes(t,s);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:r,attributes:n}}_getDracoAttributes(t,e){const s={};for(let r=0;r<t.num_attributes();r++){const n=this.decoder.GetAttribute(t,r),i=this._getAttributeMetadata(t,r);s[n.unique_id()]={unique_id:n.unique_id(),attribute_type:n.attribute_type(),data_type:n.data_type(),num_components:n.num_components(),byte_offset:n.byte_offset(),byte_stride:n.byte_stride(),normalized:n.normalized(),attribute_index:r,metadata:i};const o=this._getQuantizationTransform(n,e);o&&(s[n.unique_id()].quantization_transform=o);const a=this._getOctahedronTransform(n,e);a&&(s[n.unique_id()].octahedron_transform=a)}return s}_getMeshData(t,e,s){const r=this._getMeshAttributes(e,t,s);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return t instanceof this.draco.Mesh?"triangle-strip"===s.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(t),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(t),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(t,e,s){const r={};for(const n of Object.values(t.attributes)){const t=this._deduceAttributeName(n,s);n.name=t;const i=this._getAttributeValues(e,n);if(i){const{value:e,size:s}=i;r[t]={value:e,size:s,byteOffset:n.byte_offset,byteStride:n.byte_stride,normalized:n.normalized}}}return r}_getTriangleListIndices(t){const e=3*t.num_faces(),s=4*e,r=this.draco._malloc(s);try{return this.decoder.GetTrianglesUInt32Array(t,s,r),new Uint32Array(this.draco.HEAPF32.buffer,r,e).slice()}finally{this.draco._free(r)}}_getTriangleStripIndices(t){const e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),function(t){const e=t.size(),s=new Int32Array(e);for(let r=0;r<e;r++)s[r]=t.GetValue(r);return s}(e)}finally{this.draco.destroy(e)}}_getAttributeValues(t,e){const s=We[e.data_type];if(!s)return console.warn(`DRACO: Unsupported attribute type ${e.data_type}`),null;const r=e.num_components,n=t.num_points()*r,i=n*s.BYTES_PER_ELEMENT,o=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,s);let a;const c=this.draco._malloc(i);try{const r=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,r,o,i,c),a=new s(this.draco.HEAPF32.buffer,c,n).slice()}finally{this.draco._free(c)}return{value:a,size:r}}_deduceAttributeName(t,e){const s=t.unique_id;for(const[i,o]of Object.entries(e.extraAttributes||{}))if(o===s)return i;const r=t.attribute_type;for(const i in Pe){if(this.draco[i]===r)return Pe[i]}const n=e.attributeNameEntry||"name";return t.metadata[n]?t.metadata[n].string:`CUSTOM_ATTRIBUTE_${s}`}_getTopLevelMetadata(t){const e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}_getAttributeMetadata(t,e){const s=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(s)}_getDracoMetadata(t){if(!t||!t.ptr)return{};const e={},s=this.metadataQuerier.NumEntries(t);for(let r=0;r<s;r++){const s=this.metadataQuerier.GetEntryName(t,r);e[s]=this._getDracoMetadataField(t,s)}return e}_getDracoMetadataField(t,e){const s=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,s);const r=function(t){const e=t.size(),s=new Int32Array(e);for(let r=0;r<e;r++)s[r]=t.GetValue(r);return s}(s);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:r}}finally{this.draco.destroy(s)}}_disableAttributeTransforms(t){const{quantizedAttributes:e=[],octahedronAttributes:s=[]}=t,r=[...e,...s];for(const n of r)this.decoder.SkipAttributeTransform(this.draco[n])}_getQuantizationTransform(t,e){const{quantizedAttributes:s=[]}=e,r=t.attribute_type();if(s.map((t=>this.decoder[t])).includes(r)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits(),range:e.range(),min_values:new Float32Array([1,2,3]).map((t=>e.min_value(t)))}}finally{this.draco.destroy(e)}}return null}_getOctahedronTransform(t,e){const{octahedronAttributes:s=[]}=e,r=t.attribute_type();if(s.map((t=>this.decoder[t])).includes(r)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits()}}finally{this.draco.destroy(e)}}return null}}const qe="https://www.gstatic.com/draco/versioned/decoders/1.5.6",Ye={DECODER:"draco_wasm_wrapper.js",DECODER_WASM:"draco_decoder.wasm",FALLBACK_DECODER:"draco_decoder.js",ENCODER:"draco_encoder.js"},Ve={[Ye.DECODER]:`${qe}/${Ye.DECODER}`,[Ye.DECODER_WASM]:`${qe}/${Ye.DECODER_WASM}`,[Ye.FALLBACK_DECODER]:`${qe}/${Ye.FALLBACK_DECODER}`,[Ye.ENCODER]:`https://raw.githubusercontent.com/google/draco/1.4.1/javascript/${Ye.ENCODER}`};let Ze;async function ze(t){const e=t.modules||{};return e.draco3d?Ze||=e.draco3d.createDecoderModule({}).then((t=>({draco:t}))):Ze||=async function(t){let e,s;if("js"===(t.draco&&t.draco.decoderType))e=await W(Ve[Ye.FALLBACK_DECODER],"draco",t,Ye.FALLBACK_DECODER);else[e,s]=await Promise.all([await W(Ve[Ye.DECODER],"draco",t,Ye.DECODER),await W(Ve[Ye.DECODER_WASM],"draco",t,Ye.DECODER_WASM)]);return e=e||globalThis.DracoDecoderModule,await function(t,e){const s={};e&&(s.wasmBinary=e);return new Promise((e=>{t({...s,onModuleLoaded:t=>e({draco:t})})}))}(e,s)}(t),await Ze}const $e={...He,parse:async function(t,e){const{draco:s}=await ze(e),r=new Xe(s);try{return r.parseSync(t,e?.draco)}finally{r.destroy()}}};function ts(t){const{buffer:e,size:s,count:r}=function(t){let e=t,s=1,r=0;t&&t.value&&(e=t.value,s=t.size||1);e&&(ArrayBuffer.isView(e)||(e=function(t,e,s=!1){if(!t)return null;if(Array.isArray(t))return new e(t);if(s&&!(t instanceof e))return new e(t);return t}(e,Float32Array)),r=e.length/s);return{buffer:e,size:s,count:r}}(t);return{value:e,size:s,byteOffset:0,count:r,type:(0,Nt.v7)(s),componentType:(0,Nt.rA)(e)}}const es="KHR_draco_mesh_compression",ss=es;function rs(t,e,s){const r=new Kt(t);for(const n of cs(r))r.getObjectExtension(n,es)}async function ns(t,e,s){if(!e?.gltf?.decompressMeshes)return;const r=new Kt(t),n=[];for(const i of cs(r))r.getObjectExtension(i,es)&&n.push(os(r,i,e,s));await Promise.all(n),r.removeExtension(es)}function is(t,e={}){const s=new Kt(t);for(const r of s.json.meshes||[])as(r,e),s.addRequiredExtension(es)}async function os(t,e,s,r){const n=t.getObjectExtension(e,es);if(!n)return;const i=t.getTypedArrayForBufferView(n.bufferView),o=(0,B._m)(i.buffer,i.byteOffset),a={...s};delete a["3d-tiles"];const c=await g(o,$e,a,r),u=function(t){const e={};for(const s in t){const r=t[s];if("indices"!==s){const t=ts(r);e[s]=t}}return e}(c.attributes);for(const[h,l]of Object.entries(u))if(h in e.attributes){const s=e.attributes[h],r=t.getAccessor(s);r?.min&&r?.max&&(l.min=r.min,l.max=r.max)}e.attributes=u,c.indices&&(e.indices=ts(c.indices)),t.removeObjectExtension(e,es),function(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}function as(t,e,s=4,r,n){if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const i=r.DracoWriter.encodeSync({attributes:t}),o=n?.parseSync?.({attributes:t}),a=r._addFauxAttributes(o.attributes),c=r.addBufferView(i);return{primitives:[{attributes:a,mode:s,extensions:{[es]:{bufferView:c,attributes:a}}}]}}function*cs(t){for(const e of t.json.meshes||[])for(const t of e.primitives)yield t}var us,hs=s(7597),ls=s(6022),fs=s(3731),ds=s(8225),As=s(4435),ms=s(3588),Bs=s(2859);!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(us||(us={}));const gs=Object.freeze([1,0,0,0,1,0,0,0,1]);class _s extends ls.u{static get IDENTITY(){return function(){ys||(ys=new _s,Object.freeze(ys));return ys}()}static get ZERO(){return function(){ps||(ps=new _s([0,0,0,0,0,0,0,0,0]),Object.freeze(ps));return ps}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return us}constructor(t,...e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):e.length>0?this.copy([t,...e]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(gs)}fromObject(t){return this.check()}fromQuaternion(t){return(0,As.I0)(this,t),this.check()}set(t,e,s,r,n,i,o,a,c){return this[0]=t,this[1]=e,this[2]=s,this[3]=r,this[4]=n,this[5]=i,this[6]=o,this[7]=a,this[8]=c,this.check()}setRowMajor(t,e,s,r,n,i,o,a,c){return this[0]=t,this[1]=r,this[2]=o,this[3]=e,this[4]=n,this[5]=a,this[6]=s,this[7]=i,this[8]=c,this.check()}determinant(){return(0,As.a4)(this)}transpose(){return(0,As.mg)(this,this),this.check()}invert(){return(0,As.B8)(this,this),this.check()}multiplyLeft(t){return(0,As.lw)(this,t,this),this.check()}multiplyRight(t){return(0,As.lw)(this,this,t),this.check()}rotate(t){return(0,As.e$)(this,this,t),this.check()}scale(t){return Array.isArray(t)?(0,As.hs)(this,this,t):(0,As.hs)(this,this,[t,t]),this.check()}translate(t){return(0,As.Tl)(this,this,t),this.check()}transform(t,e){let s;switch(t.length){case 2:s=(0,ms.ei)(e||[-0,-0],t,this);break;case 3:s=(0,Bs.ei)(e||[-0,-0,-0],t,this);break;case 4:s=(0,ds.vE)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,fs.qk)(s,t.length),s}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let ps,ys=null;var bs=s(7897);const Cs="KHR_texture_transform",ws=Cs,ks=new hs.P,Es=new _s,xs=new _s;async function Fs(t,e){if(!new Kt(t).hasExtension(Cs)||!e.gltf?.loadBuffers)return;const s=t.json.materials||[];for(let r=0;r<s.length;r++)Ms(r,t)}function Ms(t,e){const s=e.json.materials?.[t],r=[s?.pbrMetallicRoughness?.baseColorTexture,s?.emissiveTexture,s?.normalTexture,s?.occlusionTexture,s?.pbrMetallicRoughness?.metallicRoughnessTexture],n=[];for(const i of r)i&&i?.extensions?.[Cs]&&vs(e,t,i,n)}function vs(t,e,s,r){const n=function(t,e){const s=t.extensions?.[Cs],{texCoord:r=0}=t,{texCoord:n=r}=s,i=-1!==e.findIndex((([t,e])=>t===r&&e===n));if(!i){const i=function(t){const{offset:e=[0,0],rotation:s=0,scale:r=[1,1]}=t,n=(new _s).set(1,0,0,0,1,0,e[0],e[1],1),i=Es.set(Math.cos(s),Math.sin(s),0,-Math.sin(s),Math.cos(s),0,0,0,1),o=xs.set(r[0],0,0,0,r[1],0,0,0,1);return n.multiplyRight(i).multiplyRight(o)}(s);return r!==n&&(t.texCoord=n),e.push([r,n]),{originalTexCoord:r,texCoord:n,matrix:i}}return null}(s,r);if(!n)return;const i=t.json.meshes||[];for(const o of i)for(const s of o.primitives){const r=s.material;Number.isFinite(r)&&e===r&&Is(t,s,n)}}function Is(t,e,s){const{originalTexCoord:r,texCoord:n,matrix:i}=s,o=e.attributes[`TEXCOORD_${r}`];if(Number.isFinite(o)){const s=t.json.accessors?.[o];if(s&&s.bufferView){const o=t.json.bufferViews?.[s.bufferView];if(o){const{arrayBuffer:a,byteOffset:c}=t.buffers[o.buffer],u=(c||0)+(s.byteOffset||0)+(o.byteOffset||0),{ArrayType:h,length:l}=(0,Nt.aF)(s,o),f=bs.E9[s.componentType],d=bs.$j[s.type],A=o.byteStride||f*d,m=new Float32Array(l);for(let t=0;t<s.count;t++){const e=new h(a,u+t*A,2);ks.set(e[0],e[1],1),ks.transformByMatrix3(i),m.set([ks[0],ks[1]],t*d)}r===n?function(t,e,s,r){t.componentType=5126,s.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength}),e.buffer=s.length-1,e.byteLength=r.buffer.byteLength,e.byteOffset=0,delete e.byteStride}(s,o,t.buffers,m):function(t,e,s,r,n){r.buffers.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength});const i=r.json.bufferViews;if(!i)return;i.push({buffer:r.buffers.length-1,byteLength:n.buffer.byteLength,byteOffset:0});const o=r.json.accessors;if(!o)return;o.push({bufferView:i?.length-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),s.attributes[`TEXCOORD_${t}`]=o.length-1}(n,s,e,t,m)}}}}const Gs="KHR_lights_punctual",Ds=Gs;async function Ts(t){const e=new Kt(t),{json:s}=e,r=e.getExtension(Gs);r&&(e.json.lights=r.lights,e.removeExtension(Gs));for(const n of s.nodes||[]){const t=e.getObjectExtension(n,Gs);t&&(n.light=t.light),e.removeObjectExtension(n,Gs)}}async function Os(t){const e=new Kt(t),{json:s}=e;if(s.lights){const t=e.addExtension(Gs);(0,Et.v)(!t.lights),t.lights=s.lights,delete s.lights}if(e.json.lights){for(const t of e.json.lights){const s=t.node;e.addObjectExtension(s,Gs,t)}delete e.json.lights}}const Rs="KHR_materials_unlit",Js=Rs;async function Ss(t){const e=new Kt(t),{json:s}=e;for(const r of s.materials||[]){r.extensions&&r.extensions.KHR_materials_unlit&&(r.unlit=!0),e.removeObjectExtension(r,Rs)}e.removeExtension(Rs)}function Us(t){const e=new Kt(t),{json:s}=e;if(e.materials)for(const r of s.materials||[])r.unlit&&(delete r.unlit,e.addObjectExtension(r,Rs,{}),e.addExtension(Rs))}const Ls="KHR_techniques_webgl",Hs=Ls;async function Ns(t){const e=new Kt(t),{json:s}=e,r=e.getExtension(Ls);if(r){const t=function(t,e){const{programs:s=[],shaders:r=[],techniques:n=[]}=t,i=new TextDecoder;return r.forEach((t=>{if(!Number.isFinite(t.bufferView))throw new Error("KHR_techniques_webgl: no shader code");t.code=i.decode(e.getTypedArrayForBufferView(t.bufferView))})),s.forEach((t=>{t.fragmentShader=r[t.fragmentShader],t.vertexShader=r[t.vertexShader]})),n.forEach((t=>{t.program=s[t.program]})),n}(r,e);for(const r of s.materials||[]){const s=e.getObjectExtension(r,Ls);s&&(r.technique=Object.assign({},s,t[s.technique]),r.technique.values=Ks(r.technique,e)),e.removeObjectExtension(r,Ls)}e.removeExtension(Ls)}}async function js(t,e){}function Ks(t,e){const s=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach((e=>{t.uniforms[e].value&&!(e in s)&&(s[e]=t.uniforms[e].value)})),Object.keys(s).forEach((t=>{"object"==typeof s[t]&&void 0!==s[t].index&&(s[t].texture=e.getTexture(s[t].index))})),s}const Qs="EXT_feature_metadata",Ps=Qs;async function Ws(t,e){!function(t,e){if(!e.gltf?.loadBuffers)return;const s=t.getExtension(Qs);if(!s)return;e.gltf?.loadImages&&function(t,e){const s=e.schema;if(!s)return;const r=s.classes,{featureTextures:n}=e;if(r&&n)for(const i in r){const e=r[i],s=qs(n,i);s&&Vs(t,s,e)}}(t,s);!function(t,e){const s=e.schema;if(!s)return;const r=s.classes,n=e.featureTables;if(r&&n)for(const i in r){const e=Xs(n,i);e&&Ys(t,s,e)}}(t,s)}(new Kt(t),e)}function Xs(t,e){for(const s in t){const r=t[s];if(r.class===e)return r}return null}function qs(t,e){for(const s in t){const r=t[s];if(r.class===e)return r}return null}function Ys(t,e,s){if(!s.class)return;const r=e.classes?.[s.class];if(!r)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${s.class}`);const n=s.count;for(const i in r.properties){const o=r.properties[i],a=s.properties?.[i];if(a){const s=Zs(t,e,o,n,a);a.data=s}}}function Vs(t,e,s){const r=e.class;for(const n in s.properties){const s=e?.properties?.[n];if(s){const e=zs(t,s,r);s.data=e}}}function Zs(t,e,s,r,n){let i=[];const o=n.bufferView,a=t.getTypedArrayForBufferView(o),c=function(t,e,s,r){if("ARRAY"===e.type&&void 0===e.componentCount&&void 0!==s.arrayOffsetBufferView)return Yt(t,s.arrayOffsetBufferView,s.offsetType||"UINT32",r);return null}(t,s,n,r),u=function(t,e,s,r){if(void 0!==s.stringOffsetBufferView)return Yt(t,s.stringOffsetBufferView,s.offsetType||"UINT32",r);return null}(t,0,n,r);return"STRING"===s.type||"STRING"===s.componentType?i=se(r,a,c,u):function(t){const e=["UINT8","INT16","UINT16","INT32","UINT32","INT64","UINT64","FLOAT32","FLOAT64"];return e.includes(t.type)||void 0!==t.componentType&&e.includes(t.componentType)}(s)&&(i=function(t,e,s,r){const n="ARRAY"===t.type,i=t.componentCount,o="SCALAR",a=t.componentType||t.type,c=qt(o,a),u=s.byteLength/c,h=Vt(s,o,a,u);if(n)return r?te(h,e,r,s.length,c):i?ee(h,e,i):[];return h}(s,r,a,c)),i}function zs(t,e,s){const r=t.gltf.json;if(!r.meshes)return[];const n=[];for(const i of r.meshes)for(const r of i.primitives)$s(t,s,e,n,r);return n}function $s(t,e,s,r,n){const i=Zt(t,{channels:s.channels,...s.texture},n);i&&zt(t,e,i,r,n)}const tr=[n,r,i,o,a,c,h,l,f,u,d];function er(t,e){const s=e?.gltf?.excludeExtensions||{};return!(t in s&&!s[t])}const sr="KHR_binary_glTF";const rr={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},nr={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class ir{idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}};json;normalize(t,e){this.json=t.json;const s=t.json;switch(s.asset&&s.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn(`glTF: Unknown version ${s.asset.version}`)}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(s),this._convertTopLevelObjectsToArrays(s),function(t){const e=new Kt(t),{json:s}=e;for(const r of s.images||[]){const t=e.getObjectExtension(r,sr);t&&Object.assign(r,t),e.removeObjectExtension(r,sr)}s.buffers&&s.buffers[0]&&delete s.buffers[0].uri,e.removeExtension(sr)}(t),this._convertObjectIdsToArrayIndices(s),this._updateObjects(s),this._updateMaterial(s)}_addAsset(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(t){for(const e in rr)this._convertTopLevelObjectToArray(t,e)}_convertTopLevelObjectToArray(t,e){const s=t[e];if(s&&!Array.isArray(s)){t[e]=[];for(const r in s){const n=s[r];n.id=n.id||r;const i=t[e].length;t[e].push(n),this.idToIndexMap[e][r]=i}}}_convertObjectIdsToArrayIndices(t){for(const e in rr)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));for(const e of t.textures)this._convertTextureIds(e);for(const e of t.meshes)this._convertMeshIds(e);for(const e of t.nodes)this._convertNodeIds(e);for(const e of t.scenes)this._convertSceneIds(e)}_convertTextureIds(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}_convertMeshIds(t){for(const e of t.primitives){const{attributes:t,indices:s,material:r}=e;for(const e in t)t[e]=this._convertIdToIndex(t[e],"accessor");s&&(e.indices=this._convertIdToIndex(s,"accessor")),r&&(e.material=this._convertIdToIndex(r,"material"))}}_convertNodeIds(t){t.children&&(t.children=t.children.map((t=>this._convertIdToIndex(t,"node")))),t.meshes&&(t.meshes=t.meshes.map((t=>this._convertIdToIndex(t,"mesh"))))}_convertSceneIds(t){t.nodes&&(t.nodes=t.nodes.map((t=>this._convertIdToIndex(t,"node"))))}_convertIdsToIndices(t,e){t[e]||(console.warn(`gltf v1: json doesn't contain attribute ${e}`),t[e]=[]);for(const s of t[e])for(const t in s){const e=s[t],r=this._convertIdToIndex(e,t);s[t]=r}}_convertIdToIndex(t,e){const s=nr[e];if(s in this.idToIndexMap){const r=this.idToIndexMap[s][t];if(!Number.isFinite(r))throw new Error(`gltf v1: failed to resolve ${e} with id ${t}`);return r}return t}_updateObjects(t){for(const e of this.json.buffers)delete e.type}_updateMaterial(t){for(const e of t.materials){e.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=e.values?.tex||e.values?.texture2d_0||e.values?.diffuseTex,r=t.textures.findIndex((t=>t.id===s));-1!==r&&(e.pbrMetallicRoughness.baseColorTexture={index:r})}}}async function or(t,e,s=0,r,n){return function(t,e,s,r){r.uri&&(t.baseUri=r.uri);if(e instanceof ArrayBuffer&&!function(t,e=0,s={}){const r=new DataView(t),{magic:n=vt}=s,i=r.getUint32(e,!1);return i===n||i===vt}(e,s,r)){e=(new TextDecoder).decode(e)}if("string"==typeof e)t.json=m(e);else if(e instanceof ArrayBuffer){const n={};s=St(n,e,s,r.glb),(0,Et.v)("glTF"===n.type,`Invalid GLB magic string ${n.type}`),t._glb=n,t.json=n.json}else(0,Et.v)(!1,"GLTF: must be ArrayBuffer or string");const n=t.json.buffers||[];if(t.buffers=new Array(n.length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:e}=t._glb;t.buffers[0]={arrayBuffer:e[0].arrayBuffer,byteOffset:e[0].byteOffset,byteLength:e[0].byteLength}}const i=t.json.images||[];t.images=new Array(i.length).fill({})}(t,e,s,r),function(t,e={}){(new ir).normalize(t,e)}(t,{normalize:r?.gltf?.normalize}),function(t,e={},s){const r=tr.filter((t=>er(t.name,e)));for(const n of r)n.preprocess?.(t,e,s)}(t,r,n),r?.gltf?.loadBuffers&&t.json.buffers&&await async function(t,e,s){const r=t.json.buffers||[];for(let n=0;n<r.length;++n){const i=r[n];if(i.uri){const{fetch:r}=s;(0,Et.v)(r);const o=Ht(i.uri,e),a=await(s?.fetch?.(o)),c=await(a?.arrayBuffer?.());t.buffers[n]={arrayBuffer:c,byteOffset:0,byteLength:c.byteLength},delete i.uri}else null===t.buffers[n]&&(t.buffers[n]={arrayBuffer:new ArrayBuffer(i.byteLength),byteOffset:0,byteLength:i.byteLength})}}(t,r,n),r?.gltf?.loadImages&&await async function(t,e,s){const r=function(t){const e=new Set,s=t.json.textures||[];for(const r of s)void 0!==r.source&&e.add(r.source);return Array.from(e).sort()}(t),n=t.json.images||[],i=[];for(const o of r)i.push(ar(t,n[o],o,e,s));return await Promise.all(i)}(t,r,n),await async function(t,e={},s){const r=tr.filter((t=>er(t.name,e)));for(const n of r)await(n.decode?.(t,e,s))}(t,r,n),t}async function ar(t,e,s,r,n){let i;if(e.uri&&!e.hasOwnProperty("bufferView")){const t=Ht(e.uri,r),{fetch:s}=n,o=await s(t);i=await o.arrayBuffer(),e.bufferView={data:i}}if(Number.isFinite(e.bufferView)){const s=jt(t.json,t.buffers,e.bufferView);i=(0,B._m)(s.buffer,s.byteOffset,s.byteLength)}(0,Et.v)(i,"glTF image has no data");let o=await g(i,[N,kt],{...r,mimeType:e.mimeType,basis:r.basis||{format:wt()}},n);o&&o[0]&&(o={compressed:!0,mipmaps:!1,width:o[0].width,height:o[0].height,data:o[0]}),t.images=t.images||[],t.images[s]=o}const cr={dataType:null,batchType:null,name:"glTF",id:"gltf",module:"gltf",version:"4.2.3",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:async function(t,e={},s){(e={...cr.options,...e}).gltf={...cr.options.gltf,...e.gltf};const{byteOffset:r=0}=e;return await or({},t,r,e,s)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0},log:console}}},9737:(t,e,s)=>{s.d(e,{R:()=>m});var r=s(2840),n=s(7885);const i={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},o={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},a=10240,c=10241,u=10242,h=10243,l=10497,f={magFilter:a,minFilter:c,wrapS:u,wrapT:h},d={[a]:9729,[c]:9986,[u]:l,[h]:l};class A{baseUri="";jsonUnprocessed;json;buffers=[];images=[];postProcess(t,e={}){const{json:s,buffers:n=[],images:i=[]}=t,{baseUri:o=""}=t;return(0,r.v)(s),this.baseUri=o,this.buffers=n,this.images=i,this.jsonUnprocessed=s,this.json=this._resolveTree(t.json,e),this.json}_resolveTree(t,e={}){const s={...t};return this.json=s,t.bufferViews&&(s.bufferViews=t.bufferViews.map(((t,e)=>this._resolveBufferView(t,e)))),t.images&&(s.images=t.images.map(((t,e)=>this._resolveImage(t,e)))),t.samplers&&(s.samplers=t.samplers.map(((t,e)=>this._resolveSampler(t,e)))),t.textures&&(s.textures=t.textures.map(((t,e)=>this._resolveTexture(t,e)))),t.accessors&&(s.accessors=t.accessors.map(((t,e)=>this._resolveAccessor(t,e)))),t.materials&&(s.materials=t.materials.map(((t,e)=>this._resolveMaterial(t,e)))),t.meshes&&(s.meshes=t.meshes.map(((t,e)=>this._resolveMesh(t,e)))),t.nodes&&(s.nodes=t.nodes.map(((t,e)=>this._resolveNode(t,e))),s.nodes=s.nodes.map(((t,e)=>this._resolveNodeChildren(t)))),t.skins&&(s.skins=t.skins.map(((t,e)=>this._resolveSkin(t,e)))),t.scenes&&(s.scenes=t.scenes.map(((t,e)=>this._resolveScene(t,e)))),"number"==typeof this.json.scene&&s.scenes&&(s.scene=s.scenes[this.json.scene]),s}getScene(t){return this._get(this.json.scenes,t)}getNode(t){return this._get(this.json.nodes,t)}getSkin(t){return this._get(this.json.skins,t)}getMesh(t){return this._get(this.json.meshes,t)}getMaterial(t){return this._get(this.json.materials,t)}getAccessor(t){return this._get(this.json.accessors,t)}getCamera(t){return this._get(this.json.cameras,t)}getTexture(t){return this._get(this.json.textures,t)}getSampler(t){return this._get(this.json.samplers,t)}getImage(t){return this._get(this.json.images,t)}getBufferView(t){return this._get(this.json.bufferViews,t)}getBuffer(t){return this._get(this.json.buffers,t)}_get(t,e){if("object"==typeof e)return e;const s=t&&t[e];return s||console.warn(`glTF file error: Could not find ${t}[${e}]`),s}_resolveScene(t,e){return{...t,id:t.id||`scene-${e}`,nodes:(t.nodes||[]).map((t=>this.getNode(t)))}}_resolveNode(t,e){const s={...t,id:t?.id||`node-${e}`};return void 0!==t.mesh&&(s.mesh=this.getMesh(t.mesh)),void 0!==t.camera&&(s.camera=this.getCamera(t.camera)),void 0!==t.skin&&(s.skin=this.getSkin(t.skin)),void 0!==t.meshes&&t.meshes.length&&(s.mesh=t.meshes.reduce(((t,e)=>{const s=this.getMesh(e);return t.id=s.id,t.primitives=t.primitives.concat(s.primitives),t}),{primitives:[]})),s}_resolveNodeChildren(t){return t.children&&(t.children=t.children.map((t=>this.getNode(t)))),t}_resolveSkin(t,e){const s="number"==typeof t.inverseBindMatrices?this.getAccessor(t.inverseBindMatrices):void 0;return{...t,id:t.id||`skin-${e}`,inverseBindMatrices:s}}_resolveMesh(t,e){const s={...t,id:t.id||`mesh-${e}`,primitives:[]};return t.primitives&&(s.primitives=t.primitives.map((t=>{const e={...t,attributes:{},indices:void 0,material:void 0},s=t.attributes;for(const r in s)e.attributes[r]=this.getAccessor(s[r]);return void 0!==t.indices&&(e.indices=this.getAccessor(t.indices)),void 0!==t.material&&(e.material=this.getMaterial(t.material)),e}))),s}_resolveMaterial(t,e){const s={...t,id:t.id||`material-${e}`};if(s.normalTexture&&(s.normalTexture={...s.normalTexture},s.normalTexture.texture=this.getTexture(s.normalTexture.index)),s.occlusionTexture&&(s.occlusionTexture={...s.occlusionTexture},s.occlusionTexture.texture=this.getTexture(s.occlusionTexture.index)),s.emissiveTexture&&(s.emissiveTexture={...s.emissiveTexture},s.emissiveTexture.texture=this.getTexture(s.emissiveTexture.index)),s.emissiveFactor||(s.emissiveFactor=s.emissiveTexture?[1,1,1]:[0,0,0]),s.pbrMetallicRoughness){s.pbrMetallicRoughness={...s.pbrMetallicRoughness};const t=s.pbrMetallicRoughness;t.baseColorTexture&&(t.baseColorTexture={...t.baseColorTexture},t.baseColorTexture.texture=this.getTexture(t.baseColorTexture.index)),t.metallicRoughnessTexture&&(t.metallicRoughnessTexture={...t.metallicRoughnessTexture},t.metallicRoughnessTexture.texture=this.getTexture(t.metallicRoughnessTexture.index))}return s}_resolveAccessor(t,e){const s=(r=t.componentType,o[r]);var r;const a=(c=t.type,i[c]);var c;const u=s*a,h={...t,id:t.id||`accessor-${e}`,bytesPerComponent:s,components:a,bytesPerElement:u,value:void 0,bufferView:void 0,sparse:void 0};if(void 0!==t.bufferView&&(h.bufferView=this.getBufferView(t.bufferView)),h.bufferView){const t=h.bufferView.buffer,{ArrayType:e,byteLength:s}=(0,n.aF)(h,h.bufferView),r=(h.bufferView.byteOffset||0)+(h.byteOffset||0)+t.byteOffset;let i=t.arrayBuffer.slice(r,r+s);h.bufferView.byteStride&&(i=this._getValueFromInterleavedBuffer(t,r,h.bufferView.byteStride,h.bytesPerElement,h.count)),h.value=new e(i)}return h}_getValueFromInterleavedBuffer(t,e,s,r,n){const i=new Uint8Array(n*r);for(let o=0;o<n;o++){const n=e+o*s;i.set(new Uint8Array(t.arrayBuffer.slice(n,n+r)),o*r)}return i.buffer}_resolveTexture(t,e){return{...t,id:t.id||`texture-${e}`,sampler:"number"==typeof t.sampler?this.getSampler(t.sampler):{id:"default-sampler",parameters:d},source:"number"==typeof t.source?this.getImage(t.source):void 0}}_resolveSampler(t,e){const s={id:t.id||`sampler-${e}`,...t,parameters:{}};for(const r in s){const t=this._enumSamplerParameter(r);void 0!==t&&(s.parameters[t]=s[r])}return s}_enumSamplerParameter(t){return f[t]}_resolveImage(t,e){const s={...t,id:t.id||`image-${e}`,image:null,bufferView:void 0!==t.bufferView?this.getBufferView(t.bufferView):void 0},r=this.images[e];return r&&(s.image=r),s}_resolveBufferView(t,e){const s=t.buffer,r=this.buffers[s].arrayBuffer;let n=this.buffers[s].byteOffset||0;t.byteOffset&&(n+=t.byteOffset);return{id:`bufferView-${e}`,...t,buffer:this.buffers[s],data:new Uint8Array(r,n,t.byteLength)}}_resolveCamera(t,e){const s={...t,id:t.id||`camera-${e}`};return s.perspective,s.orthographic,s}}function m(t,e){return(new A).postProcess(t,e)}},7897:(t,e,s)=>{s.d(e,{$j:()=>r,E9:()=>n});const r={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},n={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4}},7885:(t,e,s)=>{s.d(e,{aF:()=>d,rA:()=>f,v7:()=>l});var r=s(2840),n=s(7897);const i=["SCALAR","VEC2","VEC3","VEC4"],o=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],a=new Map(o),c={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},u={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},h={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function l(t){return i[t-1]||i[0]}function f(t){const e=a.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function d(t,e){const s=h[t.componentType],i=c[t.type],o=u[t.componentType],a=t.count*i,l=t.count*i*o;(0,r.v)(l>=0&&l<=e.byteLength);return{ArrayType:s,length:a,byteLength:l,componentByteSize:n.E9[t.componentType],numberOfComponentsInElement:n.$j[t.type]}}},2840:(t,e,s)=>{function r(t,e){if(!t)throw new Error(e||"assert failed: gltf")}s.d(e,{v:()=>r})},48:(t,e,s)=>{function r(t,e,s){if(s=s||t.byteLength,t.byteLength<s||e.byteLength<s)return!1;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;++i)if(r[i]!==n[i])return!1;return!0}function n(...t){return function(t){const e=t.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),s=e.reduce(((t,e)=>t+e.byteLength),0),r=new Uint8Array(s);let n=0;for(const i of e)r.set(i,n),n+=i.byteLength;return r.buffer}(t)}function i(t,e,s){const r=void 0!==s?new Uint8Array(t).subarray(e,e+s):new Uint8Array(t).subarray(e);return new Uint8Array(r).buffer}s.d(e,{AQ:()=>n,YV:()=>r,_m:()=>i})},2595:(t,e,s)=>{function r(t,e){if(!t)throw new Error(e||"loader assertion failed.")}s.d(e,{v:()=>r})},7612:(t,e,s)=>{s.d(e,{Bd:()=>r});"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof global&&global,"undefined"!=typeof document&&document;const r=Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),n="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);n&&parseFloat(n[1])},5993:(t,e,s)=>{function r(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}s.d(e,{v:()=>r})},8503:(t,e,s)=>{s.d(e,{Bd:()=>r,Fr:()=>i,xD:()=>n});"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof global&&global,"undefined"!=typeof document&&document;const r="object"!=typeof process||"[object process]"!==String(process)||process.browser,n="function"==typeof importScripts,i="undefined"!=typeof window&&void 0!==window.orientation,o="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);o&&parseFloat(o[1])},5607:(t,e,s)=>{s.d(e,{Q:()=>n,x:()=>r});const r="latest";const n=(globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.3"),globalThis._loadersgl_.version)},8073:(t,e,s)=>{s.d(e,{a:()=>n});var r=s(4901);class n extends Array{clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let s=0;s<this.ELEMENTS;++s)this[s]=t[s+e];return this.check()}toArray(t=[],e=0){for(let s=0;s<this.ELEMENTS;++s)t[e+s]=this[s];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:(0,r.cy)(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(r.$W)}formatString(t){let e="";for(let s=0;s<this.ELEMENTS;++s)e+=(s>0?", ":"")+(0,r.Fl)(this[s],t);return`${t.printTypes?this.constructor.name:""}[${e}]`}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!(0,r.aI)(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,s){if(void 0===s)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const n=t[r],i="number"==typeof e?e:e[r];this[r]=n+s*(i-n)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],t[s]),e[s]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(r.$W.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],t),e);return this.check()}get elements(){return this}}},6022:(t,e,s)=>{s.d(e,{u:()=>o});var r=s(8073),n=s(3731),i=s(4901);class o extends r.a{toString(){let t="[";if(i.$W.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let s=0;s<this.RANK;++s)t+=` ${this[s*this.RANK+e]}`}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=` ${this[e]}`}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,s){return this[e*this.RANK+t]=(0,n.ws)(s),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const s=t*this.RANK;for(let r=0;r<this.RANK;++r)e[r]=this[s+r];return e}setColumn(t,e){const s=t*this.RANK;for(let r=0;r<this.RANK;++r)this[s+r]=e[r];return this}}},5715:(t,e,s)=>{s.d(e,{M:()=>o});var r=s(8073),n=s(3731);function i(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class o extends r.a{get x(){return this[0]}set x(t){this[0]=(0,n.ws)(t)}get y(){return this[1]}set y(t){this[1]=(0,n.ws)(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let s=0;s<this.ELEMENTS;++s){const r=this[s]-t[s];e+=r*r}return(0,n.ws)(e)}dot(t){let e=0;for(let s=0;s<this.ELEMENTS;++s)e+=this[s]*t[s];return(0,n.ws)(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return i(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,n.ws)(this[t])}setComponent(t,e){return i(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}},5663:(t,e,s)=>{s.d(e,{k:()=>p});var r=s(6022),n=s(3731),i=s(8225),o=s(741);function a(t,e,s){const r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=e[9],d=e[10],A=e[11],m=e[12],B=e[13],g=e[14],_=e[15];let p=s[0],y=s[1],b=s[2],C=s[3];return t[0]=p*r+y*a+b*l+C*m,t[1]=p*n+y*c+b*f+C*B,t[2]=p*i+y*u+b*d+C*g,t[3]=p*o+y*h+b*A+C*_,p=s[4],y=s[5],b=s[6],C=s[7],t[4]=p*r+y*a+b*l+C*m,t[5]=p*n+y*c+b*f+C*B,t[6]=p*i+y*u+b*d+C*g,t[7]=p*o+y*h+b*A+C*_,p=s[8],y=s[9],b=s[10],C=s[11],t[8]=p*r+y*a+b*l+C*m,t[9]=p*n+y*c+b*f+C*B,t[10]=p*i+y*u+b*d+C*g,t[11]=p*o+y*h+b*A+C*_,p=s[12],y=s[13],b=s[14],C=s[15],t[12]=p*r+y*a+b*l+C*m,t[13]=p*n+y*c+b*f+C*B,t[14]=p*i+y*u+b*d+C*g,t[15]=p*o+y*h+b*A+C*_,t}const c=function(t,e,s,r,n){const i=1/Math.tan(e/2);if(t[0]=i/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){const e=1/(r-n);t[10]=(n+r)*e,t[14]=2*n*r*e}else t[10]=-1,t[14]=-2*r;return t};const u=function(t,e,s,r,n,i,o){const a=1/(e-s),c=1/(r-n),u=1/(i-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+s)*a,t[13]=(n+r)*c,t[14]=(o+i)*u,t[15]=1,t};var h,l=s(3588),f=s(2859),d=s(9426);!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(h||(h={}));const A=45*Math.PI/180,m=1,B=.1,g=500,_=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class p extends r.u{static get IDENTITY(){return function(){b||(b=new p,Object.freeze(b));return b}()}static get ZERO(){return function(){y||(y=new p([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(y));return y}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return h}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,s,r,n,i,o,a,c,u,h,l,f,d,A,m){return this[0]=t,this[1]=e,this[2]=s,this[3]=r,this[4]=n,this[5]=i,this[6]=o,this[7]=a,this[8]=c,this[9]=u,this[10]=h,this[11]=l,this[12]=f,this[13]=d,this[14]=A,this[15]=m,this.check()}setRowMajor(t,e,s,r,n,i,o,a,c,u,h,l,f,d,A,m){return this[0]=t,this[1]=n,this[2]=c,this[3]=f,this[4]=e,this[5]=i,this[6]=u,this[7]=d,this[8]=s,this[9]=o,this[10]=h,this[11]=A,this[12]=r,this[13]=a,this[14]=l,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(_)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){const s=e[0],r=e[1],n=e[2],i=e[3],o=s+s,a=r+r,c=n+n,u=s*o,h=r*o,l=r*a,f=n*o,d=n*a,A=n*c,m=i*o,B=i*a,g=i*c;t[0]=1-l-A,t[1]=h+g,t[2]=f-B,t[3]=0,t[4]=h-g,t[5]=1-u-A,t[6]=d+m,t[7]=0,t[8]=f+B,t[9]=d-m,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:s,bottom:r,top:n,near:i=B,far:o=g}=t;return o===1/0?function(t,e,s,r,n,i){const o=2*i/(s-e),a=2*i/(n-r),c=(s+e)/(s-e),u=(n+r)/(n-r),h=-1,l=-1,f=-2*i;t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=u,t[10]=h,t[11]=l,t[12]=0,t[13]=0,t[14]=f,t[15]=0}(this,e,s,r,n,i):function(t,e,s,r,n,i,o){const a=1/(s-e),c=1/(n-r),u=1/(i-o);t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(s+e)*a,t[9]=(n+r)*c,t[10]=(o+i)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*u,t[15]=0}(this,e,s,r,n,i,o),this.check()}lookAt(t){const{eye:e,center:s=[0,0,0],up:r=[0,1,0]}=t;return function(t,e,s,r){let n,i,a,c,u,h,l,f,d,A;const m=e[0],B=e[1],g=e[2],_=r[0],p=r[1],y=r[2],b=s[0],C=s[1],w=s[2];Math.abs(m-b)<o.p8&&Math.abs(B-C)<o.p8&&Math.abs(g-w)<o.p8?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(f=m-b,d=B-C,A=g-w,n=1/Math.sqrt(f*f+d*d+A*A),f*=n,d*=n,A*=n,i=p*A-y*d,a=y*f-_*A,c=_*d-p*f,n=Math.sqrt(i*i+a*a+c*c),n?(n=1/n,i*=n,a*=n,c*=n):(i=0,a=0,c=0),u=d*c-A*a,h=A*i-f*c,l=f*a-d*i,n=Math.sqrt(u*u+h*h+l*l),n?(n=1/n,u*=n,h*=n,l*=n):(u=0,h=0,l=0),t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=h,t[6]=d,t[7]=0,t[8]=c,t[9]=l,t[10]=A,t[11]=0,t[12]=-(i*m+a*B+c*g),t[13]=-(u*m+h*B+l*g),t[14]=-(f*m+d*B+A*g),t[15]=1)}(this,e,s,r),this.check()}ortho(t){const{left:e,right:s,bottom:r,top:n,near:i=B,far:o=g}=t;return u(this,e,s,r,n,i,o),this.check()}orthographic(t){const{fovy:e=A,aspect:s=m,focalDistance:r=1,near:n=B,far:i=g}=t;C(e);const o=e/2,a=r*Math.tan(o),c=a*s;return this.ortho({left:-c,right:c,bottom:-a,top:a,near:n,far:i})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:s=1,near:r=.1,far:n=500}=t;return C(e),c(this,e,s,r,n),this.check()}determinant(){return function(t){const e=t[0],s=t[1],r=t[2],n=t[3],i=t[4],o=t[5],a=t[6],c=t[7],u=t[8],h=t[9],l=t[10],f=t[11],d=t[12],A=t[13],m=t[14],B=e*o-s*i,g=e*a-r*i,_=s*a-r*o,p=u*A-h*d,y=u*m-l*d,b=h*m-l*A;return c*(e*b-s*y+r*p)-n*(i*b-o*y+a*p)+t[15]*(u*_-h*g+l*B)-f*(d*_-A*g+m*B)}(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const s=this.getScale(e),r=1/s[0],n=1/s[1],i=1/s[2];return t[0]=this[0]*r,t[1]=this[1]*n,t[2]=this[2]*i,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*n,t[6]=this[6]*i,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*n,t[10]=this[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const s=this.getScale(e),r=1/s[0],n=1/s[1],i=1/s[2];return t[0]=this[0]*r,t[1]=this[1]*n,t[2]=this[2]*i,t[3]=this[4]*r,t[4]=this[5]*n,t[5]=this[6]*i,t[6]=this[8]*r,t[7]=this[9]*n,t[8]=this[10]*i,t}transpose(){return function(t,e){if(t===e){const s=e[1],r=e[2],n=e[3],i=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=s,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return function(t,e){const s=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],f=e[10],d=e[11],A=e[12],m=e[13],B=e[14],g=e[15],_=s*a-r*o,p=s*c-n*o,y=s*u-i*o,b=r*c-n*a,C=r*u-i*a,w=n*u-i*c,k=h*m-l*A,E=h*B-f*A,x=h*g-d*A,F=l*B-f*m,M=l*g-d*m,v=f*g-d*B;let I=_*v-p*M+y*F+b*x-C*E+w*k;I&&(I=1/I,t[0]=(a*v-c*M+u*F)*I,t[1]=(n*M-r*v-i*F)*I,t[2]=(m*w-B*C+g*b)*I,t[3]=(f*C-l*w-d*b)*I,t[4]=(c*x-o*v-u*E)*I,t[5]=(s*v-n*x+i*E)*I,t[6]=(B*y-A*w-g*p)*I,t[7]=(h*w-f*y+d*p)*I,t[8]=(o*M-a*x+u*k)*I,t[9]=(r*x-s*M-i*k)*I,t[10]=(A*C-m*y+g*_)*I,t[11]=(l*y-h*C-d*_)*I,t[12]=(a*E-o*F-c*k)*I,t[13]=(s*F-r*E+n*k)*I,t[14]=(m*p-A*b-B*_)*I,t[15]=(h*b-l*p+f*_)*I)}(this,this),this.check()}multiplyLeft(t){return a(this,t,this),this.check()}multiplyRight(t){return a(this,this,t),this.check()}rotateX(t){return function(t,e,s){const r=Math.sin(s),n=Math.cos(s),i=e[4],o=e[5],a=e[6],c=e[7],u=e[8],h=e[9],l=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*n+u*r,t[5]=o*n+h*r,t[6]=a*n+l*r,t[7]=c*n+f*r,t[8]=u*n-i*r,t[9]=h*n-o*r,t[10]=l*n-a*r,t[11]=f*n-c*r}(this,this,t),this.check()}rotateY(t){return function(t,e,s){const r=Math.sin(s),n=Math.cos(s),i=e[0],o=e[1],a=e[2],c=e[3],u=e[8],h=e[9],l=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n-u*r,t[1]=o*n-h*r,t[2]=a*n-l*r,t[3]=c*n-f*r,t[8]=i*r+u*n,t[9]=o*r+h*n,t[10]=a*r+l*n,t[11]=c*r+f*n}(this,this,t),this.check()}rotateZ(t){return function(t,e,s){const r=Math.sin(s),n=Math.cos(s),i=e[0],o=e[1],a=e[2],c=e[3],u=e[4],h=e[5],l=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n+u*r,t[1]=o*n+h*r,t[2]=a*n+l*r,t[3]=c*n+f*r,t[4]=u*n-i*r,t[5]=h*n-o*r,t[6]=l*n-a*r,t[7]=f*n-c*r}(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,s,r){let n,i,a,c,u,h,l,f,d,A,m,B,g,_,p,y,b,C,w,k,E,x,F,M,v=r[0],I=r[1],G=r[2],D=Math.sqrt(v*v+I*I+G*G);D<o.p8||(D=1/D,v*=D,I*=D,G*=D,i=Math.sin(s),n=Math.cos(s),a=1-n,c=e[0],u=e[1],h=e[2],l=e[3],f=e[4],d=e[5],A=e[6],m=e[7],B=e[8],g=e[9],_=e[10],p=e[11],y=v*v*a+n,b=I*v*a+G*i,C=G*v*a-I*i,w=v*I*a-G*i,k=I*I*a+n,E=G*I*a+v*i,x=v*G*a+I*i,F=I*G*a-v*i,M=G*G*a+n,t[0]=c*y+f*b+B*C,t[1]=u*y+d*b+g*C,t[2]=h*y+A*b+_*C,t[3]=l*y+m*b+p*C,t[4]=c*w+f*k+B*E,t[5]=u*w+d*k+g*E,t[6]=h*w+A*k+_*E,t[7]=l*w+m*k+p*E,t[8]=c*x+f*F+B*M,t[9]=u*x+d*F+g*M,t[10]=h*x+A*F+_*M,t[11]=l*x+m*F+p*M,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return function(t,e,s){const r=s[0],n=s[1],i=s[2];t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return function(t,e,s){const r=s[0],n=s[1],i=s[2];let o,a,c,u,h,l,f,d,A,m,B,g;e===t?(t[12]=e[0]*r+e[4]*n+e[8]*i+e[12],t[13]=e[1]*r+e[5]*n+e[9]*i+e[13],t[14]=e[2]*r+e[6]*n+e[10]*i+e[14],t[15]=e[3]*r+e[7]*n+e[11]*i+e[15]):(o=e[0],a=e[1],c=e[2],u=e[3],h=e[4],l=e[5],f=e[6],d=e[7],A=e[8],m=e[9],B=e[10],g=e[11],t[0]=o,t[1]=a,t[2]=c,t[3]=u,t[4]=h,t[5]=l,t[6]=f,t[7]=d,t[8]=A,t[9]=m,t[10]=B,t[11]=g,t[12]=o*r+h*n+A*i+e[12],t[13]=a*r+l*n+m*i+e[13],t[14]=c*r+f*n+B*i+e[14],t[15]=u*r+d*n+g*i+e[15])}(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=(0,d.Z0)(e||[-0,-0,-0,-0],t,this),(0,n.qk)(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:s}=t;let r;switch(s){case 2:r=(0,l.Z0)(e||[-0,-0],t,this);break;case 3:r=(0,f.Z0)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,n.qk)(r,t.length),r}transformAsVector(t,e){let s;switch(t.length){case 2:s=(0,i.B$)(e||[-0,-0],t,this);break;case 3:s=(0,i.cL)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,n.qk)(s,t.length),s}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,s){return this.identity().translate([t,e,s])}}let y,b;function C(t){if(t>2*Math.PI)throw Error("expected radians")}},1633:(t,e,s)=>{s.d(e,{P:()=>M});var r=s(8073),n=s(3731),i=s(2859),o=s(8225),a=s(5715),c=s(4901);let u;class h extends a.M{static get ZERO(){return u||(u=new h(0,0,0,0),Object.freeze(u)),u}constructor(t=0,e=0,s=0,r=0){super(-0,-0,-0,-0),(0,c.cy)(t)&&1===arguments.length?this.copy(t):(c.$W.debug&&((0,n.ws)(t),(0,n.ws)(e),(0,n.ws)(s),(0,n.ws)(r)),this[0]=t,this[1]=e,this[2]=s,this[3]=r)}set(t,e,s,r){return this[0]=t,this[1]=e,this[2]=s,this[3]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return c.$W.debug&&((0,n.ws)(t.x),(0,n.ws)(t.y),(0,n.ws)(t.z),(0,n.ws)(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=(0,n.ws)(t)}get w(){return this[3]}set w(t){this[3]=(0,n.ws)(t)}transform(t){return(0,i.Z0)(this,this,t),this.check()}transformByMatrix3(t){return(0,o.vE)(this,this,t),this.check()}transformByMatrix2(t){return(0,o.Cg)(this,this,t),this.check()}transformByQuaternion(t){return(0,i.gL)(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}var l=s(741),f=s(4435),d=s(9426);function A(){const t=new l.tb(4);return l.tb!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function m(t,e,s){s*=.5;const r=Math.sin(s);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(s),t}function B(t,e,s){const r=e[0],n=e[1],i=e[2],o=e[3],a=s[0],c=s[1],u=s[2],h=s[3];return t[0]=r*h+o*a+n*u-i*c,t[1]=n*h+o*c+i*a-r*u,t[2]=i*h+o*u+r*c-n*a,t[3]=o*h-r*a-n*c-i*u,t}function g(t,e,s,r){const n=e[0],i=e[1],o=e[2],a=e[3];let c,u,h,f,d,A=s[0],m=s[1],B=s[2],g=s[3];return c=n*A+i*m+o*B+a*g,c<0&&(c=-c,A=-A,m=-m,B=-B,g=-g),1-c>l.p8?(u=Math.acos(c),d=Math.sin(u),h=Math.sin((1-r)*u)/d,f=Math.sin(r*u)/d):(h=1-r,f=r),t[0]=h*n+f*A,t[1]=h*i+f*m,t[2]=h*o+f*B,t[3]=h*a+f*g,t}function _(t,e){const s=e[0]+e[4]+e[8];let r;if(s>0)r=Math.sqrt(s+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[3*s+s]&&(s=2);const n=(s+1)%3,i=(s+2)%3;r=Math.sqrt(e[3*s+s]-e[3*n+n]-e[3*i+i]+1),t[s]=.5*r,r=.5/r,t[3]=(e[3*n+i]-e[3*i+n])*r,t[n]=(e[3*n+s]+e[3*s+n])*r,t[i]=(e[3*i+s]+e[3*s+i])*r}return t}d.o8,d.fA,d.C,d.hZ;const p=d.WQ,y=d.hs,b=d.Om,C=d.Cc,w=d.Bw,k=d.m3,E=d.S8;d.t2;const x=function(){const t=i.vt(),e=i.fA(1,0,0),s=i.fA(0,1,0);return function(r,n,o){const a=i.Om(n,o);return a<-.999999?(i.$A(t,e,n),i.Il(t)<1e-6&&i.$A(t,s,n),i.S8(t,t),m(r,t,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(i.$A(t,n,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,E(r,r))}}(),F=(function(){const t=A(),e=A()}(),function(){const t=f.vt()}(),[0,0,0,1]);class M extends r.a{constructor(t=0,e=0,s=0,r=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,s,r)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,s,r){return this[0]=t,this[1]=e,this[2]=s,this[3]=r,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return _(this,t),this.check()}fromAxisRotation(t,e){return m(this,t,e),this.check()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=(0,n.ws)(t)}get y(){return this[1]}set y(t){this[1]=(0,n.ws)(t)}get z(){return this[2]}set z(t){this[2]=(0,n.ws)(t)}get w(){return this[3]}set w(t){this[3]=(0,n.ws)(t)}len(){return w(this)}lengthSquared(){return k(this)}dot(t){return b(this,t)}rotationTo(t,e){return x(this,t,e),this.check()}add(t){return p(this,this,t),this.check()}calculateW(){return function(t,e){const s=e[0],r=e[1],n=e[2];t[0]=s,t[1]=r,t[2]=n,t[3]=Math.sqrt(Math.abs(1-s*s-r*r-n*n))}(this,this),this.check()}conjugate(){var t,e;return e=this,(t=this)[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],this.check()}invert(){return function(t,e){const s=e[0],r=e[1],n=e[2],i=e[3],o=s*s+r*r+n*n+i*i,a=o?1/o:0;t[0]=-s*a,t[1]=-r*a,t[2]=-n*a,t[3]=i*a}(this,this),this.check()}lerp(t,e,s){return void 0===s?this.lerp(this,t,e):(C(this,t,e,s),this.check())}multiplyRight(t){return B(this,this,t),this.check()}multiplyLeft(t){return B(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,s){s*=.5;const r=e[0],n=e[1],i=e[2],o=e[3],a=Math.sin(s),c=Math.cos(s);t[0]=r*c+o*a,t[1]=n*c+i*a,t[2]=i*c-n*a,t[3]=o*c-r*a}(this,this,t),this.check()}rotateY(t){return function(t,e,s){s*=.5;const r=e[0],n=e[1],i=e[2],o=e[3],a=Math.sin(s),c=Math.cos(s);t[0]=r*c-i*a,t[1]=n*c+o*a,t[2]=i*c+r*a,t[3]=o*c-n*a}(this,this,t),this.check()}rotateZ(t){return function(t,e,s){s*=.5;const r=e[0],n=e[1],i=e[2],o=e[3],a=Math.sin(s),c=Math.cos(s);t[0]=r*c+n*a,t[1]=n*c-r*a,t[2]=i*c+o*a,t[3]=o*c-i*a}(this,this,t),this.check()}scale(t){return y(this,this,t),this.check()}slerp(t,e,s){let r,n,i;switch(arguments.length){case 1:({start:r=F,target:n,ratio:i}=t);break;case 2:r=this,n=t,i=e;break;default:r=t,n=e,i=s}return g(this,r,n,i),this.check()}transformVector4(t,e=new h){return(0,d.gL)(e,t,this),(0,n.qk)(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}},7597:(t,e,s)=>{s.d(e,{P:()=>h});var r=s(5715),n=s(4901),i=s(3731),o=s(2859),a=s(8225);const c=[0,0,0];let u;class h extends r.M{static get ZERO(){return u||(u=new h(0,0,0),Object.freeze(u)),u}constructor(t=0,e=0,s=0){super(-0,-0,-0),1===arguments.length&&(0,n.cy)(t)?this.copy(t):(n.$W.debug&&((0,i.ws)(t),(0,i.ws)(e),(0,i.ws)(s)),this[0]=t,this[1]=e,this[2]=s)}set(t,e,s){return this[0]=t,this[1]=e,this[2]=s,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return n.$W.debug&&((0,i.ws)(t.x),(0,i.ws)(t.y),(0,i.ws)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=(0,i.ws)(t)}angle(t){return(0,o.g7)(this,t)}cross(t){return(0,o.$A)(this,this,t),this.check()}rotateX({radians:t,origin:e=c}){return(0,o.eL)(this,this,e,t),this.check()}rotateY({radians:t,origin:e=c}){return(0,o.Z8)(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=c}){return(0,o.x6)(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return(0,o.Z0)(this,this,t),this.check()}transformAsVector(t){return(0,a.cL)(this,this,t),this.check()}transformByMatrix3(t){return(0,o.ei)(this,this,t),this.check()}transformByMatrix2(t){return(0,a.J4)(this,this,t),this.check()}transformByQuaternion(t){return(0,o.gL)(this,this,t),this.check()}}},741:(t,e,s)=>{s.d(e,{p8:()=>r,tb:()=>n});const r=1e-6;let n="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI},4435:(t,e,s)=>{s.d(e,{B8:()=>o,I0:()=>f,Tl:()=>u,a4:()=>a,e$:()=>h,hs:()=>l,lw:()=>c,mg:()=>i,vt:()=>n});var r=s(741);function n(){const t=new r.tb(9);return r.tb!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function i(t,e){if(t===e){const s=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=s,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function o(t,e){const s=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=h*o-a*u,f=-h*i+a*c,d=u*i-o*c;let A=s*l+r*f+n*d;return A?(A=1/A,t[0]=l*A,t[1]=(-h*r+n*u)*A,t[2]=(a*r-n*o)*A,t[3]=f*A,t[4]=(h*s-n*c)*A,t[5]=(-a*s+n*i)*A,t[6]=d*A,t[7]=(-u*s+r*c)*A,t[8]=(o*s-r*i)*A,t):null}function a(t){const e=t[0],s=t[1],r=t[2],n=t[3],i=t[4],o=t[5],a=t[6],c=t[7],u=t[8];return e*(u*i-o*c)+s*(-u*n+o*a)+r*(c*n-i*a)}function c(t,e,s){const r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=s[0],d=s[1],A=s[2],m=s[3],B=s[4],g=s[5],_=s[6],p=s[7],y=s[8];return t[0]=f*r+d*o+A*u,t[1]=f*n+d*a+A*h,t[2]=f*i+d*c+A*l,t[3]=m*r+B*o+g*u,t[4]=m*n+B*a+g*h,t[5]=m*i+B*c+g*l,t[6]=_*r+p*o+y*u,t[7]=_*n+p*a+y*h,t[8]=_*i+p*c+y*l,t}function u(t,e,s){const r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=s[0],d=s[1];return t[0]=r,t[1]=n,t[2]=i,t[3]=o,t[4]=a,t[5]=c,t[6]=f*r+d*o+u,t[7]=f*n+d*a+h,t[8]=f*i+d*c+l,t}function h(t,e,s){const r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=Math.sin(s),d=Math.cos(s);return t[0]=d*r+f*o,t[1]=d*n+f*a,t[2]=d*i+f*c,t[3]=d*o-f*r,t[4]=d*a-f*n,t[5]=d*c-f*i,t[6]=u,t[7]=h,t[8]=l,t}function l(t,e,s){const r=s[0],n=s[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function f(t,e){const s=e[0],r=e[1],n=e[2],i=e[3],o=s+s,a=r+r,c=n+n,u=s*o,h=r*o,l=r*a,f=n*o,d=n*a,A=n*c,m=i*o,B=i*a,g=i*c;return t[0]=1-l-A,t[3]=h-g,t[6]=f+B,t[1]=h+g,t[4]=1-u-A,t[7]=d-m,t[2]=f-B,t[5]=d+m,t[8]=1-u-l,t}},3588:(t,e,s)=>{s.d(e,{Z0:()=>i,ei:()=>n});var r=s(741);function n(t,e,s){const r=e[0],n=e[1];return t[0]=s[0]*r+s[3]*n+s[6],t[1]=s[1]*r+s[4]*n+s[7],t}function i(t,e,s){const r=e[0],n=e[1];return t[0]=s[0]*r+s[4]*n+s[12],t[1]=s[1]*r+s[5]*n+s[13],t}!function(){const t=function(){const t=new r.tb(2);return r.tb!=Float32Array&&(t[0]=0,t[1]=0),t}()}()},2859:(t,e,s)=>{s.d(e,{$A:()=>c,Il:()=>B,Om:()=>a,S8:()=>o,Z0:()=>u,Z8:()=>d,eL:()=>f,ei:()=>h,fA:()=>i,g7:()=>m,gL:()=>l,vt:()=>n,x6:()=>A});var r=s(741);function n(){const t=new r.tb(3);return r.tb!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function i(t,e,s){const n=new r.tb(3);return n[0]=t,n[1]=e,n[2]=s,n}function o(t,e){const s=e[0],r=e[1],n=e[2];let i=s*s+r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function a(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function c(t,e,s){const r=e[0],n=e[1],i=e[2],o=s[0],a=s[1],c=s[2];return t[0]=n*c-i*a,t[1]=i*o-r*c,t[2]=r*a-n*o,t}function u(t,e,s){const r=e[0],n=e[1],i=e[2];let o=s[3]*r+s[7]*n+s[11]*i+s[15];return o=o||1,t[0]=(s[0]*r+s[4]*n+s[8]*i+s[12])/o,t[1]=(s[1]*r+s[5]*n+s[9]*i+s[13])/o,t[2]=(s[2]*r+s[6]*n+s[10]*i+s[14])/o,t}function h(t,e,s){const r=e[0],n=e[1],i=e[2];return t[0]=r*s[0]+n*s[3]+i*s[6],t[1]=r*s[1]+n*s[4]+i*s[7],t[2]=r*s[2]+n*s[5]+i*s[8],t}function l(t,e,s){const r=s[0],n=s[1],i=s[2],o=s[3],a=e[0],c=e[1],u=e[2];let h=n*u-i*c,l=i*a-r*u,f=r*c-n*a,d=n*f-i*l,A=i*h-r*f,m=r*l-n*h;const B=2*o;return h*=B,l*=B,f*=B,d*=2,A*=2,m*=2,t[0]=a+h+d,t[1]=c+l+A,t[2]=u+f+m,t}function f(t,e,s,r){const n=[],i=[];return n[0]=e[0]-s[0],n[1]=e[1]-s[1],n[2]=e[2]-s[2],i[0]=n[0],i[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),i[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t}function d(t,e,s,r){const n=[],i=[];return n[0]=e[0]-s[0],n[1]=e[1]-s[1],n[2]=e[2]-s[2],i[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),i[1]=n[1],i[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t}function A(t,e,s,r){const n=[],i=[];return n[0]=e[0]-s[0],n[1]=e[1]-s[1],n[2]=e[2]-s[2],i[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),i[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),i[2]=n[2],t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t}function m(t,e){const s=t[0],r=t[1],n=t[2],i=e[0],o=e[1],c=e[2],u=Math.sqrt((s*s+r*r+n*n)*(i*i+o*o+c*c)),h=u&&a(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}const B=function(t){const e=t[0],s=t[1],r=t[2];return Math.sqrt(e*e+s*s+r*r)};!function(){const t=n()}()},9426:(t,e,s)=>{s.d(e,{Bw:()=>h,C:()=>o,Cc:()=>A,Om:()=>d,S8:()=>f,WQ:()=>c,Z0:()=>m,fA:()=>i,gL:()=>B,hZ:()=>a,hs:()=>u,m3:()=>l,o8:()=>n,t2:()=>g});var r=s(741);function n(t){const e=new r.tb(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function i(t,e,s,n){const i=new r.tb(4);return i[0]=t,i[1]=e,i[2]=s,i[3]=n,i}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(t,e,s,r,n){return t[0]=e,t[1]=s,t[2]=r,t[3]=n,t}function c(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t}function u(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t}function h(t){const e=t[0],s=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+s*s+r*r+n*n)}function l(t){const e=t[0],s=t[1],r=t[2],n=t[3];return e*e+s*s+r*r+n*n}function f(t,e){const s=e[0],r=e[1],n=e[2],i=e[3];let o=s*s+r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=s*o,t[1]=r*o,t[2]=n*o,t[3]=i*o,t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function A(t,e,s,r){const n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n+r*(s[0]-n),t[1]=i+r*(s[1]-i),t[2]=o+r*(s[2]-o),t[3]=a+r*(s[3]-a),t}function m(t,e,s){const r=e[0],n=e[1],i=e[2],o=e[3];return t[0]=s[0]*r+s[4]*n+s[8]*i+s[12]*o,t[1]=s[1]*r+s[5]*n+s[9]*i+s[13]*o,t[2]=s[2]*r+s[6]*n+s[10]*i+s[14]*o,t[3]=s[3]*r+s[7]*n+s[11]*i+s[15]*o,t}function B(t,e,s){const r=e[0],n=e[1],i=e[2],o=s[0],a=s[1],c=s[2],u=s[3],h=u*r+a*i-c*n,l=u*n+c*r-o*i,f=u*i+o*n-a*r,d=-o*r-a*n-c*i;return t[0]=h*u+d*-o+l*-c-f*-a,t[1]=l*u+d*-a+f*-o-h*-c,t[2]=f*u+d*-c+h*-a-l*-o,t[3]=e[3],t}function g(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}!function(){const t=function(){const t=new r.tb(4);return r.tb!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}()},4901:(t,e,s)=>{s.d(e,{$W:()=>n,F2:()=>a,Fl:()=>i,aI:()=>u,cy:()=>o,qE:()=>c});Math.PI;const r=1/180*Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const n=globalThis.mathgl.config;function i(t,{precision:e=n.precision}={}){return t=function(t){return Math.round(t/n.EPSILON)*n.EPSILON}(t),`${parseFloat(t.toPrecision(e))}`}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function a(t,e){return h(t,(t=>t*r),e)}function c(t,e,s){return h(t,(t=>Math.max(e,Math.min(s,t))))}function u(t,e,s){const r=n.EPSILON;s&&(n.EPSILON=s);try{if(t===e)return!0;if(o(t)&&o(e)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!u(t[s],e[s]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{n.EPSILON=r}}function h(t,e,s){if(o(t)){const r=t;s=s||function(t){return t.clone?t.clone():new Array(t.length)}(r);for(let n=0;n<s.length&&n<r.length;++n){const r="number"==typeof t?t:t[n];s[n]=e(r,n,s)}return s}return e(t)}},8225:(t,e,s)=>{function r(t,e,s){const r=e[0],n=e[1],i=s[3]*r+s[7]*n||1;return t[0]=(s[0]*r+s[4]*n)/i,t[1]=(s[1]*r+s[5]*n)/i,t}function n(t,e,s){const r=e[0],n=e[1],i=e[2],o=s[3]*r+s[7]*n+s[11]*i||1;return t[0]=(s[0]*r+s[4]*n+s[8]*i)/o,t[1]=(s[1]*r+s[5]*n+s[9]*i)/o,t[2]=(s[2]*r+s[6]*n+s[10]*i)/o,t}function i(t,e,s){const r=e[0],n=e[1];return t[0]=s[0]*r+s[2]*n,t[1]=s[1]*r+s[3]*n,t[2]=e[2],t}function o(t,e,s){const r=e[0],n=e[1];return t[0]=s[0]*r+s[2]*n,t[1]=s[1]*r+s[3]*n,t[2]=e[2],t[3]=e[3],t}function a(t,e,s){const r=e[0],n=e[1],i=e[2];return t[0]=s[0]*r+s[3]*n+s[6]*i,t[1]=s[1]*r+s[4]*n+s[7]*i,t[2]=s[2]*r+s[5]*n+s[8]*i,t[3]=e[3],t}s.d(e,{B$:()=>r,Cg:()=>o,J4:()=>i,cL:()=>n,vE:()=>a})},3731:(t,e,s)=>{s.d(e,{qk:()=>i,ws:()=>n});var r=s(4901);function n(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function i(t,e,s=""){if(r.$W.debug&&!function(t,e){if(t.length!==e)return!1;for(let s=0;s<t.length;++s)if(!Number.isFinite(t[s]))return!1;return!0}(t,e))throw new Error(`math.gl: ${s} some fields set to invalid numbers'`);return t}},6282:(t,e,s)=>{function r(t){return function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(t)||function(t){return!!Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}(t)}s.d(e,{H9:()=>r})},9417:(t,e,s)=>{function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}s.d(e,{A:()=>r})}}]);