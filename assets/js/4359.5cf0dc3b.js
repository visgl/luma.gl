"use strict";(self.webpackChunkwebsite_docusaurus=self.webpackChunkwebsite_docusaurus||[]).push([[4359],{2973:(t,e,r)=>{r.d(e,{$X:()=>Tt});class s{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class n{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(t){throw new Error("Cannot evaluate node")}evaluateString(t){return this.evaluate(t).toString()}search(t){}searchBlock(t,e){if(t){e(i.instance);for(const r of t)r instanceof Array?this.searchBlock(r,e):r.search(e);e(o.instance)}}}class i extends n{}i.instance=new i;class o extends n{}o.instance=new o;class a extends n{constructor(){super()}}class c extends a{constructor(t,e,r,s,n,i){super(),this.calls=new Set,this.name=t,this.args=e,this.returnType=r,this.body=s,this.startLine=n,this.endLine=i}get astNodeType(){return"function"}search(t){this.searchBlock(this.body,t)}}class u extends a{constructor(t){super(),this.expression=t}get astNodeType(){return"staticAssert"}search(t){this.expression.search(t)}}class h extends a{constructor(t,e){super(),this.condition=t,this.body=e}get astNodeType(){return"while"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class l extends a{constructor(t){super(),this.body=t}get astNodeType(){return"continuing"}search(t){this.searchBlock(this.body,t)}}class f extends a{constructor(t,e,r,s){super(),this.init=t,this.condition=e,this.increment=r,this.body=s}get astNodeType(){return"for"}search(t){var e,r,s;null===(e=this.init)||void 0===e||e.search(t),null===(r=this.condition)||void 0===r||r.search(t),null===(s=this.increment)||void 0===s||s.search(t),this.searchBlock(this.body,t)}}class d extends a{constructor(t,e,r,s,n){super(),this.name=t,this.type=e,this.storage=r,this.access=s,this.value=n}get astNodeType(){return"var"}search(t){var e;t(this),null===(e=this.value)||void 0===e||e.search(t)}}class A extends a{constructor(t,e,r){super(),this.name=t,this.type=e,this.value=r}get astNodeType(){return"override"}search(t){var e;null===(e=this.value)||void 0===e||e.search(t)}}class m extends a{constructor(t,e,r,s,n){super(),this.name=t,this.type=e,this.storage=r,this.access=s,this.value=n}get astNodeType(){return"let"}search(t){var e;t(this),null===(e=this.value)||void 0===e||e.search(t)}}class g extends a{constructor(t,e,r,s,n){super(),this.name=t,this.type=e,this.storage=r,this.access=s,this.value=n}get astNodeType(){return"const"}evaluate(t){return this.value.evaluate(t)}search(t){var e;t(this),null===(e=this.value)||void 0===e||e.search(t)}}var p,B,_,y,b;!function(t){t.increment="++",t.decrement="--"}(p||(p={})),function(t){t.parse=function(e){const r=e;if("parse"==r)throw new Error("Invalid value for IncrementOperator");return t[r]}}(p||(p={}));class C extends a{constructor(t,e){super(),this.operator=t,this.variable=e}get astNodeType(){return"increment"}search(t){this.variable.search(t)}}!function(t){t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="}(B||(B={})),function(t){t.parse=function(t){const e=t;if("parse"==e)throw new Error("Invalid value for AssignOperator");return e}}(B||(B={}));class w extends a{constructor(t,e,r){super(),this.operator=t,this.variable=e,this.value=r}get astNodeType(){return"assign"}search(t){this.variable.search(t),this.value.search(t)}}class E extends a{constructor(t,e){super(),this.name=t,this.args=e}get astNodeType(){return"call"}search(t){for(const e of this.args)e.search(t);t(this)}}class k extends a{constructor(t,e){super(),this.body=t,this.continuing=e}get astNodeType(){return"loop"}}class M extends a{constructor(t,e){super(),this.condition=t,this.body=e}get astNodeType(){return"body"}}class x extends a{constructor(t,e,r,s){super(),this.condition=t,this.body=e,this.elseif=r,this.else=s}get astNodeType(){return"if"}search(t){this.condition.search(t),this.searchBlock(this.body,t),this.searchBlock(this.elseif,t),this.searchBlock(this.else,t)}}class T extends a{constructor(t){super(),this.value=t}get astNodeType(){return"return"}search(t){var e;null===(e=this.value)||void 0===e||e.search(t)}}class I extends a{constructor(t){super(),this.name=t}get astNodeType(){return"enable"}}class v extends a{constructor(t){super(),this.extensions=t}get astNodeType(){return"requires"}}class F extends a{constructor(t,e){super(),this.severity=t,this.rule=e}get astNodeType(){return"diagnostic"}}class O extends a{constructor(t,e){super(),this.name=t,this.type=e}get astNodeType(){return"alias"}}class G extends a{constructor(){super()}get astNodeType(){return"discard"}}class R extends a{constructor(){super()}get astNodeType(){return"break"}}class D extends a{constructor(){super()}get astNodeType(){return"continue"}}class S extends a{constructor(t){super(),this.name=t}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class L extends S{constructor(t,e,r,s){super(t),this.members=e,this.startLine=r,this.endLine=s}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(t){for(let e=0;e<this.members.length;e++)if(this.members[e].name==t)return e;return-1}}class N extends S{constructor(t,e,r){super(t),this.format=e,this.access=r}get astNodeType(){return"template"}}class J extends S{constructor(t,e,r,s){super(t),this.storage=e,this.type=r,this.access=s}get astNodeType(){return"pointer"}}class U extends S{constructor(t,e,r,s){super(t),this.attributes=e,this.format=r,this.count=s}get astNodeType(){return"array"}get isArray(){return!0}}class H extends S{constructor(t,e,r){super(t),this.format=e,this.access=r}get astNodeType(){return"sampler"}}class j extends n{constructor(){super()}}class P extends j{constructor(t){super(),this.value=t}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class K extends j{constructor(t,e){super(),this.type=t,this.args=e}get astNodeType(){return"createExpr"}search(t){t(this);for(const e of this.args)e.search(t)}}class Q extends j{constructor(t,e){super(),this.name=t,this.args=e}get astNodeType(){return"callExpr"}evaluate(t){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(t));case"acos":return Math.acos(this.args[0].evaluate(t));case"acosh":return Math.acosh(this.args[0].evaluate(t));case"asin":return Math.asin(this.args[0].evaluate(t));case"asinh":return Math.asinh(this.args[0].evaluate(t));case"atan":return Math.atan(this.args[0].evaluate(t));case"atan2":return Math.atan2(this.args[0].evaluate(t),this.args[1].evaluate(t));case"atanh":return Math.atanh(this.args[0].evaluate(t));case"ceil":return Math.ceil(this.args[0].evaluate(t));case"clamp":return Math.min(Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t)),this.args[2].evaluate(t));case"cos":return Math.cos(this.args[0].evaluate(t));case"degrees":return 180*this.args[0].evaluate(t)/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(t)-this.args[1].evaluate(t),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(t));case"exp2":return Math.pow(2,this.args[0].evaluate(t));case"floor":return Math.floor(this.args[0].evaluate(t));case"fma":return this.args[0].evaluate(t)*this.args[1].evaluate(t)+this.args[2].evaluate(t);case"fract":case"modf":return this.args[0].evaluate(t)-Math.floor(this.args[0].evaluate(t));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(t));case"log":return Math.log(this.args[0].evaluate(t));case"log2":return Math.log2(this.args[0].evaluate(t));case"max":return Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t));case"min":return Math.min(this.args[0].evaluate(t),this.args[1].evaluate(t));case"mix":return this.args[0].evaluate(t)*(1-this.args[2].evaluate(t))+this.args[1].evaluate(t)*this.args[2].evaluate(t);case"pow":return Math.pow(this.args[0].evaluate(t),this.args[1].evaluate(t));case"radians":return this.args[0].evaluate(t)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(t));case"sign":return Math.sign(this.args[0].evaluate(t));case"sin":return Math.sin(this.args[0].evaluate(t));case"sinh":return Math.sinh(this.args[0].evaluate(t));case"saturate":return Math.min(Math.max(this.args[0].evaluate(t),0),1);case"smoothstep":return this.args[0].evaluate(t)*this.args[0].evaluate(t)*(3-2*this.args[0].evaluate(t));case"sqrt":return Math.sqrt(this.args[0].evaluate(t));case"step":return this.args[0].evaluate(t)<this.args[1].evaluate(t)?0:1;case"tan":return Math.tan(this.args[0].evaluate(t));case"tanh":return Math.tanh(this.args[0].evaluate(t));case"trunc":return Math.trunc(this.args[0].evaluate(t));default:throw new Error("Non const function: "+this.name)}}search(t){for(const e of this.args)e.search(t);t(this)}}class W extends j{constructor(t){super(),this.name=t}get astNodeType(){return"varExpr"}search(t){t(this),this.postfix&&this.postfix.search(t)}evaluate(t){const e=t.constants.get(this.name);if(!e)throw new Error("Cannot evaluate node");return e.evaluate(t)}}class X extends j{constructor(t,e){super(),this.name=t,this.initializer=e}get astNodeType(){return"constExpr"}evaluate(t){var e,r;if(this.initializer instanceof K){const s=null===(e=this.postfix)||void 0===e?void 0:e.evaluateString(t),n=null===(r=this.initializer.type)||void 0===r?void 0:r.name,i=t.structs.get(n),o=null==i?void 0:i.getMemberIndex(s);if(-1!=o){return this.initializer.args[o].evaluate(t)}console.log(o)}return this.initializer.evaluate(t)}search(t){this.initializer.search(t)}}class q extends j{constructor(t){super(),this.value=t}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class V extends j{constructor(t,e){super(),this.type=t,this.value=e}get astNodeType(){return"bitcastExpr"}search(t){this.value.search(t)}}class Y extends j{constructor(t,e){super(),this.type=t,this.args=e}get astNodeType(){return"typecastExpr"}evaluate(t){return this.args[0].evaluate(t)}search(t){this.searchBlock(this.args,t)}}class Z extends j{constructor(t){super(),this.contents=t}get astNodeType(){return"groupExpr"}evaluate(t){return this.contents[0].evaluate(t)}search(t){this.searchBlock(this.contents,t)}}class z extends j{constructor(t){super(),this.index=t}search(t){this.index.search(t)}}class $ extends j{constructor(){super()}}class tt extends ${constructor(t,e){super(),this.operator=t,this.right=e}get astNodeType(){return"unaryOp"}evaluate(t){switch(this.operator){case"+":return this.right.evaluate(t);case"-":return-this.right.evaluate(t);case"!":return this.right.evaluate(t)?0:1;case"~":return~this.right.evaluate(t);default:throw new Error("Unknown unary operator: "+this.operator)}}search(t){this.right.search(t)}}class et extends ${constructor(t,e,r){super(),this.operator=t,this.left=e,this.right=r}get astNodeType(){return"binaryOp"}evaluate(t){switch(this.operator){case"+":return this.left.evaluate(t)+this.right.evaluate(t);case"-":return this.left.evaluate(t)-this.right.evaluate(t);case"*":return this.left.evaluate(t)*this.right.evaluate(t);case"/":return this.left.evaluate(t)/this.right.evaluate(t);case"%":return this.left.evaluate(t)%this.right.evaluate(t);case"==":return this.left.evaluate(t)==this.right.evaluate(t)?1:0;case"!=":return this.left.evaluate(t)!=this.right.evaluate(t)?1:0;case"<":return this.left.evaluate(t)<this.right.evaluate(t)?1:0;case">":return this.left.evaluate(t)>this.right.evaluate(t)?1:0;case"<=":return this.left.evaluate(t)<=this.right.evaluate(t)?1:0;case">=":return this.left.evaluate(t)>=this.right.evaluate(t)?1:0;case"&&":return this.left.evaluate(t)&&this.right.evaluate(t)?1:0;case"||":return this.left.evaluate(t)||this.right.evaluate(t)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(t){this.left.search(t),this.right.search(t)}}class rt extends n{constructor(){super()}}class st extends rt{constructor(t,e){super(),this.selector=t,this.body=e}get astNodeType(){return"case"}search(t){this.searchBlock(this.body,t)}}class nt extends rt{constructor(t){super(),this.body=t}get astNodeType(){return"default"}search(t){this.searchBlock(this.body,t)}}class it extends n{constructor(t,e,r){super(),this.name=t,this.type=e,this.attributes=r}get astNodeType(){return"argument"}}class ot extends n{constructor(t,e){super(),this.condition=t,this.body=e}get astNodeType(){return"elseif"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class at extends n{constructor(t,e,r){super(),this.name=t,this.type=e,this.attributes=r}get astNodeType(){return"member"}}class ct extends n{constructor(t,e){super(),this.name=t,this.value=e}get astNodeType(){return"attribute"}}!function(t){t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"}(y||(y={}));class ut{constructor(t,e,r){this.name=t,this.type=e,this.rule=r}toString(){return this.name}}class ht{}_=ht,ht.none=new ut("",y.reserved,""),ht.eof=new ut("EOF",y.token,""),ht.reserved={asm:new ut("asm",y.reserved,"asm"),bf16:new ut("bf16",y.reserved,"bf16"),do:new ut("do",y.reserved,"do"),enum:new ut("enum",y.reserved,"enum"),f16:new ut("f16",y.reserved,"f16"),f64:new ut("f64",y.reserved,"f64"),handle:new ut("handle",y.reserved,"handle"),i8:new ut("i8",y.reserved,"i8"),i16:new ut("i16",y.reserved,"i16"),i64:new ut("i64",y.reserved,"i64"),mat:new ut("mat",y.reserved,"mat"),premerge:new ut("premerge",y.reserved,"premerge"),regardless:new ut("regardless",y.reserved,"regardless"),typedef:new ut("typedef",y.reserved,"typedef"),u8:new ut("u8",y.reserved,"u8"),u16:new ut("u16",y.reserved,"u16"),u64:new ut("u64",y.reserved,"u64"),unless:new ut("unless",y.reserved,"unless"),using:new ut("using",y.reserved,"using"),vec:new ut("vec",y.reserved,"vec"),void:new ut("void",y.reserved,"void")},ht.keywords={array:new ut("array",y.keyword,"array"),atomic:new ut("atomic",y.keyword,"atomic"),bool:new ut("bool",y.keyword,"bool"),f32:new ut("f32",y.keyword,"f32"),i32:new ut("i32",y.keyword,"i32"),mat2x2:new ut("mat2x2",y.keyword,"mat2x2"),mat2x3:new ut("mat2x3",y.keyword,"mat2x3"),mat2x4:new ut("mat2x4",y.keyword,"mat2x4"),mat3x2:new ut("mat3x2",y.keyword,"mat3x2"),mat3x3:new ut("mat3x3",y.keyword,"mat3x3"),mat3x4:new ut("mat3x4",y.keyword,"mat3x4"),mat4x2:new ut("mat4x2",y.keyword,"mat4x2"),mat4x3:new ut("mat4x3",y.keyword,"mat4x3"),mat4x4:new ut("mat4x4",y.keyword,"mat4x4"),ptr:new ut("ptr",y.keyword,"ptr"),sampler:new ut("sampler",y.keyword,"sampler"),sampler_comparison:new ut("sampler_comparison",y.keyword,"sampler_comparison"),struct:new ut("struct",y.keyword,"struct"),texture_1d:new ut("texture_1d",y.keyword,"texture_1d"),texture_2d:new ut("texture_2d",y.keyword,"texture_2d"),texture_2d_array:new ut("texture_2d_array",y.keyword,"texture_2d_array"),texture_3d:new ut("texture_3d",y.keyword,"texture_3d"),texture_cube:new ut("texture_cube",y.keyword,"texture_cube"),texture_cube_array:new ut("texture_cube_array",y.keyword,"texture_cube_array"),texture_multisampled_2d:new ut("texture_multisampled_2d",y.keyword,"texture_multisampled_2d"),texture_storage_1d:new ut("texture_storage_1d",y.keyword,"texture_storage_1d"),texture_storage_2d:new ut("texture_storage_2d",y.keyword,"texture_storage_2d"),texture_storage_2d_array:new ut("texture_storage_2d_array",y.keyword,"texture_storage_2d_array"),texture_storage_3d:new ut("texture_storage_3d",y.keyword,"texture_storage_3d"),texture_depth_2d:new ut("texture_depth_2d",y.keyword,"texture_depth_2d"),texture_depth_2d_array:new ut("texture_depth_2d_array",y.keyword,"texture_depth_2d_array"),texture_depth_cube:new ut("texture_depth_cube",y.keyword,"texture_depth_cube"),texture_depth_cube_array:new ut("texture_depth_cube_array",y.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new ut("texture_depth_multisampled_2d",y.keyword,"texture_depth_multisampled_2d"),texture_external:new ut("texture_external",y.keyword,"texture_external"),u32:new ut("u32",y.keyword,"u32"),vec2:new ut("vec2",y.keyword,"vec2"),vec3:new ut("vec3",y.keyword,"vec3"),vec4:new ut("vec4",y.keyword,"vec4"),bitcast:new ut("bitcast",y.keyword,"bitcast"),block:new ut("block",y.keyword,"block"),break:new ut("break",y.keyword,"break"),case:new ut("case",y.keyword,"case"),continue:new ut("continue",y.keyword,"continue"),continuing:new ut("continuing",y.keyword,"continuing"),default:new ut("default",y.keyword,"default"),diagnostic:new ut("diagnostic",y.keyword,"diagnostic"),discard:new ut("discard",y.keyword,"discard"),else:new ut("else",y.keyword,"else"),enable:new ut("enable",y.keyword,"enable"),fallthrough:new ut("fallthrough",y.keyword,"fallthrough"),false:new ut("false",y.keyword,"false"),fn:new ut("fn",y.keyword,"fn"),for:new ut("for",y.keyword,"for"),function:new ut("function",y.keyword,"function"),if:new ut("if",y.keyword,"if"),let:new ut("let",y.keyword,"let"),const:new ut("const",y.keyword,"const"),loop:new ut("loop",y.keyword,"loop"),while:new ut("while",y.keyword,"while"),private:new ut("private",y.keyword,"private"),read:new ut("read",y.keyword,"read"),read_write:new ut("read_write",y.keyword,"read_write"),return:new ut("return",y.keyword,"return"),requires:new ut("requires",y.keyword,"requires"),storage:new ut("storage",y.keyword,"storage"),switch:new ut("switch",y.keyword,"switch"),true:new ut("true",y.keyword,"true"),alias:new ut("alias",y.keyword,"alias"),type:new ut("type",y.keyword,"type"),uniform:new ut("uniform",y.keyword,"uniform"),var:new ut("var",y.keyword,"var"),override:new ut("override",y.keyword,"override"),workgroup:new ut("workgroup",y.keyword,"workgroup"),write:new ut("write",y.keyword,"write"),r8unorm:new ut("r8unorm",y.keyword,"r8unorm"),r8snorm:new ut("r8snorm",y.keyword,"r8snorm"),r8uint:new ut("r8uint",y.keyword,"r8uint"),r8sint:new ut("r8sint",y.keyword,"r8sint"),r16uint:new ut("r16uint",y.keyword,"r16uint"),r16sint:new ut("r16sint",y.keyword,"r16sint"),r16float:new ut("r16float",y.keyword,"r16float"),rg8unorm:new ut("rg8unorm",y.keyword,"rg8unorm"),rg8snorm:new ut("rg8snorm",y.keyword,"rg8snorm"),rg8uint:new ut("rg8uint",y.keyword,"rg8uint"),rg8sint:new ut("rg8sint",y.keyword,"rg8sint"),r32uint:new ut("r32uint",y.keyword,"r32uint"),r32sint:new ut("r32sint",y.keyword,"r32sint"),r32float:new ut("r32float",y.keyword,"r32float"),rg16uint:new ut("rg16uint",y.keyword,"rg16uint"),rg16sint:new ut("rg16sint",y.keyword,"rg16sint"),rg16float:new ut("rg16float",y.keyword,"rg16float"),rgba8unorm:new ut("rgba8unorm",y.keyword,"rgba8unorm"),rgba8unorm_srgb:new ut("rgba8unorm_srgb",y.keyword,"rgba8unorm_srgb"),rgba8snorm:new ut("rgba8snorm",y.keyword,"rgba8snorm"),rgba8uint:new ut("rgba8uint",y.keyword,"rgba8uint"),rgba8sint:new ut("rgba8sint",y.keyword,"rgba8sint"),bgra8unorm:new ut("bgra8unorm",y.keyword,"bgra8unorm"),bgra8unorm_srgb:new ut("bgra8unorm_srgb",y.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new ut("rgb10a2unorm",y.keyword,"rgb10a2unorm"),rg11b10float:new ut("rg11b10float",y.keyword,"rg11b10float"),rg32uint:new ut("rg32uint",y.keyword,"rg32uint"),rg32sint:new ut("rg32sint",y.keyword,"rg32sint"),rg32float:new ut("rg32float",y.keyword,"rg32float"),rgba16uint:new ut("rgba16uint",y.keyword,"rgba16uint"),rgba16sint:new ut("rgba16sint",y.keyword,"rgba16sint"),rgba16float:new ut("rgba16float",y.keyword,"rgba16float"),rgba32uint:new ut("rgba32uint",y.keyword,"rgba32uint"),rgba32sint:new ut("rgba32sint",y.keyword,"rgba32sint"),rgba32float:new ut("rgba32float",y.keyword,"rgba32float"),static_assert:new ut("static_assert",y.keyword,"static_assert")},ht.tokens={decimal_float_literal:new ut("decimal_float_literal",y.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new ut("hex_float_literal",y.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new ut("int_literal",y.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new ut("uint_literal",y.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new ut("ident",y.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new ut("and",y.token,"&"),and_and:new ut("and_and",y.token,"&&"),arrow:new ut("arrow ",y.token,"->"),attr:new ut("attr",y.token,"@"),forward_slash:new ut("forward_slash",y.token,"/"),bang:new ut("bang",y.token,"!"),bracket_left:new ut("bracket_left",y.token,"["),bracket_right:new ut("bracket_right",y.token,"]"),brace_left:new ut("brace_left",y.token,"{"),brace_right:new ut("brace_right",y.token,"}"),colon:new ut("colon",y.token,":"),comma:new ut("comma",y.token,","),equal:new ut("equal",y.token,"="),equal_equal:new ut("equal_equal",y.token,"=="),not_equal:new ut("not_equal",y.token,"!="),greater_than:new ut("greater_than",y.token,">"),greater_than_equal:new ut("greater_than_equal",y.token,">="),shift_right:new ut("shift_right",y.token,">>"),less_than:new ut("less_than",y.token,"<"),less_than_equal:new ut("less_than_equal",y.token,"<="),shift_left:new ut("shift_left",y.token,"<<"),modulo:new ut("modulo",y.token,"%"),minus:new ut("minus",y.token,"-"),minus_minus:new ut("minus_minus",y.token,"--"),period:new ut("period",y.token,"."),plus:new ut("plus",y.token,"+"),plus_plus:new ut("plus_plus",y.token,"++"),or:new ut("or",y.token,"|"),or_or:new ut("or_or",y.token,"||"),paren_left:new ut("paren_left",y.token,"("),paren_right:new ut("paren_right",y.token,")"),semicolon:new ut("semicolon",y.token,";"),star:new ut("star",y.token,"*"),tilde:new ut("tilde",y.token,"~"),underscore:new ut("underscore",y.token,"_"),xor:new ut("xor",y.token,"^"),plus_equal:new ut("plus_equal",y.token,"+="),minus_equal:new ut("minus_equal",y.token,"-="),times_equal:new ut("times_equal",y.token,"*="),division_equal:new ut("division_equal",y.token,"/="),modulo_equal:new ut("modulo_equal",y.token,"%="),and_equal:new ut("and_equal",y.token,"&="),or_equal:new ut("or_equal",y.token,"|="),xor_equal:new ut("xor_equal",y.token,"^="),shift_right_equal:new ut("shift_right_equal",y.token,">>="),shift_left_equal:new ut("shift_left_equal",y.token,"<<=")},ht.simpleTokens={"@":_.tokens.attr,"{":_.tokens.brace_left,"}":_.tokens.brace_right,":":_.tokens.colon,",":_.tokens.comma,"(":_.tokens.paren_left,")":_.tokens.paren_right,";":_.tokens.semicolon},ht.literalTokens={"&":_.tokens.and,"&&":_.tokens.and_and,"->":_.tokens.arrow,"/":_.tokens.forward_slash,"!":_.tokens.bang,"[":_.tokens.bracket_left,"]":_.tokens.bracket_right,"=":_.tokens.equal,"==":_.tokens.equal_equal,"!=":_.tokens.not_equal,">":_.tokens.greater_than,">=":_.tokens.greater_than_equal,">>":_.tokens.shift_right,"<":_.tokens.less_than,"<=":_.tokens.less_than_equal,"<<":_.tokens.shift_left,"%":_.tokens.modulo,"-":_.tokens.minus,"--":_.tokens.minus_minus,".":_.tokens.period,"+":_.tokens.plus,"++":_.tokens.plus_plus,"|":_.tokens.or,"||":_.tokens.or_or,"*":_.tokens.star,"~":_.tokens.tilde,_:_.tokens.underscore,"^":_.tokens.xor,"+=":_.tokens.plus_equal,"-=":_.tokens.minus_equal,"*=":_.tokens.times_equal,"/=":_.tokens.division_equal,"%=":_.tokens.modulo_equal,"&=":_.tokens.and_equal,"|=":_.tokens.or_equal,"^=":_.tokens.xor_equal,">>=":_.tokens.shift_right_equal,"<<=":_.tokens.shift_left_equal},ht.regexTokens={decimal_float_literal:_.tokens.decimal_float_literal,hex_float_literal:_.tokens.hex_float_literal,int_literal:_.tokens.int_literal,uint_literal:_.tokens.uint_literal,ident:_.tokens.ident},ht.storage_class=[_.keywords.function,_.keywords.private,_.keywords.workgroup,_.keywords.uniform,_.keywords.storage],ht.access_mode=[_.keywords.read,_.keywords.write,_.keywords.read_write],ht.sampler_type=[_.keywords.sampler,_.keywords.sampler_comparison],ht.sampled_texture_type=[_.keywords.texture_1d,_.keywords.texture_2d,_.keywords.texture_2d_array,_.keywords.texture_3d,_.keywords.texture_cube,_.keywords.texture_cube_array],ht.multisampled_texture_type=[_.keywords.texture_multisampled_2d],ht.storage_texture_type=[_.keywords.texture_storage_1d,_.keywords.texture_storage_2d,_.keywords.texture_storage_2d_array,_.keywords.texture_storage_3d],ht.depth_texture_type=[_.keywords.texture_depth_2d,_.keywords.texture_depth_2d_array,_.keywords.texture_depth_cube,_.keywords.texture_depth_cube_array,_.keywords.texture_depth_multisampled_2d],ht.texture_external_type=[_.keywords.texture_external],ht.any_texture_type=[..._.sampled_texture_type,..._.multisampled_texture_type,..._.storage_texture_type,..._.depth_texture_type,..._.texture_external_type],ht.texel_format=[_.keywords.r8unorm,_.keywords.r8snorm,_.keywords.r8uint,_.keywords.r8sint,_.keywords.r16uint,_.keywords.r16sint,_.keywords.r16float,_.keywords.rg8unorm,_.keywords.rg8snorm,_.keywords.rg8uint,_.keywords.rg8sint,_.keywords.r32uint,_.keywords.r32sint,_.keywords.r32float,_.keywords.rg16uint,_.keywords.rg16sint,_.keywords.rg16float,_.keywords.rgba8unorm,_.keywords.rgba8unorm_srgb,_.keywords.rgba8snorm,_.keywords.rgba8uint,_.keywords.rgba8sint,_.keywords.bgra8unorm,_.keywords.bgra8unorm_srgb,_.keywords.rgb10a2unorm,_.keywords.rg11b10float,_.keywords.rg32uint,_.keywords.rg32sint,_.keywords.rg32float,_.keywords.rgba16uint,_.keywords.rgba16sint,_.keywords.rgba16float,_.keywords.rgba32uint,_.keywords.rgba32sint,_.keywords.rgba32float],ht.const_literal=[_.tokens.int_literal,_.tokens.uint_literal,_.tokens.decimal_float_literal,_.tokens.hex_float_literal,_.keywords.true,_.keywords.false],ht.literal_or_ident=[_.tokens.ident,_.tokens.int_literal,_.tokens.uint_literal,_.tokens.decimal_float_literal,_.tokens.hex_float_literal],ht.element_count_expression=[_.tokens.int_literal,_.tokens.uint_literal,_.tokens.ident],ht.template_types=[_.keywords.vec2,_.keywords.vec3,_.keywords.vec4,_.keywords.mat2x2,_.keywords.mat2x3,_.keywords.mat2x4,_.keywords.mat3x2,_.keywords.mat3x3,_.keywords.mat3x4,_.keywords.mat4x2,_.keywords.mat4x3,_.keywords.mat4x4,_.keywords.atomic,_.keywords.bitcast,..._.any_texture_type],ht.attribute_name=[_.tokens.ident,_.keywords.block,_.keywords.diagnostic],ht.assignment_operators=[_.tokens.equal,_.tokens.plus_equal,_.tokens.minus_equal,_.tokens.times_equal,_.tokens.division_equal,_.tokens.modulo_equal,_.tokens.and_equal,_.tokens.or_equal,_.tokens.xor_equal,_.tokens.shift_right_equal,_.tokens.shift_left_equal],ht.increment_operators=[_.tokens.plus_plus,_.tokens.minus_minus];class lt{constructor(t,e,r){this.type=t,this.lexeme=e,this.line=r}toString(){return this.lexeme}isTemplateType(){return-1!=ht.template_types.indexOf(this.type)}isArrayType(){return this.type==ht.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class ft{constructor(t){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=null!=t?t:""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new lt(ht.eof,"",this._line)),this._tokens}scanToken(){let t=this._advance();if("\n"==t)return this._line++,!0;if(this._isWhitespace(t))return!0;if("/"==t){if("/"==this._peekAhead()){for(;"\n"!=t;){if(this._isAtEnd())return!0;t=this._advance()}return this._line++,!0}if("*"==this._peekAhead()){this._advance();let e=1;for(;e>0;){if(this._isAtEnd())return!0;if(t=this._advance(),"\n"==t)this._line++;else if("*"==t){if("/"==this._peekAhead()&&(this._advance(),e--,0==e))return!0}else"/"==t&&"*"==this._peekAhead()&&(this._advance(),e++)}return!0}}const e=ht.simpleTokens[t];if(e)return this._addToken(e),!0;let r=ht.none;const s=this._isAlpha(t),n="_"===t;if(this._isAlphaNumeric(t)){let e=this._peekAhead();for(;this._isAlphaNumeric(e);)t+=this._advance(),e=this._peekAhead()}if(s){const e=ht.keywords[t];if(e)return this._addToken(e),!0}if(s||n)return this._addToken(ht.tokens.ident),!0;for(;;){let e=this._findType(t);const s=this._peekAhead();if(">"==t&&(">"==s||"="==s)){let t=!1,r=this._tokens.length-1;for(let e=0;e<5&&r>=0;++e,--r)if(this._tokens[r].type===ht.tokens.less_than){r>0&&this._tokens[r-1].isArrayOrTemplateType()&&(t=!0);break}if(t)return this._addToken(e),!0}if(e===ht.none){let s=t,n=0;const i=2;for(let t=0;t<i;++t)if(s+=this._peekAhead(t),e=this._findType(s),e!==ht.none){n=t;break}if(e===ht.none)return r!==ht.none&&(this._current--,this._addToken(r),!0);t=s,this._current+=n+1}if(r=e,this._isAtEnd())break;t+=this._advance()}return r!==ht.none&&(this._addToken(r),!0)}_findType(t){for(const r in ht.regexTokens){const e=ht.regexTokens[r];if(this._match(t,e.rule))return e}const e=ht.literalTokens[t];return e||ht.none}_match(t,e){const r=e.exec(t);return r&&0==r.index&&r[0]==t}_isAtEnd(){return this._current>=this._source.length}_isAlpha(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}_isAlphaNumeric(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"_"==t||t>="0"&&t<="9"}_isWhitespace(t){return" "==t||"\t"==t||"\r"==t}_advance(t=0){let e=this._source[this._current];return t=t||0,t++,this._current+=t,e}_peekAhead(t=0){return t=t||0,this._current+t>=this._source.length?"\0":this._source[this._current+t]}_addToken(t){const e=this._source.substring(this._start,this._current);this._tokens.push(new lt(t,e,this._line))}}class dt{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new s,this._deferArrayCountEval=[]}parse(t){this._initialize(t),this._deferArrayCountEval.length=0;const e=[];for(;!this._isAtEnd();){const t=this._global_decl_or_directive();if(!t)break;e.push(t)}if(this._deferArrayCountEval.length>0){for(const t of this._deferArrayCountEval){const e=t.arrayType,s=t.countNode;if(s instanceof W){const t=s.name,n=this._context.constants.get(t);if(n)try{const t=n.evaluate(this._context);e.count=t}catch(r){}}}this._deferArrayCountEval.length=0}return e}_initialize(t){if(t)if("string"==typeof t){const e=new ft(t);this._tokens=e.scanTokens()}else this._tokens=t;else this._tokens=[];this._current=0}_error(t,e){return{token:t,message:e,toString:function(){return`${e}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==ht.eof}_match(t){if(t instanceof ut)return!!this._check(t)&&(this._advance(),!0);for(let e=0,r=t.length;e<r;++e){const r=t[e];if(this._check(r))return this._advance(),!0}return!1}_consume(t,e){if(this._check(t))return this._advance();throw this._error(this._peek(),e)}_check(t){if(this._isAtEnd())return!1;const e=this._peek();if(t instanceof Array){const r=e.type;return-1!=t.indexOf(r)}return e.type==t}_advance(){var t,e;return this._currentLine=null!==(e=null===(t=this._peek())||void 0===t?void 0:t.line)&&void 0!==e?e:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(ht.tokens.semicolon)&&!this._isAtEnd(););if(this._match(ht.keywords.alias)){const t=this._type_alias();return this._consume(ht.tokens.semicolon,"Expected ';'"),t}if(this._match(ht.keywords.diagnostic)){const t=this._diagnostic();return this._consume(ht.tokens.semicolon,"Expected ';'"),t}if(this._match(ht.keywords.requires)){const t=this._requires_directive();return this._consume(ht.tokens.semicolon,"Expected ';'"),t}if(this._match(ht.keywords.enable)){const t=this._enable_directive();return this._consume(ht.tokens.semicolon,"Expected ';'"),t}const t=this._attribute();if(this._check(ht.keywords.var)){const e=this._global_variable_decl();return null!=e&&(e.attributes=t),this._consume(ht.tokens.semicolon,"Expected ';'."),e}if(this._check(ht.keywords.override)){const e=this._override_variable_decl();return null!=e&&(e.attributes=t),this._consume(ht.tokens.semicolon,"Expected ';'."),e}if(this._check(ht.keywords.let)){const e=this._global_let_decl();return null!=e&&(e.attributes=t),this._consume(ht.tokens.semicolon,"Expected ';'."),e}if(this._check(ht.keywords.const)){const e=this._global_const_decl();return null!=e&&(e.attributes=t),this._consume(ht.tokens.semicolon,"Expected ';'."),e}if(this._check(ht.keywords.struct)){const e=this._struct_decl();return null!=e&&(e.attributes=t),e}if(this._check(ht.keywords.fn)){const e=this._function_decl();return null!=e&&(e.attributes=t),e}return null}_function_decl(){if(!this._match(ht.keywords.fn))return null;const t=this._currentLine,e=this._consume(ht.tokens.ident,"Expected function name.").toString();this._consume(ht.tokens.paren_left,"Expected '(' for function arguments.");const r=[];if(!this._check(ht.tokens.paren_right))do{if(this._check(ht.tokens.paren_right))break;const t=this._attribute(),e=this._consume(ht.tokens.ident,"Expected argument name.").toString();this._consume(ht.tokens.colon,"Expected ':' for argument type.");const s=this._attribute(),n=this._type_decl();null!=n&&(n.attributes=s,r.push(new it(e,n,t)))}while(this._match(ht.tokens.comma));this._consume(ht.tokens.paren_right,"Expected ')' after function arguments.");let s=null;if(this._match(ht.tokens.arrow)){const t=this._attribute();s=this._type_decl(),null!=s&&(s.attributes=t)}const n=this._compound_statement(),i=this._currentLine;return new c(e,r,s,n,t,i)}_compound_statement(){const t=[];for(this._consume(ht.tokens.brace_left,"Expected '{' for block.");!this._check(ht.tokens.brace_right);){const e=this._statement();null!==e&&t.push(e)}return this._consume(ht.tokens.brace_right,"Expected '}' for block."),t}_statement(){for(;this._match(ht.tokens.semicolon)&&!this._isAtEnd(););if(this._check(ht.tokens.attr)&&this._attribute(),this._check(ht.keywords.if))return this._if_statement();if(this._check(ht.keywords.switch))return this._switch_statement();if(this._check(ht.keywords.loop))return this._loop_statement();if(this._check(ht.keywords.for))return this._for_statement();if(this._check(ht.keywords.while))return this._while_statement();if(this._check(ht.keywords.continuing))return this._continuing_statement();if(this._check(ht.keywords.static_assert))return this._static_assert_statement();if(this._check(ht.tokens.brace_left))return this._compound_statement();let t=null;return t=this._check(ht.keywords.return)?this._return_statement():this._check([ht.keywords.var,ht.keywords.let,ht.keywords.const])?this._variable_statement():this._match(ht.keywords.discard)?new G:this._match(ht.keywords.break)?new R:this._match(ht.keywords.continue)?new D:this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),null!=t&&this._consume(ht.tokens.semicolon,"Expected ';' after statement."),t}_static_assert_statement(){if(!this._match(ht.keywords.static_assert))return null;const t=this._optional_paren_expression();return new u(t)}_while_statement(){if(!this._match(ht.keywords.while))return null;const t=this._optional_paren_expression();this._check(ht.tokens.attr)&&this._attribute();const e=this._compound_statement();return new h(t,e)}_continuing_statement(){if(!this._match(ht.keywords.continuing))return null;const t=this._compound_statement();return new l(t)}_for_statement(){if(!this._match(ht.keywords.for))return null;this._consume(ht.tokens.paren_left,"Expected '('.");const t=this._check(ht.tokens.semicolon)?null:this._for_init();this._consume(ht.tokens.semicolon,"Expected ';'.");const e=this._check(ht.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(ht.tokens.semicolon,"Expected ';'.");const r=this._check(ht.tokens.paren_right)?null:this._for_increment();this._consume(ht.tokens.paren_right,"Expected ')'."),this._check(ht.tokens.attr)&&this._attribute();const s=this._compound_statement();return new f(t,e,r,s)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(ht.keywords.var)){const t=this._variable_decl();if(null===t)throw this._error(this._peek(),"Variable declaration expected.");let e=null;return this._match(ht.tokens.equal)&&(e=this._short_circuit_or_expression()),new d(t.name,t.type,t.storage,t.access,e)}if(this._match(ht.keywords.let)){const t=this._consume(ht.tokens.ident,"Expected name for let.").toString();let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}this._consume(ht.tokens.equal,"Expected '=' for let.");const r=this._short_circuit_or_expression();return new m(t,e,null,null,r)}if(this._match(ht.keywords.const)){const t=this._consume(ht.tokens.ident,"Expected name for const.").toString();let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}this._consume(ht.tokens.equal,"Expected '=' for const.");const r=this._short_circuit_or_expression();return new g(t,e,null,null,r)}return null}_increment_decrement_statement(){const t=this._current,e=this._unary_expression();if(null==e)return null;if(!this._check(ht.increment_operators))return this._current=t,null;const r=this._consume(ht.increment_operators,"Expected increment operator");return new C(r.type===ht.tokens.plus_plus?p.increment:p.decrement,e)}_assignment_statement(){let t=null;if(this._check(ht.tokens.brace_right))return null;let e=this._match(ht.tokens.underscore);if(e||(t=this._unary_expression()),!e&&null==t)return null;const r=this._consume(ht.assignment_operators,"Expected assignment operator."),s=this._short_circuit_or_expression();return new w(B.parse(r.lexeme),t,s)}_func_call_statement(){if(!this._check(ht.tokens.ident))return null;const t=this._current,e=this._consume(ht.tokens.ident,"Expected function name."),r=this._argument_expression_list();return null===r?(this._current=t,null):new E(e.lexeme,r)}_loop_statement(){if(!this._match(ht.keywords.loop))return null;this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Expected '{' for loop.");const t=[];let e=this._statement();for(;null!==e;){if(Array.isArray(e))for(let r of e)t.push(r);else t.push(e);e=this._statement()}let r=null;return this._match(ht.keywords.continuing)&&(r=this._compound_statement()),this._consume(ht.tokens.brace_right,"Expected '}' for loop."),new k(t,r)}_switch_statement(){if(!this._match(ht.keywords.switch))return null;const t=this._optional_paren_expression();this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Expected '{' for switch.");const e=this._switch_body();if(null==e||0==e.length)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(ht.tokens.brace_right,"Expected '}' for switch."),new M(t,e)}_switch_body(){const t=[];if(this._match(ht.keywords.case)){const e=this._case_selectors();this._match(ht.tokens.colon),this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Exected '{' for switch case.");const r=this._case_body();this._consume(ht.tokens.brace_right,"Exected '}' for switch case."),t.push(new st(e,r))}if(this._match(ht.keywords.default)){this._match(ht.tokens.colon),this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Exected '{' for switch default.");const e=this._case_body();this._consume(ht.tokens.brace_right,"Exected '}' for switch default."),t.push(new nt(e))}if(this._check([ht.keywords.default,ht.keywords.case])){const e=this._switch_body();t.push(e[0])}return t}_case_selectors(){const t=[this._shift_expression()];for(;this._match(ht.tokens.comma);)t.push(this._shift_expression());return t}_case_body(){if(this._match(ht.keywords.fallthrough))return this._consume(ht.tokens.semicolon,"Expected ';'"),[];let t=this._statement();if(null==t)return[];t instanceof Array||(t=[t]);const e=this._case_body();return 0==e.length?t:[...t,e[0]]}_if_statement(){if(!this._match(ht.keywords.if))return null;const t=this._optional_paren_expression();this._check(ht.tokens.attr)&&this._attribute();const e=this._compound_statement();let r=[];this._match_elseif()&&(this._check(ht.tokens.attr)&&this._attribute(),r=this._elseif_statement(r));let s=null;return this._match(ht.keywords.else)&&(this._check(ht.tokens.attr)&&this._attribute(),s=this._compound_statement()),new x(t,e,r,s)}_match_elseif(){return this._tokens[this._current].type===ht.keywords.else&&this._tokens[this._current+1].type===ht.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(t=[]){const e=this._optional_paren_expression(),r=this._compound_statement();return t.push(new ot(e,r)),this._match_elseif()&&(this._check(ht.tokens.attr)&&this._attribute(),this._elseif_statement(t)),t}_return_statement(){if(!this._match(ht.keywords.return))return null;const t=this._short_circuit_or_expression();return new T(t)}_short_circuit_or_expression(){let t=this._short_circuit_and_expr();for(;this._match(ht.tokens.or_or);)t=new et(this._previous().toString(),t,this._short_circuit_and_expr());return t}_short_circuit_and_expr(){let t=this._inclusive_or_expression();for(;this._match(ht.tokens.and_and);)t=new et(this._previous().toString(),t,this._inclusive_or_expression());return t}_inclusive_or_expression(){let t=this._exclusive_or_expression();for(;this._match(ht.tokens.or);)t=new et(this._previous().toString(),t,this._exclusive_or_expression());return t}_exclusive_or_expression(){let t=this._and_expression();for(;this._match(ht.tokens.xor);)t=new et(this._previous().toString(),t,this._and_expression());return t}_and_expression(){let t=this._equality_expression();for(;this._match(ht.tokens.and);)t=new et(this._previous().toString(),t,this._equality_expression());return t}_equality_expression(){const t=this._relational_expression();return this._match([ht.tokens.equal_equal,ht.tokens.not_equal])?new et(this._previous().toString(),t,this._relational_expression()):t}_relational_expression(){let t=this._shift_expression();for(;this._match([ht.tokens.less_than,ht.tokens.greater_than,ht.tokens.less_than_equal,ht.tokens.greater_than_equal]);)t=new et(this._previous().toString(),t,this._shift_expression());return t}_shift_expression(){let t=this._additive_expression();for(;this._match([ht.tokens.shift_left,ht.tokens.shift_right]);)t=new et(this._previous().toString(),t,this._additive_expression());return t}_additive_expression(){let t=this._multiplicative_expression();for(;this._match([ht.tokens.plus,ht.tokens.minus]);)t=new et(this._previous().toString(),t,this._multiplicative_expression());return t}_multiplicative_expression(){let t=this._unary_expression();for(;this._match([ht.tokens.star,ht.tokens.forward_slash,ht.tokens.modulo]);)t=new et(this._previous().toString(),t,this._unary_expression());return t}_unary_expression(){return this._match([ht.tokens.minus,ht.tokens.bang,ht.tokens.tilde,ht.tokens.star,ht.tokens.and])?new tt(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const t=this._primary_expression(),e=this._postfix_expression();return e&&(t.postfix=e),t}_postfix_expression(){if(this._match(ht.tokens.bracket_left)){const t=this._short_circuit_or_expression();this._consume(ht.tokens.bracket_right,"Expected ']'.");const e=new z(t),r=this._postfix_expression();return r&&(e.postfix=r),e}if(this._match(ht.tokens.period)){const t=this._consume(ht.tokens.ident,"Expected member name."),e=this._postfix_expression(),r=new P(t.lexeme);return e&&(r.postfix=e),r}return null}_getStruct(t){if(this._context.aliases.has(t)){return this._context.aliases.get(t).type}if(this._context.structs.has(t)){return this._context.structs.get(t)}return null}_primary_expression(){if(this._match(ht.tokens.ident)){const t=this._previous().toString();if(this._check(ht.tokens.paren_left)){const e=this._argument_expression_list(),r=this._getStruct(t);return null!=r?new K(r,e):new Q(t,e)}if(this._context.constants.has(t)){const e=this._context.constants.get(t);return new X(t,e.value)}return new W(t)}if(this._match(ht.const_literal))return new q(parseFloat(this._previous().toString()));if(this._check(ht.tokens.paren_left))return this._paren_expression();if(this._match(ht.keywords.bitcast)){this._consume(ht.tokens.less_than,"Expected '<'.");const t=this._type_decl();this._consume(ht.tokens.greater_than,"Expected '>'.");const e=this._paren_expression();return new V(t,e)}const t=this._type_decl(),e=this._argument_expression_list();return new Y(t,e)}_argument_expression_list(){if(!this._match(ht.tokens.paren_left))return null;const t=[];do{if(this._check(ht.tokens.paren_right))break;const e=this._short_circuit_or_expression();t.push(e)}while(this._match(ht.tokens.comma));return this._consume(ht.tokens.paren_right,"Expected ')' for agument list"),t}_optional_paren_expression(){this._match(ht.tokens.paren_left);const t=this._short_circuit_or_expression();return this._match(ht.tokens.paren_right),new Z([t])}_paren_expression(){this._consume(ht.tokens.paren_left,"Expected '('.");const t=this._short_circuit_or_expression();return this._consume(ht.tokens.paren_right,"Expected ')'."),new Z([t])}_struct_decl(){if(!this._match(ht.keywords.struct))return null;const t=this._currentLine,e=this._consume(ht.tokens.ident,"Expected name for struct.").toString();this._consume(ht.tokens.brace_left,"Expected '{' for struct body.");const r=[];for(;!this._check(ht.tokens.brace_right);){const t=this._attribute(),e=this._consume(ht.tokens.ident,"Expected variable name.").toString();this._consume(ht.tokens.colon,"Expected ':' for struct member type.");const s=this._attribute(),n=this._type_decl();null!=n&&(n.attributes=s),this._check(ht.tokens.brace_right)?this._match(ht.tokens.comma):this._consume(ht.tokens.comma,"Expected ',' for struct member."),r.push(new at(e,n,t))}this._consume(ht.tokens.brace_right,"Expected '}' after struct body.");const s=this._currentLine,n=new L(e,r,t,s);return this._context.structs.set(e,n),n}_global_variable_decl(){const t=this._variable_decl();return t&&this._match(ht.tokens.equal)&&(t.value=this._const_expression()),t}_override_variable_decl(){const t=this._override_decl();return t&&this._match(ht.tokens.equal)&&(t.value=this._const_expression()),t}_global_const_decl(){if(!this._match(ht.keywords.const))return null;const t=this._consume(ht.tokens.ident,"Expected variable name");let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}let r=null;if(this._match(ht.tokens.equal)){const t=this._short_circuit_or_expression();if(t instanceof K)r=t;else if(t instanceof X&&t.initializer instanceof K)r=t.initializer;else try{const e=t.evaluate(this._context);r=new q(e)}catch(_){r=t}}const s=new g(t.toString(),e,"","",r);return this._context.constants.set(s.name,s),s}_global_let_decl(){if(!this._match(ht.keywords.let))return null;const t=this._consume(ht.tokens.ident,"Expected variable name");let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}let r=null;return this._match(ht.tokens.equal)&&(r=this._const_expression()),new m(t.toString(),e,"","",r)}_const_expression(){if(this._match(ht.const_literal))return new P(this._previous().toString());const t=this._type_decl();this._consume(ht.tokens.paren_left,"Expected '('.");let e=[];for(;!this._check(ht.tokens.paren_right)&&(e.push(this._const_expression()),this._check(ht.tokens.comma));)this._advance();return this._consume(ht.tokens.paren_right,"Expected ')'."),new K(t,e)}_variable_decl(){if(!this._match(ht.keywords.var))return null;let t="",e="";this._match(ht.tokens.less_than)&&(t=this._consume(ht.storage_class,"Expected storage_class.").toString(),this._match(ht.tokens.comma)&&(e=this._consume(ht.access_mode,"Expected access_mode.").toString()),this._consume(ht.tokens.greater_than,"Expected '>'."));const r=this._consume(ht.tokens.ident,"Expected variable name");let s=null;if(this._match(ht.tokens.colon)){const t=this._attribute();s=this._type_decl(),null!=s&&(s.attributes=t)}return new d(r.toString(),s,t,e,null)}_override_decl(){if(!this._match(ht.keywords.override))return null;const t=this._consume(ht.tokens.ident,"Expected variable name");let e=null;if(this._match(ht.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}return new A(t.toString(),e,null)}_diagnostic(){this._consume(ht.tokens.paren_left,"Expected '('");const t=this._consume(ht.tokens.ident,"Expected severity control name.");this._consume(ht.tokens.comma,"Expected ','");const e=this._consume(ht.tokens.ident,"Expected diagnostic rule name.");return this._consume(ht.tokens.paren_right,"Expected ')'"),new F(t.toString(),e.toString())}_enable_directive(){const t=this._consume(ht.tokens.ident,"identity expected.");return new I(t.toString())}_requires_directive(){const t=[this._consume(ht.tokens.ident,"identity expected.").toString()];for(;this._match(ht.tokens.comma);){const e=this._consume(ht.tokens.ident,"identity expected.");t.push(e.toString())}return new v(t)}_type_alias(){const t=this._consume(ht.tokens.ident,"identity expected.");this._consume(ht.tokens.equal,"Expected '=' for type alias.");let e=this._type_decl();if(null===e)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(e.name)&&(e=this._context.aliases.get(e.name).type);const r=new O(t.toString(),e);return this._context.aliases.set(r.name,r),r}_type_decl(){if(this._check([ht.tokens.ident,...ht.texel_format,ht.keywords.bool,ht.keywords.f32,ht.keywords.i32,ht.keywords.u32])){const t=this._advance(),e=t.toString();return this._context.structs.has(e)?this._context.structs.get(e):this._context.aliases.has(e)?this._context.aliases.get(e).type:new S(t.toString())}let t=this._texture_sampler_types();if(t)return t;if(this._check(ht.template_types)){let t=this._advance().toString(),e=null,r=null;return this._match(ht.tokens.less_than)&&(e=this._type_decl(),r=null,this._match(ht.tokens.comma)&&(r=this._consume(ht.access_mode,"Expected access_mode for pointer").toString()),this._consume(ht.tokens.greater_than,"Expected '>' for type.")),new N(t,e,r)}if(this._match(ht.keywords.ptr)){let t=this._previous().toString();this._consume(ht.tokens.less_than,"Expected '<' for pointer.");const e=this._consume(ht.storage_class,"Expected storage_class for pointer");this._consume(ht.tokens.comma,"Expected ',' for pointer.");const r=this._type_decl();let s=null;return this._match(ht.tokens.comma)&&(s=this._consume(ht.access_mode,"Expected access_mode for pointer").toString()),this._consume(ht.tokens.greater_than,"Expected '>' for pointer."),new J(t,e.toString(),r,s)}const e=this._attribute();if(this._match(ht.keywords.array)){let t=null,s=-1;const n=this._previous();let i=null;if(this._match(ht.tokens.less_than)){t=this._type_decl(),this._context.aliases.has(t.name)&&(t=this._context.aliases.get(t.name).type);let e="";if(this._match(ht.tokens.comma)){i=this._shift_expression();try{e=i.evaluate(this._context).toString(),i=null}catch(r){e="1"}}this._consume(ht.tokens.greater_than,"Expected '>' for array."),s=e?parseInt(e):0}const o=new U(n.toString(),e,t,s);return i&&this._deferArrayCountEval.push({arrayType:o,countNode:i}),o}return null}_texture_sampler_types(){if(this._match(ht.sampler_type))return new H(this._previous().toString(),null,null);if(this._match(ht.depth_texture_type))return new H(this._previous().toString(),null,null);if(this._match(ht.sampled_texture_type)||this._match(ht.multisampled_texture_type)){const t=this._previous();this._consume(ht.tokens.less_than,"Expected '<' for sampler type.");const e=this._type_decl();return this._consume(ht.tokens.greater_than,"Expected '>' for sampler type."),new H(t.toString(),e,null)}if(this._match(ht.storage_texture_type)){const t=this._previous();this._consume(ht.tokens.less_than,"Expected '<' for sampler type.");const e=this._consume(ht.texel_format,"Invalid texel format.").toString();this._consume(ht.tokens.comma,"Expected ',' after texel format.");const r=this._consume(ht.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(ht.tokens.greater_than,"Expected '>' for sampler type."),new H(t.toString(),e,r)}return null}_attribute(){let t=[];for(;this._match(ht.tokens.attr);){const e=this._consume(ht.attribute_name,"Expected attribute name"),r=new ct(e.toString(),null);if(this._match(ht.tokens.paren_left)){if(r.value=this._consume(ht.literal_or_ident,"Expected attribute value").toString(),this._check(ht.tokens.comma)){this._advance();do{const t=this._consume(ht.literal_or_ident,"Expected attribute value").toString();r.value instanceof Array||(r.value=[r.value]),r.value.push(t)}while(this._match(ht.tokens.comma))}this._consume(ht.tokens.paren_right,"Expected ')'")}t.push(r)}return 0==t.length?null:t}}class At{constructor(t,e){this.name=t,this.attributes=e,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class mt{constructor(t,e,r){this.name=t,this.type=e,this.attributes=r,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class gt extends At{constructor(t,e){super(t,e),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class pt extends At{constructor(t,e){super(t,e),this.count=0,this.stride=0}get isArray(){return!0}}class Bt extends At{constructor(t,e,r,s){super(t,r),this.format=e,this.access=s}get isTemplate(){return!0}}!function(t){t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"}(b||(b={}));class _t{constructor(t,e,r,s,n,i,o){this.name=t,this.type=e,this.group=r,this.binding=s,this.attributes=n,this.resourceType=i,this.access=o}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class yt{constructor(t,e){this.name=t,this.type=e}}class bt{constructor(t,e){this.align=t,this.size=e}}class Ct{constructor(t,e,r,s){this.name=t,this.type=e,this.locationType=r,this.location=s,this.interpolation=null}}class wt{constructor(t,e,r,s){this.name=t,this.type=e,this.locationType=r,this.location=s}}class Et{constructor(t,e=null){this.stage=null,this.inputs=[],this.outputs=[],this.resources=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=t,this.stage=e}}class kt{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class Mt{constructor(t,e,r,s){this.name=t,this.type=e,this.attributes=r,this.id=s}}class xt{constructor(t){this.resources=null,this.inUse=!1,this.info=null,this.node=t}}class Tt{constructor(t){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new kt,this.functions=[],this._types=new Map,this._functions=new Map,t&&this.update(t)}_isStorageTexture(t){return"texture_storage_1d"==t.name||"texture_storage_2d"==t.name||"texture_storage_2d_array"==t.name||"texture_storage_3d"==t.name}update(t){const e=(new dt).parse(t);for(const r of e)r instanceof c&&this._functions.set(r.name,new xt(r));for(const r of e)if(r instanceof L){const t=this._getTypeInfo(r,null);t instanceof gt&&this.structs.push(t)}for(const r of e)if(r instanceof O)this.aliases.push(this._getAliasInfo(r));else if(r instanceof A){const t=r,e=this._getAttributeNum(t.attributes,"id",0),s=null!=t.type?this._getTypeInfo(t.type,t.attributes):null;this.overrides.push(new Mt(t.name,s,t.attributes,e))}else if(this._isUniformVar(r)){const t=r,e=this._getAttributeNum(t.attributes,"group",0),s=this._getAttributeNum(t.attributes,"binding",0),n=this._getTypeInfo(t.type,t.attributes),i=new _t(t.name,n,e,s,t.attributes,b.Uniform,t.access);this.uniforms.push(i)}else if(this._isStorageVar(r)){const t=r,e=this._getAttributeNum(t.attributes,"group",0),s=this._getAttributeNum(t.attributes,"binding",0),n=this._getTypeInfo(t.type,t.attributes),i=this._isStorageTexture(n),o=new _t(t.name,n,e,s,t.attributes,i?b.StorageTexture:b.Storage,t.access);this.storage.push(o)}else if(this._isTextureVar(r)){const t=r,e=this._getAttributeNum(t.attributes,"group",0),s=this._getAttributeNum(t.attributes,"binding",0),n=this._getTypeInfo(t.type,t.attributes),i=this._isStorageTexture(n),o=new _t(t.name,n,e,s,t.attributes,i?b.StorageTexture:b.Texture,t.access);i?this.storage.push(o):this.textures.push(o)}else if(this._isSamplerVar(r)){const t=r,e=this._getAttributeNum(t.attributes,"group",0),s=this._getAttributeNum(t.attributes,"binding",0),n=this._getTypeInfo(t.type,t.attributes),i=new _t(t.name,n,e,s,t.attributes,b.Sampler,t.access);this.samplers.push(i)}else if(r instanceof c){const t=this._getAttribute(r,"vertex"),e=this._getAttribute(r,"fragment"),s=this._getAttribute(r,"compute"),n=t||e||s,i=new Et(r.name,null==n?void 0:n.name);i.startLine=r.startLine,i.endLine=r.endLine,this.functions.push(i),this._functions.get(r.name).info=i,n&&(this._functions.get(r.name).inUse=!0,i.inUse=!0,i.resources=this._findResources(r,!!n),i.inputs=this._getInputs(r.args),i.outputs=this._getOutputs(r.returnType),this.entry[n.name].push(i))}else;for(const r of this._functions.values())r.info&&(r.info.inUse=r.inUse,this._addCalls(r.node,r.info.calls));for(const r of this.uniforms)this._markStructsInUse(r.type);for(const r of this.storage)this._markStructsInUse(r.type)}_markStructsInUse(t){if(t.isStruct){t.inUse=!0;for(const e of t.members)this._markStructsInUse(e.type)}else if(t.isArray)this._markStructsInUse(t.format);else if(t.isTemplate)this._markStructsInUse(t.format);else{const e=this._getAlias(t.name);e&&this._markStructsInUse(e)}}_addCalls(t,e){var r;for(const s of t.calls){const t=null===(r=this._functions.get(s.name))||void 0===r?void 0:r.info;t&&e.add(t)}}findResource(t,e){for(const r of this.uniforms)if(r.group==t&&r.binding==e)return r;for(const r of this.storage)if(r.group==t&&r.binding==e)return r;for(const r of this.textures)if(r.group==t&&r.binding==e)return r;for(const r of this.samplers)if(r.group==t&&r.binding==e)return r;return null}_findResource(t){for(const e of this.uniforms)if(e.name==t)return e;for(const e of this.storage)if(e.name==t)return e;for(const e of this.textures)if(e.name==t)return e;for(const e of this.samplers)if(e.name==t)return e;return null}_markStructsFromAST(t){const e=this._getTypeInfo(t,null);this._markStructsInUse(e)}_findResources(t,e){const r=[],s=this,n=[];return t.search((a=>{if(a instanceof i)n.push({});else if(a instanceof o)n.pop();else if(a instanceof d){const t=a;e&&null!==t.type&&this._markStructsFromAST(t.type),n.length>0&&(n[n.length-1][t.name]=t)}else if(a instanceof K){const t=a;e&&null!==t.type&&this._markStructsFromAST(t.type)}else if(a instanceof m){const t=a;e&&null!==t.type&&this._markStructsFromAST(t.type),n.length>0&&(n[n.length-1][t.name]=t)}else if(a instanceof W){const t=a;if(n.length>0){if(n[n.length-1][t.name])return}const e=s._findResource(t.name);e&&r.push(e)}else if(a instanceof Q){const n=a,i=s._functions.get(n.name);i&&(e&&(i.inUse=!0),t.calls.add(i.node),null===i.resources&&(i.resources=s._findResources(i.node,e)),r.push(...i.resources))}else if(a instanceof E){const n=a,i=s._functions.get(n.name);i&&(e&&(i.inUse=!0),t.calls.add(i.node),null===i.resources&&(i.resources=s._findResources(i.node,e)),r.push(...i.resources))}})),[...new Map(r.map((t=>[t.name,t]))).values()]}getBindGroups(){const t=[];function e(e,r){e>=t.length&&(t.length=e+1),void 0===t[e]&&(t[e]=[]),r>=t[e].length&&(t[e].length=r+1)}for(const r of this.uniforms){e(r.group,r.binding);t[r.group][r.binding]=r}for(const r of this.storage){e(r.group,r.binding);t[r.group][r.binding]=r}for(const r of this.textures){e(r.group,r.binding);t[r.group][r.binding]=r}for(const r of this.samplers){e(r.group,r.binding);t[r.group][r.binding]=r}return t}_getOutputs(t,e=void 0){if(void 0===e&&(e=[]),t instanceof L)this._getStructOutputs(t,e);else{const r=this._getOutputInfo(t);null!==r&&e.push(r)}return e}_getStructOutputs(t,e){for(const r of t.members)if(r.type instanceof L)this._getStructOutputs(r.type,e);else{const t=this._getAttribute(r,"location")||this._getAttribute(r,"builtin");if(null!==t){const s=this._getTypeInfo(r.type,r.type.attributes),n=this._parseInt(t.value),i=new wt(r.name,s,t.name,n);e.push(i)}}}_getOutputInfo(t){const e=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(null!==e){const r=this._getTypeInfo(t,t.attributes),s=this._parseInt(e.value);return new wt("",r,e.name,s)}return null}_getInputs(t,e=void 0){void 0===e&&(e=[]);for(const r of t)if(r.type instanceof L)this._getStructInputs(r.type,e);else{const t=this._getInputInfo(r);null!==t&&e.push(t)}return e}_getStructInputs(t,e){for(const r of t.members)if(r.type instanceof L)this._getStructInputs(r.type,e);else{const t=this._getInputInfo(r);null!==t&&e.push(t)}}_getInputInfo(t){const e=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(null!==e){const r=this._getAttribute(t,"interpolation"),s=this._getTypeInfo(t.type,t.attributes),n=this._parseInt(e.value),i=new Ct(t.name,s,e.name,n);return null!==r&&(i.interpolation=this._parseString(r.value)),i}return null}_parseString(t){return t instanceof Array&&(t=t[0]),t}_parseInt(t){t instanceof Array&&(t=t[0]);const e=parseInt(t);return isNaN(e)?t:e}_getAlias(t){for(const e of this.aliases)if(e.name==t)return e.type;return null}_getAliasInfo(t){return new yt(t.name,this._getTypeInfo(t.type,null))}_getTypeInfo(t,e){if(this._types.has(t))return this._types.get(t);if(t instanceof U){const r=t,s=this._getTypeInfo(r.format,r.attributes),n=new pt(r.name,e);return n.format=s,n.count=r.count,this._types.set(t,n),this._updateTypeInfo(n),n}if(t instanceof L){const r=t,s=new gt(r.name,e);s.startLine=r.startLine,s.endLine=r.endLine;for(const t of r.members){const e=this._getTypeInfo(t.type,t.attributes);s.members.push(new mt(t.name,e,t.attributes))}return this._types.set(t,s),this._updateTypeInfo(s),s}if(t instanceof H){const r=t,s=r.format instanceof S,n=r.format?s?this._getTypeInfo(r.format,null):new At(r.format,null):null,i=new Bt(r.name,n,e,r.access);return this._types.set(t,i),this._updateTypeInfo(i),i}if(t instanceof N){const r=t,s=r.format?this._getTypeInfo(r.format,null):null,n=new Bt(r.name,s,e,r.access);return this._types.set(t,n),this._updateTypeInfo(n),n}const r=new At(t.name,e);return this._types.set(t,r),this._updateTypeInfo(r),r}_updateTypeInfo(t){var e,r;const s=this._getTypeSize(t);if(t.size=null!==(e=null==s?void 0:s.size)&&void 0!==e?e:0,t instanceof pt){const e=this._getTypeSize(t.format);t.stride=null!==(r=null==e?void 0:e.size)&&void 0!==r?r:0,this._updateTypeInfo(t.format)}t instanceof gt&&this._updateStructInfo(t)}_updateStructInfo(t){var e;let r=0,s=0,n=0,i=0;for(let o=0,a=t.members.length;o<a;++o){const a=t.members[o],c=this._getTypeSize(a);if(!c)continue;null!==(e=this._getAlias(a.type.name))&&void 0!==e||a.type;const u=c.align,h=c.size;r=this._roundUp(u,r+s),s=h,n=r,i=Math.max(i,u),a.offset=r,a.size=h,this._updateTypeInfo(a.type)}t.size=this._roundUp(i,n+s),t.align=i}_getTypeSize(t){var e;if(null==t)return null;const r=this._getAttributeNum(t.attributes,"size",0),s=this._getAttributeNum(t.attributes,"align",0);if(t instanceof mt&&(t=t.type),t instanceof At){const e=this._getAlias(t.name);null!==e&&(t=e)}{const e=Tt._typeInfo[t.name];if(void 0!==e){const n="f16"===t.format?2:1;return new bt(Math.max(s,e.align/n),Math.max(r,e.size/n))}}{const e=Tt._typeInfo[t.name.substring(0,t.name.length-1)];if(e){const n="h"===t.name[t.name.length-1]?2:1;return new bt(Math.max(s,e.align/n),Math.max(r,e.size/n))}}if(t instanceof pt){let n=t,i=8,o=8;const a=this._getTypeSize(n.format);null!==a&&(o=a.size,i=a.align);return o=n.count*this._getAttributeNum(null!==(e=null==t?void 0:t.attributes)&&void 0!==e?e:null,"stride",this._roundUp(i,o)),r&&(o=r),new bt(Math.max(s,i),Math.max(r,o))}if(t instanceof gt){let e=0,n=0,i=0,o=0,a=0;for(const r of t.members){const t=this._getTypeSize(r.type);null!==t&&(e=Math.max(t.align,e),i=this._roundUp(t.align,i+o),o=t.size,a=i)}return n=this._roundUp(e,a+o),new bt(Math.max(s,e),Math.max(r,n))}return null}_isUniformVar(t){return t instanceof d&&"uniform"==t.storage}_isStorageVar(t){return t instanceof d&&"storage"==t.storage}_isTextureVar(t){return t instanceof d&&null!==t.type&&-1!=Tt._textureTypes.indexOf(t.type.name)}_isSamplerVar(t){return t instanceof d&&null!==t.type&&-1!=Tt._samplerTypes.indexOf(t.type.name)}_getAttribute(t,e){const r=t;if(!r||!r.attributes)return null;const s=r.attributes;for(let n of s)if(n.name==e)return n;return null}_getAttributeNum(t,e,r){if(null===t)return r;for(let s of t)if(s.name==e){let t=null!==s&&null!==s.value?s.value:r;return t instanceof Array&&(t=t[0]),"number"==typeof t?t:"string"==typeof t?parseInt(t):r}return r}_roundUp(t,e){return Math.ceil(e/t)*t}}Tt._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},Tt._textureTypes=ht.any_texture_type.map((t=>t.name)),Tt._samplerTypes=ht.sampler_type.map((t=>t.name))},9877:(t,e,r)=>{r.d(e,{H:()=>Ot});const s=t=>"boolean"==typeof t,n=t=>"function"==typeof t,i=t=>null!==t&&"object"==typeof t,o=t=>i(t)&&t.constructor==={}.constructor,a=t=>Boolean(t)&&"function"==typeof t[Symbol.iterator],c=t=>t&&"function"==typeof t[Symbol.asyncIterator],u=t=>"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,h=t=>"undefined"!=typeof Blob&&t instanceof Blob,l=t=>t&&"object"==typeof t&&t.isBuffer,f=t=>(t=>"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||i(t)&&n(t.tee)&&n(t.cancel)&&n(t.getReader))(t)||(t=>i(t)&&n(t.read)&&n(t.pipe)&&s(t.readable))(t);var d=r(4976);function A(t){if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(t?.extensions)}function m(t){let e;return(0,d.v)(t,"null loader"),(0,d.v)(A(t),"invalid loader"),Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t?.parseTextSync||t?.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let g="";const p={};class B extends Error{constructor(t,e){super(t),this.reason=e.reason,this.url=e.url,this.response=e.response}reason;url;response}const _=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,y=/^([-\w.]+\/[-\w.+]+)/;function b(t,e){return t.toLowerCase()===e.toLowerCase()}function C(t){const e=_.exec(t);return e?e[1]:""}const w=/\?.*/;function E(t){return t.replace(w,"")}function k(t){if(u(t)){return t.url}if(h(t)){return t.name||""}return"string"==typeof t?t:""}function M(t){if(u(t)){const e=t,r=e.headers.get("content-type")||"",s=E(e.url);return function(t){const e=y.exec(t);return e?e[1]:t}(r)||C(s)}if(h(t)){return t.type||""}return"string"==typeof t?C(t):""}async function x(t){if(u(t))return t;const e={},r=function(t){if(u(t))return t.headers["content-length"]||-1;if(h(t))return t.size;return"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);r>=0&&(e["content-length"]=String(r));const s=k(t),n=M(t);n&&(e["content-type"]=n);const i=await async function(t){const e=5;if("string"==typeof t)return`data:,${t.slice(0,e)}`;if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const r=new FileReader;r.onload=e=>t(e?.target?.result),r.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){return`data:base64,${function(t){let e="";const r=new Uint8Array(t);for(let s=0;s<r.byteLength;s++)e+=String.fromCharCode(r[s]);return btoa(e)}(t.slice(0,e))}`}return null}(t);i&&(e["x-first-bytes"]=i),"string"==typeof t&&(t=(new TextEncoder).encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:s}),o}async function T(t){if(!t.ok){const e=await async function(t){const r=function(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}(t.url);let s=`Failed to fetch resource (${t.status}) ${t.statusText}: ${r}`;s=s.length>100?`${s.slice(0,100)}...`:s;const n={reason:t.statusText,url:t.url,response:t};try{const e=t.headers.get("Content-Type");n.reason=e?.includes("application/json")?await t.json():t.text()}catch(e){}return new B(s,n)}(t);throw e}}async function I(t,e){if("string"==typeof t){const r=function(t){for(const e in p)if(t.startsWith(e)){const r=p[e];t=t.replace(e,r)}return t.startsWith("http://")||t.startsWith("https://")||(t=`${g}${t}`),t}(t);return function(t){return!function(t){return t.startsWith("http:")||t.startsWith("https:")}(t)&&!function(t){return t.startsWith("data:")}(t)}(r)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(r,e):await fetch(r,e)}return await x(t)}var v=r(5593);const F=new v.t({id:"loaders.gl"});class O{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var G=r(7612);const R={fetch:null,mimeType:void 0,nothrow:!1,log:new class{console;constructor(){this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:G.Bd,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},D={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function S(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function L(){const t=S();return t.globalOptions=t.globalOptions||{...R},t.globalOptions}function N(t,e,r,s){return r=r||[],function(t,e){J(t,null,R,D,e);for(const r of e){const s=t&&t[r.id]||{},n=r.options&&r.options[r.id]||{},i=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};J(s,r.id,n,i,e)}}(t,r=Array.isArray(r)?r:[r]),H(e,t,s)}function J(t,e,r,s,n){const o=e||"Top level",a=e?`${e}.`:"";for(const c in t){const u=!e&&i(t[c]);if(!(c in r)&&!("baseUri"===c&&!e)&&!("workerUrl"===c&&e))if(c in s)F.warn(`${o} loader option '${a}${c}' no longer supported, use '${s[c]}'`)();else if(!u){const t=U(c,n);F.warn(`${o} loader option '${a}${c}' not recognized. ${t}`)()}}}function U(t,e){const r=t.toLowerCase();let s="";for(const n of e)for(const e in n.options){if(t===e)return`Did you mean '${n.id}.${e}'?`;const i=e.toLowerCase();(r.startsWith(i)||i.startsWith(r))&&(s=s||`Did you mean '${n.id}.${e}'?`)}return s}function H(t,e,r){const s={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(s,r),null===s.log&&(s.log=new O),j(s,L()),j(s,e),s}function j(t,e){for(const r in e)if(r in e){const s=e[r];o(s)&&o(t[r])?t[r]={...t[r],...e[r]}:t[r]=e[r]}}function P(t,e){const r=L(),s=t||r;return"function"==typeof s.fetch?s.fetch:i(s.fetch)?t=>I(t,s.fetch):e?.fetch?e?.fetch:I}var K=r(8503);class Q{terminate(){}}var W=r(5993);const X=new Map;function q(t){(0,W.v)(t.source&&!t.url||!t.source&&t.url);let e=X.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return V((e=t,`try {\n  importScripts('${e}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`));var e}(t.url),X.set(t.url,e)),t.source&&(e=V(t.source),X.set(t.source,e))),(0,W.v)(e),e}function V(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Y(t,e=!0,r){const s=r||new Set;if(t){if(Z(t))s.add(t);else if(Z(t.buffer))s.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(const n in t)Y(t[n],e,s)}else;return void 0===r?Array.from(s):[]}function Z(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const z=()=>{};class ${name;source;url;terminated=!1;worker;onMessage;onError;_loadableURL="";static isSupported(){return"undefined"!=typeof Worker&&K.Bd||void 0!==Q&&!K.Bd}constructor(t){const{name:e,source:r,url:s}=t;(0,W.v)(r||s),this.name=e,this.source=r,this.url=s,this.onMessage=z,this.onError=t=>console.log(t),this.worker=K.Bd?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=z,this.onError=z,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||Y(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+=`worker ${this.name} from ${this.url}. `,t.message&&(e+=`${t.message} in `),t.lineno&&(e+=`:${t.lineno}:${t.colno}`),new Error(e)}_createBrowserWorker(){this._loadableURL=q({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new Q(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new Q(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class tt{name;workerThread;isRunning=!0;result;_resolve=()=>{};_reject=()=>{};constructor(t,e){this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){(0,W.v)(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){(0,W.v)(this.isRunning),this.isRunning=!1,this._reject(t)}}class et{name="unnamed";source;url;maxConcurrency=1;maxMobileConcurrency=1;onDebug=()=>{};reuseWorkers=!0;props={};jobQueue=[];idleQueue=[];count=0;isDestroyed=!1;static isSupported(){return $.isSupported()}constructor(t){this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t,e=((t,e,r)=>t.done(r)),r=((t,e)=>t.error(e))){const s=new Promise((s=>(this.jobQueue.push({name:t,onMessage:e,onError:r,onStart:s}),this)));return this._startQueuedJob(),await s}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const s=new tt(e.name,t);t.onMessage=t=>e.onMessage(s,t.type,t.payload),t.onError=t=>e.onError(s,t),e.onStart(s);try{await s.result}catch(r){console.error(`Worker exception: ${r}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!K.Bd||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new $({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return K.Fr?this.maxMobileConcurrency:this.maxConcurrency}}const rt={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class st{props;workerPools=new Map;static _workerFarm;static isSupported(){return $.isSupported()}static getWorkerFarm(t={}){return st._workerFarm=st._workerFarm||new st({}),st._workerFarm.setProps(t),st._workerFarm}constructor(t){this.props={...rt},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:r,url:s}=t;let n=this.workerPools.get(e);return n||(n=new et({name:e,source:r,url:s}),n.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,n)),n}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}var nt=r(5607);async function it(t,e,r,s,n){const i=t.id,o=function(t,e={}){const r=e[t.id]||{},s=K.Bd?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let n=r.workerUrl;if(n||"compression"!==t.id||(n=e.workerUrl),"test"===e._workerType&&(n=K.Bd?`modules/${t.module}/dist/${s}`:`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!n){let e=t.version;"latest"===e&&(e=nt.x);const r=e?`@${e}`:"";n=`https://unpkg.com/@loaders.gl/${t.module}${r}/dist/${s}`}return(0,W.v)(n),n}(t,r),a=st.getWorkerFarm(r).getWorkerPool({name:i,url:o});r=JSON.parse(JSON.stringify(r)),s=JSON.parse(JSON.stringify(s||{}));const c=await a.startJob("process-on-worker",ot.bind(null,n));c.postMessage("process",{input:e,options:r,context:s});const u=await c.result;return await u.result}async function ot(t,e,r,s){switch(r){case"done":e.done(s);break;case"error":e.error(new Error(s.error));break;case"process":const{id:i,input:o,options:a}=s;try{const r=await t(o,a);e.postMessage("done",{id:i,result:r})}catch(n){const t=n instanceof Error?n.message:"unknown error";e.postMessage("error",{id:i,error:t})}break;default:console.warn(`parse-with-worker unknown message ${r}`)}}function at(t,e){return ct(t||{},e)}function ct(t,e,r=0){if(r>3)return e;const s={...t};for(const[n,i]of Object.entries(e))i&&"object"==typeof i&&!Array.isArray(i)?s[n]=ct(s[n]||{},e[n],r+1):s[n]=e[n];return s}var ut=r(48);const ht=262144;const lt=262144;const ft=1048576;function dt(t){if((e=t)&&"object"==typeof e&&e.isBuffer)return t;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function At(t,e){return G.Bd?async function*(t,e){const r=t.getReader();let s;try{for(;;){const t=s||r.read();e?._streamReadAhead&&(s=r.read());const{done:n,value:i}=await t;if(n)return;yield dt(i)}}catch(n){r.releaseLock()}}(t,e):async function*(t,e){for await(const r of t)yield dt(r)}(t)}function mt(t,e){if("string"==typeof t)return function*(t,e){const r=e?.chunkSize||ht;let s=0;const n=new TextEncoder;for(;s<t.length;){const e=Math.min(t.length-s,r),i=t.slice(s,s+e);s+=e,yield n.encode(i)}}(t,e);if(t instanceof ArrayBuffer)return function*(t,e={}){const{chunkSize:r=lt}=e;let s=0;for(;s<t.byteLength;){const e=Math.min(t.byteLength-s,r),n=new ArrayBuffer(e),i=new Uint8Array(t,s,e);new Uint8Array(n).set(i),s+=e,yield n}}(t,e);if(h(t))return async function*(t,e){const r=e?.chunkSize||ft;let s=0;for(;s<t.size;){const e=s+r,n=await t.slice(s,e).arrayBuffer();s=e,yield n}}(t,e);if(f(t))return At(t,e);if(u(t)){return At(t.body,e)}throw new Error("makeIterator")}const gt="Cannot convert supplied data type";async function pt(t,e,r){const s=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||s)return function(t,e,r){if(e.text&&"string"==typeof t)return t;if(l(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const s=t.byteLength||t.length;return 0===t.byteOffset&&s===r.byteLength||(r=r.slice(t.byteOffset,t.byteOffset+s)),r}throw new Error(gt)}(t,e);if(h(t)&&(t=await x(t)),u(t)){const r=t;return await T(r),e.binary?await r.arrayBuffer():await r.text()}if(f(t)&&(t=mt(t,r)),a(t)||c(t))return async function(t){const e=[];for await(const r of t)e.push(r);return(0,ut.AQ)(...e)}(t);throw new Error(gt)}function Bt(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function _t(t,e,r){if(r)return r;const s={fetch:P(e,t),...t};if(s.url){const t=E(s.url);s.baseUrl=t,s.queryString=function(t){const e=t.match(w);return e&&e[0]}(s.url),s.filename=Bt(t),s.baseUrl=function(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(t)}return Array.isArray(s.loaders)||(s.loaders=null),s}const yt=new v.t({id:"loaders.gl"}),bt=()=>{const t=S();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};const Ct=/\.([^.]+)$/;function wt(t,e=[],r,s){if(!Et(t))return null;if(e&&!Array.isArray(e))return m(e);let n=[];e&&(n=n.concat(e)),r?.ignoreRegisteredLoaders||n.push(...bt()),function(t){for(const e of t)m(e)}(n);const i=function(t,e,r,s){const n=k(t),i=M(t),o=E(n)||s?.url;let a=null,c="";r?.mimeType&&(a=Mt(e,r?.mimeType),c=`match forced by supplied MIME type ${r?.mimeType}`);a=a||function(t,e){const r=e&&Ct.exec(e),s=r&&r[1];return s?function(t,e){e=e.toLowerCase();for(const r of t)for(const t of r.extensions)if(t.toLowerCase()===e)return r;return null}(t,s):null}(e,o),c=c||(a?`matched url ${o}`:""),a=a||Mt(e,i),c=c||(a?`matched MIME type ${i}`:""),a=a||function(t,e){if(!e)return null;for(const r of t)if("string"==typeof e){if(xt(e,r))return r}else if(ArrayBuffer.isView(e)){if(Tt(e.buffer,e.byteOffset,r))return r}else if(e instanceof ArrayBuffer){if(Tt(e,0,r))return r}return null}(e,t),c=c||(a?`matched initial data ${It(t)}`:""),r?.fallbackMimeType&&(a=a||Mt(e,r?.fallbackMimeType),c=c||(a?`matched fallback MIME type ${i}`:""));c&&yt.log(1,`selectLoader selected ${a?.name}: ${c}.`);return a}(t,n,r,s);if(!i&&!r?.nothrow)throw new Error(kt(t));return i}function Et(t){return!(t instanceof Response&&204===t.status)}function kt(t){const e=k(t),r=M(t);let s="No valid loader found (";s+=e?`${Bt(e)}, `:"no url provided, ",s+=`MIME type: ${r?`"${r}"`:"not provided"}, `;const n=t?It(t):"";return s+=n?` first bytes: "${n}"`:"first bytes: not available",s+=")",s}function Mt(t,e){for(const r of t){if(r.mimeTypes?.some((t=>b(e,t))))return r;if(b(e,`application/x.${r.id}`))return r}return null}function xt(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function Tt(t,e,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some((r=>function(t,e,r,s){if(s instanceof ArrayBuffer)return(0,ut.YV)(s,t,s.byteLength);switch(typeof s){case"function":return s(t);case"string":return s===vt(t,e,s.length);default:return!1}}(t,e,0,r)))}function It(t,e=5){if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return vt(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return vt(t,0,e)}return""}function vt(t,e,r){if(t.byteLength<e+r)return"";const s=new DataView(t);let n="";for(let i=0;i<r;i++)n+=String.fromCharCode(s.getUint8(e+i));return n}async function Ft(t,e,r,s){!e||Array.isArray(e)||A(e)||(s=void 0,r=e,e=void 0),r=r||{};const n=k(t=await t),i=function(t,e){if(t&&!Array.isArray(t))return t;let r;if(t&&(r=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];r=r?[...r,...t]:t}return r&&r.length?r:void 0}(e,s),o=await async function(t,e=[],r,s){if(!Et(t))return null;let n=wt(t,e,{...r,nothrow:!0},s);if(n)return n;if(h(t)&&(n=wt(t=await t.slice(0,10).arrayBuffer(),e,r,s)),!n&&!r?.nothrow)throw new Error(kt(t));return n}(t,i,r);return o?(s=_t({url:n,_parse:Ft,loaders:i},r=N(r,o,i,n),s||null),await async function(t,e,r,s){if(function(t,e=nt.Q){(0,W.v)(t,"no worker provided");const r=t.version}(t),r=at(t.options,r),u(e)){const t=e,{ok:r,redirected:n,status:i,statusText:o,type:a,url:c}=t,u=Object.fromEntries(t.headers.entries());s.response={headers:u,ok:r,redirected:n,status:i,statusText:o,type:a,url:c}}e=await pt(e,t,r);const n=t;if(n.parseTextSync&&"string"==typeof e)return n.parseTextSync(e,r,s);if(function(t,e){return!!st.isSupported()&&!(!K.Bd&&!e?._nodeWorkers)&&t.worker&&e?.worker}(t,r))return await it(t,e,r,s,Ft);if(n.parseText&&"string"==typeof e)return await n.parseText(e,r,s);if(n.parse)return await n.parse(e,r,s);throw(0,W.v)(!n.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}(o,t,r,s)):null}async function Ot(t,e,r,s){let n,i;Array.isArray(e)||A(e)?(n=e,i=r):(n=[],i=e);const o=P(i);let a=t;return"string"==typeof t&&(a=await o(t)),h(t)&&(a=await o(t)),Array.isArray(n),await Ft(a,n,i)}},5086:(t,e,r)=>{r.d(e,{B:()=>_s});var s={};r.r(s),r.d(s,{decode:()=>ie,name:()=>ne});var n={};r.r(n),r.d(n,{decode:()=>ue,name:()=>ce});var i={};r.r(i),r.d(i,{decode:()=>Te,name:()=>xe});var o={};r.r(o),r.d(o,{name:()=>Re,preprocess:()=>De});var a={};r.r(a),r.d(a,{name:()=>Le,preprocess:()=>Ne});var c={};r.r(c),r.d(c,{decode:()=>nr,encode:()=>ir,name:()=>rr,preprocess:()=>sr});var u={};r.r(u),r.d(u,{decode:()=>Nr,name:()=>Rr});var h={};r.r(h),r.d(h,{decode:()=>Kr,encode:()=>Qr,name:()=>Pr});var l={};r.r(l),r.d(l,{decode:()=>qr,encode:()=>Vr,name:()=>Xr});var f={};r.r(f),r.d(f,{decode:()=>zr,encode:()=>$r,name:()=>Zr});var d={};r.r(d),r.d(d,{decode:()=>ss,name:()=>rs});function A(t,e,r){if(t.byteLength<=e+r)return"";const s=new DataView(t);let n="";for(let i=0;i<r;i++)n+=String.fromCharCode(s.getUint8(e+i));return n}function m(t){try{return JSON.parse(t)}catch(e){throw new Error(`Failed to parse JSON from data starting with "${function(t,e=5){if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return A(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer)return A(t,0,e);return""}(t)}"`)}}var g=r(48);async function p(t,e,r,s){return s._parse(t,e,r,s)}var B=r(4976),_=r(7612);const y=globalThis.loaders?.parseImageNode,b="undefined"!=typeof Image,C="undefined"!=typeof ImageBitmap,w=Boolean(y),E=!!_.Bd||w;function k(t){const e=x(t);if(!e)throw new Error("Not an image");return e}function M(t){switch(k(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("getImageData");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function x(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}const T=/^data:image\/svg\+xml/,I=/\.svg((\?|#).*)?$/;function v(t){return t&&(T.test(t)||I.test(t))}function F(t,e){if(v(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function O(t,e,r){const s=function(t,e){if(v(e)){let e=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(r){throw new Error(r.message)}return`data:image/svg+xml;base64,${btoa(e)}`}return F(t,e)}(t,r),n=self.URL||self.webkitURL,i="string"!=typeof s&&n.createObjectURL(s);try{return await async function(t,e){const r=new Image;if(r.src=t,e.image&&e.image.decode&&r.decode)return await r.decode(),r;return await new Promise(((t,e)=>{try{r.onload=()=>t(r),r.onerror=t=>{const r=t instanceof Error?t.message:"error";e(new Error(r))}}catch(s){e(s)}}))}(i||s,e)}finally{i&&n.revokeObjectURL(i)}}const G={};let R=!0;async function D(t,e,r){let s;if(v(r)){s=await O(t,e,r)}else s=F(t,r);const n=e&&e.imagebitmap;return await async function(t,e=null){!function(t){for(const e in t||G)return!1;return!0}(e)&&R||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(r){console.warn(r),R=!1}return await createImageBitmap(t)}(s,n)}function S(t){return function(t,e,r=0){const s=(n=e,[...n].map((t=>t.charCodeAt(0))));var n;for(let i=0;i<s.length;++i)if(s[i]!==t[i+r])return!1;return!0}(t,"ftyp",4)?0==(96&t[8])?null:function(t){switch((e=t,r=8,s=12,String.fromCharCode(...e.slice(r,s))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var e,r,s}(t):null}const L=!1,N=!0;function J(t){const e=U(t);return function(t){const e=U(t),r=e.byteLength>=24&&2303741511===e.getUint32(0,L);if(!r)return null;return{mimeType:"image/png",width:e.getUint32(16,L),height:e.getUint32(20,L)}}(e)||function(t){const e=U(t),r=e.byteLength>=3&&65496===e.getUint16(0,L)&&255===e.getUint8(2);if(!r)return null;const{tableMarkers:s,sofMarkers:n}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)t.add(r);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let i=2;for(;i+9<e.byteLength;){const t=e.getUint16(i,L);if(n.has(t))return{mimeType:"image/jpeg",height:e.getUint16(i+5,L),width:e.getUint16(i+7,L)};if(!s.has(t))return null;i+=2,i+=e.getUint16(i,L)}return null}(e)||function(t){const e=U(t),r=e.byteLength>=10&&1195984440===e.getUint32(0,L);if(!r)return null;return{mimeType:"image/gif",width:e.getUint16(6,N),height:e.getUint16(8,N)}}(e)||function(t){const e=U(t),r=e.byteLength>=14&&16973===e.getUint16(0,L)&&e.getUint32(2,N)===e.byteLength;if(!r)return null;return{mimeType:"image/bmp",width:e.getUint32(18,N),height:e.getUint32(22,N)}}(e)||function(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),r=S(e);if(!r)return null;return{mimeType:r.mimeType,width:0,height:0}}(e)}function U(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const H={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:"4.2.1",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,r){const s=((e=e||{}).image||{}).type||"auto",{url:n}=r||{};let i;switch(function(t){switch(t){case"auto":case"data":return function(){if(C)return"imagebitmap";if(b)return"image";if(E)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return C||b||E;case"imagebitmap":return C;case"image":return b;case"data":return E;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}(t),t}}(s)){case"imagebitmap":i=await D(t,e,n);break;case"image":i=await O(t,e,n);break;case"data":i=await async function(t,e){const{mimeType:r}=J(t)||{},s=globalThis.loaders?.parseImageNode;return(0,B.v)(s),await s(t,r)}(t);break;default:(0,B.v)(!1)}return"data"===s&&(i=M(i)),i},tests:[t=>Boolean(J(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};var j=r(8503),P=r(5993),K=r(5607);const Q={};async function W(t,e=null,r={},s=null){return e&&(t=function(t,e,r={},s=null){if(!r.useLocalLibraries&&t.startsWith("http"))return t;s=s||t;const n=r.modules||{};if(n[s])return n[s];if(!j.Bd)return`modules/${e}/dist/libs/${s}`;if(r.CDN)return(0,P.v)(r.CDN.startsWith("http")),`${r.CDN}/${e}@${K.Q}/dist/libs/${s}`;if(j.xD)return`../src/libs/${s}`;return`modules/${e}/src/libs/${s}`}(t,e,r,s)),Q[t]=Q[t]||async function(t){if(t.endsWith("wasm"))return await async function(t){const{readFileAsArrayBuffer:e}=globalThis.loaders||{};if(j.Bd||!e||t.startsWith("http")){const e=await fetch(t);return await e.arrayBuffer()}return await e(t)}(t);if(!j.Bd)try{const{requireFromFile:e}=globalThis.loaders||{};return await(e?.(t))}catch(r){return console.error(r),null}if(j.xD)return importScripts(t);const e=await async function(t){const{readFileAsText:e}=globalThis.loaders||{};if(j.Bd||!e||t.startsWith("http")){const e=await fetch(t);return await e.text()}return await e(t)}(t);return function(t,e){if(!j.Bd){const{requireFromString:r}=globalThis.loaders||{};return r?.(t,e)}if(j.xD)return eval.call(globalThis,t),null;const r=document.createElement("script");r.id=e;try{r.appendChild(document.createTextNode(t))}catch(s){r.text=t}return document.body.appendChild(r),null}(e,t)}(t),await Q[t]}const X={TRANSCODER:"basis_transcoder.js",TRANSCODER_WASM:"basis_transcoder.wasm",ENCODER:"basis_encoder.js",ENCODER_WASM:"basis_encoder.wasm"};let q,V;async function Y(t){var e;e=t.modules,globalThis.loaders||={},globalThis.loaders.modules||={},Object.assign(globalThis.loaders.modules,e);const r=function(t){const e=globalThis.loaders?.modules?.[t];return e||null}("basis");return r||(q||=async function(t){let e=null,r=null;return[e,r]=await Promise.all([await W(X.TRANSCODER,"textures",t),await W(X.TRANSCODER_WASM,"textures",t)]),e=e||globalThis.BASIS,await function(t,e){const r={};e&&(r.wasmBinary=e);return new Promise((e=>{t(r).then((t=>{const{BasisFile:r,initializeBasis:s}=t;s(),e({BasisFile:r})}))}))}(e,r)}(t),await q)}async function Z(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(V=V||async function(t){let e=null,r=null;return[e,r]=await Promise.all([await W(X.ENCODER,"textures",t),await W(X.ENCODER_WASM,"textures",t)]),e=e||globalThis.BASIS,await function(t,e){const r={};e&&(r.wasmBinary=e);return new Promise((e=>{t(r).then((t=>{const{BasisFile:r,KTX2File:s,initializeBasis:n,BasisEncoder:i}=t;n(),e({BasisFile:r,KTX2File:s,BasisEncoder:i})}))}))}(e,r)}(t),await V)}const z=33776,$=33779,tt=35840,et=35842,rt=36196,st=37808,nt=["","WEBKIT_","MOZ_"],it={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let ot=null;function at(t){if(!ot){t=t||function(){try{return document.createElement("canvas").getContext("webgl")}catch(t){return null}}()||void 0,ot=new Set;for(const e of nt)for(const r in it)if(t&&t.getExtension(`${e}${r}`)){const t=it[r];ot.add(t)}}return ot}new Uint8Array([0]);var ct,ut,ht,lt,ft,dt,At,mt;!function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(ct||(ct={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(ut||(ut={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(ht||(ht={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(lt||(lt={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(ft||(ft={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(dt||(dt={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(At||(At={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(mt||(mt={}));const gt=[171,75,84,88,32,50,48,187,13,10,26,10];const pt={etc1:{basisFormat:0,compressed:!0,format:rt},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:z},bc3:{basisFormat:3,compressed:!0,format:$},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:tt},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:et},"astc-4x4":{basisFormat:10,compressed:!0,format:st},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function Bt(t,e,r){const s=new t(new Uint8Array(e));try{if(!s.startTranscoding())throw new Error("Failed to start basis transcoding");const t=s.getNumImages(),e=[];for(let n=0;n<t;n++){const t=s.getNumLevels(n),i=[];for(let e=0;e<t;e++)i.push(_t(s,n,e,r));e.push(i)}return e}finally{s.close(),s.delete()}}function _t(t,e,r,s){const n=t.getImageWidth(e,r),i=t.getImageHeight(e,r),o=t.getHasAlpha(),{compressed:a,format:c,basisFormat:u}=Ct(s,o),h=t.getImageTranscodedSizeInBytes(e,r,u),l=new Uint8Array(h);if(!t.transcodeImage(l,e,r,u,0,0))throw new Error("failed to start Basis transcoding");return{width:n,height:i,data:l,compressed:a,format:c,hasAlpha:o}}function yt(t,e,r){const s=new t(new Uint8Array(e));try{if(!s.startTranscoding())throw new Error("failed to start KTX2 transcoding");const t=s.getLevels(),e=[];for(let n=0;n<t;n++){e.push(bt(s,n,r));break}return[e]}finally{s.close(),s.delete()}}function bt(t,e,r){const{alphaFlag:s,height:n,width:i}=t.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=Ct(r,s),u=t.getImageTranscodedSizeInBytes(e,0,0,c),h=new Uint8Array(u);if(!t.transcodeImage(h,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:i,height:n,data:h,compressed:o,levelSize:u,hasAlpha:s,format:a}}function Ct(t,e){let r=t&&t.basis&&t.basis.format;return"auto"===r&&(r=wt()),"object"==typeof r&&(r=e?r.alpha:r.noAlpha),r=r.toLowerCase(),pt[r]}function wt(){const t=at();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const Et={...{dataType:null,batchType:null,name:"Basis",id:"basis",module:"textures",version:"4.2.1",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},parse:async function(t,e){if("auto"===e.basis.containerFormat){if(function(t){const e=new Uint8Array(t);return!(e.byteLength<gt.length||e[0]!==gt[0]||e[1]!==gt[1]||e[2]!==gt[2]||e[3]!==gt[3]||e[4]!==gt[4]||e[5]!==gt[5]||e[6]!==gt[6]||e[7]!==gt[7]||e[8]!==gt[8]||e[9]!==gt[9]||e[10]!==gt[10]||e[11]!==gt[11])}(t)){return yt((await Z(e)).KTX2File,t,e)}const{BasisFile:r}=await Y(e);return Bt(r,t,e)}if("encoder"===e.basis.module){const r=await Z(e);return"ktx2"===e.basis.containerFormat?yt(r.KTX2File,t,e):Bt(r.BasisFile,t,e)}{const{BasisFile:r}=await Y(e);return Bt(r,t,e)}}};var kt=r(2840);function Mt(t,e){return(0,B.v)(t>=0),(0,B.v)(e>0),t+(e-1)&~(e-1)}function xt(t,e,r){let s;if(t instanceof ArrayBuffer)s=new Uint8Array(t);else{const e=t.byteOffset,r=t.byteLength;s=new Uint8Array(t.buffer||t.arrayBuffer,e,r)}return e.set(s,r),r+Mt(s.byteLength,4)}const Tt=!0,It=1735152710,vt=12,Ft=8,Ot=1313821514,Gt=5130562,Rt=0,Dt=0,St=1;function Lt(t,e,r=0,s={}){const n=new DataView(e),i=function(t,e=0){return`${String.fromCharCode(t.getUint8(e+0))}${String.fromCharCode(t.getUint8(e+1))}${String.fromCharCode(t.getUint8(e+2))}${String.fromCharCode(t.getUint8(e+3))}`}(n,r+0),o=n.getUint32(r+4,Tt),a=n.getUint32(r+8,Tt);switch(Object.assign(t,{header:{byteOffset:r,byteLength:a,hasBinChunk:!1},type:i,version:o,json:{},binChunks:[]}),r+=vt,t.version){case 1:return function(t,e,r){(0,B.v)(t.header.byteLength>vt+Ft);const s=e.getUint32(r+0,Tt),n=e.getUint32(r+4,Tt);return r+=Ft,(0,B.v)(n===Rt),Nt(t,e,r,s),r+=s,r+=Jt(t,e,r,t.header.byteLength),r}(t,n,r);case 2:return function(t,e,r,s){return(0,B.v)(t.header.byteLength>vt+Ft),function(t,e,r,s){for(;r+8<=t.header.byteLength;){const n=e.getUint32(r+0,Tt),i=e.getUint32(r+4,Tt);switch(r+=Ft,i){case Ot:Nt(t,e,r,n);break;case Gt:Jt(t,e,r,n);break;case Dt:s.strict||Nt(t,e,r,n);break;case St:s.strict||Jt(t,e,r,n)}r+=Mt(n,4)}}(t,e,r,s),r+t.header.byteLength}(t,n,r,{});default:throw new Error(`Invalid GLB version ${t.version}. Only supports version 1 and 2.`)}}function Nt(t,e,r,s){const n=new Uint8Array(e.buffer,r,s),i=new TextDecoder("utf8").decode(n);return t.json=JSON.parse(i),Mt(s,4)}function Jt(t,e,r,s){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:r,byteLength:s,arrayBuffer:e.buffer}),Mt(s,4)}function Ut(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const r=e.baseUri||e.uri;if(!r)throw new Error(`'baseUri' must be provided to resolve relative url ${t}`);return r.substr(0,r.lastIndexOf("/")+1)+t}var Ht=r(7885);function jt(t,e,r){const s=t.bufferViews[r];(0,kt.v)(s);const n=e[s.buffer];(0,kt.v)(n);const i=(s.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,i,s.byteLength)}class Pt{gltf;sourceBuffers;byteLength;constructor(t){this.gltf={json:t?.json||{asset:{version:"2.0",generator:"loaders.gl"},buffers:[],extensions:{},extensionsRequired:[],extensionsUsed:[]},buffers:t?.buffers||[],images:t?.images||[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(t){return this.json[t]}getExtraData(t){return(this.json.extras||{})[t]}hasExtension(t){const e=this.getUsedExtensions().find((e=>e===t)),r=this.getRequiredExtensions().find((e=>e===t));return"string"==typeof e||"string"==typeof r}getExtension(t){const e=this.getUsedExtensions().find((e=>e===t)),r=this.json.extensions||{};return e?r[t]:null}getRequiredExtension(t){return this.getRequiredExtensions().find((e=>e===t))?this.getExtension(t):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(t,e){return(t.extensions||{})[e]}getScene(t){return this.getObject("scenes",t)}getNode(t){return this.getObject("nodes",t)}getSkin(t){return this.getObject("skins",t)}getMesh(t){return this.getObject("meshes",t)}getMaterial(t){return this.getObject("materials",t)}getAccessor(t){return this.getObject("accessors",t)}getTexture(t){return this.getObject("textures",t)}getSampler(t){return this.getObject("samplers",t)}getImage(t){return this.getObject("images",t)}getBufferView(t){return this.getObject("bufferViews",t)}getBuffer(t){return this.getObject("buffers",t)}getObject(t,e){if("object"==typeof e)return e;const r=this.json[t]&&this.json[t][e];if(!r)throw new Error(`glTF file error: Could not find ${t}[${e}]`);return r}getTypedArrayForBufferView(t){const e=(t=this.getBufferView(t)).buffer,r=this.gltf.buffers[e];(0,kt.v)(r);const s=(t.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,s,t.byteLength)}getTypedArrayForAccessor(t){const e=this.getAccessor(t);return function(t,e,r){const s="number"==typeof r?t.accessors?.[r]:r;if(!s)throw new Error(`No gltf accessor ${JSON.stringify(r)}`);const n=t.bufferViews?.[s.bufferView||0];if(!n)throw new Error(`No gltf buffer view for accessor ${n}`);const{arrayBuffer:i,byteOffset:o}=e[n.buffer],a=(o||0)+(s.byteOffset||0)+(n.byteOffset||0),{ArrayType:c,length:u,componentByteSize:h,numberOfComponentsInElement:l}=(0,Ht.aF)(s,n),f=h*l,d=n.byteStride||f;if(void 0===n.byteStride||n.byteStride===f)return new c(i,a,u);const A=new c(u);for(let m=0;m<s.count;m++){const t=new c(i,a+m*d,l);A.set(t,m*l)}return A}(this.gltf.json,this.gltf.buffers,e)}getTypedArrayForImageData(t){t=this.getAccessor(t);const e=this.getBufferView(t.bufferView),r=this.getBuffer(e.buffer).data,s=e.byteOffset||0;return new Uint8Array(r,s,e.byteLength)}addApplicationData(t,e){return this.json[t]=e,this}addExtraData(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this}addObjectExtension(t,e,r){return t.extensions=t.extensions||{},t.extensions[e]=r,this.registerUsedExtension(e),this}setObjectExtension(t,e,r){(t.extensions||{})[e]=r}removeObjectExtension(t,e){const r=t?.extensions||{};if(r[e]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const t=this.json.extensionsRemoved;t.includes(e)||t.push(e)}delete r[e]}addExtension(t,e={}){return(0,kt.v)(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e}addRequiredExtension(t,e={}){return(0,kt.v)(e),this.addExtension(t,e),this.registerRequiredExtension(t),e}registerUsedExtension(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((e=>e===t))||this.json.extensionsUsed.push(t)}registerRequiredExtension(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((e=>e===t))||this.json.extensionsRequired.push(t)}removeExtension(t){if(this.json.extensions?.[t]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const e=this.json.extensionsRemoved;e.includes(t)||e.push(t)}this.json.extensions&&delete this.json.extensions[t],this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t)}setDefaultScene(t){this.json.scene=t}addScene(t){const{nodeIndices:e}=t;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:e}),this.json.scenes.length-1}addNode(t){const{meshIndex:e,matrix:r}=t;this.json.nodes=this.json.nodes||[];const s={mesh:e};return r&&(s.matrix=r),this.json.nodes.push(s),this.json.nodes.length-1}addMesh(t){const{attributes:e,indices:r,material:s,mode:n=4}=t,i={primitives:[{attributes:this._addAttributes(e),mode:n}]};if(r){const t=this._addIndices(r);i.primitives[0].indices=t}return Number.isFinite(s)&&(i.primitives[0].material=s),this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addPointCloud(t){const e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1}addImage(t,e){const r=J(t),s=e||r?.mimeType,n={bufferView:this.addBufferView(t),mimeType:s};return this.json.images=this.json.images||[],this.json.images.push(n),this.json.images.length-1}addBufferView(t,e=0,r=this.byteLength){const s=t.byteLength;(0,kt.v)(Number.isFinite(s)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);const n={buffer:e,byteOffset:r,byteLength:s};return this.byteLength+=Mt(s,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1}addAccessor(t,e){const r={bufferView:t,type:(0,Ht.v7)(e.size),componentType:e.componentType,count:e.count,max:e.max,min:e.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(t,e={size:3}){const r=this.addBufferView(t);let s={min:e.min,max:e.max};s.min&&s.max||(s=this._getAccessorMinMax(t,e.size));const n={size:e.size,componentType:(0,Ht.rA)(t),count:Math.round(t.length/e.size),min:s.min,max:s.max};return this.addAccessor(r,Object.assign(n,e))}addTexture(t){const{imageIndex:e}=t,r={source:e};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}createBinaryChunk(){this.gltf.buffers=[];const t=this.byteLength,e=new ArrayBuffer(t),r=new Uint8Array(e);let s=0;for(const n of this.sourceBuffers||[])s=xt(n,r,s);this.json?.buffers?.[0]?this.json.buffers[0].byteLength=t:this.json.buffers=[{byteLength:t}],this.gltf.binary=e,this.sourceBuffers=[e]}_removeStringFromArray(t,e){let r=!0;for(;r;){const s=t.indexOf(e);s>-1?t.splice(s,1):r=!1}}_addAttributes(t={}){const e={};for(const r in t){const s=t[r],n=this._getGltfAttributeName(r),i=this.addBinaryBuffer(s.value,s);e[n]=i}return e}_addIndices(t){return this.addBinaryBuffer(t,{size:1})}_getGltfAttributeName(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}_getAccessorMinMax(t,e){const r={min:null,max:null};if(t.length<e)return r;r.min=[],r.max=[];const s=t.subarray(0,e);for(const n of s)r.min.push(n),r.max.push(n);for(let n=e;n<t.length;n+=e)for(let s=0;s<e;s++)r.min[0+s]=Math.min(r.min[0+s],t[n+s]),r.max[0+s]=Math.max(r.max[0+s],t[n+s]);return r}}function Kt(t){return(t%1+1)%1}const Qt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16,BOOLEAN:1,STRING:1,ENUM:1},Wt={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:BigInt64Array,UINT64:BigUint64Array,FLOAT32:Float32Array,FLOAT64:Float64Array},Xt={INT8:1,UINT8:1,INT16:2,UINT16:2,INT32:4,UINT32:4,INT64:8,UINT64:8,FLOAT32:4,FLOAT64:8};function qt(t,e){return Xt[e]*Qt[t]}function Vt(t,e,r,s){if("UINT8"!==r&&"UINT16"!==r&&"UINT32"!==r&&"UINT64"!==r)return null;const n=Yt(t.getTypedArrayForBufferView(e),"SCALAR",r,s+1);return n instanceof BigInt64Array||n instanceof BigUint64Array?null:n}function Yt(t,e,r,s=1){const n=Qt[e],i=Wt[r],o=Xt[r],a=s*n,c=a*o;let u=t.buffer,h=t.byteOffset;if(h%o!=0){u=new Uint8Array(u).slice(h,h+c).buffer,h=0}return new i(u,h,a)}function Zt(t,e,r){const s=`TEXCOORD_${e.texCoord||0}`,n=r.attributes[s],i=t.getTypedArrayForAccessor(n),o=t.gltf.json,a=e.index,c=o.textures?.[a]?.source;if(void 0!==c){const r=o.images?.[c]?.mimeType,s=t.gltf.images?.[c];if(s&&void 0!==s.width){const t=[];for(let n=0;n<i.length;n+=2){const o=$t(s,r,i,n,e.channels);t.push(o)}return t}}return[]}function zt(t,e,r,s,n){if(!r?.length)return;const i=[];for(const h of r){let t=s.findIndex((t=>t===h));-1===t&&(t=s.push(h)-1),i.push(t)}const o=new Uint32Array(i),a=t.gltf.buffers.push({arrayBuffer:o.buffer,byteOffset:o.byteOffset,byteLength:o.byteLength})-1,c=t.addBufferView(o,a,0),u=t.addAccessor(c,{size:1,componentType:(0,Ht.rA)(o),count:o.length});n.attributes[e]=u}function $t(t,e,r,s,n=[0]){const i={r:{offset:0,shift:0},g:{offset:1,shift:8},b:{offset:2,shift:16},a:{offset:3,shift:24}},o=r[s],a=r[s+1];let c=1;!e||-1===e.indexOf("image/jpeg")&&-1===e.indexOf("image/png")||(c=4);const u=function(t,e,r,s=1){const n=r.width,i=Kt(t)*(n-1),o=Math.round(i),a=r.height,c=Kt(e)*(a-1),u=Math.round(c),h=r.components?r.components:s,l=(u*n+o)*h;return l}(o,a,t,c);let h=0;for(const l of n){const e="number"==typeof l?Object.values(i)[l]:i[l],r=u+e.offset,s=M(t);if(s.data.length<=r)throw new Error(`${s.data.length} <= ${r}`);h|=s.data[r]<<e.shift}return h}function te(t,e,r,s,n){const i=[];for(let o=0;o<e;o++){const e=r[o],a=r[o+1]-r[o];if(a+e>s)break;const c=e/n,u=a/n;i.push(t.slice(c,c+u))}return i}function ee(t,e,r){const s=[];for(let n=0;n<e;n++){const e=n*r;s.push(t.slice(e,e+r))}return s}function re(t,e,r,s){if(r)throw new Error("Not implemented - arrayOffsets for strings is specified");if(s){const r=[],n=new TextDecoder("utf8");let i=0;for(let o=0;o<t;o++){const t=s[o+1]-s[o];if(t+i<=e.length){const s=e.subarray(i,t+i),o=n.decode(s);r.push(o),i+=t}}return r}return[]}const se="EXT_mesh_features",ne=se;async function ie(t,e){!function(t,e){const r=t.gltf.json;if(!r.meshes)return;for(const s of r.meshes)for(const r of s.primitives)oe(t,r,e)}(new Pt(t),e)}function oe(t,e,r){if(!r?.gltf?.loadBuffers)return;const s=e.extensions?.[se],n=s?.featureIds;if(n)for(const i of n){let s;if(void 0!==i.attribute){const r=`_FEATURE_ID_${i.attribute}`,n=e.attributes[r];s=t.getTypedArrayForAccessor(n)}else s=void 0!==i.texture&&r?.gltf?.loadImages?Zt(t,i.texture,e):[];i.data=s}}const ae="EXT_structural_metadata",ce=ae;async function ue(t,e){!function(t,e){if(!e.gltf?.loadBuffers)return;const r=t.getExtension(ae);if(!r)return;e.gltf?.loadImages&&function(t,e){const r=e.propertyTextures,s=t.gltf.json;if(r&&s.meshes)for(const n of s.meshes)for(const s of n.primitives)le(t,r,s,e)}(t,r);!function(t,e){const r=e.schema;if(!r)return;const s=r.classes,n=e.propertyTables;if(s&&n)for(const i in s){const e=he(n,i);e&&de(t,r,e)}}(t,r)}(new Pt(t),e)}function he(t,e){for(const r of t)if(r.class===e)return r;return null}function le(t,e,r,s){if(!e)return;const n=r.extensions?.[ae],i=n?.propertyTextures;if(i)for(const o of i){fe(t,e[o],r,s)}}function fe(t,e,r,s){if(!e.properties)return;s.dataAttributeNames||(s.dataAttributeNames=[]);const n=e.class;for(const i in e.properties){const o=`${n}_${i}`,a=e.properties?.[i];if(!a)continue;a.data||(a.data=[]);const c=a.data,u=Zt(t,a,r);null!==u&&(zt(t,o,u,c,r),a.data=c,s.dataAttributeNames.push(o))}}function de(t,e,r){const s=e.classes?.[r.class];if(!s)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${r.class}`);const n=r.count;for(const i in s.properties){const o=s.properties[i],a=r.properties?.[i];if(a){const r=Ae(t,e,o,n,a);a.data=r}}}function Ae(t,e,r,s,n){let i=[];const o=n.values,a=t.getTypedArrayForBufferView(o),c=function(t,e,r,s){if(e.array&&void 0===e.count&&void 0!==r.arrayOffsets)return Vt(t,r.arrayOffsets,r.arrayOffsetType||"UINT32",s);return null}(t,r,n,s),u=function(t,e,r){if(void 0!==e.stringOffsets)return Vt(t,e.stringOffsets,e.stringOffsetType||"UINT32",r);return null}(t,n,s);switch(r.type){case"SCALAR":case"VEC2":case"VEC3":case"VEC4":case"MAT2":case"MAT3":case"MAT4":i=function(t,e,r,s){const n=t.array,i=t.count,o=qt(t.type,t.componentType),a=r.byteLength/o;let c;c=t.componentType?Yt(r,t.type,t.componentType,a):r;if(n)return s?te(c,e,s,r.length,o):i?ee(c,e,i):[];return c}(r,s,a,c);break;case"BOOLEAN":throw new Error(`Not implemented - classProperty.type=${r.type}`);case"STRING":i=re(s,a,c,u);break;case"ENUM":i=function(t,e,r,s,n){const i=e.enumType;if(!i)throw new Error("Incorrect data in the EXT_structural_metadata extension: classProperty.enumType is not set for type ENUM");const o=t.enums?.[i];if(!o)throw new Error(`Incorrect data in the EXT_structural_metadata extension: schema.enums does't contain ${i}`);const a=o.valueType||"UINT16",c=qt(e.type,a),u=s.byteLength/c;let h=Yt(s,e.type,a,u);h||(h=s);if(e.array){if(n)return function(t){const{valuesData:e,numberOfElements:r,arrayOffsets:s,valuesDataBytesLength:n,elementSize:i,enumEntry:o}=t,a=[];for(let c=0;c<r;c++){const t=s[c],r=s[c+1]-s[c];if(r+t>n)break;const u=me(e,t/i,r/i,o);a.push(u)}return a}({valuesData:h,numberOfElements:r,arrayOffsets:n,valuesDataBytesLength:s.length,elementSize:c,enumEntry:o});const t=e.count;return t?function(t,e,r,s){const n=[];for(let i=0;i<e;i++){const e=me(t,r*i,r,s);n.push(e)}return n}(h,r,t,o):[]}return me(h,0,r,o)}(e,r,s,a,c);break;default:throw new Error(`Unknown classProperty type ${r.type}`)}return i}function me(t,e,r,s){const n=[];for(let i=0;i<r;i++)if(t instanceof BigInt64Array||t instanceof BigUint64Array)n.push("");else{const r=ge(s,t[e+i]);r?n.push(r.name):n.push("")}return n}function ge(t,e){for(const r of t.values)if(r.value===e)return r;return null}const pe="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",Be="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",_e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),ye=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),be={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Ce={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};let we;async function Ee(){return we||(we=async function(){let t=pe;WebAssembly.validate(_e)&&(t=Be,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=await WebAssembly.instantiate(function(t){const e=new Uint8Array(t.length);for(let s=0;s<t.length;++s){const r=t.charCodeAt(s);e[s]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let s=0;s<t.length;++s)e[r++]=e[s]<60?ye[e[s]]:64*(e[s]-60)+e[++s];return e.buffer.slice(0,r)}(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}()),we}function ke(t,e,r,s,n,i,o){const a=t.exports.sbrk,c=s+3&-4,u=a(c*n),h=a(i.length),l=new Uint8Array(t.exports.memory.buffer);l.set(i,h);const f=e(u,s,n,h,i.length);if(0===f&&o&&o(u,c,n),r.set(l.subarray(u,u+s*n)),a(u-a(0)),0!==f)throw new Error(`Malformed buffer data: ${f}`)}const Me="EXT_meshopt_compression",xe=Me;async function Te(t,e){const r=new Pt(t);if(!e?.gltf?.decompressMeshes||!e.gltf?.loadBuffers)return;const s=[];for(const n of t.json.bufferViews||[])s.push(Ie(r,n));await Promise.all(s),r.removeExtension(Me)}async function Ie(t,e){const r=t.getObjectExtension(e,Me);if(r){const{byteOffset:s=0,byteLength:n=0,byteStride:i,count:o,mode:a,filter:c="NONE",buffer:u}=r,h=t.gltf.buffers[u],l=new Uint8Array(h.arrayBuffer,h.byteOffset+s,n),f=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);await async function(t,e,r,s,n,i="NONE"){const o=await Ee();ke(o,o.exports[Ce[n]],t,e,r,s,o.exports[be[i||"NONE"]])}(f,o,i,l,a,c),t.removeObjectExtension(e,Me)}}const ve={};function Fe(t){if(void 0===ve[t]){const e=_.Bd?function(t){switch(t){case"image/avif":case"image/webp":return function(t){try{const e=document.createElement("canvas");return 0===e.toDataURL(t).indexOf(`data:${t}`)}catch{return!1}}(t);default:return!0}}(t):Oe(t);ve[t]=e}return ve[t]}function Oe(t){const e=globalThis.loaders?.imageFormatsNode||["image/png","image/jpeg","image/gif"],r=globalThis.loaders?.parseImageNode;return Boolean(r)&&e.includes(t)}const Ge="EXT_texture_webp",Re=Ge;function De(t,e){const r=new Pt(t);if(!Fe("image/webp")){if(r.getRequiredExtensions().includes(Ge))throw new Error(`gltf: Required extension ${Ge} not supported by browser`);return}const{json:s}=r;for(const n of s.textures||[]){const t=r.getObjectExtension(n,Ge);t&&(n.source=t.source),r.removeObjectExtension(n,Ge)}r.removeExtension(Ge)}const Se="KHR_texture_basisu",Le=Se;function Ne(t,e){const r=new Pt(t),{json:s}=r;for(const n of s.textures||[]){const t=r.getObjectExtension(n,Se);t&&(n.source=t.source,r.removeObjectExtension(n,Se))}r.removeExtension(Se)}const Je="4.2.1",Ue={dataType:null,batchType:null,name:"Draco",id:"draco",module:"draco",version:Je,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};function He(t){switch(t.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}function je(t,e,r){const s=He(e.value),n=r||function(t){const e={};"byteOffset"in t&&(e.byteOffset=t.byteOffset.toString(10));"byteStride"in t&&(e.byteStride=t.byteStride.toString(10));"normalized"in t&&(e.normalized=t.normalized.toString());return e}(e);return{name:t,type:{type:"fixed-size-list",listSize:e.size,children:[{name:"value",type:s}]},nullable:!1,metadata:n}}function Pe(t,e,r){return je(t,e,r?Ke(r.metadata):void 0)}function Ke(t){Object.entries(t);const e={};for(const r in t)e[`${r}.string`]=JSON.stringify(t[r]);return e}const Qe={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},We={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Xe{draco;decoder;metadataQuerier;constructor(t){this.draco=t,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(t,e={}){const r=new this.draco.DecoderBuffer;r.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);const s=this.decoder.GetEncodedGeometryType(r),n=s===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let t;switch(s){case this.draco.TRIANGULAR_MESH:t=this.decoder.DecodeBufferToMesh(r,n);break;case this.draco.POINT_CLOUD:t=this.decoder.DecodeBufferToPointCloud(r,n);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!t.ok()||!n.ptr){const e=`DRACO decompression failed: ${t.error_msg()}`;throw new Error(e)}const i=this._getDracoLoaderData(n,s,e),o=this._getMeshData(n,i,e),a=function(t){let e=1/0,r=1/0,s=1/0,n=-1/0,i=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let u=0;u<c;u+=3){const t=a[u],c=a[u+1],h=a[u+2];e=t<e?t:e,r=c<r?c:r,s=h<s?h:s,n=t>n?t:n,i=c>i?c:i,o=h>o?h:o}return[[e,r,s],[n,i,o]]}(o.attributes),c=function(t,e,r){const s=Ke(e.metadata),n=[],i=function(t){const e={};for(const r in t){const s=t[r];e[s.name||"undefined"]=s}return e}(e.attributes);for(const o in t){const e=Pe(o,t[o],i[o]);n.push(e)}if(r){const t=Pe("indices",r);n.push(t)}return{fields:n,metadata:s}}(o.attributes,i,o.indices);return{loader:"draco",loaderData:i,header:{vertexCount:n.num_points(),boundingBox:a},...o,schema:c}}finally{this.draco.destroy(r),n&&this.draco.destroy(n)}}_getDracoLoaderData(t,e,r){const s=this._getTopLevelMetadata(t),n=this._getDracoAttributes(t,r);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:s,attributes:n}}_getDracoAttributes(t,e){const r={};for(let s=0;s<t.num_attributes();s++){const n=this.decoder.GetAttribute(t,s),i=this._getAttributeMetadata(t,s);r[n.unique_id()]={unique_id:n.unique_id(),attribute_type:n.attribute_type(),data_type:n.data_type(),num_components:n.num_components(),byte_offset:n.byte_offset(),byte_stride:n.byte_stride(),normalized:n.normalized(),attribute_index:s,metadata:i};const o=this._getQuantizationTransform(n,e);o&&(r[n.unique_id()].quantization_transform=o);const a=this._getOctahedronTransform(n,e);a&&(r[n.unique_id()].octahedron_transform=a)}return r}_getMeshData(t,e,r){const s=this._getMeshAttributes(e,t,r);if(!s.POSITION)throw new Error("DRACO: No position attribute found.");return t instanceof this.draco.Mesh?"triangle-strip"===r.topology?{topology:"triangle-strip",mode:4,attributes:s,indices:{value:this._getTriangleStripIndices(t),size:1}}:{topology:"triangle-list",mode:5,attributes:s,indices:{value:this._getTriangleListIndices(t),size:1}}:{topology:"point-list",mode:0,attributes:s}}_getMeshAttributes(t,e,r){const s={};for(const n of Object.values(t.attributes)){const t=this._deduceAttributeName(n,r);n.name=t;const i=this._getAttributeValues(e,n);if(i){const{value:e,size:r}=i;s[t]={value:e,size:r,byteOffset:n.byte_offset,byteStride:n.byte_stride,normalized:n.normalized}}}return s}_getTriangleListIndices(t){const e=3*t.num_faces(),r=4*e,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(t,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,e).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(t){const e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),function(t){const e=t.size(),r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=t.GetValue(s);return r}(e)}finally{this.draco.destroy(e)}}_getAttributeValues(t,e){const r=We[e.data_type];if(!r)return console.warn(`DRACO: Unsupported attribute type ${e.data_type}`),null;const s=e.num_components,n=t.num_points()*s,i=n*r.BYTES_PER_ELEMENT,o=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,r);let a;const c=this.draco._malloc(i);try{const s=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,s,o,i,c),a=new r(this.draco.HEAPF32.buffer,c,n).slice()}finally{this.draco._free(c)}return{value:a,size:s}}_deduceAttributeName(t,e){const r=t.unique_id;for(const[i,o]of Object.entries(e.extraAttributes||{}))if(o===r)return i;const s=t.attribute_type;for(const i in Qe){if(this.draco[i]===s)return Qe[i]}const n=e.attributeNameEntry||"name";return t.metadata[n]?t.metadata[n].string:`CUSTOM_ATTRIBUTE_${r}`}_getTopLevelMetadata(t){const e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}_getAttributeMetadata(t,e){const r=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(r)}_getDracoMetadata(t){if(!t||!t.ptr)return{};const e={},r=this.metadataQuerier.NumEntries(t);for(let s=0;s<r;s++){const r=this.metadataQuerier.GetEntryName(t,s);e[r]=this._getDracoMetadataField(t,r)}return e}_getDracoMetadataField(t,e){const r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,r);const s=function(t){const e=t.size(),r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=t.GetValue(s);return r}(r);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:s}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(t){const{quantizedAttributes:e=[],octahedronAttributes:r=[]}=t,s=[...e,...r];for(const n of s)this.decoder.SkipAttributeTransform(this.draco[n])}_getQuantizationTransform(t,e){const{quantizedAttributes:r=[]}=e,s=t.attribute_type();if(r.map((t=>this.decoder[t])).includes(s)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits(),range:e.range(),min_values:new Float32Array([1,2,3]).map((t=>e.min_value(t)))}}finally{this.draco.destroy(e)}}return null}_getOctahedronTransform(t,e){const{octahedronAttributes:r=[]}=e,s=t.attribute_type();if(r.map((t=>this.decoder[t])).includes(s)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits()}}finally{this.draco.destroy(e)}}return null}}const qe="https://www.gstatic.com/draco/versioned/decoders/1.5.6",Ve={DECODER:"draco_wasm_wrapper.js",DECODER_WASM:"draco_decoder.wasm",FALLBACK_DECODER:"draco_decoder.js",ENCODER:"draco_encoder.js"},Ye={[Ve.DECODER]:`${qe}/${Ve.DECODER}`,[Ve.DECODER_WASM]:`${qe}/${Ve.DECODER_WASM}`,[Ve.FALLBACK_DECODER]:`${qe}/${Ve.FALLBACK_DECODER}`,[Ve.ENCODER]:`https://raw.githubusercontent.com/google/draco/1.4.1/javascript/${Ve.ENCODER}`};let Ze;async function ze(t){const e=t.modules||{};return e.draco3d?Ze||=e.draco3d.createDecoderModule({}).then((t=>({draco:t}))):Ze||=async function(t){let e,r;if("js"===(t.draco&&t.draco.decoderType))e=await W(Ye[Ve.FALLBACK_DECODER],"draco",t,Ve.FALLBACK_DECODER);else[e,r]=await Promise.all([await W(Ye[Ve.DECODER],"draco",t,Ve.DECODER),await W(Ye[Ve.DECODER_WASM],"draco",t,Ve.DECODER_WASM)]);return e=e||globalThis.DracoDecoderModule,await function(t,e){const r={};e&&(r.wasmBinary=e);return new Promise((e=>{t({...r,onModuleLoaded:t=>e({draco:t})})}))}(e,r)}(t),await Ze}const $e={...Ue,parse:async function(t,e){const{draco:r}=await ze(e),s=new Xe(r);try{return s.parseSync(t,e?.draco)}finally{s.destroy()}}};function tr(t){const{buffer:e,size:r,count:s}=function(t){let e=t,r=1,s=0;t&&t.value&&(e=t.value,r=t.size||1);e&&(ArrayBuffer.isView(e)||(e=function(t,e,r=!1){if(!t)return null;if(Array.isArray(t))return new e(t);if(r&&!(t instanceof e))return new e(t);return t}(e,Float32Array)),s=e.length/r);return{buffer:e,size:r,count:s}}(t);return{value:e,size:r,byteOffset:0,count:s,type:(0,Ht.v7)(r),componentType:(0,Ht.rA)(e)}}const er="KHR_draco_mesh_compression",rr=er;function sr(t,e,r){const s=new Pt(t);for(const n of cr(s))s.getObjectExtension(n,er)}async function nr(t,e,r){if(!e?.gltf?.decompressMeshes)return;const s=new Pt(t),n=[];for(const i of cr(s))s.getObjectExtension(i,er)&&n.push(or(s,i,e,r));await Promise.all(n),s.removeExtension(er)}function ir(t,e={}){const r=new Pt(t);for(const s of r.json.meshes||[])ar(s,e),r.addRequiredExtension(er)}async function or(t,e,r,s){const n=t.getObjectExtension(e,er);if(!n)return;const i=t.getTypedArrayForBufferView(n.bufferView),o=(0,g._m)(i.buffer,i.byteOffset),a={...r};delete a["3d-tiles"];const c=await p(o,$e,a,s),u=function(t){const e={};for(const r in t){const s=t[r];if("indices"!==r){const t=tr(s);e[r]=t}}return e}(c.attributes);for(const[h,l]of Object.entries(u))if(h in e.attributes){const r=e.attributes[h],s=t.getAccessor(r);s?.min&&s?.max&&(l.min=s.min,l.max=s.max)}e.attributes=u,c.indices&&(e.indices=tr(c.indices)),t.removeObjectExtension(e,er),function(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}function ar(t,e,r=4,s,n){if(!s.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const i=s.DracoWriter.encodeSync({attributes:t}),o=n?.parseSync?.({attributes:t}),a=s._addFauxAttributes(o.attributes),c=s.addBufferView(i);return{primitives:[{attributes:a,mode:r,extensions:{[er]:{bufferView:c,attributes:a}}}]}}function*cr(t){for(const e of t.json.meshes||[])for(const t of e.primitives)yield t}Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const ur=globalThis.mathgl.config;function hr(t,{precision:e=ur.precision}={}){return t=function(t){return Math.round(t/ur.EPSILON)*ur.EPSILON}(t),`${parseFloat(t.toPrecision(e))}`}function lr(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fr(t,e,r){const s=ur.EPSILON;r&&(ur.EPSILON=r);try{if(t===e)return!0;if(lr(t)&&lr(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!fr(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=ur.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{ur.EPSILON=s}}class dr extends Array{clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}toArray(t=[],e=0){for(let r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:lr(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(ur)}formatString(t){let e="";for(let r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+hr(this[r],t);return`${t.printTypes?this.constructor.name:""}[${e}]`}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!fr(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,r){if(void 0===r)return this.lerp(this,t,e);for(let s=0;s<this.ELEMENTS;++s){const n=t[s],i="number"==typeof e?e:e[s];this[s]=n+r*(i-n)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(ur.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}get elements(){return this}}function Ar(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function mr(t,e,r=""){if(ur.debug&&!function(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}(t,e))throw new Error(`math.gl: ${r} some fields set to invalid numbers'`);return t}function gr(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class pr extends dr{get x(){return this[0]}set x(t){this[0]=Ar(t)}get y(){return this[1]}set y(t){this[1]=Ar(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let r=0;r<this.ELEMENTS;++r){const s=this[r]-t[r];e+=s*s}return Ar(e)}dot(t){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*t[r];return Ar(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return gr(t>=0&&t<this.ELEMENTS,"index is out of range"),Ar(this[t])}setComponent(t,e){return gr(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}let Br="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function _r(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yr(t,e,r){const s=e[0],n=e[1],i=e[2];return t[0]=s*r[0]+n*r[3]+i*r[6],t[1]=s*r[1]+n*r[4]+i*r[7],t[2]=s*r[2]+n*r[5]+i*r[8],t}!function(){const t=function(){const t=new Br(3);return Br!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();const br=[0,0,0];let Cr;class wr extends pr{static get ZERO(){return Cr||(Cr=new wr(0,0,0),Object.freeze(Cr)),Cr}constructor(t=0,e=0,r=0){super(-0,-0,-0),1===arguments.length&&lr(t)?this.copy(t):(ur.debug&&(Ar(t),Ar(e),Ar(r)),this[0]=t,this[1]=e,this[2]=r)}set(t,e,r){return this[0]=t,this[1]=e,this[2]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return ur.debug&&(Ar(t.x),Ar(t.y),Ar(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=Ar(t)}angle(t){return function(t,e){const r=t[0],s=t[1],n=t[2],i=e[0],o=e[1],a=e[2],c=Math.sqrt((r*r+s*s+n*n)*(i*i+o*o+a*a)),u=c&&_r(t,e)/c;return Math.acos(Math.min(Math.max(u,-1),1))}(this,t)}cross(t){return function(t,e,r){const s=e[0],n=e[1],i=e[2],o=r[0],a=r[1],c=r[2];t[0]=n*c-i*a,t[1]=i*o-s*c,t[2]=s*a-n*o}(this,this,t),this.check()}rotateX({radians:t,origin:e=br}){return function(t,e,r,s){const n=[],i=[];n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],i[0]=n[0],i[1]=n[1]*Math.cos(s)-n[2]*Math.sin(s),i[2]=n[1]*Math.sin(s)+n[2]*Math.cos(s),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2]}(this,this,e,t),this.check()}rotateY({radians:t,origin:e=br}){return function(t,e,r,s){const n=[],i=[];n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],i[0]=n[2]*Math.sin(s)+n[0]*Math.cos(s),i[1]=n[1],i[2]=n[2]*Math.cos(s)-n[0]*Math.sin(s),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2]}(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=br}){return function(t,e,r,s){const n=[],i=[];n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],i[0]=n[0]*Math.cos(s)-n[1]*Math.sin(s),i[1]=n[0]*Math.sin(s)+n[1]*Math.cos(s),i[2]=n[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2]}(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return function(t,e,r){const s=e[0],n=e[1],i=e[2];let o=r[3]*s+r[7]*n+r[11]*i+r[15];o=o||1,t[0]=(r[0]*s+r[4]*n+r[8]*i+r[12])/o,t[1]=(r[1]*s+r[5]*n+r[9]*i+r[13])/o,t[2]=(r[2]*s+r[6]*n+r[10]*i+r[14])/o}(this,this,t),this.check()}transformAsVector(t){return function(t,e,r){const s=e[0],n=e[1],i=e[2],o=r[3]*s+r[7]*n+r[11]*i||1;t[0]=(r[0]*s+r[4]*n+r[8]*i)/o,t[1]=(r[1]*s+r[5]*n+r[9]*i)/o,t[2]=(r[2]*s+r[6]*n+r[10]*i)/o}(this,this,t),this.check()}transformByMatrix3(t){return yr(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,r){const s=e[0],n=e[1];t[0]=r[0]*s+r[2]*n,t[1]=r[1]*s+r[3]*n,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return function(t,e,r){const s=r[0],n=r[1],i=r[2],o=r[3],a=e[0],c=e[1],u=e[2];let h=n*u-i*c,l=i*a-s*u,f=s*c-n*a,d=n*f-i*l,A=i*h-s*f,m=s*l-n*h;const g=2*o;h*=g,l*=g,f*=g,d*=2,A*=2,m*=2,t[0]=a+h+d,t[1]=c+l+A,t[2]=u+f+m}(this,this,t),this.check()}}class Er extends dr{toString(){let t="[";if(ur.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let r=0;r<this.RANK;++r)t+=` ${this[r*this.RANK+e]}`}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=` ${this[e]}`}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,r){return this[e*this.RANK+t]=Ar(r),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const r=t*this.RANK;for(let s=0;s<this.RANK;++s)e[s]=this[r+s];return e}setColumn(t,e){const r=t*this.RANK;for(let s=0;s<this.RANK;++s)this[r+s]=e[s];return this}}function kr(t,e,r){const s=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=r[0],d=r[1],A=r[2],m=r[3],g=r[4],p=r[5],B=r[6],_=r[7],y=r[8];return t[0]=f*s+d*o+A*u,t[1]=f*n+d*a+A*h,t[2]=f*i+d*c+A*l,t[3]=m*s+g*o+p*u,t[4]=m*n+g*a+p*h,t[5]=m*i+g*c+p*l,t[6]=B*s+_*o+y*u,t[7]=B*n+_*a+y*h,t[8]=B*i+_*c+y*l,t}function Mr(t,e,r){const s=r[0],n=r[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}!function(){const t=function(){const t=new Br(2);return Br!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var xr;!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(xr||(xr={}));const Tr=Object.freeze([1,0,0,0,1,0,0,0,1]);class Ir extends Er{static get IDENTITY(){return function(){Fr||(Fr=new Ir,Object.freeze(Fr));return Fr}()}static get ZERO(){return function(){vr||(vr=new Ir([0,0,0,0,0,0,0,0,0]),Object.freeze(vr));return vr}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return xr}constructor(t,...e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):e.length>0?this.copy([t,...e]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(Tr)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){const r=e[0],s=e[1],n=e[2],i=e[3],o=r+r,a=s+s,c=n+n,u=r*o,h=s*o,l=s*a,f=n*o,d=n*a,A=n*c,m=i*o,g=i*a,p=i*c;t[0]=1-l-A,t[3]=h-p,t[6]=f+g,t[1]=h+p,t[4]=1-u-A,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-u-l}(this,t),this.check()}set(t,e,r,s,n,i,o,a,c){return this[0]=t,this[1]=e,this[2]=r,this[3]=s,this[4]=n,this[5]=i,this[6]=o,this[7]=a,this[8]=c,this.check()}setRowMajor(t,e,r,s,n,i,o,a,c){return this[0]=t,this[1]=s,this[2]=o,this[3]=e,this[4]=n,this[5]=a,this[6]=r,this[7]=i,this[8]=c,this.check()}determinant(){return function(t){const e=t[0],r=t[1],s=t[2],n=t[3],i=t[4],o=t[5],a=t[6],c=t[7],u=t[8];return e*(u*i-o*c)+r*(-u*n+o*a)+s*(c*n-i*a)}(this)}transpose(){return function(t,e){if(t===e){const r=e[1],s=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=s,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){const r=e[0],s=e[1],n=e[2],i=e[3],o=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=h*o-a*u,f=-h*i+a*c,d=u*i-o*c;let A=r*l+s*f+n*d;A&&(A=1/A,t[0]=l*A,t[1]=(-h*s+n*u)*A,t[2]=(a*s-n*o)*A,t[3]=f*A,t[4]=(h*r-n*c)*A,t[5]=(-a*r+n*i)*A,t[6]=d*A,t[7]=(-u*r+s*c)*A,t[8]=(o*r-s*i)*A)}(this,this),this.check()}multiplyLeft(t){return kr(this,t,this),this.check()}multiplyRight(t){return kr(this,this,t),this.check()}rotate(t){return function(t,e,r){const s=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=Math.sin(r),d=Math.cos(r);t[0]=d*s+f*o,t[1]=d*n+f*a,t[2]=d*i+f*c,t[3]=d*o-f*s,t[4]=d*a-f*n,t[5]=d*c-f*i,t[6]=u,t[7]=h,t[8]=l}(this,this,t),this.check()}scale(t){return Array.isArray(t)?Mr(this,this,t):Mr(this,this,[t,t]),this.check()}translate(t){return function(t,e,r){const s=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=r[0],d=r[1];t[0]=s,t[1]=n,t[2]=i,t[3]=o,t[4]=a,t[5]=c,t[6]=f*s+d*o+u,t[7]=f*n+d*a+h,t[8]=f*i+d*c+l}(this,this,t),this.check()}transform(t,e){let r;switch(t.length){case 2:r=function(t,e,r){const s=e[0],n=e[1];return t[0]=r[0]*s+r[3]*n+r[6],t[1]=r[1]*s+r[4]*n+r[7],t}(e||[-0,-0],t,this);break;case 3:r=yr(e||[-0,-0,-0],t,this);break;case 4:r=function(t,e,r){const s=e[0],n=e[1],i=e[2];return t[0]=r[0]*s+r[3]*n+r[6]*i,t[1]=r[1]*s+r[4]*n+r[7]*i,t[2]=r[2]*s+r[5]*n+r[8]*i,t[3]=e[3],t}(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return mr(r,t.length),r}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let vr,Fr=null;var Or=r(7897);const Gr="KHR_texture_transform",Rr=Gr,Dr=new wr,Sr=new Ir,Lr=new Ir;async function Nr(t,e){if(!new Pt(t).hasExtension(Gr)||!e.gltf?.loadBuffers)return;const r=t.json.materials||[];for(let s=0;s<r.length;s++)Jr(s,t)}function Jr(t,e){const r=e.json.materials?.[t],s=[r?.pbrMetallicRoughness?.baseColorTexture,r?.emissiveTexture,r?.normalTexture,r?.occlusionTexture,r?.pbrMetallicRoughness?.metallicRoughnessTexture],n=[];for(const i of s)i&&i?.extensions?.[Gr]&&Ur(e,t,i,n)}function Ur(t,e,r,s){const n=function(t,e){const r=t.extensions?.[Gr],{texCoord:s=0}=t,{texCoord:n=s}=r,i=-1!==e.findIndex((([t,e])=>t===s&&e===n));if(!i){const i=function(t){const{offset:e=[0,0],rotation:r=0,scale:s=[1,1]}=t,n=(new Ir).set(1,0,0,0,1,0,e[0],e[1],1),i=Sr.set(Math.cos(r),Math.sin(r),0,-Math.sin(r),Math.cos(r),0,0,0,1),o=Lr.set(s[0],0,0,0,s[1],0,0,0,1);return n.multiplyRight(i).multiplyRight(o)}(r);return s!==n&&(t.texCoord=n),e.push([s,n]),{originalTexCoord:s,texCoord:n,matrix:i}}return null}(r,s);if(!n)return;const i=t.json.meshes||[];for(const o of i)for(const r of o.primitives){const s=r.material;Number.isFinite(s)&&e===s&&Hr(t,r,n)}}function Hr(t,e,r){const{originalTexCoord:s,texCoord:n,matrix:i}=r,o=e.attributes[`TEXCOORD_${s}`];if(Number.isFinite(o)){const r=t.json.accessors?.[o];if(r&&r.bufferView){const o=t.json.bufferViews?.[r.bufferView];if(o){const{arrayBuffer:a,byteOffset:c}=t.buffers[o.buffer],u=(c||0)+(r.byteOffset||0)+(o.byteOffset||0),{ArrayType:h,length:l}=(0,Ht.aF)(r,o),f=Or.E9[r.componentType],d=Or.$j[r.type],A=o.byteStride||f*d,m=new Float32Array(l);for(let t=0;t<r.count;t++){const e=new h(a,u+t*A,2);Dr.set(e[0],e[1],1),Dr.transformByMatrix3(i),m.set([Dr[0],Dr[1]],t*d)}s===n?function(t,e,r,s){t.componentType=5126,r.push({arrayBuffer:s.buffer,byteOffset:0,byteLength:s.buffer.byteLength}),e.buffer=r.length-1,e.byteLength=s.buffer.byteLength,e.byteOffset=0,delete e.byteStride}(r,o,t.buffers,m):function(t,e,r,s,n){s.buffers.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength});const i=s.json.bufferViews;if(!i)return;i.push({buffer:s.buffers.length-1,byteLength:n.buffer.byteLength,byteOffset:0});const o=s.json.accessors;if(!o)return;o.push({bufferView:i?.length-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),r.attributes[`TEXCOORD_${t}`]=o.length-1}(n,r,e,t,m)}}}}const jr="KHR_lights_punctual",Pr=jr;async function Kr(t){const e=new Pt(t),{json:r}=e,s=e.getExtension(jr);s&&(e.json.lights=s.lights,e.removeExtension(jr));for(const n of r.nodes||[]){const t=e.getObjectExtension(n,jr);t&&(n.light=t.light),e.removeObjectExtension(n,jr)}}async function Qr(t){const e=new Pt(t),{json:r}=e;if(r.lights){const t=e.addExtension(jr);(0,kt.v)(!t.lights),t.lights=r.lights,delete r.lights}if(e.json.lights){for(const t of e.json.lights){const r=t.node;e.addObjectExtension(r,jr,t)}delete e.json.lights}}const Wr="KHR_materials_unlit",Xr=Wr;async function qr(t){const e=new Pt(t),{json:r}=e;for(const s of r.materials||[]){s.extensions&&s.extensions.KHR_materials_unlit&&(s.unlit=!0),e.removeObjectExtension(s,Wr)}e.removeExtension(Wr)}function Vr(t){const e=new Pt(t),{json:r}=e;if(e.materials)for(const s of r.materials||[])s.unlit&&(delete s.unlit,e.addObjectExtension(s,Wr,{}),e.addExtension(Wr))}const Yr="KHR_techniques_webgl",Zr=Yr;async function zr(t){const e=new Pt(t),{json:r}=e,s=e.getExtension(Yr);if(s){const t=function(t,e){const{programs:r=[],shaders:s=[],techniques:n=[]}=t,i=new TextDecoder;return s.forEach((t=>{if(!Number.isFinite(t.bufferView))throw new Error("KHR_techniques_webgl: no shader code");t.code=i.decode(e.getTypedArrayForBufferView(t.bufferView))})),r.forEach((t=>{t.fragmentShader=s[t.fragmentShader],t.vertexShader=s[t.vertexShader]})),n.forEach((t=>{t.program=r[t.program]})),n}(s,e);for(const s of r.materials||[]){const r=e.getObjectExtension(s,Yr);r&&(s.technique=Object.assign({},r,t[r.technique]),s.technique.values=ts(s.technique,e)),e.removeObjectExtension(s,Yr)}e.removeExtension(Yr)}}async function $r(t,e){}function ts(t,e){const r=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach((e=>{t.uniforms[e].value&&!(e in r)&&(r[e]=t.uniforms[e].value)})),Object.keys(r).forEach((t=>{"object"==typeof r[t]&&void 0!==r[t].index&&(r[t].texture=e.getTexture(r[t].index))})),r}const es="EXT_feature_metadata",rs=es;async function ss(t,e){!function(t,e){if(!e.gltf?.loadBuffers)return;const r=t.getExtension(es);if(!r)return;e.gltf?.loadImages&&function(t,e){const r=e.schema;if(!r)return;const s=r.classes,{featureTextures:n}=e;if(s&&n)for(const i in s){const e=s[i],r=is(n,i);r&&as(t,r,e)}}(t,r);!function(t,e){const r=e.schema;if(!r)return;const s=r.classes,n=e.featureTables;if(s&&n)for(const i in s){const e=ns(n,i);e&&os(t,r,e)}}(t,r)}(new Pt(t),e)}function ns(t,e){for(const r in t){const s=t[r];if(s.class===e)return s}return null}function is(t,e){for(const r in t){const s=t[r];if(s.class===e)return s}return null}function os(t,e,r){if(!r.class)return;const s=e.classes?.[r.class];if(!s)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${r.class}`);const n=r.count;for(const i in s.properties){const o=s.properties[i],a=r.properties?.[i];if(a){const r=cs(t,e,o,n,a);a.data=r}}}function as(t,e,r){const s=e.class;for(const n in r.properties){const r=e?.properties?.[n];if(r){const e=us(t,r,s);r.data=e}}}function cs(t,e,r,s,n){let i=[];const o=n.bufferView,a=t.getTypedArrayForBufferView(o),c=function(t,e,r,s){if("ARRAY"===e.type&&void 0===e.componentCount&&void 0!==r.arrayOffsetBufferView)return Vt(t,r.arrayOffsetBufferView,r.offsetType||"UINT32",s);return null}(t,r,n,s),u=function(t,e,r,s){if(void 0!==r.stringOffsetBufferView)return Vt(t,r.stringOffsetBufferView,r.offsetType||"UINT32",s);return null}(t,0,n,s);return"STRING"===r.type||"STRING"===r.componentType?i=re(s,a,c,u):function(t){const e=["UINT8","INT16","UINT16","INT32","UINT32","INT64","UINT64","FLOAT32","FLOAT64"];return e.includes(t.type)||void 0!==t.componentType&&e.includes(t.componentType)}(r)&&(i=function(t,e,r,s){const n="ARRAY"===t.type,i=t.componentCount,o="SCALAR",a=t.componentType||t.type,c=qt(o,a),u=r.byteLength/c,h=Yt(r,o,a,u);if(n)return s?te(h,e,s,r.length,c):i?ee(h,e,i):[];return h}(r,s,a,c)),i}function us(t,e,r){const s=t.gltf.json;if(!s.meshes)return[];const n=[];for(const i of s.meshes)for(const s of i.primitives)hs(t,r,e,n,s);return n}function hs(t,e,r,s,n){const i=Zt(t,{channels:r.channels,...r.texture},n);i&&zt(t,e,i,s,n)}const ls=[n,s,i,o,a,c,h,l,f,u,d];function fs(t,e){const r=e?.gltf?.excludeExtensions||{};return!(t in r&&!r[t])}const ds="KHR_binary_glTF";const As={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},ms={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class gs{idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}};json;normalize(t,e){this.json=t.json;const r=t.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn(`glTF: Unknown version ${r.asset.version}`)}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),function(t){const e=new Pt(t),{json:r}=e;for(const s of r.images||[]){const t=e.getObjectExtension(s,ds);t&&Object.assign(s,t),e.removeObjectExtension(s,ds)}r.buffers&&r.buffers[0]&&delete r.buffers[0].uri,e.removeExtension(ds)}(t),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(t){for(const e in As)this._convertTopLevelObjectToArray(t,e)}_convertTopLevelObjectToArray(t,e){const r=t[e];if(r&&!Array.isArray(r)){t[e]=[];for(const s in r){const n=r[s];n.id=n.id||s;const i=t[e].length;t[e].push(n),this.idToIndexMap[e][s]=i}}}_convertObjectIdsToArrayIndices(t){for(const e in As)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));for(const e of t.textures)this._convertTextureIds(e);for(const e of t.meshes)this._convertMeshIds(e);for(const e of t.nodes)this._convertNodeIds(e);for(const e of t.scenes)this._convertSceneIds(e)}_convertTextureIds(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}_convertMeshIds(t){for(const e of t.primitives){const{attributes:t,indices:r,material:s}=e;for(const e in t)t[e]=this._convertIdToIndex(t[e],"accessor");r&&(e.indices=this._convertIdToIndex(r,"accessor")),s&&(e.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(t){t.children&&(t.children=t.children.map((t=>this._convertIdToIndex(t,"node")))),t.meshes&&(t.meshes=t.meshes.map((t=>this._convertIdToIndex(t,"mesh"))))}_convertSceneIds(t){t.nodes&&(t.nodes=t.nodes.map((t=>this._convertIdToIndex(t,"node"))))}_convertIdsToIndices(t,e){t[e]||(console.warn(`gltf v1: json doesn't contain attribute ${e}`),t[e]=[]);for(const r of t[e])for(const t in r){const e=r[t],s=this._convertIdToIndex(e,t);r[t]=s}}_convertIdToIndex(t,e){const r=ms[e];if(r in this.idToIndexMap){const s=this.idToIndexMap[r][t];if(!Number.isFinite(s))throw new Error(`gltf v1: failed to resolve ${e} with id ${t}`);return s}return t}_updateObjects(t){for(const e of this.json.buffers)delete e.type}_updateMaterial(t){for(const e of t.materials){e.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const r=e.values?.tex||e.values?.texture2d_0||e.values?.diffuseTex,s=t.textures.findIndex((t=>t.id===r));-1!==s&&(e.pbrMetallicRoughness.baseColorTexture={index:s})}}}async function ps(t,e,r=0,s,n){return function(t,e,r,s){s.uri&&(t.baseUri=s.uri);if(e instanceof ArrayBuffer&&!function(t,e=0,r={}){const s=new DataView(t),{magic:n=It}=r,i=s.getUint32(e,!1);return i===n||i===It}(e,r,s)){e=(new TextDecoder).decode(e)}if("string"==typeof e)t.json=m(e);else if(e instanceof ArrayBuffer){const n={};r=Lt(n,e,r,s.glb),(0,kt.v)("glTF"===n.type,`Invalid GLB magic string ${n.type}`),t._glb=n,t.json=n.json}else(0,kt.v)(!1,"GLTF: must be ArrayBuffer or string");const n=t.json.buffers||[];if(t.buffers=new Array(n.length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:e}=t._glb;t.buffers[0]={arrayBuffer:e[0].arrayBuffer,byteOffset:e[0].byteOffset,byteLength:e[0].byteLength}}const i=t.json.images||[];t.images=new Array(i.length).fill({})}(t,e,r,s),function(t,e={}){(new gs).normalize(t,e)}(t,{normalize:s?.gltf?.normalize}),function(t,e={},r){const s=ls.filter((t=>fs(t.name,e)));for(const n of s)n.preprocess?.(t,e,r)}(t,s,n),s?.gltf?.loadBuffers&&t.json.buffers&&await async function(t,e,r){const s=t.json.buffers||[];for(let n=0;n<s.length;++n){const i=s[n];if(i.uri){const{fetch:s}=r;(0,kt.v)(s);const o=Ut(i.uri,e),a=await(r?.fetch?.(o)),c=await(a?.arrayBuffer?.());t.buffers[n]={arrayBuffer:c,byteOffset:0,byteLength:c.byteLength},delete i.uri}else null===t.buffers[n]&&(t.buffers[n]={arrayBuffer:new ArrayBuffer(i.byteLength),byteOffset:0,byteLength:i.byteLength})}}(t,s,n),s?.gltf?.loadImages&&await async function(t,e,r){const s=function(t){const e=new Set,r=t.json.textures||[];for(const s of r)void 0!==s.source&&e.add(s.source);return Array.from(e).sort()}(t),n=t.json.images||[],i=[];for(const o of s)i.push(Bs(t,n[o],o,e,r));return await Promise.all(i)}(t,s,n),await async function(t,e={},r){const s=ls.filter((t=>fs(t.name,e)));for(const n of s)await(n.decode?.(t,e,r))}(t,s,n),t}async function Bs(t,e,r,s,n){let i;if(e.uri&&!e.hasOwnProperty("bufferView")){const t=Ut(e.uri,s),{fetch:r}=n,o=await r(t);i=await o.arrayBuffer(),e.bufferView={data:i}}if(Number.isFinite(e.bufferView)){const r=jt(t.json,t.buffers,e.bufferView);i=(0,g._m)(r.buffer,r.byteOffset,r.byteLength)}(0,kt.v)(i,"glTF image has no data");let o=await p(i,[H,Et],{...s,mimeType:e.mimeType,basis:s.basis||{format:wt()}},n);o&&o[0]&&(o={compressed:!0,mipmaps:!1,width:o[0].width,height:o[0].height,data:o[0]}),t.images=t.images||[],t.images[r]=o}const _s={dataType:null,batchType:null,name:"glTF",id:"gltf",module:"gltf",version:"4.2.1",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:async function(t,e={},r){(e={..._s.options,...e}).gltf={..._s.options.gltf,...e.gltf};const{byteOffset:s=0}=e;return await ps({},t,s,e,r)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0},log:console}}},9737:(t,e,r)=>{r.d(e,{R:()=>m});var s=r(2840),n=r(7885);const i={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},o={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},a=10240,c=10241,u=10242,h=10243,l=10497,f={magFilter:a,minFilter:c,wrapS:u,wrapT:h},d={[a]:9729,[c]:9986,[u]:l,[h]:l};class A{baseUri="";jsonUnprocessed;json;buffers=[];images=[];postProcess(t,e={}){const{json:r,buffers:n=[],images:i=[]}=t,{baseUri:o=""}=t;return(0,s.v)(r),this.baseUri=o,this.buffers=n,this.images=i,this.jsonUnprocessed=r,this.json=this._resolveTree(t.json,e),this.json}_resolveTree(t,e={}){const r={...t};return this.json=r,t.bufferViews&&(r.bufferViews=t.bufferViews.map(((t,e)=>this._resolveBufferView(t,e)))),t.images&&(r.images=t.images.map(((t,e)=>this._resolveImage(t,e)))),t.samplers&&(r.samplers=t.samplers.map(((t,e)=>this._resolveSampler(t,e)))),t.textures&&(r.textures=t.textures.map(((t,e)=>this._resolveTexture(t,e)))),t.accessors&&(r.accessors=t.accessors.map(((t,e)=>this._resolveAccessor(t,e)))),t.materials&&(r.materials=t.materials.map(((t,e)=>this._resolveMaterial(t,e)))),t.meshes&&(r.meshes=t.meshes.map(((t,e)=>this._resolveMesh(t,e)))),t.nodes&&(r.nodes=t.nodes.map(((t,e)=>this._resolveNode(t,e))),r.nodes=r.nodes.map(((t,e)=>this._resolveNodeChildren(t)))),t.skins&&(r.skins=t.skins.map(((t,e)=>this._resolveSkin(t,e)))),t.scenes&&(r.scenes=t.scenes.map(((t,e)=>this._resolveScene(t,e)))),"number"==typeof this.json.scene&&r.scenes&&(r.scene=r.scenes[this.json.scene]),r}getScene(t){return this._get(this.json.scenes,t)}getNode(t){return this._get(this.json.nodes,t)}getSkin(t){return this._get(this.json.skins,t)}getMesh(t){return this._get(this.json.meshes,t)}getMaterial(t){return this._get(this.json.materials,t)}getAccessor(t){return this._get(this.json.accessors,t)}getCamera(t){return this._get(this.json.cameras,t)}getTexture(t){return this._get(this.json.textures,t)}getSampler(t){return this._get(this.json.samplers,t)}getImage(t){return this._get(this.json.images,t)}getBufferView(t){return this._get(this.json.bufferViews,t)}getBuffer(t){return this._get(this.json.buffers,t)}_get(t,e){if("object"==typeof e)return e;const r=t&&t[e];return r||console.warn(`glTF file error: Could not find ${t}[${e}]`),r}_resolveScene(t,e){return{...t,id:t.id||`scene-${e}`,nodes:(t.nodes||[]).map((t=>this.getNode(t)))}}_resolveNode(t,e){const r={...t,id:t?.id||`node-${e}`};return void 0!==t.mesh&&(r.mesh=this.getMesh(t.mesh)),void 0!==t.camera&&(r.camera=this.getCamera(t.camera)),void 0!==t.skin&&(r.skin=this.getSkin(t.skin)),void 0!==t.meshes&&t.meshes.length&&(r.mesh=t.meshes.reduce(((t,e)=>{const r=this.getMesh(e);return t.id=r.id,t.primitives=t.primitives.concat(r.primitives),t}),{primitives:[]})),r}_resolveNodeChildren(t){return t.children&&(t.children=t.children.map((t=>this.getNode(t)))),t}_resolveSkin(t,e){const r="number"==typeof t.inverseBindMatrices?this.getAccessor(t.inverseBindMatrices):void 0;return{...t,id:t.id||`skin-${e}`,inverseBindMatrices:r}}_resolveMesh(t,e){const r={...t,id:t.id||`mesh-${e}`,primitives:[]};return t.primitives&&(r.primitives=t.primitives.map((t=>{const e={...t,attributes:{},indices:void 0,material:void 0},r=t.attributes;for(const s in r)e.attributes[s]=this.getAccessor(r[s]);return void 0!==t.indices&&(e.indices=this.getAccessor(t.indices)),void 0!==t.material&&(e.material=this.getMaterial(t.material)),e}))),r}_resolveMaterial(t,e){const r={...t,id:t.id||`material-${e}`};if(r.normalTexture&&(r.normalTexture={...r.normalTexture},r.normalTexture.texture=this.getTexture(r.normalTexture.index)),r.occlusionTexture&&(r.occlusionTexture={...r.occlusionTexture},r.occlusionTexture.texture=this.getTexture(r.occlusionTexture.index)),r.emissiveTexture&&(r.emissiveTexture={...r.emissiveTexture},r.emissiveTexture.texture=this.getTexture(r.emissiveTexture.index)),r.emissiveFactor||(r.emissiveFactor=r.emissiveTexture?[1,1,1]:[0,0,0]),r.pbrMetallicRoughness){r.pbrMetallicRoughness={...r.pbrMetallicRoughness};const t=r.pbrMetallicRoughness;t.baseColorTexture&&(t.baseColorTexture={...t.baseColorTexture},t.baseColorTexture.texture=this.getTexture(t.baseColorTexture.index)),t.metallicRoughnessTexture&&(t.metallicRoughnessTexture={...t.metallicRoughnessTexture},t.metallicRoughnessTexture.texture=this.getTexture(t.metallicRoughnessTexture.index))}return r}_resolveAccessor(t,e){const r=(s=t.componentType,o[s]);var s;const a=(c=t.type,i[c]);var c;const u=r*a,h={...t,id:t.id||`accessor-${e}`,bytesPerComponent:r,components:a,bytesPerElement:u,value:void 0,bufferView:void 0,sparse:void 0};if(void 0!==t.bufferView&&(h.bufferView=this.getBufferView(t.bufferView)),h.bufferView){const t=h.bufferView.buffer,{ArrayType:e,byteLength:r}=(0,n.aF)(h,h.bufferView),s=(h.bufferView.byteOffset||0)+(h.byteOffset||0)+t.byteOffset;let i=t.arrayBuffer.slice(s,s+r);h.bufferView.byteStride&&(i=this._getValueFromInterleavedBuffer(t,s,h.bufferView.byteStride,h.bytesPerElement,h.count)),h.value=new e(i)}return h}_getValueFromInterleavedBuffer(t,e,r,s,n){const i=new Uint8Array(n*s);for(let o=0;o<n;o++){const n=e+o*r;i.set(new Uint8Array(t.arrayBuffer.slice(n,n+s)),o*s)}return i.buffer}_resolveTexture(t,e){return{...t,id:t.id||`texture-${e}`,sampler:"number"==typeof t.sampler?this.getSampler(t.sampler):{id:"default-sampler",parameters:d},source:"number"==typeof t.source?this.getImage(t.source):void 0}}_resolveSampler(t,e){const r={id:t.id||`sampler-${e}`,...t,parameters:{}};for(const s in r){const t=this._enumSamplerParameter(s);void 0!==t&&(r.parameters[t]=r[s])}return r}_enumSamplerParameter(t){return f[t]}_resolveImage(t,e){const r={...t,id:t.id||`image-${e}`,image:null,bufferView:void 0!==t.bufferView?this.getBufferView(t.bufferView):void 0},s=this.images[e];return s&&(r.image=s),r}_resolveBufferView(t,e){const r=t.buffer,s=this.buffers[r].arrayBuffer;let n=this.buffers[r].byteOffset||0;t.byteOffset&&(n+=t.byteOffset);return{id:`bufferView-${e}`,...t,buffer:this.buffers[r],data:new Uint8Array(s,n,t.byteLength)}}_resolveCamera(t,e){const r={...t,id:t.id||`camera-${e}`};return r.perspective,r.orthographic,r}}function m(t,e){return(new A).postProcess(t,e)}},7897:(t,e,r)=>{r.d(e,{$j:()=>s,E9:()=>n});const s={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},n={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4}},7885:(t,e,r)=>{r.d(e,{aF:()=>d,rA:()=>f,v7:()=>l});var s=r(2840),n=r(7897);const i=["SCALAR","VEC2","VEC3","VEC4"],o=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],a=new Map(o),c={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},u={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},h={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function l(t){return i[t-1]||i[0]}function f(t){const e=a.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function d(t,e){const r=h[t.componentType],i=c[t.type],o=u[t.componentType],a=t.count*i,l=t.count*i*o;(0,s.v)(l>=0&&l<=e.byteLength);return{ArrayType:r,length:a,byteLength:l,componentByteSize:n.E9[t.componentType],numberOfComponentsInElement:n.$j[t.type]}}},2840:(t,e,r)=>{function s(t,e){if(!t)throw new Error(e||"assert failed: gltf")}r.d(e,{v:()=>s})},48:(t,e,r)=>{function s(t,e,r){if(r=r||t.byteLength,t.byteLength<r||e.byteLength<r)return!1;const s=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<s.length;++i)if(s[i]!==n[i])return!1;return!0}function n(...t){return function(t){const e=t.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),r=e.reduce(((t,e)=>t+e.byteLength),0),s=new Uint8Array(r);let n=0;for(const i of e)s.set(i,n),n+=i.byteLength;return s.buffer}(t)}function i(t,e,r){const s=void 0!==r?new Uint8Array(t).subarray(e,e+r):new Uint8Array(t).subarray(e);return new Uint8Array(s).buffer}r.d(e,{AQ:()=>n,YV:()=>s,_m:()=>i})},4976:(t,e,r)=>{function s(t,e){if(!t)throw new Error(e||"loader assertion failed.")}r.d(e,{v:()=>s})},7612:(t,e,r)=>{r.d(e,{Bd:()=>s});"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof global&&global,"undefined"!=typeof document&&document;const s=Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),n="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);n&&parseFloat(n[1])},5993:(t,e,r)=>{function s(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}r.d(e,{v:()=>s})},8503:(t,e,r)=>{r.d(e,{Bd:()=>s,Fr:()=>i,xD:()=>n});"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof global&&global,"undefined"!=typeof document&&document;const s="object"!=typeof process||"[object process]"!==String(process)||process.browser,n="function"==typeof importScripts,i="undefined"!=typeof window&&void 0!==window.orientation,o="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);o&&parseFloat(o[1])},5607:(t,e,r)=>{r.d(e,{Q:()=>n,x:()=>s});const s="latest";const n=(globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version)},8073:(t,e,r)=>{r.d(e,{a:()=>n});var s=r(4901);class n extends Array{clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}toArray(t=[],e=0){for(let r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:(0,s.cy)(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(s.$W)}formatString(t){let e="";for(let r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+(0,s.Fl)(this[r],t);return`${t.printTypes?this.constructor.name:""}[${e}]`}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!(0,s.aI)(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,r){if(void 0===r)return this.lerp(this,t,e);for(let s=0;s<this.ELEMENTS;++s){const n=t[s],i="number"==typeof e?e:e[s];this[s]=n+r*(i-n)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(s.$W.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}get elements(){return this}}},6213:(t,e,r)=>{r.d(e,{k:()=>_});var s=r(8073),n=r(3731),i=r(4901);class o extends s.a{toString(){let t="[";if(i.$W.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let r=0;r<this.RANK;++r)t+=` ${this[r*this.RANK+e]}`}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=` ${this[e]}`}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,r){return this[e*this.RANK+t]=(0,n.ws)(r),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const r=t*this.RANK;for(let s=0;s<this.RANK;++s)e[s]=this[r+s];return e}setColumn(t,e){const r=t*this.RANK;for(let s=0;s<this.RANK;++s)this[r+s]=e[s];return this}}var a=r(8225),c=r(741);function u(t,e,r){const s=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=e[9],d=e[10],A=e[11],m=e[12],g=e[13],p=e[14],B=e[15];let _=r[0],y=r[1],b=r[2],C=r[3];return t[0]=_*s+y*a+b*l+C*m,t[1]=_*n+y*c+b*f+C*g,t[2]=_*i+y*u+b*d+C*p,t[3]=_*o+y*h+b*A+C*B,_=r[4],y=r[5],b=r[6],C=r[7],t[4]=_*s+y*a+b*l+C*m,t[5]=_*n+y*c+b*f+C*g,t[6]=_*i+y*u+b*d+C*p,t[7]=_*o+y*h+b*A+C*B,_=r[8],y=r[9],b=r[10],C=r[11],t[8]=_*s+y*a+b*l+C*m,t[9]=_*n+y*c+b*f+C*g,t[10]=_*i+y*u+b*d+C*p,t[11]=_*o+y*h+b*A+C*B,_=r[12],y=r[13],b=r[14],C=r[15],t[12]=_*s+y*a+b*l+C*m,t[13]=_*n+y*c+b*f+C*g,t[14]=_*i+y*u+b*d+C*p,t[15]=_*o+y*h+b*A+C*B,t}const h=function(t,e,r,s,n){const i=1/Math.tan(e/2);if(t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){const e=1/(s-n);t[10]=(n+s)*e,t[14]=2*n*s*e}else t[10]=-1,t[14]=-2*s;return t};const l=function(t,e,r,s,n,i,o){const a=1/(e-r),c=1/(s-n),u=1/(i-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*a,t[13]=(n+s)*c,t[14]=(o+i)*u,t[15]=1,t};!function(){const t=function(){const t=new c.tb(2);return c.tb!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var f=r(2859);!function(){const t=function(){const t=new c.tb(4);return c.tb!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();var d;!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(d||(d={}));const A=45*Math.PI/180,m=1,g=.1,p=500,B=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class _ extends o{static get IDENTITY(){return function(){b||(b=new _,Object.freeze(b));return b}()}static get ZERO(){return function(){y||(y=new _([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(y));return y}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return d}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,r,s,n,i,o,a,c,u,h,l,f,d,A,m){return this[0]=t,this[1]=e,this[2]=r,this[3]=s,this[4]=n,this[5]=i,this[6]=o,this[7]=a,this[8]=c,this[9]=u,this[10]=h,this[11]=l,this[12]=f,this[13]=d,this[14]=A,this[15]=m,this.check()}setRowMajor(t,e,r,s,n,i,o,a,c,u,h,l,f,d,A,m){return this[0]=t,this[1]=n,this[2]=c,this[3]=f,this[4]=e,this[5]=i,this[6]=u,this[7]=d,this[8]=r,this[9]=o,this[10]=h,this[11]=A,this[12]=s,this[13]=a,this[14]=l,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(B)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){const r=e[0],s=e[1],n=e[2],i=e[3],o=r+r,a=s+s,c=n+n,u=r*o,h=s*o,l=s*a,f=n*o,d=n*a,A=n*c,m=i*o,g=i*a,p=i*c;t[0]=1-l-A,t[1]=h+p,t[2]=f-g,t[3]=0,t[4]=h-p,t[5]=1-u-A,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:r,bottom:s,top:n,near:i=g,far:o=p}=t;return o===1/0?function(t,e,r,s,n,i){const o=2*i/(r-e),a=2*i/(n-s),c=(r+e)/(r-e),u=(n+s)/(n-s),h=-1,l=-1,f=-2*i;t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=u,t[10]=h,t[11]=l,t[12]=0,t[13]=0,t[14]=f,t[15]=0}(this,e,r,s,n,i):function(t,e,r,s,n,i,o){const a=1/(r-e),c=1/(n-s),u=1/(i-o);t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(n+s)*c,t[10]=(o+i)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*u,t[15]=0}(this,e,r,s,n,i,o),this.check()}lookAt(t){const{eye:e,center:r=[0,0,0],up:s=[0,1,0]}=t;return function(t,e,r,s){let n,i,o,a,u,h,l,f,d,A;const m=e[0],g=e[1],p=e[2],B=s[0],_=s[1],y=s[2],b=r[0],C=r[1],w=r[2];Math.abs(m-b)<c.p8&&Math.abs(g-C)<c.p8&&Math.abs(p-w)<c.p8?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(f=m-b,d=g-C,A=p-w,n=1/Math.sqrt(f*f+d*d+A*A),f*=n,d*=n,A*=n,i=_*A-y*d,o=y*f-B*A,a=B*d-_*f,n=Math.sqrt(i*i+o*o+a*a),n?(n=1/n,i*=n,o*=n,a*=n):(i=0,o=0,a=0),u=d*a-A*o,h=A*i-f*a,l=f*o-d*i,n=Math.sqrt(u*u+h*h+l*l),n?(n=1/n,u*=n,h*=n,l*=n):(u=0,h=0,l=0),t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=o,t[5]=h,t[6]=d,t[7]=0,t[8]=a,t[9]=l,t[10]=A,t[11]=0,t[12]=-(i*m+o*g+a*p),t[13]=-(u*m+h*g+l*p),t[14]=-(f*m+d*g+A*p),t[15]=1)}(this,e,r,s),this.check()}ortho(t){const{left:e,right:r,bottom:s,top:n,near:i=g,far:o=p}=t;return l(this,e,r,s,n,i,o),this.check()}orthographic(t){const{fovy:e=A,aspect:r=m,focalDistance:s=1,near:n=g,far:i=p}=t;C(e);const o=e/2,a=s*Math.tan(o),c=a*r;return this.ortho({left:-c,right:c,bottom:-a,top:a,near:n,far:i})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:r=1,near:s=.1,far:n=500}=t;return C(e),h(this,e,r,s,n),this.check()}determinant(){return function(t){const e=t[0],r=t[1],s=t[2],n=t[3],i=t[4],o=t[5],a=t[6],c=t[7],u=t[8],h=t[9],l=t[10],f=t[11],d=t[12],A=t[13],m=t[14],g=e*o-r*i,p=e*a-s*i,B=r*a-s*o,_=u*A-h*d,y=u*m-l*d,b=h*m-l*A;return c*(e*b-r*y+s*_)-n*(i*b-o*y+a*_)+t[15]*(u*B-h*p+l*g)-f*(d*B-A*p+m*g)}(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const r=this.getScale(e),s=1/r[0],n=1/r[1],i=1/r[2];return t[0]=this[0]*s,t[1]=this[1]*n,t[2]=this[2]*i,t[3]=0,t[4]=this[4]*s,t[5]=this[5]*n,t[6]=this[6]*i,t[7]=0,t[8]=this[8]*s,t[9]=this[9]*n,t[10]=this[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const r=this.getScale(e),s=1/r[0],n=1/r[1],i=1/r[2];return t[0]=this[0]*s,t[1]=this[1]*n,t[2]=this[2]*i,t[3]=this[4]*s,t[4]=this[5]*n,t[5]=this[6]*i,t[6]=this[8]*s,t[7]=this[9]*n,t[8]=this[10]*i,t}transpose(){return function(t,e){if(t===e){const r=e[1],s=e[2],n=e[3],i=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=i,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return function(t,e){const r=e[0],s=e[1],n=e[2],i=e[3],o=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],f=e[10],d=e[11],A=e[12],m=e[13],g=e[14],p=e[15],B=r*a-s*o,_=r*c-n*o,y=r*u-i*o,b=s*c-n*a,C=s*u-i*a,w=n*u-i*c,E=h*m-l*A,k=h*g-f*A,M=h*p-d*A,x=l*g-f*m,T=l*p-d*m,I=f*p-d*g;let v=B*I-_*T+y*x+b*M-C*k+w*E;v&&(v=1/v,t[0]=(a*I-c*T+u*x)*v,t[1]=(n*T-s*I-i*x)*v,t[2]=(m*w-g*C+p*b)*v,t[3]=(f*C-l*w-d*b)*v,t[4]=(c*M-o*I-u*k)*v,t[5]=(r*I-n*M+i*k)*v,t[6]=(g*y-A*w-p*_)*v,t[7]=(h*w-f*y+d*_)*v,t[8]=(o*T-a*M+u*E)*v,t[9]=(s*M-r*T-i*E)*v,t[10]=(A*C-m*y+p*B)*v,t[11]=(l*y-h*C-d*B)*v,t[12]=(a*k-o*x-c*E)*v,t[13]=(r*x-s*k+n*E)*v,t[14]=(m*_-A*b-g*B)*v,t[15]=(h*b-l*_+f*B)*v)}(this,this),this.check()}multiplyLeft(t){return u(this,t,this),this.check()}multiplyRight(t){return u(this,this,t),this.check()}rotateX(t){return function(t,e,r){const s=Math.sin(r),n=Math.cos(r),i=e[4],o=e[5],a=e[6],c=e[7],u=e[8],h=e[9],l=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*n+u*s,t[5]=o*n+h*s,t[6]=a*n+l*s,t[7]=c*n+f*s,t[8]=u*n-i*s,t[9]=h*n-o*s,t[10]=l*n-a*s,t[11]=f*n-c*s}(this,this,t),this.check()}rotateY(t){return function(t,e,r){const s=Math.sin(r),n=Math.cos(r),i=e[0],o=e[1],a=e[2],c=e[3],u=e[8],h=e[9],l=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n-u*s,t[1]=o*n-h*s,t[2]=a*n-l*s,t[3]=c*n-f*s,t[8]=i*s+u*n,t[9]=o*s+h*n,t[10]=a*s+l*n,t[11]=c*s+f*n}(this,this,t),this.check()}rotateZ(t){return function(t,e,r){const s=Math.sin(r),n=Math.cos(r),i=e[0],o=e[1],a=e[2],c=e[3],u=e[4],h=e[5],l=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n+u*s,t[1]=o*n+h*s,t[2]=a*n+l*s,t[3]=c*n+f*s,t[4]=u*n-i*s,t[5]=h*n-o*s,t[6]=l*n-a*s,t[7]=f*n-c*s}(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,r,s){let n,i,o,a,u,h,l,f,d,A,m,g,p,B,_,y,b,C,w,E,k,M,x,T,I=s[0],v=s[1],F=s[2],O=Math.sqrt(I*I+v*v+F*F);O<c.p8||(O=1/O,I*=O,v*=O,F*=O,i=Math.sin(r),n=Math.cos(r),o=1-n,a=e[0],u=e[1],h=e[2],l=e[3],f=e[4],d=e[5],A=e[6],m=e[7],g=e[8],p=e[9],B=e[10],_=e[11],y=I*I*o+n,b=v*I*o+F*i,C=F*I*o-v*i,w=I*v*o-F*i,E=v*v*o+n,k=F*v*o+I*i,M=I*F*o+v*i,x=v*F*o-I*i,T=F*F*o+n,t[0]=a*y+f*b+g*C,t[1]=u*y+d*b+p*C,t[2]=h*y+A*b+B*C,t[3]=l*y+m*b+_*C,t[4]=a*w+f*E+g*k,t[5]=u*w+d*E+p*k,t[6]=h*w+A*E+B*k,t[7]=l*w+m*E+_*k,t[8]=a*M+f*x+g*T,t[9]=u*M+d*x+p*T,t[10]=h*M+A*x+B*T,t[11]=l*M+m*x+_*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return function(t,e,r){const s=r[0],n=r[1],i=r[2];t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return function(t,e,r){const s=r[0],n=r[1],i=r[2];let o,a,c,u,h,l,f,d,A,m,g,p;e===t?(t[12]=e[0]*s+e[4]*n+e[8]*i+e[12],t[13]=e[1]*s+e[5]*n+e[9]*i+e[13],t[14]=e[2]*s+e[6]*n+e[10]*i+e[14],t[15]=e[3]*s+e[7]*n+e[11]*i+e[15]):(o=e[0],a=e[1],c=e[2],u=e[3],h=e[4],l=e[5],f=e[6],d=e[7],A=e[8],m=e[9],g=e[10],p=e[11],t[0]=o,t[1]=a,t[2]=c,t[3]=u,t[4]=h,t[5]=l,t[6]=f,t[7]=d,t[8]=A,t[9]=m,t[10]=g,t[11]=p,t[12]=o*s+h*n+A*i+e[12],t[13]=a*s+l*n+m*i+e[13],t[14]=c*s+f*n+g*i+e[14],t[15]=u*s+d*n+p*i+e[15])}(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=function(t,e,r){const s=e[0],n=e[1],i=e[2],o=e[3];return t[0]=r[0]*s+r[4]*n+r[8]*i+r[12]*o,t[1]=r[1]*s+r[5]*n+r[9]*i+r[13]*o,t[2]=r[2]*s+r[6]*n+r[10]*i+r[14]*o,t[3]=r[3]*s+r[7]*n+r[11]*i+r[15]*o,t}(e||[-0,-0,-0,-0],t,this),(0,n.qk)(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:r}=t;let s;switch(r){case 2:s=function(t,e,r){const s=e[0],n=e[1];return t[0]=r[0]*s+r[4]*n+r[12],t[1]=r[1]*s+r[5]*n+r[13],t}(e||[-0,-0],t,this);break;case 3:s=(0,f.Z0)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,n.qk)(s,t.length),s}transformAsVector(t,e){let r;switch(t.length){case 2:r=(0,a.B$)(e||[-0,-0],t,this);break;case 3:r=(0,a.cL)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,n.qk)(r,t.length),r}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,r){return this.identity().translate([t,e,r])}}let y,b;function C(t){if(t>2*Math.PI)throw Error("expected radians")}},7909:(t,e,r)=>{r.d(e,{P:()=>f});var s=r(8073),n=r(3731);function i(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class o extends s.a{get x(){return this[0]}set x(t){this[0]=(0,n.ws)(t)}get y(){return this[1]}set y(t){this[1]=(0,n.ws)(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let r=0;r<this.ELEMENTS;++r){const s=this[r]-t[r];e+=s*s}return(0,n.ws)(e)}dot(t){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*t[r];return(0,n.ws)(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return i(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,n.ws)(this[t])}setComponent(t,e){return i(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var a=r(4901),c=r(2859),u=r(8225);const h=[0,0,0];let l;class f extends o{static get ZERO(){return l||(l=new f(0,0,0),Object.freeze(l)),l}constructor(t=0,e=0,r=0){super(-0,-0,-0),1===arguments.length&&(0,a.cy)(t)?this.copy(t):(a.$W.debug&&((0,n.ws)(t),(0,n.ws)(e),(0,n.ws)(r)),this[0]=t,this[1]=e,this[2]=r)}set(t,e,r){return this[0]=t,this[1]=e,this[2]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return a.$W.debug&&((0,n.ws)(t.x),(0,n.ws)(t.y),(0,n.ws)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=(0,n.ws)(t)}angle(t){return(0,c.g7)(this,t)}cross(t){return(0,c.$A)(this,this,t),this.check()}rotateX({radians:t,origin:e=h}){return(0,c.eL)(this,this,e,t),this.check()}rotateY({radians:t,origin:e=h}){return(0,c.Z8)(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=h}){return(0,c.x6)(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return(0,c.Z0)(this,this,t),this.check()}transformAsVector(t){return(0,u.cL)(this,this,t),this.check()}transformByMatrix3(t){return(0,c.ei)(this,this,t),this.check()}transformByMatrix2(t){return(0,u.J4)(this,this,t),this.check()}transformByQuaternion(t){return(0,c.gL)(this,this,t),this.check()}}},741:(t,e,r)=>{r.d(e,{p8:()=>s,tb:()=>n});const s=1e-6;let n="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI},2859:(t,e,r)=>{r.d(e,{$A:()=>i,Z0:()=>o,Z8:()=>h,eL:()=>u,ei:()=>a,g7:()=>f,gL:()=>c,x6:()=>l});var s=r(741);function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function i(t,e,r){const s=e[0],n=e[1],i=e[2],o=r[0],a=r[1],c=r[2];return t[0]=n*c-i*a,t[1]=i*o-s*c,t[2]=s*a-n*o,t}function o(t,e,r){const s=e[0],n=e[1],i=e[2];let o=r[3]*s+r[7]*n+r[11]*i+r[15];return o=o||1,t[0]=(r[0]*s+r[4]*n+r[8]*i+r[12])/o,t[1]=(r[1]*s+r[5]*n+r[9]*i+r[13])/o,t[2]=(r[2]*s+r[6]*n+r[10]*i+r[14])/o,t}function a(t,e,r){const s=e[0],n=e[1],i=e[2];return t[0]=s*r[0]+n*r[3]+i*r[6],t[1]=s*r[1]+n*r[4]+i*r[7],t[2]=s*r[2]+n*r[5]+i*r[8],t}function c(t,e,r){const s=r[0],n=r[1],i=r[2],o=r[3],a=e[0],c=e[1],u=e[2];let h=n*u-i*c,l=i*a-s*u,f=s*c-n*a,d=n*f-i*l,A=i*h-s*f,m=s*l-n*h;const g=2*o;return h*=g,l*=g,f*=g,d*=2,A*=2,m*=2,t[0]=a+h+d,t[1]=c+l+A,t[2]=u+f+m,t}function u(t,e,r,s){const n=[],i=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],i[0]=n[0],i[1]=n[1]*Math.cos(s)-n[2]*Math.sin(s),i[2]=n[1]*Math.sin(s)+n[2]*Math.cos(s),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function h(t,e,r,s){const n=[],i=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],i[0]=n[2]*Math.sin(s)+n[0]*Math.cos(s),i[1]=n[1],i[2]=n[2]*Math.cos(s)-n[0]*Math.sin(s),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function l(t,e,r,s){const n=[],i=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],i[0]=n[0]*Math.cos(s)-n[1]*Math.sin(s),i[1]=n[0]*Math.sin(s)+n[1]*Math.cos(s),i[2]=n[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function f(t,e){const r=t[0],s=t[1],i=t[2],o=e[0],a=e[1],c=e[2],u=Math.sqrt((r*r+s*s+i*i)*(o*o+a*a+c*c)),h=u&&n(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}!function(){const t=function(){const t=new s.tb(3);return s.tb!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}()},4901:(t,e,r)=>{r.d(e,{$W:()=>n,F2:()=>a,Fl:()=>i,aI:()=>u,cy:()=>o,qE:()=>c});Math.PI;const s=1/180*Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const n=globalThis.mathgl.config;function i(t,{precision:e=n.precision}={}){return t=function(t){return Math.round(t/n.EPSILON)*n.EPSILON}(t),`${parseFloat(t.toPrecision(e))}`}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function a(t,e){return h(t,(t=>t*s),e)}function c(t,e,r){return h(t,(t=>Math.max(e,Math.min(r,t))))}function u(t,e,r){const s=n.EPSILON;r&&(n.EPSILON=r);try{if(t===e)return!0;if(o(t)&&o(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!u(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{n.EPSILON=s}}function h(t,e,r){if(o(t)){const s=t;r=r||function(t){return t.clone?t.clone():new Array(t.length)}(s);for(let n=0;n<r.length&&n<s.length;++n){const s="number"==typeof t?t:t[n];r[n]=e(s,n,r)}return r}return e(t)}},8225:(t,e,r)=>{function s(t,e,r){const s=e[0],n=e[1],i=r[3]*s+r[7]*n||1;return t[0]=(r[0]*s+r[4]*n)/i,t[1]=(r[1]*s+r[5]*n)/i,t}function n(t,e,r){const s=e[0],n=e[1],i=e[2],o=r[3]*s+r[7]*n+r[11]*i||1;return t[0]=(r[0]*s+r[4]*n+r[8]*i)/o,t[1]=(r[1]*s+r[5]*n+r[9]*i)/o,t[2]=(r[2]*s+r[6]*n+r[10]*i)/o,t}function i(t,e,r){const s=e[0],n=e[1];return t[0]=r[0]*s+r[2]*n,t[1]=r[1]*s+r[3]*n,t[2]=e[2],t}r.d(e,{B$:()=>s,J4:()=>i,cL:()=>n})},3731:(t,e,r)=>{r.d(e,{qk:()=>i,ws:()=>n});var s=r(4901);function n(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function i(t,e,r=""){if(s.$W.debug&&!function(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}(t,e))throw new Error(`math.gl: ${r} some fields set to invalid numbers'`);return t}},7839:(t,e,r)=>{r.d(e,{v:()=>Bt});var s=r(3736),n=r(3042);Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const i=globalThis.mathgl.config;function o(t,{precision:e=i.precision}={}){return t=function(t){return Math.round(t/i.EPSILON)*i.EPSILON}(t),`${parseFloat(t.toPrecision(e))}`}function a(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function c(t,e,r){const s=i.EPSILON;r&&(i.EPSILON=r);try{if(t===e)return!0;if(a(t)&&a(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!c(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=i.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{i.EPSILON=s}}class u extends Array{clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}toArray(t=[],e=0){for(let r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:a(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(i)}formatString(t){let e="";for(let r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+o(this[r],t);return`${t.printTypes?this.constructor.name:""}[${e}]`}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!c(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,r){if(void 0===r)return this.lerp(this,t,e);for(let s=0;s<this.ELEMENTS;++s){const n=t[s],i="number"==typeof e?e:e[s];this[s]=n+r*(i-n)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(i.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}get elements(){return this}}function h(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function l(t,e,r=""){if(i.debug&&!function(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}(t,e))throw new Error(`math.gl: ${r} some fields set to invalid numbers'`);return t}class f extends u{toString(){let t="[";if(i.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let r=0;r<this.RANK;++r)t+=` ${this[r*this.RANK+e]}`}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=` ${this[e]}`}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,r){return this[e*this.RANK+t]=h(r),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const r=t*this.RANK;for(let s=0;s<this.RANK;++s)e[s]=this[r+s];return e}setColumn(t,e){const r=t*this.RANK;for(let s=0;s<this.RANK;++s)this[r+s]=e[s];return this}}const d=1e-6;let A="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function m(t,e,r){const s=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=e[9],d=e[10],A=e[11],m=e[12],g=e[13],p=e[14],B=e[15];let _=r[0],y=r[1],b=r[2],C=r[3];return t[0]=_*s+y*a+b*l+C*m,t[1]=_*n+y*c+b*f+C*g,t[2]=_*i+y*u+b*d+C*p,t[3]=_*o+y*h+b*A+C*B,_=r[4],y=r[5],b=r[6],C=r[7],t[4]=_*s+y*a+b*l+C*m,t[5]=_*n+y*c+b*f+C*g,t[6]=_*i+y*u+b*d+C*p,t[7]=_*o+y*h+b*A+C*B,_=r[8],y=r[9],b=r[10],C=r[11],t[8]=_*s+y*a+b*l+C*m,t[9]=_*n+y*c+b*f+C*g,t[10]=_*i+y*u+b*d+C*p,t[11]=_*o+y*h+b*A+C*B,_=r[12],y=r[13],b=r[14],C=r[15],t[12]=_*s+y*a+b*l+C*m,t[13]=_*n+y*c+b*f+C*g,t[14]=_*i+y*u+b*d+C*p,t[15]=_*o+y*h+b*A+C*B,t}const g=function(t,e,r,s,n){const i=1/Math.tan(e/2);if(t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){const e=1/(s-n);t[10]=(n+s)*e,t[14]=2*n*s*e}else t[10]=-1,t[14]=-2*s;return t};const p=function(t,e,r,s,n,i,o){const a=1/(e-r),c=1/(s-n),u=1/(i-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*a,t[13]=(n+s)*c,t[14]=(o+i)*u,t[15]=1,t};!function(){const t=function(){const t=new A(2);return A!=Float32Array&&(t[0]=0,t[1]=0),t}()}();function B(){const t=new A(3);return A!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function _(t,e,r){const s=new A(3);return s[0]=t,s[1]=e,s[2]=r,s}function y(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function b(t,e,r){const s=e[0],n=e[1],i=e[2],o=r[0],a=r[1],c=r[2];return t[0]=n*c-i*a,t[1]=i*o-s*c,t[2]=s*a-n*o,t}function C(t,e,r){const s=e[0],n=e[1],i=e[2];let o=r[3]*s+r[7]*n+r[11]*i+r[15];return o=o||1,t[0]=(r[0]*s+r[4]*n+r[8]*i+r[12])/o,t[1]=(r[1]*s+r[5]*n+r[9]*i+r[13])/o,t[2]=(r[2]*s+r[6]*n+r[10]*i+r[14])/o,t}const w=function(t){const e=t[0],r=t[1],s=t[2];return Math.sqrt(e*e+r*r+s*s)};!function(){const t=B()}();function E(t){const e=t[0],r=t[1],s=t[2],n=t[3];return Math.sqrt(e*e+r*r+s*s+n*n)}function k(t){const e=t[0],r=t[1],s=t[2],n=t[3];return e*e+r*r+s*s+n*n}!function(){const t=function(){const t=new A(4);return A!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();var M;!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(M||(M={}));const x=45*Math.PI/180,T=1,I=.1,v=500,F=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class O extends f{static get IDENTITY(){return function(){R||(R=new O,Object.freeze(R));return R}()}static get ZERO(){return function(){G||(G=new O([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(G));return G}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return M}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,r,s,n,i,o,a,c,u,h,l,f,d,A,m){return this[0]=t,this[1]=e,this[2]=r,this[3]=s,this[4]=n,this[5]=i,this[6]=o,this[7]=a,this[8]=c,this[9]=u,this[10]=h,this[11]=l,this[12]=f,this[13]=d,this[14]=A,this[15]=m,this.check()}setRowMajor(t,e,r,s,n,i,o,a,c,u,h,l,f,d,A,m){return this[0]=t,this[1]=n,this[2]=c,this[3]=f,this[4]=e,this[5]=i,this[6]=u,this[7]=d,this[8]=r,this[9]=o,this[10]=h,this[11]=A,this[12]=s,this[13]=a,this[14]=l,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(F)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){const r=e[0],s=e[1],n=e[2],i=e[3],o=r+r,a=s+s,c=n+n,u=r*o,h=s*o,l=s*a,f=n*o,d=n*a,A=n*c,m=i*o,g=i*a,p=i*c;t[0]=1-l-A,t[1]=h+p,t[2]=f-g,t[3]=0,t[4]=h-p,t[5]=1-u-A,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:r,bottom:s,top:n,near:i=I,far:o=v}=t;return o===1/0?function(t,e,r,s,n,i){const o=2*i/(r-e),a=2*i/(n-s),c=(r+e)/(r-e),u=(n+s)/(n-s),h=-1,l=-1,f=-2*i;t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=u,t[10]=h,t[11]=l,t[12]=0,t[13]=0,t[14]=f,t[15]=0}(this,e,r,s,n,i):function(t,e,r,s,n,i,o){const a=1/(r-e),c=1/(n-s),u=1/(i-o);t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(n+s)*c,t[10]=(o+i)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*u,t[15]=0}(this,e,r,s,n,i,o),this.check()}lookAt(t){const{eye:e,center:r=[0,0,0],up:s=[0,1,0]}=t;return function(t,e,r,s){let n,i,o,a,c,u,h,l,f,A;const m=e[0],g=e[1],p=e[2],B=s[0],_=s[1],y=s[2],b=r[0],C=r[1],w=r[2];Math.abs(m-b)<d&&Math.abs(g-C)<d&&Math.abs(p-w)<d?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(l=m-b,f=g-C,A=p-w,n=1/Math.sqrt(l*l+f*f+A*A),l*=n,f*=n,A*=n,i=_*A-y*f,o=y*l-B*A,a=B*f-_*l,n=Math.sqrt(i*i+o*o+a*a),n?(n=1/n,i*=n,o*=n,a*=n):(i=0,o=0,a=0),c=f*a-A*o,u=A*i-l*a,h=l*o-f*i,n=Math.sqrt(c*c+u*u+h*h),n?(n=1/n,c*=n,u*=n,h*=n):(c=0,u=0,h=0),t[0]=i,t[1]=c,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=a,t[9]=h,t[10]=A,t[11]=0,t[12]=-(i*m+o*g+a*p),t[13]=-(c*m+u*g+h*p),t[14]=-(l*m+f*g+A*p),t[15]=1)}(this,e,r,s),this.check()}ortho(t){const{left:e,right:r,bottom:s,top:n,near:i=I,far:o=v}=t;return p(this,e,r,s,n,i,o),this.check()}orthographic(t){const{fovy:e=x,aspect:r=T,focalDistance:s=1,near:n=I,far:i=v}=t;D(e);const o=e/2,a=s*Math.tan(o),c=a*r;return this.ortho({left:-c,right:c,bottom:-a,top:a,near:n,far:i})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:r=1,near:s=.1,far:n=500}=t;return D(e),g(this,e,r,s,n),this.check()}determinant(){return function(t){const e=t[0],r=t[1],s=t[2],n=t[3],i=t[4],o=t[5],a=t[6],c=t[7],u=t[8],h=t[9],l=t[10],f=t[11],d=t[12],A=t[13],m=t[14],g=e*o-r*i,p=e*a-s*i,B=r*a-s*o,_=u*A-h*d,y=u*m-l*d,b=h*m-l*A;return c*(e*b-r*y+s*_)-n*(i*b-o*y+a*_)+t[15]*(u*B-h*p+l*g)-f*(d*B-A*p+m*g)}(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const r=this.getScale(e),s=1/r[0],n=1/r[1],i=1/r[2];return t[0]=this[0]*s,t[1]=this[1]*n,t[2]=this[2]*i,t[3]=0,t[4]=this[4]*s,t[5]=this[5]*n,t[6]=this[6]*i,t[7]=0,t[8]=this[8]*s,t[9]=this[9]*n,t[10]=this[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const r=this.getScale(e),s=1/r[0],n=1/r[1],i=1/r[2];return t[0]=this[0]*s,t[1]=this[1]*n,t[2]=this[2]*i,t[3]=this[4]*s,t[4]=this[5]*n,t[5]=this[6]*i,t[6]=this[8]*s,t[7]=this[9]*n,t[8]=this[10]*i,t}transpose(){return function(t,e){if(t===e){const r=e[1],s=e[2],n=e[3],i=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=i,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return function(t,e){const r=e[0],s=e[1],n=e[2],i=e[3],o=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],f=e[10],d=e[11],A=e[12],m=e[13],g=e[14],p=e[15],B=r*a-s*o,_=r*c-n*o,y=r*u-i*o,b=s*c-n*a,C=s*u-i*a,w=n*u-i*c,E=h*m-l*A,k=h*g-f*A,M=h*p-d*A,x=l*g-f*m,T=l*p-d*m,I=f*p-d*g;let v=B*I-_*T+y*x+b*M-C*k+w*E;v&&(v=1/v,t[0]=(a*I-c*T+u*x)*v,t[1]=(n*T-s*I-i*x)*v,t[2]=(m*w-g*C+p*b)*v,t[3]=(f*C-l*w-d*b)*v,t[4]=(c*M-o*I-u*k)*v,t[5]=(r*I-n*M+i*k)*v,t[6]=(g*y-A*w-p*_)*v,t[7]=(h*w-f*y+d*_)*v,t[8]=(o*T-a*M+u*E)*v,t[9]=(s*M-r*T-i*E)*v,t[10]=(A*C-m*y+p*B)*v,t[11]=(l*y-h*C-d*B)*v,t[12]=(a*k-o*x-c*E)*v,t[13]=(r*x-s*k+n*E)*v,t[14]=(m*_-A*b-g*B)*v,t[15]=(h*b-l*_+f*B)*v)}(this,this),this.check()}multiplyLeft(t){return m(this,t,this),this.check()}multiplyRight(t){return m(this,this,t),this.check()}rotateX(t){return function(t,e,r){const s=Math.sin(r),n=Math.cos(r),i=e[4],o=e[5],a=e[6],c=e[7],u=e[8],h=e[9],l=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*n+u*s,t[5]=o*n+h*s,t[6]=a*n+l*s,t[7]=c*n+f*s,t[8]=u*n-i*s,t[9]=h*n-o*s,t[10]=l*n-a*s,t[11]=f*n-c*s}(this,this,t),this.check()}rotateY(t){return function(t,e,r){const s=Math.sin(r),n=Math.cos(r),i=e[0],o=e[1],a=e[2],c=e[3],u=e[8],h=e[9],l=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n-u*s,t[1]=o*n-h*s,t[2]=a*n-l*s,t[3]=c*n-f*s,t[8]=i*s+u*n,t[9]=o*s+h*n,t[10]=a*s+l*n,t[11]=c*s+f*n}(this,this,t),this.check()}rotateZ(t){return function(t,e,r){const s=Math.sin(r),n=Math.cos(r),i=e[0],o=e[1],a=e[2],c=e[3],u=e[4],h=e[5],l=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n+u*s,t[1]=o*n+h*s,t[2]=a*n+l*s,t[3]=c*n+f*s,t[4]=u*n-i*s,t[5]=h*n-o*s,t[6]=l*n-a*s,t[7]=f*n-c*s}(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,r,s){let n,i,o,a,c,u,h,l,f,A,m,g,p,B,_,y,b,C,w,E,k,M,x,T,I=s[0],v=s[1],F=s[2],O=Math.sqrt(I*I+v*v+F*F);O<d||(O=1/O,I*=O,v*=O,F*=O,i=Math.sin(r),n=Math.cos(r),o=1-n,a=e[0],c=e[1],u=e[2],h=e[3],l=e[4],f=e[5],A=e[6],m=e[7],g=e[8],p=e[9],B=e[10],_=e[11],y=I*I*o+n,b=v*I*o+F*i,C=F*I*o-v*i,w=I*v*o-F*i,E=v*v*o+n,k=F*v*o+I*i,M=I*F*o+v*i,x=v*F*o-I*i,T=F*F*o+n,t[0]=a*y+l*b+g*C,t[1]=c*y+f*b+p*C,t[2]=u*y+A*b+B*C,t[3]=h*y+m*b+_*C,t[4]=a*w+l*E+g*k,t[5]=c*w+f*E+p*k,t[6]=u*w+A*E+B*k,t[7]=h*w+m*E+_*k,t[8]=a*M+l*x+g*T,t[9]=c*M+f*x+p*T,t[10]=u*M+A*x+B*T,t[11]=h*M+m*x+_*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return function(t,e,r){const s=r[0],n=r[1],i=r[2];t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return function(t,e,r){const s=r[0],n=r[1],i=r[2];let o,a,c,u,h,l,f,d,A,m,g,p;e===t?(t[12]=e[0]*s+e[4]*n+e[8]*i+e[12],t[13]=e[1]*s+e[5]*n+e[9]*i+e[13],t[14]=e[2]*s+e[6]*n+e[10]*i+e[14],t[15]=e[3]*s+e[7]*n+e[11]*i+e[15]):(o=e[0],a=e[1],c=e[2],u=e[3],h=e[4],l=e[5],f=e[6],d=e[7],A=e[8],m=e[9],g=e[10],p=e[11],t[0]=o,t[1]=a,t[2]=c,t[3]=u,t[4]=h,t[5]=l,t[6]=f,t[7]=d,t[8]=A,t[9]=m,t[10]=g,t[11]=p,t[12]=o*s+h*n+A*i+e[12],t[13]=a*s+l*n+m*i+e[13],t[14]=c*s+f*n+g*i+e[14],t[15]=u*s+d*n+p*i+e[15])}(this,this,t),this.check()}transform(t,e){return 4===t.length?(l(e=function(t,e,r){const s=e[0],n=e[1],i=e[2],o=e[3];return t[0]=r[0]*s+r[4]*n+r[8]*i+r[12]*o,t[1]=r[1]*s+r[5]*n+r[9]*i+r[13]*o,t[2]=r[2]*s+r[6]*n+r[10]*i+r[14]*o,t[3]=r[3]*s+r[7]*n+r[11]*i+r[15]*o,t}(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:r}=t;let s;switch(r){case 2:s=function(t,e,r){const s=e[0],n=e[1];return t[0]=r[0]*s+r[4]*n+r[12],t[1]=r[1]*s+r[5]*n+r[13],t}(e||[-0,-0],t,this);break;case 3:s=C(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return l(s,t.length),s}transformAsVector(t,e){let r;switch(t.length){case 2:r=function(t,e,r){const s=e[0],n=e[1],i=r[3]*s+r[7]*n||1;return t[0]=(r[0]*s+r[4]*n)/i,t[1]=(r[1]*s+r[5]*n)/i,t}(e||[-0,-0],t,this);break;case 3:r=function(t,e,r){const s=e[0],n=e[1],i=e[2],o=r[3]*s+r[7]*n+r[11]*i||1;return t[0]=(r[0]*s+r[4]*n+r[8]*i)/o,t[1]=(r[1]*s+r[5]*n+r[9]*i)/o,t[2]=(r[2]*s+r[6]*n+r[10]*i)/o,t}(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return l(r,t.length),r}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,r){return this.identity().translate([t,e,r])}}let G,R;function D(t){if(t>2*Math.PI)throw Error("expected radians")}var S=r(8862);function L(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class N extends u{get x(){return this[0]}set x(t){this[0]=h(t)}get y(){return this[1]}set y(t){this[1]=h(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let r=0;r<this.ELEMENTS;++r){const s=this[r]-t[r];e+=s*s}return h(e)}dot(t){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*t[r];return h(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return L(t>=0&&t<this.ELEMENTS,"index is out of range"),h(this[t])}setComponent(t,e){return L(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}let J;class U extends N{static get ZERO(){return J||(J=new U(0,0,0,0),Object.freeze(J)),J}constructor(t=0,e=0,r=0,s=0){super(-0,-0,-0,-0),a(t)&&1===arguments.length?this.copy(t):(i.debug&&(h(t),h(e),h(r),h(s)),this[0]=t,this[1]=e,this[2]=r,this[3]=s)}set(t,e,r,s){return this[0]=t,this[1]=e,this[2]=r,this[3]=s,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return i.debug&&(h(t.x),h(t.y),h(t.z),h(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=h(t)}get w(){return this[3]}set w(t){this[3]=h(t)}transform(t){return C(this,this,t),this.check()}transformByMatrix3(t){return function(t,e,r){const s=e[0],n=e[1],i=e[2];t[0]=r[0]*s+r[3]*n+r[6]*i,t[1]=r[1]*s+r[4]*n+r[7]*i,t[2]=r[2]*s+r[5]*n+r[8]*i,t[3]=e[3]}(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,r){const s=e[0],n=e[1];t[0]=r[0]*s+r[2]*n,t[1]=r[1]*s+r[3]*n,t[2]=e[2],t[3]=e[3]}(this,this,t),this.check()}transformByQuaternion(t){return function(t,e,r){const s=r[0],n=r[1],i=r[2],o=r[3],a=e[0],c=e[1],u=e[2];let h=n*u-i*c,l=i*a-s*u,f=s*c-n*a,d=n*f-i*l,A=i*h-s*f,m=s*l-n*h;const g=2*o;h*=g,l*=g,f*=g,d*=2,A*=2,m*=2,t[0]=a+h+d,t[1]=c+l+A,t[2]=u+f+m}(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}function H(){const t=new A(4);return A!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function j(t,e,r){r*=.5;const s=Math.sin(r);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(r),t}function P(t,e,r){const s=e[0],n=e[1],i=e[2],o=e[3],a=r[0],c=r[1],u=r[2],h=r[3];return t[0]=s*h+o*a+n*u-i*c,t[1]=n*h+o*c+i*a-s*u,t[2]=i*h+o*u+s*c-n*a,t[3]=o*h-s*a-n*c-i*u,t}function K(t,e,r,s){const n=e[0],i=e[1],o=e[2],a=e[3];let c,u,h,l,f,A=r[0],m=r[1],g=r[2],p=r[3];return c=n*A+i*m+o*g+a*p,c<0&&(c=-c,A=-A,m=-m,g=-g,p=-p),1-c>d?(u=Math.acos(c),f=Math.sin(u),h=Math.sin((1-s)*u)/f,l=Math.sin(s*u)/f):(h=1-s,l=s),t[0]=h*n+l*A,t[1]=h*i+l*m,t[2]=h*o+l*g,t[3]=h*a+l*p,t}function Q(t,e){const r=e[0]+e[4]+e[8];let s;if(r>0)s=Math.sqrt(r+1),t[3]=.5*s,s=.5/s,t[0]=(e[5]-e[7])*s,t[1]=(e[6]-e[2])*s,t[2]=(e[1]-e[3])*s;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);const n=(r+1)%3,i=(r+2)%3;s=Math.sqrt(e[3*r+r]-e[3*n+n]-e[3*i+i]+1),t[r]=.5*s,s=.5/s,t[3]=(e[3*n+i]-e[3*i+n])*s,t[n]=(e[3*n+r]+e[3*r+n])*s,t[i]=(e[3*i+r]+e[3*r+i])*s}return t}const W=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},X=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},q=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},V=function(t,e,r,s){const n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n+s*(r[0]-n),t[1]=i+s*(r[1]-i),t[2]=o+s*(r[2]-o),t[3]=a+s*(r[3]-a),t},Y=E,Z=k,z=function(t,e){const r=e[0],s=e[1],n=e[2],i=e[3];let o=r*r+s*s+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=s*o,t[2]=n*o,t[3]=i*o,t};const $=function(){const t=B(),e=_(1,0,0),r=_(0,1,0);return function(s,n,i){const o=y(n,i);return o<-.999999?(b(t,e,n),w(t)<1e-6&&b(t,r,n),function(t,e){const r=e[0],s=e[1],n=e[2];let i=r*r+s*s+n*n;i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i}(t,t),j(s,t,Math.PI),s):o>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(b(t,n,i),s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=1+o,z(s,s))}}(),tt=(function(){const t=H(),e=H()}(),function(){const t=function(){const t=new A(9);return A!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}()}(),[0,0,0,1]);const et={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};class st{name;startTime=0;playing=!0;speed=1;channels=[];constructor(t){Object.assign(this,t)}animate(t){if(!this.playing)return;const e=(t/1e3-this.startTime)*this.speed;this.channels.forEach((({sampler:t,target:r,path:s})=>{!function(t,{input:e,interpolation:r,output:s},n,i){const o=e[e.length-1],a=t%o,c=e.findIndex((t=>t>=a)),u=Math.max(0,c-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:S.R.warn(`Bad animation path ${i}`)()}const h=e[u],l=e[c];switch(r){case"STEP":!function(t,e,r){for(let s=0;s<r.length;s++)t[e][s]=r[s]}(n,i,s[u]);break;case"LINEAR":if(l>h){const t=(a-h)/(l-h);!function(t,e,r,s,n){if("rotation"===e){at.slerp({start:r,target:s,ratio:n});for(let r=0;r<at.length;r++)t[e][r]=at[r]}else for(let i=0;i<r.length;i++)t[e][i]=n*s[i]+(1-n)*r[i]}(n,i,s[u],s[c],t)}break;case"CUBICSPLINE":if(l>h){const t=(a-h)/(l-h),e=l-h;!function(t,e,{p0:r,outTangent0:s,inTangent1:n,p1:i,tDiff:o,ratio:a}){for(let c=0;c<t[e].length;c++){const u=s[c]*o,h=n[c]*o;t[e][c]=(2*Math.pow(a,3)-3*Math.pow(a,2)+1)*r[c]+(Math.pow(a,3)-2*Math.pow(a,2)+a)*u+(-2*Math.pow(a,3)+3*Math.pow(a,2))*i[c]+(Math.pow(a,3)-Math.pow(a,2))*h}}(n,i,{p0:s[3*u+1],outTangent0:s[3*u+2],inTangent1:s[3*c+0],p1:s[3*c+1],tDiff:e,ratio:t})}break;default:S.R.warn(`Interpolation ${r} not supported`)()}}(e,t,r,s),function(t,e){e.matrix.identity(),t.translation&&e.matrix.translate(t.translation);if(t.rotation){const r=ot.fromQuaternion(t.rotation);e.matrix.multiplyRight(r)}t.scale&&e.matrix.scale(t.scale)}(r,r._node)}))}}class nt{animations;constructor(t){this.animations=t.animations.map(((e,r)=>{const s=e.name||`Animation-${r}`,n=e.samplers.map((({input:e,interpolation:r="LINEAR",output:s})=>({input:it(t.accessors[e]),interpolation:r,output:it(t.accessors[s])}))),i=e.channels.map((({sampler:e,target:r})=>({sampler:n[e],target:t.nodes[r.node],path:r.path})));return new st({name:s,channels:i})}))}animate(t){this.setTime(t)}setTime(t){this.animations.forEach((e=>e.animate(t)))}getAnimations(){return this.animations}}function it(t){if(!t._animation){const e=rt[t.componentType],r=et[t.type],s=r*t.count,{buffer:n,byteOffset:i}=t.bufferView.data,o=new e(n,i+(t.byteOffset||0),s);if(1===r)t._animation=Array.from(o);else{const e=[];for(let t=0;t<o.length;t+=r)e.push(Array.from(o.slice(t,t+r)));t._animation=e}}return t._animation}const ot=new O;const at=new class extends u{constructor(t=0,e=0,r=0,s=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,r,s)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,r,s){return this[0]=t,this[1]=e,this[2]=r,this[3]=s,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return Q(this,t),this.check()}fromAxisRotation(t,e){return j(this,t,e),this.check()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=h(t)}get y(){return this[1]}set y(t){this[1]=h(t)}get z(){return this[2]}set z(t){this[2]=h(t)}get w(){return this[3]}set w(t){this[3]=h(t)}len(){return Y(this)}lengthSquared(){return Z(this)}dot(t){return q(this,t)}rotationTo(t,e){return $(this,t,e),this.check()}add(t){return W(this,this,t),this.check()}calculateW(){return function(t,e){const r=e[0],s=e[1],n=e[2];t[0]=r,t[1]=s,t[2]=n,t[3]=Math.sqrt(Math.abs(1-r*r-s*s-n*n))}(this,this),this.check()}conjugate(){var t,e;return e=this,(t=this)[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],this.check()}invert(){return function(t,e){const r=e[0],s=e[1],n=e[2],i=e[3],o=r*r+s*s+n*n+i*i,a=o?1/o:0;t[0]=-r*a,t[1]=-s*a,t[2]=-n*a,t[3]=i*a}(this,this),this.check()}lerp(t,e,r){return void 0===r?this.lerp(this,t,e):(V(this,t,e,r),this.check())}multiplyRight(t){return P(this,this,t),this.check()}multiplyLeft(t){return P(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,r){r*=.5;const s=e[0],n=e[1],i=e[2],o=e[3],a=Math.sin(r),c=Math.cos(r);t[0]=s*c+o*a,t[1]=n*c+i*a,t[2]=i*c-n*a,t[3]=o*c-s*a}(this,this,t),this.check()}rotateY(t){return function(t,e,r){r*=.5;const s=e[0],n=e[1],i=e[2],o=e[3],a=Math.sin(r),c=Math.cos(r);t[0]=s*c-i*a,t[1]=n*c+o*a,t[2]=i*c+s*a,t[3]=o*c-n*a}(this,this,t),this.check()}rotateZ(t){return function(t,e,r){r*=.5;const s=e[0],n=e[1],i=e[2],o=e[3],a=Math.sin(r),c=Math.cos(r);t[0]=s*c+n*a,t[1]=n*c-s*a,t[2]=i*c+o*a,t[3]=o*c-i*a}(this,this,t),this.check()}scale(t){return X(this,this,t),this.check()}slerp(t,e,r){let s,n,i;switch(arguments.length){case 1:({start:s=tt,target:n,ratio:i}=t);break;case 2:s=this,n=t,i=e;break;default:s=t,n=e,i=r}return K(this,s,n,i),this.check()}transformVector4(t,e=new U){return function(t,e,r){const s=e[0],n=e[1],i=e[2],o=r[0],a=r[1],c=r[2],u=r[3],h=u*s+a*i-c*n,l=u*n+c*s-o*i,f=u*i+o*n-a*s,d=-o*s-a*n-c*i;t[0]=h*u+d*-o+l*-c-f*-a,t[1]=l*u+d*-a+f*-o-h*-c,t[2]=f*u+d*-c+h*-a-l*-o,t[3]=e[3]}(e,t,this),l(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}};var ct,ut=r(3166),ht=r(9773),lt=r(642);function ft(t,e,r,s){const n={defines:{MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},bindings:{},uniforms:{camera:[0,0,0],metallicRoughnessValues:[1,1]},parameters:{},glParameters:{},generatedTextures:[]};n.defines.USE_TEX_LOD=1;const{imageBasedLightingEnvironment:i}=s;return i&&(n.bindings.pbr_diffuseEnvSampler=i.diffuseEnvSampler.texture,n.bindings.pbr_specularEnvSampler=i.specularEnvSampler.texture,n.bindings.pbr_BrdfLUT=i.brdfLutTexture.texture,n.uniforms.scaleIBLAmbient=[1,1]),s?.pbrDebug&&(n.defines.PBR_DEBUG=1,n.uniforms.scaleDiffBaseMR=[0,0,0,0],n.uniforms.scaleFGDSpec=[0,0,0,0]),r.NORMAL&&(n.defines.HAS_NORMALS=1),r.TANGENT&&s?.useTangents&&(n.defines.HAS_TANGENTS=1),r.TEXCOORD_0&&(n.defines.HAS_UV=1),s?.imageBasedLightingEnvironment&&(n.defines.USE_IBL=1),s?.lights&&(n.defines.USE_LIGHTS=1),e&&function(t,e,r){r.uniforms.unlit=Boolean(e.unlit),e.pbrMetallicRoughness&&function(t,e,r){e.baseColorTexture&&dt(t,e.baseColorTexture,"pbr_baseColorSampler","HAS_BASECOLORMAP",r);r.uniforms.baseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&dt(t,e.metallicRoughnessTexture,"pbr_metallicRoughnessSampler","HAS_METALROUGHNESSMAP",r);const{metallicFactor:s=1,roughnessFactor:n=1}=e;r.uniforms.metallicRoughnessValues=[s,n]}(t,e.pbrMetallicRoughness,r);if(e.normalTexture){dt(t,e.normalTexture,"pbr_normalSampler","HAS_NORMALMAP",r);const{scale:s=1}=e.normalTexture;r.uniforms.normalScale=s}if(e.occlusionTexture){dt(t,e.occlusionTexture,"pbr_occlusionSampler","HAS_OCCLUSIONMAP",r);const{strength:s=1}=e.occlusionTexture;r.uniforms.occlusionStrength=s}e.emissiveTexture&&(dt(t,e.emissiveTexture,"pbr_emissiveSampler","HAS_EMISSIVEMAP",r),r.uniforms.emissiveFactor=e.emissiveFactor||[0,0,0]);switch(e.alphaMode){case"MASK":const{alphaCutoff:t=.5}=e;r.defines.ALPHA_CUTOFF=1,r.uniforms.alphaCutoff=t;break;case"BLEND":S.R.warn("glTF BLEND alphaMode might not work well because it requires mesh sorting")(),r.parameters.blendColorOperation="add",r.parameters.blendColorSrcFactor="src-alpha",r.parameters.blendColorDstFactor="one-minus-src-alpha",r.parameters.blendAlphaOperation="add",r.parameters.blendAlphaSrcFactor="one",r.parameters.blendAlphaDstFactor="one-minus-src-alpha",r.glParameters.blend=!0,r.glParameters.blendEquation=ct.FUNC_ADD,r.glParameters.blendFunc=[ct.SRC_ALPHA,ct.ONE_MINUS_SRC_ALPHA,ct.ONE,ct.ONE_MINUS_SRC_ALPHA]}}(t,e,n),n}function dt(t,e,r,s=null,n){const i=e?.texture?.sampler?.parameters||{},o=e.texture.source.image;let a,c={};o.compressed?(a=o,c={[ct.TEXTURE_MIN_FILTER]:o.data.length>1?ct.LINEAR_MIPMAP_NEAREST:ct.LINEAR}):a={data:o};const u=t.createTexture({id:e.uniformName||e.id,parameters:{...i,...c},pixelStore:{[ct.UNPACK_FLIP_Y_WEBGL]:!1},...a});n.bindings[r]=u,s&&(n.defines[s]=1),n.generatedTextures.push(u)}!function(t){t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.ONE=1]="ONE",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.LINEAR=9729]="LINEAR",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL"}(ct||(ct={}));var At;!function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(At||(At={}));const mt={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class gt{device;options;gltf;constructor(t,e={}){this.device=t,this.options={...mt,...e}}instantiate(t){this.gltf=pt(t);return(this.gltf.scenes||[]).map((t=>this.createScene(t)))}createAnimator(){return Array.isArray(this.gltf.animations)?new nt(this.gltf):null}createScene(t){const e=(t.nodes||[]).map((t=>this.createNode(t)));return new s.o({id:t.name||t.id,children:e})}createNode(t){if(!t._node){const e=(t.children||[]).map((t=>this.createNode(t)));t.mesh&&e.push(this.createMesh(t.mesh));const r=new s.o({id:t.name||t.id,children:e});if(t.matrix)r.setMatrix(t.matrix);else{if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){const e=(new O).fromQuaternion(t.rotation);r.matrix.multiplyRight(e)}t.scale&&r.matrix.scale(t.scale)}t._node=r}return this.gltf.nodes.find((e=>e.id===t.id))._node=t._node,t._node}createMesh(t){if(!t._mesh){const e=(t.primitives||[]).map(((e,r)=>this.createPrimitive(e,r,t))),r=new s.o({id:t.name||t.id,children:e});t._mesh=r}return t._mesh}createPrimitive(t,e,r){const s=t.name||`${r.name||r.id}-primitive-${e}`,n=function(t){switch(t){case At.POINTS:return"point-list";case At.LINES:return"line-list";case At.LINE_STRIP:return"line-strip";case At.TRIANGLES:return"triangle-list";case At.TRIANGLE_STRIP:return"triangle-strip";default:throw new Error(String(t))}}(t.mode||4),i=t.indices?t.indices.count:this.getVertexCount(t.attributes),o=function(t,e){const{id:r,geometry:s,material:n,vertexCount:i,materialOptions:o,modelOptions:a}=e,c=ft(t,n,s.attributes,o);S.R.info(4,"createGLTFModel defines: ",c.defines)();const u={id:r,source:"\nlayout(0) positions: vec4; // in vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    in vec4 normals; // in vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    in vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    // in vec2 TEXCOORD_0;\n    in vec2 texCoords;\n  #endif\n\n@vertex\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = normals;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = texCoords;\n    #endif\n\n    pbr_setPositionNormalTangentUV(positions, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * positions;\n  }\n\n@fragment\n  out vec4 fragmentColor;\n\n  void main(void) {\n    vec3 pos = pbr_vPosition;\n    fragmentColor = pbr_filterColor(vec4(1.0));\n  }\n",vs:"#version 300 es\n\n  // in vec4 POSITION;\n  in vec4 positions;\n\n  #ifdef HAS_NORMALS\n    // in vec4 NORMAL;\n    in vec4 normals;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    in vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    // in vec2 TEXCOORD_0;\n    in vec2 texCoords;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = normals;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = texCoords;\n    #endif\n\n    pbr_setPositionNormalTangentUV(positions, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = pbrProjection.modelViewProjectionMatrix * positions;\n  }\n",fs:"#version 300 es\n  out vec4 fragmentColor;\n\n  void main(void) {\n    vec3 pos = pbr_vPosition;\n    fragmentColor = pbr_filterColor(vec4(1.0));\n  }\n",geometry:s,topology:s.topology,vertexCount:i,modules:[ut.s],...a,defines:{...c.defines,...a.defines},parameters:{depthWriteEnabled:!0,depthCompare:"less",depthFormat:"depth24plus",cullMode:"back",...c.parameters,...a.parameters}},h=new ht.K(t,u),{camera:l,...f}={...c.uniforms,...a.uniforms,...c.bindings,...a.bindings};return h.shaderInputs.setProps({pbrMaterial:f,pbrProjection:{camera:l}}),new lt.s({managedResources:[],model:h})}(this.device,{id:s,geometry:this.createGeometry(s,t,n),material:t.material,materialOptions:this.options,modelOptions:this.options.modelOptions,vertexCount:i});return o.bounds=[t.attributes.POSITION.min,t.attributes.POSITION.max],o}getVertexCount(t){throw new Error("getVertexCount not implemented")}createGeometry(t,e,r){const s={};for(const[n,i]of Object.entries(e.attributes)){const{components:t,size:e,value:r}=i;s[n]={size:e??t,value:r}}return new n.V({id:t,topology:r,indices:e.indices.value,attributes:s})}createBuffer(t,e){t.bufferView||(t.bufferView={});const{bufferView:r}=t;return r.lumaBuffers||(r.lumaBuffers={}),r.lumaBuffers[e]||(r.lumaBuffers[e]=this.device.createBuffer({id:`from-${r.id}`,data:r.data||t.value})),r.lumaBuffers[e]}createSampler(t){return t}needsPOT(){return!1}}function pt(t){if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)return t;if(Array.isArray(t))return t.map(pt);if(t&&"object"==typeof t){const e={};for(const r in t)e[r]=pt(t[r]);return e}return t}function Bt(t,e,r){const s=new gt(t,r);return{scenes:s.instantiate(e),animator:s.createAnimator()}}}}]);