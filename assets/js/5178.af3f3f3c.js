"use strict";(self.webpackChunkwebsite_docusaurus=self.webpackChunkwebsite_docusaurus||[]).push([[5178],{7406:(e,t,n)=>{n.d(t,{M:()=>u,P:()=>s});var r=n(3845),i=n(8862),a=n(9905),o=n(5264);function s(e,t){for(var n,i={},a=(0,r.A)(e.attributes);!(n=a()).done;){var o=n.value,s=c(e,t,o.name);s&&(i[o.name]=s)}return i}function u(e,t,n){void 0===n&&(n=16);for(var r=s(e,t),i=new Array(n).fill(null),a=0,o=Object.values(r);a<o.length;a++){var u=o[a];i[u.location]=u}return i}function c(e,t,n){var s=function(e,t){var n=e.attributes.find((function(e){return e.name===t}));n||i.R.warn('shader layout attribute "'+t+'" not present in shader');return n||null}(e,n),u=function(e,t){l(e);var n=function(e,t){for(var n,i=(0,r.A)(e);!(n=i()).done;){var a=n.value;if(a.format&&a.name===t)return{attributeName:a.name,bufferName:t,stepMode:a.stepMode,vertexFormat:a.format,byteOffset:0,byteStride:a.byteStride||0}}return null}(e,t);if(n)return n;if(n=function(e,t){for(var n,i=(0,r.A)(e);!(n=i()).done;){var a,s=n.value,u=s.byteStride;if("number"!=typeof s.byteStride)for(var c,l=(0,r.A)(s.attributes||[]);!(c=l()).done;){var d=c.value;u+=(0,o.yx)(d.format).byteLength}var h=null==(a=s.attributes)?void 0:a.find((function(e){return e.attribute===t}));if(h)return{attributeName:h.attribute,bufferName:s.name,stepMode:s.stepMode,vertexFormat:h.format,byteOffset:h.byteOffset,byteStride:u}}return null}(e,t),n)return n;return i.R.warn('layout for attribute "'+t+'" not present in buffer layout'),null}(t,n);if(!s)return null;var c=(0,a.wH)(s.type),d=(0,o.Mz)(c),h=(null==u?void 0:u.vertexFormat)||d,p=(0,o.yx)(h);return{attributeName:(null==u?void 0:u.attributeName)||s.name,bufferName:(null==u?void 0:u.bufferName)||s.name,location:s.location,shaderType:s.type,primitiveType:c.primitiveType,shaderComponents:c.components,vertexFormat:h,bufferDataType:p.type,bufferComponents:p.components,normalized:p.normalized,integer:c.integer,stepMode:(null==u?void 0:u.stepMode)||s.stepMode||"vertex",byteOffset:(null==u?void 0:u.byteOffset)||0,byteStride:(null==u?void 0:u.byteStride)||0}}function l(e){for(var t,n=(0,r.A)(e);!(t=n()).done;){var a=t.value;(a.attributes&&a.format||!a.attributes&&!a.format)&&i.R.warn("BufferLayout "+name+" must have either 'attributes' or 'format' field")}}},6555:(e,t,n)=>{n.d(t,{Q:()=>a});var r=n(6769),i=n(1010);var a=function(){t.isHTMLCanvas=function(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement},t.isOffscreenCanvas=function(e){return"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas};var e=t.prototype;function t(e){var n,a,s,u,c=this;if(this.isInitialized=!1,this.isVisible=!0,this._initializedResolvers={promise:new Promise((function(e,t){s=e,u=t})),resolve:s,reject:u},this.props=Object.assign({},t.defaultProps,e),e=this.props,this.initialized=this._initializedResolvers.promise,(0,r.B)()?e.canvas?"string"==typeof e.canvas?this.canvas=o(e.canvas):this.canvas=e.canvas:this.canvas=function(e){var t=e.width,n=e.height,r=document.createElement("canvas");r.id=(0,i.L)("lumagl-auto-created-canvas"),r.width=t||1,r.height=n||1,r.style.width=Number.isFinite(t)?t+"px":"100%",r.style.height=Number.isFinite(n)?n+"px":"100%",null!=e&&e.visible||(r.style.visibility="hidden");var a=function(e){if("string"==typeof e){var t=document.getElementById(e);if(!t)throw new Error(e+" is not an HTML element");return t}if(e)return e;return document.body}((null==e?void 0:e.container)||null);return a.insertBefore(r,a.firstChild),r}(e):this.canvas={width:e.width||1,height:e.height||1},t.isHTMLCanvas(this.canvas)?(this.id=e.id||this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):t.isOffscreenCanvas(this.canvas)?(this.id=e.id||"offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas):(this.id=e.id||"node-canvas-context",this.type="node"),this.cssWidth=(null==(n=this.htmlCanvas)?void 0:n.clientWidth)||this.canvas.width,this.cssHeight=(null==(a=this.htmlCanvas)?void 0:a.clientHeight)||this.canvas.height,this.devicePixelWidth=this.canvas.width,this.devicePixelHeight=this.canvas.height,this.drawingBufferWidth=this.canvas.width,this.drawingBufferHeight=this.canvas.height,this.devicePixelRatio=globalThis.devicePixelRatio||1,t.isHTMLCanvas(this.canvas)){this._intersectionObserver=new IntersectionObserver((function(e){return c._handleIntersection(e)})),this._intersectionObserver.observe(this.canvas),this._resizeObserver=new ResizeObserver((function(e){return c._handleResize(e)}));try{this._resizeObserver.observe(this.canvas,{box:"device-pixel-content-box"})}catch(l){this._resizeObserver.observe(this.canvas,{box:"content-box"})}setTimeout((function(){return c._observeDevicePixelRatio()}),0)}}return e.toString=function(){return this[Symbol.toStringTag]+"("+this.id+")"},e.getCSSSize=function(){return[this.cssWidth,this.cssHeight]},e.getDevicePixelSize=function(){return[this.devicePixelWidth,this.devicePixelHeight]},e.getDrawingBufferSize=function(){return[this.drawingBufferWidth,this.drawingBufferHeight]},e.getMaxDrawingBufferSize=function(){var e=this.device.limits.maxTextureDimension2D;return[e,e]},e.setDrawingBufferSize=function(e,t){this.canvas.width=e,this.canvas.height=t,this.drawingBufferWidth=e,this.drawingBufferHeight=t},e.getDevicePixelRatio=function(){return"undefined"!=typeof window&&window.devicePixelRatio||1},e.cssToDevicePixels=function(e,t){void 0===t&&(t=!0);var n=this.cssToDeviceRatio(),r=this.getDrawingBufferSize();return function(e,t,n,r,i){var a,o=e,c=s(o[0],t,n),l=u(o[1],t,r,i),d=s(o[0]+1,t,n),h=d===n-1?d:d-1;d=u(o[1]+1,t,r,i),i?(a=l,l=d=0===d?d:d+1):a=d===r-1?d:d-1;return{x:c,y:l,width:Math.max(h-c+1,1),height:Math.max(a-l+1,1)}}(e,n,r[0],r[1],t)},e.getPixelSize=function(){return this.getDevicePixelSize()},e.getAspect=function(){var e=this.getDevicePixelSize();return e[0]/e[1]},e.cssToDeviceRatio=function(){try{var e=this.getDrawingBufferSize()[0],t=this.getCSSSize()[0];return t?e/t:1}catch(n){return 1}},e.resize=function(e){this.setDrawingBufferSize(e.width,e.height)},e._setAutoCreatedCanvasId=function(e){var t;"lumagl-auto-created-canvas"===(null==(t=this.htmlCanvas)?void 0:t.id)&&(this.htmlCanvas.id=e)},e._handleIntersection=function(e){var t=this,n=e.find((function(e){return e.target===t.canvas}));if(n){var r=n.isIntersecting;this.isVisible!==r&&(this.isVisible=r,this.device.props.onVisibilityChange(this))}},e._handleResize=function(e){var t,n,r=this,i=e.find((function(e){return e.target===r.canvas}));if(i){this.cssWidth=i.contentBoxSize[0].inlineSize,this.cssHeight=i.contentBoxSize[0].blockSize;var a=this.getDevicePixelSize(),o=(null==(t=i.devicePixelContentBoxSize)?void 0:t[0].inlineSize)||i.contentBoxSize[0].inlineSize*devicePixelRatio,s=(null==(n=i.devicePixelContentBoxSize)?void 0:n[0].blockSize)||i.contentBoxSize[0].blockSize*devicePixelRatio,u=this.getMaxDrawingBufferSize(),c=u[0],l=u[1];this.devicePixelWidth=Math.max(1,Math.min(o,c)),this.devicePixelHeight=Math.max(1,Math.min(s,l)),this.props.autoResize&&(this.props.useDevicePixels?this.setDrawingBufferSize(this.devicePixelWidth,this.devicePixelHeight):this.setDrawingBufferSize(this.cssWidth,this.cssHeight),this._updateDevice()),this._initializedResolvers.resolve(),this.isInitialized=!0,this.device.props.onResize(this,{oldPixelSize:a})}},e._observeDevicePixelRatio=function(){var e=this,t=this.devicePixelRatio;this.devicePixelRatio=window.devicePixelRatio,this.device.props.onDevicePixelRatioChange(this,{oldRatio:t}),matchMedia("(resolution: "+this.devicePixelRatio+"dppx)").addEventListener("change",(function(){return e._observeDevicePixelRatio()}),{once:!0})},t}();function o(e){var t=document.getElementById(e);if(!a.isHTMLCanvas(t))throw new Error("Object is not a canvas element");return t}function s(e,t,n){return Math.min(Math.round(e*t),n-1)}function u(e,t,n,r){return r?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}a.defaultProps={id:void 0,canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb"}},2920:(e,t,n)=>{n.d(t,{M:()=>s});var r,i=n(8696),a=n(7387),o=n(8314);r=Symbol.toStringTag;var s=function(e){function t(n,r){return e.call(this,n,r,t.defaultProps)||this}return(0,a.A)(t,e),(0,i.A)(t,[{key:r,get:function(){return"CommandBuffer"}}]),t}(o.F);s.defaultProps=Object.assign({},o.F.defaultProps)},7608:(e,t,n)=>{n.d(t,{i:()=>s});var r,i=n(8696),a=n(7387),o=n(8314);r=Symbol.toStringTag;var s=function(e){function t(n,r){return e.call(this,n,r,t.defaultProps)||this}return(0,a.A)(t,e),(0,i.A)(t,[{key:r,get:function(){return"CommandEncoder"}}]),t}(o.F);s.defaultProps=Object.assign({},o.F.defaultProps,{measureExecutionTime:void 0})},5128:(e,t,n)=>{n.d(t,{C:()=>s});var r,i=n(8696),a=n(7387),o=n(8314);r=Symbol.toStringTag;var s=function(e){function t(n,r){var i;return(i=e.call(this,n,r,t.defaultProps)||this).hash="",i.shaderLayout=r.shaderLayout,i}return(0,a.A)(t,e),(0,i.A)(t,[{key:r,get:function(){return"ComputePipeline"}}]),t}(o.F);s.defaultProps=Object.assign({},o.F.defaultProps,{shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0})},9871:(e,t,n)=>{n.d(t,{G:()=>c});var r,i=n(8696),a=n(7387),o=n(8314),s=n(5839),u=n(8862);r=Symbol.toStringTag;var c=function(e){function t(n,r){var i;return void 0===r&&(r={}),(i=e.call(this,n,r,t.defaultProps)||this).width=i.props.width,i.height=i.props.height,i}(0,a.A)(t,e);var n=t.prototype;return n.clone=function(e){var t=this.colorAttachments.map((function(t){return t.texture.clone(e)})),n=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(e);return this.device.createFramebuffer(Object.assign({},this.props,{colorAttachments:t,depthStencilAttachment:n}))},n.resize=function(e){var t=!e;if(e){var n=Array.isArray(e)?e:[e.width,e.height],r=n[0],i=n[1];t=t||i!==this.height||r!==this.width,this.width=r,this.height=i}t&&(u.R.log(2,"Resizing framebuffer "+this.id+" to "+this.width+"x"+this.height)(),this.resizeAttachments(this.width,this.height))},n.autoCreateAttachmentTextures=function(){var e=this;if(0===this.props.colorAttachments.length&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((function(t,n){if("string"==typeof t){var r=e.createColorTexture(t,n);return e.attachResource(r),r.view}return t instanceof s.g?t.view:t}));var t=this.props.depthStencilAttachment;if(t)if("string"==typeof t){var n=this.createDepthStencilTexture(t);this.attachResource(n),this.depthStencilAttachment=n.view}else t instanceof s.g?this.depthStencilAttachment=t.view:this.depthStencilAttachment=t},n.createColorTexture=function(e,t){return this.device.createTexture({id:this.id+"-color-attachment-"+t,usage:s.g.RENDER_ATTACHMENT,format:e,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})},n.createDepthStencilTexture=function(e){return this.device.createTexture({id:this.id+"-depth-stencil-attachment",usage:s.g.RENDER_ATTACHMENT,format:e,width:this.width,height:this.height})},n.resizeAttachments=function(e,t){for(var n=0;n<this.colorAttachments.length;++n)if(this.colorAttachments[n]){var r=this.colorAttachments[n].texture.clone({width:e,height:t});this.destroyAttachedResource(this.colorAttachments[n]),this.colorAttachments[n]=r.view,this.attachResource(r.view)}if(this.depthStencilAttachment){var i=this.depthStencilAttachment.texture.clone({width:e,height:t});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=i.view,this.attachResource(i)}this.updateAttachments()},(0,i.A)(t,[{key:r,get:function(){return"Framebuffer"}}]),t}(o.F);c.defaultProps=Object.assign({},o.F.defaultProps,{width:1,height:1,colorAttachments:[],depthStencilAttachment:null})},6273:(e,t,n)=>{n.d(t,{d:()=>s});var r,i=n(8696),a=n(7387),o=n(8314);r=Symbol.toStringTag;var s=function(e){function t(n,r){return e.call(this,n,r,t.defaultProps)||this}return(0,a.A)(t,e),(0,i.A)(t,[{key:r,get:function(){return"QuerySet"}}]),t}(o.F);s.defaultProps=Object.assign({},o.F.defaultProps,{type:void 0,count:void 0})},6730:(e,t,n)=>{n.d(t,{A:()=>u});var r,i,a=n(8696),o=n(7387),s=n(8314);i=Symbol.toStringTag;var u=function(e){function t(n,r){return r=t.normalizeProps(n,r),e.call(this,n,r,t.defaultProps)||this}return(0,o.A)(t,e),t.normalizeProps=function(e,t){return t},(0,a.A)(t,[{key:i,get:function(){return"RenderPass"}}]),t}(s.F);r=u,u.defaultClearColor=[0,0,0,1],u.defaultClearDepth=1,u.defaultClearStencil=0,u.defaultProps=Object.assign({},s.F.defaultProps,{framebuffer:null,parameters:void 0,clearColor:r.defaultClearColor,clearColors:void 0,clearDepth:r.defaultClearDepth,clearStencil:r.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0})},9853:(e,t,n)=>{n.d(t,{r:()=>s});var r,i=n(8696),a=n(7387),o=n(8314);r=Symbol.toStringTag;var s=function(e){function t(n,r){var i;return(i=e.call(this,n,r,t.defaultProps)||this).linkStatus="pending",i.hash="",i.shaderLayout=i.props.shaderLayout,i.bufferLayout=i.props.bufferLayout||[],i}return(0,a.A)(t,e),(0,i.A)(t,[{key:r,get:function(){return"RenderPipeline"}}]),t}(o.F);s.defaultProps=Object.assign({},o.F.defaultProps,{vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",colorAttachmentFormats:void 0,depthStencilAttachmentFormat:void 0,parameters:{},bindings:{},uniforms:{}})},9532:(e,t,n)=>{n.d(t,{L:()=>s});var r,i=n(8696),a=n(7387),o=n(8314);r=Symbol.toStringTag;var s=function(e){function t(n,r){return r=t.normalizeProps(n,r),e.call(this,n,r,t.defaultProps)||this}return(0,a.A)(t,e),t.normalizeProps=function(e,t){return t},(0,i.A)(t,[{key:r,get:function(){return"Sampler"}}]),t}(o.F);s.defaultProps=Object.assign({},o.F.defaultProps,{type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1})},349:(e,t,n)=>{n.d(t,{M:()=>p});var r,i=n(675),a=n(467),o=n(8696),s=n(7387),u=n(8314),c=n(1010),l=n(3845);function d(e,t,n,r){if(null!=r&&r.inlineSource){var i=function(e,t,n){for(var r="",i=t-2;i<=t;i++){var a=e[i-1];void 0!==a&&(r+=h(a,t,n))}return r}(t,n);return"\n"+i+(e.linePos>0?" ".repeat(e.linePos+5)+"^^^\n":"")+e.type.toUpperCase()+": "+e.message+"\n\n"}var a="error"===e.type?"red":"#8B4000";return null!=r&&r.html?"<div class='luma-compiler-log-error' style=\"color:"+a+';"><b> '+e.type.toUpperCase()+": "+e.message+"</b></div>":e.type.toUpperCase()+": "+e.message}function h(e,t,n){var r=null!=n&&n.html?e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"):e;return function(e,t){for(var n="",r=e.length;r<t;++r)n+=" ";return n+e}(String(t),4)+": "+r+(null!=n&&n.html?"<br/>":"\n")}r=Symbol.toStringTag;var p=function(e){function t(n,r){var i;return r=Object.assign({},r,{debugShaders:r.debugShaders||n.props.debugShaders||"errors"}),(i=e.call(this,n,Object.assign({id:f(r)},r),t.defaultProps)||this).compilationStatus="pending",i.stage=i.props.stage,i.source=i.props.source,i}(0,s.A)(t,e);var n=t.prototype;return n.getCompilationInfoSync=function(){return null},n.getTranslatedSource=function(){return null},n.debugShader=function(){var e=(0,a.A)((0,i.A)().mark((function e(){var t,n;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.debugShaders,e.t0=t,e.next="never"===e.t0?4:"errors"===e.t0?5:"warnings"===e.t0||"always"===e.t0?8:9;break;case 4:return e.abrupt("return");case 5:if("success"!==this.compilationStatus){e.next=7;break}return e.abrupt("return");case 7:case 8:return e.abrupt("break",9);case 9:return e.next=11,this.getCompilationInfo();case 11:if(n=e.sent,"warnings"!==t||0!==(null==n?void 0:n.length)){e.next=14;break}return e.abrupt("return");case 14:this._displayShaderLog(n,this.id);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n._displayShaderLog=function(e,t){var n,r,i=this;if("undefined"!=typeof document&&null!=(n=document)&&n.createElement){var a=t,o=this.stage+' shader "'+a+'"',s=function(e,t,n){var r="",i=t.split(/\r?\n/),a=e.slice().sort((function(e,t){return e.lineNum-t.lineNum}));switch((null==n?void 0:n.showSourceCode)||"no"){case"all":for(var o=0,s=1;s<=i.length;s++)for(r+=h(i[s-1],s,n);a.length>o&&a[o].lineNum===s;){var u=a[o++];r+=d(u,i,u.lineNum,Object.assign({},n,{inlineSource:!1}))}for(;a.length>o;)r+=d(a[o++],[],0,Object.assign({},n,{inlineSource:!1}));return r;case"issues":case"no":for(var c,p=(0,l.A)(e);!(c=p()).done;){var f=c.value;r+=d(f,i,f.lineNum,{inlineSource:"no"!==(null==n?void 0:n.showSourceCode)})}return r}}(e,this.source,{showSourceCode:"all",html:!0}),u=this.getTranslatedSource();u&&(s+='<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>'+u+"</pre></code>");var c=document.createElement("Button");c.innerHTML="\n<h1>Compilation error in "+o+'</h1><br /><br />\n<code style="user-select:text;"><pre>\n'+s+"\n</pre></code>",c.style.top="10px",c.style.left="10px",c.style.position="absolute",c.style.zIndex="9999",c.style.width="100%",c.style.textAlign="left",document.body.appendChild(c),null==(r=document.getElementsByClassName("luma-compiler-log-error")[0])||r.scrollIntoView(),c.onclick=function(){var e="data:text/plain,"+encodeURIComponent(i.source);navigator.clipboard.writeText(e)}}},(0,o.A)(t,[{key:r,get:function(){return"Shader"}}]),t}(u.F);function f(e){return function(e,t){void 0===t&&(t="unnamed");var n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(e);return n?n[1]:t}(e.source)||e.id||(0,c.L)("unnamed "+e.stage+"-shader")}p.defaultProps=Object.assign({},u.F.defaultProps,{language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0})},1213:(e,t,n)=>{n.d(t,{X:()=>s});var r,i=n(8696),a=n(7387),o=n(8314);r=Symbol.toStringTag;var s=function(e){function t(n,r){return e.call(this,n,r,t.defaultProps)||this}return(0,a.A)(t,e),(0,i.A)(t,[{key:r,get:function(){return"TextureView"}}]),t}(o.F);s.defaultProps=Object.assign({},o.F.defaultProps,{format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0})},5839:(e,t,n)=>{n.d(t,{g:()=>h});var r,i,a=n(8696),o=n(9417),s=n(7387),u=n(8314),c=n(9532),l=n(8862),d={"1d":"1d","2d":"2d","2d-array":"2d",cube:"2d","cube-array":"2d","3d":"3d"};i=Symbol.toStringTag;var h=function(e){(0,s.A)(n,e);var t=n.prototype;function n(t,r){var i;if(r=n.normalizeProps(t,r),(i=e.call(this,t,r,n.defaultProps)||this).dimension=i.props.dimension,i.baseDimension=d[i.dimension],i.format=i.props.format,i.width=i.props.width,i.height=i.props.height,i.depth=i.props.depth,i.mipLevels=i.props.mipLevels,void 0===i.props.width||void 0===i.props.height)if(t.isExternalImage(r.data)){var a=t.getExternalImageSize(r.data);i.width=(null==a?void 0:a.width)||1,i.height=(null==a?void 0:a.height)||1}else i.width=1,i.height=1,void 0!==i.props.width&&void 0!==i.props.height||l.R.warn((0,o.A)(i)+" created with undefined width or height. This is deprecated. Use AsyncTexture instead.")();return i.updateTimestamp=t.incrementTimestamp(),i}return t.toString=function(){return"Texture("+this.id+","+this.format+","+this.width+"x"+this.height+")"},t.setSampler=function(e){this.sampler=e instanceof c.L?e:this.device.createSampler(e)},t.clone=function(e){return this.device.createTexture(Object.assign({},this.props,e))},n.normalizeProps=function(e,t){var n=Object.assign({},t),r=n.width,i=n.height;return"number"==typeof r&&(n.width=Math.max(1,Math.ceil(r))),"number"==typeof i&&(n.height=Math.max(1,Math.ceil(i))),n},t._initializeData=function(e){this.device.isExternalImage(e)?this.copyExternalImage({image:e,width:this.width,height:this.height,depth:this.depth,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1}):e&&this.copyImageData({data:e,mipLevel:0,x:0,y:0,z:0,aspect:"all"})},t._normalizeCopyImageDataOptions=function(e){var t=this.width,r=this.height,i=this.depth,a=Object.assign({},n.defaultCopyDataOptions,{width:t,height:r,depth:i},e),o=this.device.getTextureFormatInfo(this.format);if(!e.bytesPerRow&&!o.bytesPerPixel)throw new Error("bytesPerRow must be provided for texture format "+this.format);return a.bytesPerRow=e.bytesPerRow||t*(o.bytesPerPixel||4),a.rowsPerImage=e.rowsPerImage||r,a},t._normalizeCopyExternalImageOptions=function(e){var t=this.device.getExternalImageSize(e.image),r=Object.assign({},n.defaultCopyExternalImageOptions,t,e);return r.width=Math.min(r.width,this.width-r.x),r.height=Math.min(r.height,this.height-r.y),r},(0,a.A)(n,[{key:i,get:function(){return"Texture"}}]),n}(u.F);r=h,h.SAMPLE=4,h.STORAGE=8,h.RENDER=16,h.COPY_SRC=1,h.COPY_DST=2,h.TEXTURE=4,h.RENDER_ATTACHMENT=16,h.defaultProps=Object.assign({},u.F.defaultProps,{data:null,dimension:"2d",format:"rgba8unorm",usage:r.TEXTURE|r.RENDER_ATTACHMENT|r.COPY_DST,width:void 0,height:void 0,depth:1,mipLevels:1,samples:void 0,sampler:{},view:void 0}),h.defaultCopyDataOptions={data:void 0,byteOffset:0,bytesPerRow:void 0,rowsPerImage:void 0,mipLevel:0,x:0,y:0,z:0,aspect:"all"},h.defaultCopyExternalImageOptions={image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1}},7896:(e,t,n)=>{n.d(t,{o:()=>u});var r,i=n(8696),a=n(7387),o=n(7406),s=n(8314);r=Symbol.toStringTag;var u=function(e){function t(n,r){var i;return(i=e.call(this,n,r,t.defaultProps)||this).indexBuffer=null,i.maxVertexAttributes=n.limits.maxVertexAttributes,i.attributes=new Array(i.maxVertexAttributes).fill(null),i.attributeInfos=(0,o.M)(r.shaderLayout,r.bufferLayout,i.maxVertexAttributes),i}return(0,a.A)(t,e),t.prototype.setConstantWebGL=function(e,t){throw new Error("constant attributes not supported")},(0,i.A)(t,[{key:r,get:function(){return"VertexArray"}}]),t}(s.F);u.defaultProps=Object.assign({},s.F.defaultProps,{shaderLayout:void 0,bufferLayout:[]})},9905:(e,t,n)=>{function r(e){return s[e]}function i(e){var t=o[e],n=t[0],r=t[1],i="i32"===n||"u32"===n,s="u32"!==n;return{primitiveType:n,components:r,byteLength:a[n]*r,integer:i,signed:s}}n.d(t,{k0:()=>r,wH:()=>i});var a={f32:4,f16:2,i32:4,u32:4},o={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},s={f32:{type:"f32",components:1},f16:{type:"f16",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<f16>":{type:"f16",components:2},"vec3<f16>":{type:"f16",components:3},"vec4<f16>":{type:"f16",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16},"mat2x2<f16>":{type:"f16",components:4},"mat2x3<f16>":{type:"f16",components:6},"mat2x4<f16>":{type:"f16",components:8},"mat3x2<f16>":{type:"f16",components:6},"mat3x3<f16>":{type:"f16",components:9},"mat3x4<f16>":{type:"f16",components:12},"mat4x2<f16>":{type:"f16",components:8},"mat4x3<f16>":{type:"f16",components:12},"mat4x4<f16>":{type:"f16",components:16},"mat2x2<i32>":{type:"i32",components:4},"mat2x3<i32>":{type:"i32",components:6},"mat2x4<i32>":{type:"i32",components:8},"mat3x2<i32>":{type:"i32",components:6},"mat3x3<i32>":{type:"i32",components:9},"mat3x4<i32>":{type:"i32",components:12},"mat4x2<i32>":{type:"i32",components:8},"mat4x3<i32>":{type:"i32",components:12},"mat4x4<i32>":{type:"i32",components:16},"mat2x2<u32>":{type:"u32",components:4},"mat2x3<u32>":{type:"u32",components:6},"mat2x4<u32>":{type:"u32",components:8},"mat3x2<u32>":{type:"u32",components:6},"mat3x3<u32>":{type:"u32",components:9},"mat3x4<u32>":{type:"u32",components:12},"mat4x2<u32>":{type:"u32",components:8},"mat4x3<u32>":{type:"u32",components:12},"mat4x4<u32>":{type:"u32",components:16}},u={vec2i:"vec2<i32>",vec3i:"vec3<i32>",vec4i:"vec4<i32>",vec2u:"vec2<u32>",vec3u:"vec3<u32>",vec4u:"vec4<u32>",vec2f:"vec2<f32>",vec3f:"vec3<f32>",vec4f:"vec4<f32>",vec2h:"vec2<f16>",vec3h:"vec3<f16>",vec4h:"vec4<f16>"};Object.assign({},u,{mat2x2f:"mat2x2<f32>",mat2x3f:"mat2x3<f32>",mat2x4f:"mat2x4<f32>",mat3x2f:"mat3x2<f32>",mat3x3f:"mat3x3<f32>",mat3x4f:"mat3x4<f32>",mat4x2f:"mat4x2<f32>",mat4x3f:"mat4x3<f32>",mat4x4f:"mat4x4<f32>",mat2x2i:"mat2x2<i32>",mat2x3i:"mat2x3<i32>",mat2x4i:"mat2x4<i32>",mat3x2i:"mat3x2<i32>",mat3x3i:"mat3x3<i32>",mat3x4i:"mat3x4<i32>",mat4x2i:"mat4x2<i32>",mat4x3i:"mat4x3<i32>",mat4x4i:"mat4x4<i32>",mat2x2u:"mat2x2<u32>",mat2x3u:"mat2x3<u32>",mat2x4u:"mat2x4<u32>",mat3x2u:"mat3x2<u32>",mat3x3u:"mat3x3<u32>",mat3x4u:"mat3x4<u32>",mat4x2u:"mat4x2<u32>",mat4x3u:"mat4x3<u32>",mat4x4u:"mat4x4<u32>",mat2x2h:"mat2x2<f16>",mat2x3h:"mat2x3<f16>",mat2x4h:"mat2x4<f16>",mat3x2h:"mat3x2<f16>",mat3x3h:"mat3x3<f16>",mat3x4h:"mat3x4<f16>",mat4x2h:"mat4x2<f16>",mat4x3h:"mat4x3<f16>",mat4x4h:"mat4x4<f16>"})},5264:(e,t,n)=>{n.d(t,{Mz:()=>o,OB:()=>a,yx:()=>i});var r=n(2596);function i(e){var t;e.endsWith("-webgl")&&(e.replace("-webgl",""),t=!0);var n=e.split("x"),i=n[0],a=n[1],o=i,s=a?parseInt(a):1,u=(0,r.vE)(o),c={type:o,components:s,byteLength:u.byteLength*s,integer:u.integer,signed:u.signed,normalized:u.normalized};return t&&(c.webglOnly=!0),c}function a(e,t,n){if(!t||t>4)throw new Error("size "+t);var i=t;return function(e,t,n){var i=n?(0,r.gm)(e):e;switch(i){case"unorm8":return 1===t?"unorm8-webgl":3===t?"unorm8x3-webgl":i+"x"+t;case"snorm8":case"uint8":case"sint8":case"uint16":case"sint16":case"unorm16":case"snorm16":case"float16":if(1===t||3===t)throw new Error("size: "+t);return i+"x"+t;default:return 1===t?i:i+"x"+t}}((0,r.UE)(e),i,n)}function o(e){var t;switch(e.primitiveType){case"f32":t="float32";break;case"i32":t="sint32";break;case"u32":t="uint32";break;case"f16":return e.components<=2?"float16x2":"float16x4"}return 1===e.components?t:t+"x"+e.components}},5178:(e,t,n)=>{n.r(t),n.d(t,{WebGPUDevice:()=>oe});var r=n(675),i=n(467),a=n(8696),o=n(9417),s=n(7387),u=n(2947),c=n(8564);var l=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).device=t,r.byteLength=function(e){var t;return e.byteLength||(null==(t=e.data)?void 0:t.byteLength)||0}(n);var i=Boolean(n.data),a=4*Math.ceil(r.byteLength/4);return r.device.handle.pushErrorScope("out-of-memory"),r.device.handle.pushErrorScope("validation"),r.handle=r.props.handle||r.device.handle.createBuffer({size:a,usage:r.props.usage||GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,mappedAtCreation:r.props.mappedAtCreation||i,label:r.props.id}),r.device.handle.popErrorScope().then((function(e){e&&r.device.reportError(new Error("Buffer validation failed: "+e.message),(0,o.A)(r))})),r.device.handle.popErrorScope().then((function(e){e&&r.device.reportError(new Error("Buffer out of memory: "+e.message),(0,o.A)(r))})),n.data&&r._writeMapped(n.data),i&&!n.mappedAtCreation&&r.handle.unmap(),r}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){var e;null==(e=this.handle)||e.destroy(),this.handle=null},n.write=function(e,t){void 0===t&&(t=0),this.device.handle.queue.writeBuffer(this.handle,t,e.buffer,e.byteOffset,e.byteLength)},n.readAsync=function(){var e=(0,i.A)((0,r.A)().mark((function e(n,i){var a,o,s;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),void 0===i&&(i=this.byteLength),a=new t(this.device,{usage:c.h.MAP_READ|c.h.COPY_DST,byteLength:i}),(o=this.device.handle.createCommandEncoder()).copyBufferToBuffer(this.handle,n,a.handle,0,i),this.device.handle.queue.submit([o.finish()]),e.next=8,a.handle.mapAsync(GPUMapMode.READ,n,i);case 8:return s=a.handle.getMappedRange().slice(0),a.handle.unmap(),a.destroy(),e.abrupt("return",new Uint8Array(s));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n._writeMapped=function(e){var t=this.handle.getMappedRange();new e.constructor(t).set(e)},n.mapAsync=function(e,t,n){return void 0===t&&(t=0),this.handle.mapAsync(e,t,n)},n.getMappedRange=function(e,t){return void 0===e&&(e=0),this.handle.getMappedRange(e,t)},n.unmap=function(){this.handle.unmap()},t}(c.h),d=n(5839),h=n(8862);function p(e){if(e.includes("webgl"))throw new Error("webgl-only format");return e}var f,m=n(9532),v=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).device=t;var i=Object.assign({},r.props,{mipmapFilter:void 0});return"comparison-sampler"!==n.type&&delete i.compare,n.mipmapFilter&&"none"!==n.mipmapFilter&&(i.mipmapFilter=n.mipmapFilter),r.handle=n.handle||r.device.handle.createSampler(i),r.handle.label=r.props.id,r}return(0,s.A)(t,e),t.prototype.destroy=function(){this.handle=null},t}(m.L),g=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).device=t,r.texture=n.texture,r.device.pushErrorScope("validation"),r.handle=r.texture.handle.createView({format:r.props.format||r.texture.format,dimension:r.props.dimension||r.texture.dimension,aspect:r.props.aspect,baseMipLevel:r.props.baseMipLevel,mipLevelCount:r.props.mipLevelCount,baseArrayLayer:r.props.baseArrayLayer,arrayLayerCount:r.props.arrayLayerCount}),r.device.handle.popErrorScope().then((function(e){e&&r.device.reportError(new Error("TextureView validation failed: "+e.message),(0,o.A)(r))})),r.handle.label=r.props.id,r}return(0,s.A)(t,e),t.prototype.destroy=function(){this.handle=null},t}(n(1213).X),b=function(e){function t(t,n){var r,i;((r=e.call(this,t,n)||this).device=t,"cube"===r.dimension&&(r.depth=6),r.device.handle.pushErrorScope("out-of-memory"),r.device.handle.pushErrorScope("validation"),r.handle=r.props.handle||r.device.handle.createTexture({label:r.id,size:{width:r.width,height:r.height,depthOrArrayLayers:r.depth},usage:r.props.usage||d.g.TEXTURE|d.g.COPY_DST,dimension:r.baseDimension,format:p(r.format),mipLevelCount:r.mipLevels,sampleCount:r.props.samples}),r.device.handle.popErrorScope().then((function(e){e&&r.device.reportError(new Error("Texture validation failed: "+e.message),(0,o.A)(r))})),r.device.handle.popErrorScope().then((function(e){e&&r.device.reportError(new Error("Texture out of memory: "+e.message),(0,o.A)(r))})),r.props.handle)&&((i=r.handle).label||(i.label=r.id),r.width=r.handle.width,r.height=r.handle.height);return r.sampler=n.sampler instanceof v?n.sampler:new v(r.device,n.sampler||{}),r.view=new g(r.device,Object.assign({},r.props,{texture:(0,o.A)(r),mipLevelCount:r.mipLevels,arrayLayerCount:r.depth})),r._initializeData(n.data),r}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){var e;null==(e=this.handle)||e.destroy(),this.handle=null},n.createView=function(e){return new g(this.device,Object.assign({},e,{texture:this}))},n.copyImageData=function(e){var t=this,n=this.width,r=this.height,i=this.depth,a=this._normalizeCopyImageDataOptions(e);this.device.handle.pushErrorScope("validation"),this.device.handle.queue.writeTexture({texture:this.handle,mipLevel:a.mipLevel,aspect:a.aspect,origin:[a.x,a.y,a.z]},a.data,{offset:a.byteOffset,bytesPerRow:a.bytesPerRow,rowsPerImage:a.rowsPerImage},[n,r,i]),this.device.handle.popErrorScope().then((function(e){e&&t.device.reportError(new Error("copyImageData validation failed: "+e.message))}))},n.copyExternalImage=function(e){var t=this,n=this._normalizeCopyExternalImageOptions(e);return this.device.handle.pushErrorScope("validation"),this.device.handle.queue.copyExternalImageToTexture({source:n.image,origin:[n.sourceX,n.sourceY],flipY:n.flipY},{texture:this.handle,origin:[n.x,n.y,n.depth],mipLevel:n.mipLevel,aspect:n.aspect,colorSpace:n.colorSpace,premultipliedAlpha:n.premultipliedAlpha},[n.width,n.height,1]),this.device.handle.popErrorScope().then((function(e){e&&t.device.reportError(new Error("copyExternalImage validation failed: "+e.message))})),{width:n.width,height:n.height}},n.generateMipmapsWebGL=function(){h.R.warn(this+": generateMipmaps not supported in WebGPU")()},t}(d.g),y=n(8314);f=Symbol.toStringTag;var x=function(e){function t(n,r){return e.call(this,n,r,t.defaultProps)||this}return(0,s.A)(t,e),(0,a.A)(t,[{key:f,get:function(){return"ExternalTexture"}}]),t}(y.F);x.defaultProps=Object.assign({},y.F.defaultProps,{source:void 0,colorSpace:"srgb"});var w=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).device=t,r.handle=r.props.handle||r.device.handle.importExternalTexture({source:n.source,colorSpace:n.colorSpace}),r.sampler=null,r}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){this.handle=null},n.setSampler=function(e){return this.sampler=e instanceof v?e:new v(this.device,e),this},t}(x),S=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).device=t;var i=n.source.includes("#version");if("glsl"===r.props.language||i)throw new Error("GLSL shaders are not supported in WebGPU");return r.device.handle.pushErrorScope("validation"),r.handle=r.props.handle||r.device.handle.createShaderModule({code:n.source}),r.device.handle.popErrorScope().then((function(e){e&&h.R.error((0,o.A)(r)+' creation failed:\n"'+e.message+'"',(0,o.A)(r),r.props.source)()})),r.handle.label=r.props.id,r._checkCompilationError(),r}(0,s.A)(t,e);var n=t.prototype;return n._checkCompilationError=function(){var e=(0,i.A)((0,r.A)().mark((function e(){var t,n;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompilationInfo();case 2:t=e.sent,n=Boolean(t.find((function(e){return"error"===e.type}))),this.compilationStatus=n?"error":"success",this.debugShader(),"error"===this.compilationStatus&&h.R.error("Shader compilation error",t)();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.destroy=function(){this.handle=null},n.getCompilationInfo=function(){var e=(0,i.A)((0,r.A)().mark((function e(){var t;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handle.getCompilationInfo();case 2:return t=e.sent,e.abrupt("return",t.messages);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,a.A)(t,[{key:"asyncCompilationStatus",get:function(){var e=this;return this.getCompilationInfo().then((function(){return e.compilationStatus}))}}]),t}(n(349).M),A=n(3845),P=n(9853);function C(e){return e.depthStencil=e.depthStencil||{format:"depth24plus",stencilFront:{},stencilBack:{},depthWriteEnabled:!1,depthCompare:"less-equal"},e.depthStencil}function E(e){return C(e).stencilFront}function T(e){return C(e).stencilBack}var R={cullMode:function(e,t,n){n.primitive=n.primitive||{},n.primitive.cullMode=t},frontFace:function(e,t,n){n.primitive=n.primitive||{},n.primitive.frontFace=t},depthWriteEnabled:function(e,t,n){t&&(C(n).depthWriteEnabled=t)},depthCompare:function(e,t,n){C(n).depthCompare=t},depthFormat:function(e,t,n){C(n).format=t},depthBias:function(e,t,n){C(n).depthBias=t},depthBiasSlopeScale:function(e,t,n){C(n).depthBiasSlopeScale=t},depthBiasClamp:function(e,t,n){C(n).depthBiasClamp=t},stencilReadMask:function(e,t,n){C(n).stencilReadMask=t},stencilWriteMask:function(e,t,n){C(n).stencilWriteMask=t},stencilCompare:function(e,t,n){var r=E(n),i=T(n);r.compare=t,i.compare=t},stencilPassOperation:function(e,t,n){var r=E(n),i=T(n);r.passOp=t,i.passOp=t},stencilFailOperation:function(e,t,n){var r=E(n),i=T(n);r.failOp=t,i.failOp=t},stencilDepthFailOperation:function(e,t,n){var r=E(n),i=T(n);r.depthFailOp=t,i.depthFailOp=t},sampleCount:function(e,t,n){n.multisample=n.multisample||{},n.multisample.count=t},sampleMask:function(e,t,n){n.multisample=n.multisample||{},n.multisample.mask=t},sampleAlphaToCoverageEnabled:function(e,t,n){n.multisample=n.multisample||{},n.multisample.alphaToCoverageEnabled=t},colorMask:function(e,t,n){B(n,0).writeMask=t},blend:function(e,t,n){t&&M(n,0)},blendColorOperation:function(e,t,n){var r=M(n,0);r.color=r.color||{},r.color.operation=t},blendColorSrcFactor:function(e,t,n){var r=M(n,0);r.color=r.color||{},r.color.srcFactor=t},blendColorDstFactor:function(e,t,n){M(n,0).color.dstFactor=t},blendAlphaOperation:function(e,t,n){var r=M(n,0);r.alpha=r.alpha||{},r.alpha.operation=t},blendAlphaSrcFactor:function(e,t,n){var r=M(n,0);r.alpha=r.alpha||{},r.alpha.srcFactor=t},blendAlphaDstFactor:function(e,t,n){var r=M(n,0);r.alpha=r.alpha||{},r.alpha.dstFactor=t}},L={primitive:{cullMode:"back",topology:"triangle-list"},vertex:{module:void 0,entryPoint:"main"},fragment:{module:void 0,entryPoint:"main",targets:[]},layout:"auto"};function O(e,t){void 0===t&&(t={}),Object.assign(e,Object.assign({},L,e)),function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=r[n],a=i[0],o=i[1],s=R[a];if(!s)throw new Error("Illegal parameter "+a);s(a,o,e)}}(e,t)}function B(e,t){var n,r,i,a,o;if(e.fragment.targets=(null==(n=e.fragment)?void 0:n.targets)||[],!Array.isArray(null==(r=e.fragment)?void 0:r.targets))throw new Error("colorstate");0===(null==(i=e.fragment)||null==(i=i.targets)?void 0:i.length)&&(null==(o=e.fragment.targets)||o.push({}));return null==(a=e.fragment)?void 0:a.targets[0]}function M(e,t){var n=B(e);return n.blend=n.blend||{color:{},alpha:{}},n.blend}function _(e,t,n,r){var i=function(e,t){for(var n=[],r=0,i=Object.entries(e);r<i.length;r++){var a=i[r],o=a[0],s=a[1],u=D(t,o);if(u){var c=F(s,u.location);c&&n.push(c)}if(s instanceof d.g&&(u=D(t,o+"Sampler",{ignoreWarnings:!0}))){var l=F(s,u.location,{sampler:!0});l&&n.push(l)}}return n}(r,n);e.pushErrorScope("validation");var a=e.createBindGroup({layout:t,entries:i});return e.popErrorScope().then((function(e){e&&h.R.error("createBindGroup validation failed: "+e.message)()})),a}function D(e,t,n){var r=e.bindings.find((function(e){return e.name===t||e.name+"uniforms"===t.toLocaleLowerCase()}));return r||null!=n&&n.ignoreWarnings||h.R.warn("Binding "+t+" not set: Not found in shader layout.")(),r||null}function F(e,t,n){return e instanceof c.h?{binding:t,resource:{buffer:e.handle}}:e instanceof m.L?{binding:t,resource:e.handle}:e instanceof d.g?null!=n&&n.sampler?{binding:t,resource:e.sampler.handle}:{binding:t,resource:e.view.handle}:(h.R.warn("invalid binding "+name,e),null)}var z,I=n(5264);function k(e){if(e.endsWith("-webgl"))throw new Error("WebGPU does not support vertex format "+e);return e}function G(e,t){for(var n,r=[],i=new Set,a=(0,A.A)(t);!(n=a()).done;){var o=n.value,s=[],u="vertex",c=0,l=o.format;if(o.attributes)for(var d,h=(0,A.A)(o.attributes);!(d=h()).done;){var p=d.value,f=W(e,p.attribute,i),m=null==f?void 0:f.location;u=(null==f?void 0:f.stepMode)||(null!=f&&f.name.startsWith("instance")?"instance":"vertex"),s.push({format:k(p.format||o.format),offset:p.byteOffset,shaderLocation:m}),c+=(0,I.yx)(l).byteLength}else{var v=W(e,o.name,i);if(!v)continue;c=(0,I.yx)(l).byteLength,u=v.stepMode||(v.name.startsWith("instance")?"instance":"vertex"),s.push({format:k(l),offset:0,shaderLocation:v.location})}r.push({arrayStride:o.byteStride||c,stepMode:u,attributes:s})}for(var g,b=(0,A.A)(e.attributes);!(g=b()).done;){var y=g.value;i.has(y.name)||r.push({arrayStride:(0,I.yx)("float32x3").byteLength,stepMode:y.stepMode||(y.name.startsWith("instance")?"instance":"vertex"),attributes:[{format:k("float32x3"),offset:0,shaderLocation:y.location}]})}return r}function W(e,t,n){var r=e.attributes.find((function(e){return e.name===t}));if(!r)return h.R.warn("Supplied attribute not present in shader layout: "+t)(),null;if(n.has(t))throw new Error("Found multiple entries for attribute: "+t);return n.add(t),r}z=Symbol.toStringTag;var j,U=function(e){function t(t,n){var r;if((r=e.call(this,t,n)||this).fs=null,r._bindGroupLayout=null,r._bindGroup=null,r.device=t,r.handle=r.props.handle,!r.handle){var i=r._getRenderPipelineDescriptor();h.R.groupCollapsed(1,"new WebGPURenderPipeline("+r.id+")")(),h.R.probe(1,JSON.stringify(i,null,2))(),h.R.groupEnd(1)(),r.device.handle.pushErrorScope("validation"),r.handle=r.device.handle.createRenderPipeline(i),r.device.handle.popErrorScope().then((function(e){var t;e&&h.R.error((0,o.A)(r)+' creation failed:\n"'+e.message+'"',(0,o.A)(r),null==(t=r.props.vs)?void 0:t.source)()}))}return r.handle.label=r.props.id,r.vs=n.vs,r.fs=n.fs,r._bindings=Object.assign({},r.props.bindings),r}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){this.handle=null},n.setBindings=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=n[t],i=r[0],a=r[1];this._bindings[i]!==a&&(this._bindGroup=null)}Object.assign(this._bindings,e)},n.draw=function(e){var t=this,n=e.renderPass;this.device.handle.pushErrorScope("validation"),n.handle.setPipeline(this.handle),this.device.handle.popErrorScope().then((function(e){e&&h.R.error(t+' setPipeline failed:\n"'+e.message+'"',t)()}));var r=this._getBindGroup();return r&&n.handle.setBindGroup(0,r),e.vertexArray.bindBeforeRender(e.renderPass),e.indexCount?n.handle.drawIndexed(e.indexCount,e.instanceCount,e.firstIndex,e.baseVertex,e.firstInstance):n.handle.draw(e.vertexCount||0,e.instanceCount||1,e.firstInstance),e.vertexArray.unbindAfterRender(e.renderPass),!0},n._getBindGroup=function(){return 0===this.shaderLayout.bindings.length?null:(this._bindGroupLayout=this._bindGroupLayout||this.handle.getBindGroupLayout(0),this._bindGroup=this._bindGroup||_(this.device.handle,this._bindGroupLayout,this.shaderLayout,this._bindings),this._bindGroup)},n._getRenderPipelineDescriptor=function(){var e={module:this.props.vs.handle,entryPoint:this.props.vertexEntryPoint||"main",buffers:G(this.shaderLayout,this.props.bufferLayout)},t=[];if(this.props.colorAttachmentFormats)for(var n,r=(0,A.A)(this.props.colorAttachmentFormats);!(n=r()).done;){var i=n.value;t.push(i?{format:p(i)}:null)}else t.push({format:p(this.device.preferredColorFormat)});var a={vertex:e,fragment:{module:this.props.fs.handle,entryPoint:this.props.fragmentEntryPoint||"main",targets:t},primitive:{topology:this.props.topology},layout:"auto"},o=this.props.depthStencilAttachmentFormat||this.device.preferredDepthFormat;return this.props.parameters.depthWriteEnabled&&(a.depthStencil={format:p(o)}),O(a,this.props.parameters),a},(0,a.A)(t,[{key:z,get:function(){return"WebGPURenderPipeline"}}]),t}(P.r),H=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).colorAttachments=[],r.depthStencilAttachment=null,r.device=t,r.autoCreateAttachmentTextures(),r}return(0,s.A)(t,e),t.prototype.updateAttachments=function(){},t}(n(9871).G),N=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this)._bindGroupLayout=null,r._bindGroup=null,r._bindings={},r.device=t;var i=r.props.shader;return r.handle=r.props.handle||r.device.handle.createComputePipeline({label:r.props.id,compute:{module:i.handle,entryPoint:r.props.entryPoint,constants:r.props.constants},layout:"auto"}),r}(0,s.A)(t,e);var n=t.prototype;return n.setBindings=function(e){Object.assign(this._bindings,e)},n._getBindGroup=function(){return this._bindGroupLayout=this._bindGroupLayout||this.handle.getBindGroupLayout(0),this._bindGroup=this._bindGroup||_(this.device.handle,this._bindGroupLayout,this.shaderLayout,this._bindings),this._bindGroup},t}(n(5128).C),V=n(7896),Q=n(7651);j=Symbol.toStringTag;var q,Y=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handle=null,r.device=t,r}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){},n.setIndexBuffer=function(e){this.indexBuffer=e},n.setBuffer=function(e,t){this.attributes[e]=t},n.bindBeforeRender=function(e,t,n){var r=e,i=this.indexBuffer;null!=i&&i.handle&&(h.R.info(3,"setting index buffer",null==i?void 0:i.handle,null==i?void 0:i.indexType)(),r.handle.setIndexBuffer(null==i?void 0:i.handle,null==i?void 0:i.indexType));for(var a=0;a<this.maxVertexAttributes;a++){var o=this.attributes[a];null!=o&&o.handle&&(h.R.info(3,"setting vertex buffer "+a,null==o?void 0:o.handle)(),r.handle.setVertexBuffer(a,null==o?void 0:o.handle))}},n.unbindAfterRender=function(e){},t.isConstantAttributeZeroSupported=function(e){return"Chrome"===(0,Q.X)()},(0,a.A)(t,[{key:j,get:function(){return"WebGPUVertexArray"}}]),t}(V.o),X=n(6555);q=Symbol.toStringTag;var J,Z=function(e){function t(t,n,r){var i;(i=e.call(this,r)||this).depthStencilAttachment=null;var a=i.canvas.getContext("webgpu");if(!a)throw new Error((0,o.A)(i)+": Failed to create WebGPU canvas context");return i.device=t,i.handle=a,i._setAutoCreatedCanvasId(i.device.id+"-canvas"),i._updateDevice(),i}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){this.handle.unconfigure()},n.getCurrentFramebuffer=function(e){var t;void 0===e&&(e={depthStencilFormat:"depth24plus"});var n,r=this.getCurrentTexture();if(r.width!==this.drawingBufferWidth||r.height!==this.drawingBufferHeight){var i=this.getDrawingBufferSize(),a=i[0],o=i[1];this.drawingBufferWidth=r.width,this.drawingBufferHeight=r.height,h.R.log(1,this+": Resized to compensate for initial canvas size mismatch "+a+"x"+o+" => "+this.drawingBufferWidth+"x"+this.drawingBufferHeight+"px")()}null!=(t=e)&&t.depthStencilFormat&&this._createDepthStencilAttachment(null==(n=e)?void 0:n.depthStencilFormat);return new H(this.device,{colorAttachments:[r],depthStencilAttachment:this.depthStencilAttachment})},n._updateDevice=function(){this.depthStencilAttachment&&(this.depthStencilAttachment.destroy(),this.depthStencilAttachment=null),this.handle.configure({device:this.device.handle,format:this.device.preferredColorFormat,colorSpace:this.props.colorSpace,alphaMode:this.props.alphaMode})},n.getCurrentTexture=function(){var e=this.handle.getCurrentTexture();return this.device.createTexture({id:this.id+"#color-texture",handle:e,format:this.device.preferredColorFormat,width:e.width,height:e.height})},n._createDepthStencilAttachment=function(e){return this.depthStencilAttachment||(this.depthStencilAttachment=this.device.createTexture({id:this.id+"#depth-stencil-texture",usage:d.g.RENDER_ATTACHMENT,format:e,width:this.drawingBufferWidth,height:this.drawingBufferHeight})),this.depthStencilAttachment},(0,a.A)(t,[{key:q,get:function(){return"WebGPUCanvasContext"}}]),t}(X.Q),K=n(7608),$=function(e){function t(t,n){var r;return(r=e.call(this,t.device,{})||this).device=t.device,r.handle=r.props.handle||t.handle.finish({label:(null==n?void 0:n.id)||"unnamed-command-buffer"}),r}return(0,s.A)(t,e),t}(n(2920).M),ee=n(6730),te=function(e){function t(t,n){var r;void 0===n&&(n={}),(r=e.call(this,t,n)||this).pipeline=null,r.device=t;var i=n.framebuffer||t.getCanvasContext().getCurrentFramebuffer(),a=r.getRenderPassDescriptor(i),s=n.timestampQuerySet;if(s&&(a.occlusionQuerySet=s.handle),t.features.has("timestamp-query")){var u=n.timestampQuerySet;a.timestampWrites=u?{querySet:u.handle,beginningOfPassWriteIndex:n.beginTimestampIndex,endOfPassWriteIndex:n.endTimestampIndex}:void 0}if(!t.commandEncoder)throw new Error("commandEncoder not available");return r.device.handle.pushErrorScope("validation"),r.handle=r.props.handle||t.commandEncoder.handle.beginRenderPass(a),r.device.handle.popErrorScope().then((function(e){e&&h.R.error((0,o.A)(r)+' creation failed:\n"'+e.message+'"',(0,o.A)(r))()})),r.handle.label=r.props.id,h.R.groupCollapsed(3,"new WebGPURenderPass("+r.id+")")(),h.R.probe(3,JSON.stringify(a,null,2))(),h.R.groupEnd(3)(),r}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){},n.end=function(){this.handle.end()},n.setPipeline=function(e){this.pipeline=e,this.handle.setPipeline(this.pipeline.handle)},n.setBindings=function(e){var t,n;null==(t=this.pipeline)||t.setBindings(e);var r=null==(n=this.pipeline)?void 0:n._getBindGroup();r&&this.handle.setBindGroup(0,r)},n.setIndexBuffer=function(e,t,n,r){void 0===n&&(n=0),this.handle.setIndexBuffer(e.handle,t,n,r)},n.setVertexBuffer=function(e,t,n){void 0===n&&(n=0),this.handle.setVertexBuffer(e,t.handle,n)},n.draw=function(e){e.indexCount?this.handle.drawIndexed(e.indexCount,e.instanceCount,e.firstIndex,e.baseVertex,e.firstInstance):this.handle.draw(e.vertexCount||0,e.instanceCount||1,e.firstIndex,e.firstInstance)},n.drawIndirect=function(){},n.setParameters=function(e){var t=e.blendConstant,n=e.stencilReference,r=e.scissorRect,i=e.viewport;t&&this.handle.setBlendConstant(t),n&&this.handle.setStencilReference(n),r&&this.handle.setScissorRect(r[0],r[1],r[2],r[3]),i&&this.handle.setViewport(i[0],i[1],i[2],i[3],i[4],i[5])},n.pushDebugGroup=function(e){this.handle.pushDebugGroup(e)},n.popDebugGroup=function(){this.handle.popDebugGroup()},n.insertDebugMarker=function(e){this.handle.insertDebugMarker(e)},n.beginOcclusionQuery=function(e){this.handle.beginOcclusionQuery(e)},n.endOcclusionQuery=function(){this.handle.endOcclusionQuery()},n.getRenderPassDescriptor=function(e){var t=this,n={colorAttachments:[]};if(n.colorAttachments=e.colorAttachments.map((function(e,n){var r;return{loadOp:!1!==t.props.clearColor?"clear":"load",colorClearValue:(null==(r=t.props.clearColors)?void 0:r[n])||t.props.clearColor||ee.A.defaultClearColor,storeOp:t.props.discard?"discard":"store",view:e.handle}})),e.depthStencilAttachment){n.depthStencilAttachment={view:e.depthStencilAttachment.handle};var r=n.depthStencilAttachment;this.props.depthReadOnly&&(r.depthReadOnly=!0),!1!==this.props.clearDepth&&(r.depthClearValue=this.props.clearDepth);r.depthLoadOp=!1!==this.props.clearDepth?"clear":"load",r.depthStoreOp="store";!1}return n},t}(ee.A);J=Symbol.toStringTag;var ne=function(e){function t(n,r){return e.call(this,n,r,t.defaultProps)||this}return(0,s.A)(t,e),(0,a.A)(t,[{key:J,get:function(){return"ComputePass"}}]),t}(y.F);ne.defaultProps=Object.assign({},y.F.defaultProps,{timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});var re=function(e){function t(t,n){var r,i;if((r=e.call(this,t,n)||this)._webgpuPipeline=null,r.device=t,t.features.has("timestamp-query")){var a=n.timestampQuerySet;a&&(i={querySet:a.handle,beginningOfPassWriteIndex:n.beginTimestampIndex,endOfPassWriteIndex:n.endTimestampIndex})}return r.handle=r.props.handle||t.commandEncoder.handle.beginComputePass({label:r.props.id,timestampWrites:i}),r}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){},n.end=function(){this.handle.end()},n.setPipeline=function(e){var t=e;this.handle.setPipeline(t.handle),this._webgpuPipeline=t,this.setBindings([])},n.setBindings=function(e){var t=this._webgpuPipeline._getBindGroup();this.handle.setBindGroup(0,t)},n.dispatch=function(e,t,n){this.handle.dispatchWorkgroups(e,t,n)},n.dispatchIndirect=function(e,t){void 0===t&&(t=0);var n=e;this.handle.dispatchWorkgroupsIndirect(n.handle,t)},n.pushDebugGroup=function(e){this.handle.pushDebugGroup(e)},n.popDebugGroup=function(){this.handle.popDebugGroup()},n.insertDebugMarker=function(e){this.handle.insertDebugMarker(e)},t}(ne),ie=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).device=t,r.handle=n.handle||r.device.handle.createCommandEncoder({label:r.props.id}),r.handle.label=r.props.id,r}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){},n.finish=function(e){return new $(this,{id:(null==e?void 0:e.id)||"unnamed-command-buffer"})},n.beginRenderPass=function(e){return new te(this.device,e)},n.beginComputePass=function(e){return new re(this.device,e)},n.copyBufferToBuffer=function(e){var t,n,r,i=e.sourceBuffer,a=e.destinationBuffer;this.handle.copyBufferToBuffer(i.handle,null!=(t=e.sourceOffset)?t:0,a.handle,null!=(n=e.destinationOffset)?n:0,null!=(r=e.size)?r:0)},n.copyBufferToTexture=function(e){var t,n,r,i,a,o,s=e.sourceBuffer,u=e.destinationTexture;this.handle.copyBufferToTexture({buffer:s.handle,offset:null!=(t=e.offset)?t:0,bytesPerRow:e.bytesPerRow,rowsPerImage:e.rowsPerImage},{texture:u.handle,mipLevel:null!=(n=e.mipLevel)?n:0,origin:null!=(r=e.origin)?r:{}},{width:null==(i=e.extent)?void 0:i[0],height:null==(a=e.extent)?void 0:a[1],depthOrArrayLayers:null==(o=e.extent)?void 0:o[2]})},n.copyTextureToBuffer=function(e){},n.copyTextureToTexture=function(e){},n.pushDebugGroup=function(e){this.handle.pushDebugGroup(e)},n.popDebugGroup=function(){this.handle.popDebugGroup()},n.insertDebugMarker=function(e){this.handle.insertDebugMarker(e)},n.resolveQuerySet=function(e,t,n){var r=e,i=t;this.handle.resolveQuerySet(r.handle,(null==n?void 0:n.firstQuery)||0,(null==n?void 0:n.queryCount)||e.props.count-((null==n?void 0:n.firstQuery)||0),i.handle,(null==n?void 0:n.destinationOffset)||0)},t}(K.i),ae=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).device=t,r.handle=r.props.handle||r.device.handle.createQuerySet({type:r.props.type,count:r.props.count}),r.handle.label=r.props.id,r}return(0,s.A)(t,e),t.prototype.destroy=function(){var e;null==(e=this.handle)||e.destroy(),this.handle=null},t}(n(6273).d),oe=function(e){function t(t,n,a,s){var u;if((u=e.call(this,Object.assign({},t,{id:t.id||"webgpu-device"}))||this).type="webgpu",u.preferredColorFormat=navigator.gpu.getPreferredCanvasFormat(),u.preferredDepthFormat="depth24plus",u.canvasContext=null,u._isLost=!1,u.handle=n,u.adapter=a,u.adapterInfo=s,u.info=u._getInfo(),u.features=u._getFeatures(),u.limits=u.handle.limits,n.addEventListener("uncapturederror",(function(e){e.preventDefault();var t=e instanceof GPUUncapturedErrorEvent?e.error.message:"Unknown WebGPU error";u.reportError(new Error(t)),u.props.debug})),u.lost=new Promise(function(){var e=(0,i.A)((0,r.A)().mark((function e(t){var n;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.handle.lost;case 2:n=e.sent,u._isLost=!0,t({reason:"destroyed",message:n.message});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.createCanvasContext){var c=!0===t.createCanvasContext?{}:t.createCanvasContext;u.canvasContext=new Z((0,o.A)(u),u.adapter,c)}return u.commandEncoder=u.createCommandEncoder({}),u}(0,s.A)(t,e);var n=t.prototype;return n.destroy=function(){this.handle.destroy()},n.createBuffer=function(e){var t=this._normalizeBufferProps(e);return new l(this,t)},n.createTexture=function(e){return new b(this,e)},n.createExternalTexture=function(e){return new w(this,e)},n.createShader=function(e){return new S(this,e)},n.createSampler=function(e){return new v(this,e)},n.createRenderPipeline=function(e){return new U(this,e)},n.createFramebuffer=function(e){return new H(this,e)},n.createComputePipeline=function(e){return new N(this,e)},n.createVertexArray=function(e){return new Y(this,e)},n.createCommandEncoder=function(e){return new ie(this,e)},n.createTransformFeedback=function(e){throw new Error("Transform feedback not supported in WebGPU")},n.createQuerySet=function(e){return new ae(this,e)},n.createCanvasContext=function(e){return new Z(this,this.adapter,e)},n.submit=function(e){var t=this;e||(e=this.commandEncoder.finish(),this.commandEncoder.destroy(),this.commandEncoder=this.createCommandEncoder({id:this.id+"-default-encoder"})),this.handle.pushErrorScope("validation"),this.handle.queue.submit([e.handle]),this.handle.popErrorScope().then((function(e){e&&t.reportError(new Error("WebGPU command submission failed: "+e.message))}))},n.pushErrorScope=function(e){this.handle.pushErrorScope(e)},n.popErrorScope=function(e){this.handle.popErrorScope().then((function(t){t&&e(t.message)}))},n._getInfo=function(){var e=(this.adapterInfo.driver||"").split(" Version "),t=e[0],n=e[1],r=this.adapterInfo.vendor||this.adapter.__brand||"unknown",i=t||"",a=n||"",o="apple"===r?"apple":"unknown",s=this.adapterInfo.architecture||"unknown",u=this.adapterInfo.backend||"unknown";return{type:"webgpu",vendor:r,renderer:i,version:a,gpu:o,gpuType:(this.adapterInfo.type||"").split(" ")[0].toLowerCase()||"unknown",gpuBackend:u,gpuArchitecture:s,shadingLanguage:"wgsl",shadingLanguageVersion:100}},n._getFeatures=function(){var e=new Set(this.handle.features);e.has("depth-clamping")&&(e.delete("depth-clamping"),e.add("depth-clip-control")),e.has("texture-compression-bc")&&e.add("texture-compression-bc5-webgl");for(var t=0,n=["timer-query-webgl","compilation-status-async-webgl","float32-renderable-webgl","float16-renderable-webgl","norm16-renderable-webgl","texture-filterable-anisotropic-webgl","shader-noperspective-interpolation-webgl"];t<n.length;t++){var r=n[t];e.add(r)}return new u.I7(Array.from(e),this.props._disabledFeatures)},n._getDeviceSpecificTextureFormatCapabilities=function(e){var t=e.format;return t.includes("webgl")?{format:t,create:!1,render:!1,filter:!1,blend:!1,store:!1}:e},(0,a.A)(t,[{key:"isLost",get:function(){return this._isLost}}]),t}(u.pF)},7651:(e,t,n)=>{n.d(t,{X:()=>o});var r=n(6769),i=n(5399),a=n(5526);function o(e){if(!e&&!(0,r.B)())return"Node";if((0,i.b)(e))return"Electron";return(e||a.gM.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown"}},9417:(e,t,n)=>{function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{A:()=>r})}}]);